<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="stay hungry,stay foolish"><meta name=author content=hujainli94><link href=https://hujianli94.github.io/Python/2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-Django-web%E5%BC%80%E5%8F%91/ rel=canonical><link href=../%E9%99%84-CMDB/ rel=prev><link href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/1.Python2%E4%B8%8EPython3%E5%8C%BA%E5%88%AB/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.3"><title>附-Django-web开发 - DevOps运维开发</title><link rel=stylesheet href=../../../assets/stylesheets/main.50c56a3b.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../stylesheets/extra.css><link rel=stylesheet href=https://file.cdn.shafish.cn/blog/css/vssue.css><link rel=stylesheet href=https://file.cdn.shafish.cn/blog/css/video-js.min.css><link rel=stylesheet href=https://file.cdn.shafish.cn/blog/css/video.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","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"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","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",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=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",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#附-django-web开发 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../.. title=DevOps运维开发 class="md-header__button md-logo" aria-label=DevOps运维开发 data-md-component=logo> <img src=../../../assets/images/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> DevOps运维开发 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 附-Django-web开发 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label=切换至深色模式 type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title=切换至深色模式 for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=blue aria-label=切换至浅色模式 type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title=切换至浅色模式 for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hujianli94/hujianli94.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> hujianli94.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> 首页 </a> </li> <li class=md-tabs__item> <a href=../../../k8s/1.%E5%AE%B9%E5%99%A8%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/1.1%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E7%9A%84%E5%8F%91%E5%B1%95/ class=md-tabs__link> k8s </a> </li> <li class=md-tabs__item> <a href=../../../Kubernetes/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Kubernetes/ class=md-tabs__link> Kubernetes </a> </li> <li class=md-tabs__item> <a href=../../../Docker/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Docker/ class=md-tabs__link> Docker </a> </li> <li class=md-tabs__item> <a href=../../../Golang/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Go-Web%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/ class=md-tabs__link> Golang </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Pythjon-auto-ops/ class=md-tabs__link> Python </a> </li> <li class=md-tabs__item> <a href=../../../Python-vs-Go/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Python-vs-Go/ class=md-tabs__link> Python-vs-Go </a> </li> <li class=md-tabs__item> <a href=../../../Linux/Shell/Shell%E7%AE%80%E4%BB%8B/ class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../../Other/tools/1.PicGo%E5%9B%BE%E5%BA%8A/ class=md-tabs__link> Other </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=DevOps运维开发 class="md-nav__button md-logo" aria-label=DevOps运维开发 data-md-component=logo> <img src=../../../assets/images/logo.png alt=logo> </a> DevOps运维开发 </label> <div class=md-nav__source> <a href=https://github.com/hujianli94/hujianli94.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> hujianli94.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> 首页 </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> k8s </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> k8s </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> 1.容器的发展史 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> 1.容器的发展史 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/1.%E5%AE%B9%E5%99%A8%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/1.1%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E7%9A%84%E5%8F%91%E5%B1%95/ class=md-nav__link> <span class=md-ellipsis> 1.1开发过程的发展 </span> </a> </li> <li class=md-nav__item> <a href=../../../k8s/1.%E5%AE%B9%E5%99%A8%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/1.2%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8F%91%E5%B1%95/ class=md-nav__link> <span class=md-ellipsis> 1.2应用架构的发展 </span> </a> </li> <li class=md-nav__item> <a href=../../../k8s/1.%E5%AE%B9%E5%99%A8%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/1.3%E9%83%A8%E7%BD%B2%E6%89%93%E5%8C%85%E7%9A%84%E5%8F%91%E5%B1%95/ class=md-nav__link> <span class=md-ellipsis> 1.3部署打包的发展 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> 2,Kubernetes的核心概念 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 2,Kubernetes的核心概念 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/2%2CKubernetes%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/2.1Kubernetes%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%9E%B6%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> 2.1Kubernetes的设计架构 </span> </a> </li> <li class=md-nav__item> <a href=../../../k8s/2%2CKubernetes%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/2.2Kubernetes%E7%9A%84%E6%A0%B8%E5%BF%83%E5%AF%B9%E8%B1%A1/ class=md-nav__link> <span class=md-ellipsis> 2.2Kubernetes的核心对象 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> 3.Kubernetes的安装和部署 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 3.Kubernetes的安装和部署 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/3.Kubernetes%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%83%A8%E7%BD%B2/3.1kubeadm%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83kubernetes%E9%9B%86%E7%BE%A4/ class=md-nav__link> <span class=md-ellipsis> 3.1kubeadm搭建开发环境kubernetes集群 </span> </a> </li> <li class=md-nav__item> <a href=../../../k8s/3.Kubernetes%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%83%A8%E7%BD%B2/3.2kubeadm%E6%90%AD%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8%E7%9A%84%E7%94%9F%E4%BA%A7k8s%E9%9B%86%E7%BE%A4/ class=md-nav__link> <span class=md-ellipsis> 3.2kubeadm搭建高可用的生产k8s集群 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> 4.Pod </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 4.Pod </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/4.Pod/4.1Pod%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/ class=md-nav__link> <span class=md-ellipsis> 4.1Pod的基本操作 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Kubernetes </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Kubernetes/ class=md-nav__link> <span class=md-ellipsis> Kubernetes </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> 1.安装篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> 1.安装篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/1.Kubeadm%E5%AE%89%E8%A3%85%E9%AB%98%E5%8F%AF%E7%94%A8K8s%E9%9B%86%E7%BE%A4/ class=md-nav__link> <span class=md-ellipsis> Kubeadm安装高可用集群 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/2.%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85%E9%AB%98%E5%8F%AF%E7%94%A8K8s%E9%9B%86%E7%BE%A4/ class=md-nav__link> <span class=md-ellipsis> 二进制安装高可用K8s集群 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/3.%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 安装常用工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/4.Kubeadm%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> Kubeadm安装开发环境 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/5.K3s%E5%92%8CMinikube/ class=md-nav__link> <span class=md-ellipsis> K3s和Minikube </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> 2.基础篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> 2.基础篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/3.Docker%E5%9F%BA%E7%A1%80/ class=md-nav__link> <span class=md-ellipsis> Docker基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/4.Kubernetes%E7%9A%84%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/ class=md-nav__link> <span class=md-ellipsis> Kubernetes的基础概念 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/5.Kubernetes%E8%B0%83%E5%BA%A6%E5%9F%BA%E7%A1%80/ class=md-nav__link> <span class=md-ellipsis> Kubernetes调度基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/6.Kubernetes%E6%9C%8D%E5%8A%A1%E5%8F%91%E5%B8%83%E5%9F%BA%E7%A1%80/ class=md-nav__link> <span class=md-ellipsis> Kubernetes服务发布基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/7.Kubernetes%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> Kubernetes配置管理 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> 3.进阶篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> 3.进阶篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/3.%E8%BF%9B%E9%98%B6%E7%AF%87/8.Kubernetes%E5%AD%98%E5%82%A8%E5%85%A5%E9%97%A8/ class=md-nav__link> <span class=md-ellipsis> Kubernetes存储入门 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/3.%E8%BF%9B%E9%98%B6%E7%AF%87/9.Kubernetes%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6/ class=md-nav__link> <span class=md-ellipsis> Kubernetes高级调度 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> 4.高级篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> 4.高级篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/4.%E9%AB%98%E7%BA%A7%E7%AF%87/12.%E4%BA%91%E5%8E%9F%E7%94%9F%E5%AD%98%E5%82%A8Rook/ class=md-nav__link> <span class=md-ellipsis> 云原生存储Rook </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/4.%E9%AB%98%E7%BA%A7%E7%AF%87/13.%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%AE%B9%E5%99%A8%E5%8C%96/ class=md-nav__link> <span class=md-ellipsis> 中间件容器化 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> 5.运维篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> 5.运维篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/5.%E8%BF%90%E7%BB%B4%E7%AF%87/14.Kubernetes%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/ class=md-nav__link> <span class=md-ellipsis> Kubernetes日志收集 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/5.%E8%BF%90%E7%BB%B4%E7%AF%87/15.Kubernetes%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/ class=md-nav__link> <span class=md-ellipsis> Kubernetes监控告警 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/5.%E8%BF%90%E7%BB%B4%E7%AF%87/16.%E6%9C%8D%E5%8A%A1%E5%8F%91%E5%B8%83Ingress%E8%BF%9B%E9%98%B6/ class=md-nav__link> <span class=md-ellipsis> 服务发布Ingress进阶 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class=md-ellipsis> 6.DevOps篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> 6.DevOps篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/6.DevOps%E7%AF%87/17.DevOps%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> DevOps实践 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Docker </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Docker/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Docker/ class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> 1.基础 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> 1.基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/1.%E5%AE%89%E8%A3%85Docker/ class=md-nav__link> <span class=md-ellipsis> 1.安装Docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/2.Docker%E9%95%9C%E5%83%8F/ class=md-nav__link> <span class=md-ellipsis> 2.Docker镜像 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/3.Docker%E5%AE%B9%E5%99%A8/ class=md-nav__link> <span class=md-ellipsis> 3.Docker容器 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/4.%E4%BC%81%E4%B8%9A%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93harbor/ class=md-nav__link> <span class=md-ellipsis> 4.企业私有仓库harbor </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/5.Docker%E6%95%B0%E6%8D%AE/ class=md-nav__link> <span class=md-ellipsis> 5.Docker数据 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/6.Docker%E7%BD%91%E7%BB%9C/ class=md-nav__link> <span class=md-ellipsis> 6.Docker网络 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/7.Dockerfile/ class=md-nav__link> <span class=md-ellipsis> 7.Dockerfile </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/8.docker-compose/ class=md-nav__link> <span class=md-ellipsis> 8.docker-compose </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/9.Docker%E7%9B%B8%E5%85%B3%E8%84%9A%E6%9C%AC/ class=md-nav__link> <span class=md-ellipsis> 9.Docker相关脚本 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/10.Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 10.Docker常用命令 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> 2.实战案例 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> 2.实战案例 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Docker/2.%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ class=md-nav__link> <span class=md-ellipsis> 1.操作系统 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/2.%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B/2.Web%E6%9C%8D%E5%8A%A1%E4%B8%8E%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 2.Web服务与应用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/2.%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B/3.%E6%8C%81%E7%BB%AD%E5%BC%80%E5%8F%91%E4%B8%8E%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 3.持续开发与管理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/2.%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B/4.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 4.数据库应用 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> 3.Devops </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> 3.Devops </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Docker/3.Devops/1.confcenter-docker/ class=md-nav__link> <span class=md-ellipsis> 1.confcenter-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/2.simaple-jenkins/ class=md-nav__link> <span class=md-ellipsis> 2.simaple-jenkins </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/3.docker-nginx-spa/ class=md-nav__link> <span class=md-ellipsis> 3.docker-nginx-spa </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/4.fileserver-docker/ class=md-nav__link> <span class=md-ellipsis> 4.fileserver-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/5.haproxy-docker/ class=md-nav__link> <span class=md-ellipsis> 5.haproxy-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/6.mysql-docker/ class=md-nav__link> <span class=md-ellipsis> 6.mysql-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/7.frp-docker/ class=md-nav__link> <span class=md-ellipsis> 7.frp-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/8.coredns-docker/ class=md-nav__link> <span class=md-ellipsis> 8.coredns-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/9.simple-harbor/ class=md-nav__link> <span class=md-ellipsis> 9.simple-harbor </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/10.redis-docker/ class=md-nav__link> <span class=md-ellipsis> 10.redis-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/11.nexus3-docker/ class=md-nav__link> <span class=md-ellipsis> 11.nexus3-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/12.openvpn-docker/ class=md-nav__link> <span class=md-ellipsis> 12.openvpn-docker.md </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/13.nfs-docker/ class=md-nav__link> <span class=md-ellipsis> 13.nfs-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/14.jumpserver-docker/ class=md-nav__link> <span class=md-ellipsis> 14.jumpserver-docker.md </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/15.ansible-docker/ class=md-nav__link> <span class=md-ellipsis> 15.ansible-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/16.minio-docker/ class=md-nav__link> <span class=md-ellipsis> 16.minio-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/17.vaultwarden-docker/ class=md-nav__link> <span class=md-ellipsis> 17.vaultwarden-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/18.kasm-docker/ class=md-nav__link> <span class=md-ellipsis> 18.kasm-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/19.nginx-docker/ class=md-nav__link> <span class=md-ellipsis> 19.nginx-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/20.kafka-docker/ class=md-nav__link> <span class=md-ellipsis> 20.kafka-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/21.golang-docker/ class=md-nav__link> <span class=md-ellipsis> 21.golang-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/22.postgres-docker/ class=md-nav__link> <span class=md-ellipsis> 22.postgres-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/23.nginx-download-docker/ class=md-nav__link> <span class=md-ellipsis> 23.nginx-download-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/24.helm%E9%83%A8%E7%BD%B2%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1/ class=md-nav__link> <span class=md-ellipsis> 24.helm部署常用服务 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/25.Python%E6%93%8D%E4%BD%9CDocker/ class=md-nav__link> <span class=md-ellipsis> 25.Python操作Docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/26.docker-compose-devops/ class=md-nav__link> <span class=md-ellipsis> 26.docker-compose-devops </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/27.DevOps%E4%B8%8B%E7%9A%84Shell%E8%84%9A%E6%9C%AC/ class=md-nav__link> <span class=md-ellipsis> 27.DevOps下的Shell脚本 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/28.Devops%E4%B8%8B%E7%9A%84Python%E8%84%9A%E6%9C%AC/ class=md-nav__link> <span class=md-ellipsis> 28.Devops下的Python脚本 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/29.Vagrant%E8%99%9A%E6%8B%9F%E6%9C%BA/ class=md-nav__link> <span class=md-ellipsis> 29.Vagrant虚拟机 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/30.VMware-workstation/ class=md-nav__link> <span class=md-ellipsis> 30.VMware Workstation </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/31.VirtualBox/ class=md-nav__link> <span class=md-ellipsis> 31.VirtualBox </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Golang </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1> <label class=md-nav__link for=__nav_5_1 id=__nav_5_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Go-Web%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> Go Web开发实战 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> 1.Go基础 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> 1.Go基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/1.Go%E5%9F%BA%E7%A1%80/1.%E5%AE%89%E8%A3%85Go/ class=md-nav__link> <span class=md-ellipsis> 安装Go </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/1.Go%E5%9F%BA%E7%A1%80/2.%E7%AC%AC%E4%B8%80%E4%B8%AAGo%E7%A8%8B%E5%BA%8F/ class=md-nav__link> <span class=md-ellipsis> 第一个Go程序 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/1.Go%E5%9F%BA%E7%A1%80/3.Go%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> Go基础语法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/1.Go%E5%9F%BA%E7%A1%80/4.Go-Module/ class=md-nav__link> <span class=md-ellipsis> Go Module </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> 2.Go-Web基础 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> 2.Go-Web基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/2.Go-Web%E5%9F%BA%E7%A1%80/5.%E7%AC%AC%E4%B8%80%E4%B8%AAGo-Web%E7%A8%8B%E5%BA%8F/ class=md-nav__link> <span class=md-ellipsis> 第一个Go Web程序 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/2.Go-Web%E5%9F%BA%E7%A1%80/6.Web%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> Web程序运行原理简介 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/2.Go-Web%E5%9F%BA%E7%A1%80/7.net-http%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> net/http包 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/2.Go-Web%E5%9F%BA%E7%A1%80/8.html-template%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> html/template包 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> 3.Go-Web请求处理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> 3.Go-Web请求处理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/3.Go-Web%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86/9.%E7%AE%80%E5%8D%95Web%E6%9C%8D%E5%8A%A1%E5%99%A8/ class=md-nav__link> <span class=md-ellipsis> 简单Web服务器 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/3.Go-Web%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86/10.%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82/ class=md-nav__link> <span class=md-ellipsis> 处理请求 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/3.Go-Web%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86/11.session%E5%92%8Ccookie/ class=md-nav__link> <span class=md-ellipsis> session和cookie </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> 4.Go访问数据库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> 4.Go访问数据库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/12.Go%E6%93%8D%E4%BD%9CMySQL/ class=md-nav__link> <span class=md-ellipsis> Go操作MySQL </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/13.Go%E6%93%8D%E4%BD%9CRedis/ class=md-nav__link> <span class=md-ellipsis> Go操作Redis </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/14.Go%E6%93%8D%E4%BD%9CMongoDB/ class=md-nav__link> <span class=md-ellipsis> Go操作MongoDB </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/15.Go%E7%9A%84%E5%B8%B8%E8%A7%81ORM%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> Go的常见ORM库 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/16.Go%E6%93%8D%E4%BD%9CSQLite/ class=md-nav__link> <span class=md-ellipsis> Go操作SQLite </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex=0> <span class=md-ellipsis> 5.Go高级网络编程 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> 5.Go高级网络编程 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/5.Go%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/17.Go-Socket%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> Go Socket编程 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/5.Go%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/18.Go-RPC%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> Go RPC编程 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/5.Go%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/19.Go-%E5%BE%AE%E6%9C%8D%E5%8A%A1/ class=md-nav__link> <span class=md-ellipsis> Go 微服务 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex=0> <span class=md-ellipsis> 6.Go文件处理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> 6.Go文件处理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/20.%E5%A4%84%E7%90%86%E7%9B%AE%E5%BD%95%E4%B8%8E%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理目录与文件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/21.%E5%A4%84%E7%90%86XML%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理XML文件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/22.%E5%A4%84%E7%90%86JSON%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理JSON文件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/23.%E5%A4%84%E7%90%86CSV%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理CSV文件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/24.%E5%A4%84%E7%90%86Go%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95/ class=md-nav__link> <span class=md-ellipsis> 处理Go日志记录 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/25.%E5%A4%84%E7%90%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 处理正则表达式 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/26.%E5%A4%84%E7%90%86Excel%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理Excel文件 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_8> <label class=md-nav__link for=__nav_5_8 id=__nav_5_8_label tabindex=0> <span class=md-ellipsis> 7.Go并发编程 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_8_label aria-expanded=false> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> 7.Go并发编程 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/26.%E5%B9%B6%E5%8F%91-%E5%B9%B6%E8%A1%8C/ class=md-nav__link> <span class=md-ellipsis> 并发 并行 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/27.%E8%BF%9B%E7%A8%8B-%E7%BA%BF%E7%A8%8B-%E5%8D%8F%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> 进程 线程 协程 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/28.Go%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%9E%8B/ class=md-nav__link> <span class=md-ellipsis> Go并发模型 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/29.goroutine%E5%92%8Cchannel/ class=md-nav__link> <span class=md-ellipsis> goroutine和channel </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/30.sync%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> sync实现并发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/31.Go%E5%B9%B6%E5%8F%91%E7%9A%84Web%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> Go并发的Web应用 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_9> <label class=md-nav__link for=__nav_5_9 id=__nav_5_9_label tabindex=0> <span class=md-ellipsis> 8.Go标准库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_9_label aria-expanded=false> <label class=md-nav__title for=__nav_5_9> <span class="md-nav__icon md-icon"></span> 8.Go标准库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/32.time/ class=md-nav__link> <span class=md-ellipsis> time </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/33.strings/ class=md-nav__link> <span class=md-ellipsis> strings </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/34.bytes/ class=md-nav__link> <span class=md-ellipsis> bytes </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/35.json/ class=md-nav__link> <span class=md-ellipsis> json </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/36.io-bufio/ class=md-nav__link> <span class=md-ellipsis> io/bufio </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/37.fmt/ class=md-nav__link> <span class=md-ellipsis> fmt </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/38.strconv/ class=md-nav__link> <span class=md-ellipsis> strconv </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/39.regexp/ class=md-nav__link> <span class=md-ellipsis> regexp </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/40.log/ class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/41.reflect-unsafe/ class=md-nav__link> <span class=md-ellipsis> reflect/unsafe </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/42.os-path-filepath/ class=md-nav__link> <span class=md-ellipsis> os/path/filepath </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/43.unicode/ class=md-nav__link> <span class=md-ellipsis> unicode </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/44.flag/ class=md-nav__link> <span class=md-ellipsis> flag </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/45.net-url/ class=md-nav__link> <span class=md-ellipsis> net/url </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/46.net-http/ class=md-nav__link> <span class=md-ellipsis> net/http </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/47.sort/ class=md-nav__link> <span class=md-ellipsis> sort </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/48.errors/ class=md-nav__link> <span class=md-ellipsis> errors </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_10> <label class=md-nav__link for=__nav_5_10 id=__nav_5_10_label tabindex=0> <span class=md-ellipsis> 9.Go三方库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_10_label aria-expanded=false> <label class=md-nav__title for=__nav_5_10> <span class="md-nav__icon md-icon"></span> 9.Go三方库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/0.%E5%BC%80%E6%BA%90%E8%87%AA%E5%B7%B1%E7%9A%84Go%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 开源自己的Go库 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/1.cobra/ class=md-nav__link> <span class=md-ellipsis> Cobra </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/2.viper/ class=md-nav__link> <span class=md-ellipsis> Viper </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/3.mahonia/ class=md-nav__link> <span class=md-ellipsis> mahonia </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/4.ssh/ class=md-nav__link> <span class=md-ellipsis> ssh </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/5.fsnotify/ class=md-nav__link> <span class=md-ellipsis> fsnotify </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/6.yaml/ class=md-nav__link> <span class=md-ellipsis> yaml </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/7.tail/ class=md-nav__link> <span class=md-ellipsis> tail </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/8.gopsutil/ class=md-nav__link> <span class=md-ellipsis> gopsutil </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/9.go-awesome/ class=md-nav__link> <span class=md-ellipsis> go-awesome </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_11> <label class=md-nav__link for=__nav_5_11 id=__nav_5_11_label tabindex=0> <span class=md-ellipsis> 10.Go-RESTful-API接口开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_11_label aria-expanded=false> <label class=md-nav__title for=__nav_5_11> <span class="md-nav__icon md-icon"></span> 10.Go-RESTful-API接口开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/1.%E4%BB%80%E4%B9%88%E6%98%AFRESTful-API/ class=md-nav__link> <span class=md-ellipsis> 1.什么是RESTful-API </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/2.GORMv2/ class=md-nav__link> <span class=md-ellipsis> 2.GORMv2 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/3.Gin%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 3.Gin框架的使用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/4.%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E5%89%8D%E7%AB%AF/ class=md-nav__link> <span class=md-ellipsis> 4.图书管理系统-前端 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/5.%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E5%90%8E%E7%AB%AF/ class=md-nav__link> <span class=md-ellipsis> 5.图书管理系统-后端 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_12> <label class=md-nav__link for=__nav_5_12 id=__nav_5_12_label tabindex=0> <span class=md-ellipsis> 11.Web前端 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_12_label aria-expanded=false> <label class=md-nav__title for=__nav_5_12> <span class="md-nav__icon md-icon"></span> 11.Web前端 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/11.Web%E5%89%8D%E7%AB%AF/1.HTML%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80/ class=md-nav__link> <span class=md-ellipsis> 1.HTML标记语言 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/11.Web%E5%89%8D%E7%AB%AF/2.CSS%E6%A0%B7%E5%BC%8F%E8%AF%AD%E8%A8%80/ class=md-nav__link> <span class=md-ellipsis> 2.CSS样式语言 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/11.Web%E5%89%8D%E7%AB%AF/3.JavaScript%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/ class=md-nav__link> <span class=md-ellipsis> 3.JavaScript客户端脚本语言 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/11.Web%E5%89%8D%E7%AB%AF/4.JavaScript%E5%BA%93-JQuery/ class=md-nav__link> <span class=md-ellipsis> 4.JavaScript库:JQuery </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_13> <label class=md-nav__link for=__nav_5_13 id=__nav_5_13_label tabindex=0> <span class=md-ellipsis> 12.Vue前端开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_13_label aria-expanded=false> <label class=md-nav__title for=__nav_5_13> <span class="md-nav__icon md-icon"></span> 12.Vue前端开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/1.%E8%AE%A4%E8%AF%86Vue.js/ class=md-nav__link> <span class=md-ellipsis> 1.认识Vue.js.md </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/2.Vue%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 2.Vue常用指令 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/3.Vue%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7/ class=md-nav__link> <span class=md-ellipsis> 3.Vue常用属性 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/4.Vue%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E4%B9%8B%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 4.Vue常用指令之流程控制 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/5.Vue%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A/ class=md-nav__link> <span class=md-ellipsis> 5.Vue常用指令之数据双向绑定 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/6.Vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90/ class=md-nav__link> <span class=md-ellipsis> 6.Vue生命周期钩子 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/7.VueCli%E8%84%9A%E6%89%8B%E6%9E%B6/ class=md-nav__link> <span class=md-ellipsis> 7.VueCli脚手架 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/8.Vue%E7%BB%84%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 8.Vue组件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/9.Vue%E8%B7%AF%E7%94%B1/ class=md-nav__link> <span class=md-ellipsis> 9.Vue路由 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/10.Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 10.Vuex状态管理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/11.%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92-Axios/ class=md-nav__link> <span class=md-ellipsis> 11.前后端数据交互 Axios </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/12.Element-Plus/ class=md-nav__link> <span class=md-ellipsis> 12.Element Plus </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_14> <label class=md-nav__link for=__nav_5_14 id=__nav_5_14_label tabindex=0> <span class=md-ellipsis> 13.K8s管理系统项目实战 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_14_label aria-expanded=false> <label class=md-nav__title for=__nav_5_14> <span class="md-nav__icon md-icon"></span> 13.K8s管理系统项目实战 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/13.K8s%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/1.K8s%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E5%90%8E%E7%AB%AFAPI%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> K8s管理系统-后端API开发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/13.K8s%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2.K8s%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> K8s管理系统-前端开发 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_1> <label class=md-nav__link for=__nav_6_1 id=__nav_6_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Pythjon-auto-ops/ class=md-nav__link> <span class=md-ellipsis> Python Linux管理与自动化运维 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class=md-ellipsis> 1.Python基础篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> 1.Python基础篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/1.Python%E7%94%9F%E6%80%81%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 1.Python生态工具 </span> </a> </li> <li class=md-nav__item> <a href=../../1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/2.Python%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> 2.Python第三方库安装 </span> </a> </li> <li class=md-nav__item> <a href=../../1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/3.Python%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 3.Python工作环境管理 </span> </a> </li> <li class=md-nav__item> <a href=../../1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/4.Python%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> 4.Python开发环境 </span> </a> </li> <li class=md-nav__item> <a href=../../1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/5.Python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> 5.Python数据结构 </span> </a> </li> <li class=md-nav__item> <a href=../../1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/6.Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> 6.Python项目的组织结构 </span> </a> </li> <li class=md-nav__item> <a href=../../1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/7.Python%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/ class=md-nav__link> <span class=md-ellipsis> 7.Python代码规范 </span> </a> </li> <li class=md-nav__item> <a href=../../1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/8.Python%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 8.Python内置函数 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3 checked> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class=md-ellipsis> 2.Python运维开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=true> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> 2.Python运维开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../1.%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 1.命令行工具 </span> </a> </li> <li class=md-nav__item> <a href=../2.%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 2.文本处理 </span> </a> </li> <li class=md-nav__item> <a href=../3.Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 3.Linux系统管理 </span> </a> </li> <li class=md-nav__item> <a href=../4.%E7%9B%91%E6%8E%A7Linux/ class=md-nav__link> <span class=md-ellipsis> 4.监控Linux </span> </a> </li> <li class=md-nav__item> <a href=../5.%E6%96%87%E6%A1%A3%E4%B8%8E%E6%8A%A5%E5%91%8A/ class=md-nav__link> <span class=md-ellipsis> 5.文档与报告 </span> </a> </li> <li class=md-nav__item> <a href=../6.%E7%BD%91%E7%BB%9C/ class=md-nav__link> <span class=md-ellipsis> 6.网络 </span> </a> </li> <li class=md-nav__item> <a href=../7.%E8%87%AA%E5%8A%A8%E5%8C%96%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 7.自动化管理 </span> </a> </li> <li class=md-nav__item> <a href=../8.%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/ class=md-nav__link> <span class=md-ellipsis> 8.常用模块 </span> </a> </li> <li class=md-nav__item> <a href=../9.Python%E6%89%93%E9%80%A0MySQL%E4%B8%93%E5%AE%B6%E7%B3%BB%E7%BB%9F/ class=md-nav__link> <span class=md-ellipsis> 9.Python打造MySQL专家系统 </span> </a> </li> <li class=md-nav__item> <a href=../10.%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 10.自动化运维系统的开发 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84-awesome-python-cn/ class=md-nav__link> <span class=md-ellipsis> 附-awesome-python-cn </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84-CMDB/ class=md-nav__link> <span class=md-ellipsis> 附-CMDB </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 附-Django-web开发 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 附-Django-web开发 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-mvcmtv class=md-nav__link> <span class=md-ellipsis> 1. MVC/MTV </span> </a> <nav class=md-nav aria-label="1. MVC/MTV"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11-mvc框架 class=md-nav__link> <span class=md-ellipsis> 1.1 MVC框架 </span> </a> </li> <li class=md-nav__item> <a href=#12-mtv框架 class=md-nav__link> <span class=md-ellipsis> 1.2 MTV框架 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-模型与数据库 class=md-nav__link> <span class=md-ellipsis> 2. 模型与数据库 </span> </a> <nav class=md-nav aria-label="2. 模型与数据库"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-django-配置mysql class=md-nav__link> <span class=md-ellipsis> 2.1 django-配置mysql </span> </a> </li> <li class=md-nav__item> <a href=#22-构建模型 class=md-nav__link> <span class=md-ellipsis> 2.2 构建模型 </span> </a> <nav class=md-nav aria-label="2.2 构建模型"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#表字段数据类型及说明 class=md-nav__link> <span class=md-ellipsis> 表字段数据类型及说明 </span> </a> </li> <li class=md-nav__item> <a href=#表字段参数及说明 class=md-nav__link> <span class=md-ellipsis> 表字段参数及说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#23-数据表的关系 class=md-nav__link> <span class=md-ellipsis> 2.3 数据表的关系 </span> </a> <nav class=md-nav aria-label="2.3 数据表的关系"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#一对一 class=md-nav__link> <span class=md-ellipsis> 一对一 </span> </a> <nav class=md-nav aria-label=一对一> <ul class=md-nav__list> <li class=md-nav__item> <a href=#如何建立关联 class=md-nav__link> <span class=md-ellipsis> 如何建立关联 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#一对多 class=md-nav__link> <span class=md-ellipsis> 一对多 </span> </a> <nav class=md-nav aria-label=一对多> <ul class=md-nav__list> <li class=md-nav__item> <a href=#如何建立关联_1 class=md-nav__link> <span class=md-ellipsis> 如何建立关联 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#多对多 class=md-nav__link> <span class=md-ellipsis> 多对多 </span> </a> <nav class=md-nav aria-label=多对多> <ul class=md-nav__list> <li class=md-nav__item> <a href=#如何建立关联_2 class=md-nav__link> <span class=md-ellipsis> 如何建立关联 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#24-数据表的crud class=md-nav__link> <span class=md-ellipsis> 2.4 数据表的CRUD </span> </a> <nav class=md-nav aria-label="2.4 数据表的CRUD"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#update class=md-nav__link> <span class=md-ellipsis> update </span> </a> </li> <li class=md-nav__item> <a href=#delete class=md-nav__link> <span class=md-ellipsis> delete </span> </a> </li> <li class=md-nav__item> <a href=#read class=md-nav__link> <span class=md-ellipsis> Read </span> </a> </li> <li class=md-nav__item> <a href=#多表查询 class=md-nav__link> <span class=md-ellipsis> 多表查询 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-使用django开发rest-接口 class=md-nav__link> <span class=md-ellipsis> 3. 使用Django开发REST 接口 </span> </a> <nav class=md-nav aria-label="3. 使用Django开发REST 接口"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#基本配置 class=md-nav__link> <span class=md-ellipsis> 基本配置 </span> </a> </li> <li class=md-nav__item> <a href=#模型 class=md-nav__link> <span class=md-ellipsis> 模型 </span> </a> </li> <li class=md-nav__item> <a href=#视图 class=md-nav__link> <span class=md-ellipsis> 视图 </span> </a> </li> <li class=md-nav__item> <a href=#路由 class=md-nav__link> <span class=md-ellipsis> 路由 </span> </a> </li> <li class=md-nav__item> <a href=#启动应用 class=md-nav__link> <span class=md-ellipsis> 启动应用 </span> </a> </li> <li class=md-nav__item> <a href=#使用postman测试接口 class=md-nav__link> <span class=md-ellipsis> 使用postman测试接口 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-明确rest接口开发的核心任务 class=md-nav__link> <span class=md-ellipsis> 4. 明确REST接口开发的核心任务 </span> </a> <nav class=md-nav aria-label="4. 明确REST接口开发的核心任务"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#41-序列化 class=md-nav__link> <span class=md-ellipsis> 4.1 序列化 </span> </a> </li> <li class=md-nav__item> <a href=#42-反序列化 class=md-nav__link> <span class=md-ellipsis> 4.2 反序列化 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-django-rest-framework-简介 class=md-nav__link> <span class=md-ellipsis> 5. Django REST framework 简介 </span> </a> <nav class=md-nav aria-label="5. Django REST framework 简介"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#51-认识django-rest-framework class=md-nav__link> <span class=md-ellipsis> 5.1 认识Django REST framework </span> </a> </li> <li class=md-nav__item> <a href=#52-django-rest-framework常用组件 class=md-nav__link> <span class=md-ellipsis> 5.2 Django REST framework常用组件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#6-用django-rest-framework实现豆瓣api应用 class=md-nav__link> <span class=md-ellipsis> 6. 用Django REST framework实现豆瓣API应用 </span> </a> <nav class=md-nav aria-label="6. 用Django REST framework实现豆瓣API应用"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61-豆瓣api功能介绍 class=md-nav__link> <span class=md-ellipsis> 6.1 豆瓣API功能介绍 </span> </a> </li> <li class=md-nav__item> <a href=#62-django-rest-framework序列化 class=md-nav__link> <span class=md-ellipsis> 6.2 Django REST framework序列化 </span> </a> <nav class=md-nav aria-label="6.2 Django REST framework序列化"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#621-postman的使用 class=md-nav__link> <span class=md-ellipsis> 6.2.1 Postman的使用 </span> </a> </li> <li class=md-nav__item> <a href=#622-用serializersserializer方式序列化 class=md-nav__link> <span class=md-ellipsis> 6.2.2 用serializers.Serializer方式序列化 </span> </a> </li> <li class=md-nav__item> <a href=#623-用serializersmodelserializer方式序列化 class=md-nav__link> <span class=md-ellipsis> 6.2.3 用serializers.ModelSerializer方式序列化 </span> </a> <nav class=md-nav aria-label="6.2.3 用serializers.ModelSerializer方式序列化"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1定义 class=md-nav__link> <span class=md-ellipsis> 1.定义 </span> </a> </li> <li class=md-nav__item> <a href=#2指定字段 class=md-nav__link> <span class=md-ellipsis> 2.指定字段 </span> </a> </li> <li class=md-nav__item> <a href=#3添加额外参数 class=md-nav__link> <span class=md-ellipsis> 3.添加额外参数 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#624-serializer和modelserializer序列化选择 class=md-nav__link> <span class=md-ellipsis> 6.2.4 Serializer和ModelSerializer序列化选择 </span> </a> </li> <li class=md-nav__item> <a href=#625-hyperlinkedmodelserializer序列化方式 class=md-nav__link> <span class=md-ellipsis> 6.2.5 HyperlinkedModelSerializer序列化方式 </span> </a> </li> <li class=md-nav__item> <a href=#626-总结 class=md-nav__link> <span class=md-ellipsis> 6.2.6 总结 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7-django-rest-framework视图 class=md-nav__link> <span class=md-ellipsis> 7. Django REST framework视图 </span> </a> <nav class=md-nav aria-label="7. Django REST framework视图"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#71-视图类总结 class=md-nav__link> <span class=md-ellipsis> 7.1 视图类总结 </span> </a> </li> <li class=md-nav__item> <a href=#72-基于api_view函数视图示例 class=md-nav__link> <span class=md-ellipsis> 7.2 基于api_view函数视图示例 </span> </a> <nav class=md-nav aria-label="7.2 基于api_view函数视图示例"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#721-request class=md-nav__link> <span class=md-ellipsis> 7.2.1 Request </span> </a> <nav class=md-nav aria-label="7.2.1 Request"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#request-objects class=md-nav__link> <span class=md-ellipsis> Request objects </span> </a> </li> <li class=md-nav__item> <a href=#常用属性 class=md-nav__link> <span class=md-ellipsis> 常用属性 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#722-response class=md-nav__link> <span class=md-ellipsis> 7.2.2 Response </span> </a> <nav class=md-nav aria-label="7.2.2 Response"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#response-objects class=md-nav__link> <span class=md-ellipsis> Response objects </span> </a> </li> <li class=md-nav__item> <a href=#构造方式 class=md-nav__link> <span class=md-ellipsis> 构造方式 </span> </a> </li> <li class=md-nav__item> <a href=#常用属性_1 class=md-nav__link> <span class=md-ellipsis> 常用属性 </span> </a> </li> <li class=md-nav__item> <a href=#状态码 class=md-nav__link> <span class=md-ellipsis> 状态码 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#723-函数视图 class=md-nav__link> <span class=md-ellipsis> 7.2.3 函数视图 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#73-2个视图基类 class=md-nav__link> <span class=md-ellipsis> 7.3 2个视图基类 </span> </a> <nav class=md-nav aria-label="7.3 2个视图基类"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#apiview class=md-nav__link> <span class=md-ellipsis> APIView </span> </a> <nav class=md-nav aria-label=APIView> <ul class=md-nav__list> <li class=md-nav__item> <a href=#基本配置_1 class=md-nav__link> <span class=md-ellipsis> 基本配置 </span> </a> </li> <li class=md-nav__item> <a href=#配置模型 class=md-nav__link> <span class=md-ellipsis> 配置模型 </span> </a> </li> <li class=md-nav__item> <a href=#配置序列化器 class=md-nav__link> <span class=md-ellipsis> 配置序列化器 </span> </a> </li> <li class=md-nav__item> <a href=#配置视图 class=md-nav__link> <span class=md-ellipsis> 配置视图 </span> </a> </li> <li class=md-nav__item> <a href=#配置路由 class=md-nav__link> <span class=md-ellipsis> 配置路由 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#genericapiview class=md-nav__link> <span class=md-ellipsis> GenericAPIView </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#74-5个视图扩展类 class=md-nav__link> <span class=md-ellipsis> 7.4 5个视图扩展类 </span> </a> </li> <li class=md-nav__item> <a href=#75-9个视图子类 class=md-nav__link> <span class=md-ellipsis> 7.5 9个视图子类 </span> </a> </li> <li class=md-nav__item> <a href=#76-视图集viewset class=md-nav__link> <span class=md-ellipsis> 7.6 视图集ViewSet </span> </a> <nav class=md-nav aria-label="7.6 视图集ViewSet"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modelviewset class=md-nav__link> <span class=md-ellipsis> ModelViewSet </span> </a> </li> <li class=md-nav__item> <a href=#路由router class=md-nav__link> <span class=md-ellipsis> 路由Router </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#77-视图如何选择 class=md-nav__link> <span class=md-ellipsis> 7.7 视图如何选择? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#参考文献 class=md-nav__link> <span class=md-ellipsis> 参考文献 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> <span class=md-ellipsis> 3.Python测试开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> 3.Python测试开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/1.Python2%E4%B8%8EPython3%E5%8C%BA%E5%88%AB/ class=md-nav__link> <span class=md-ellipsis> 1.Python2与Python3区别 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/2.Windows%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85Python/ class=md-nav__link> <span class=md-ellipsis> 2.Windows环境安装Python </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/3.Linux%E5%A4%9A%E7%89%88%E6%9C%ACPython%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> 3.Linux多版本Python安装 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/4.Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> 4.Python虚拟环境安装 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/5.Pycharm%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 5.Pycharm安装与使用 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/6.Python%E9%97%B4%E6%8E%A5%E5%AE%9A%E4%B9%89%E5%B8%B8%E9%87%8F/ class=md-nav__link> <span class=md-ellipsis> 6.Python间接定义常量 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/7.Python%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 7.Python运算符与表达式 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/8.%E9%80%BB%E8%BE%91%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5/ class=md-nav__link> <span class=md-ellipsis> 8.逻辑控制语句 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/9.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BB%8B%E7%BB%8D/ class=md-nav__link> <span class=md-ellipsis> 9.数据结构 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/10.%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/ class=md-nav__link> <span class=md-ellipsis> 10.函数介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/11.%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/ class=md-nav__link> <span class=md-ellipsis> 11.类与对象 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/12.%E6%89%93%E5%8C%85%E4%B8%8E%E5%8F%91%E5%B8%83/ class=md-nav__link> <span class=md-ellipsis> 12.打包与发布 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/13.%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7%E4%B8%8E%E5%A4%84%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 13.异常捕获与处理 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/14.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> 14.并发编程 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/15.%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8C%E4%B8%89%E6%96%B9%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 15.标准库和三方库 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/16.vue-cli%E8%84%9A%E6%89%8B%E6%9E%B6/ class=md-nav__link> <span class=md-ellipsis> 16.vue-cli脚手架 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/17.%E6%A1%88%E4%BE%8B%E5%AE%9E%E8%B7%B5-%E4%BB%BB%E5%8A%A1%E5%88%97%E8%A1%A8/ class=md-nav__link> <span class=md-ellipsis> 17.案例实践-任务列表 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5 id=__nav_6_5_label tabindex=0> <span class=md-ellipsis> 4.Flask-Web全栈开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> 4.Flask-Web全栈开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/1.Flask%E5%89%8D%E5%A5%8F/ class=md-nav__link> <span class=md-ellipsis> 1.Flask前缀 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/2.%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 2.项目配置 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/3.URL%E4%B8%8E%E8%A7%86%E5%9B%BE/ class=md-nav__link> <span class=md-ellipsis> 3.URL与视图 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/4.Jinja2%E6%A8%A1%E6%9D%BF/ class=md-nav__link> <span class=md-ellipsis> 4.Jinja2模板 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/5.%E6%95%B0%E6%8D%AE%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 5.数据库 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/6.%E8%A1%A8%E5%8D%95/ class=md-nav__link> <span class=md-ellipsis> 6.表单 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/7.Flask%E8%BF%9B%E9%98%B6/ class=md-nav__link> <span class=md-ellipsis> 7.Flask进阶 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/8.%E7%BC%93%E5%AD%98%E7%B3%BB%E7%BB%9F/ class=md-nav__link> <span class=md-ellipsis> 8.缓存系统 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/9.Flask%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 9.Flask项目实战 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/10.WebSock%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 10.WebSock实战 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/11.Flask%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> 11.Flask异步编程 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/%E9%99%84-%E4%BD%BF%E7%94%A8Pytest%E6%B5%8B%E8%AF%95Flask/ class=md-nav__link> <span class=md-ellipsis> 附-使用Pytest测试Flask </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/%E9%99%84-Flask%E5%B8%B8%E7%94%A8%E6%89%A9%E5%B1%95/ class=md-nav__link> <span class=md-ellipsis> 附-Flask常用扩展 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/%E9%99%84-Flask%E5%92%8CRedis%E9%98%9F%E5%88%97%E7%9A%84%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/ class=md-nav__link> <span class=md-ellipsis> 附-Flask和Redis队列的异步任务 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/%E9%99%84-Flask%E5%92%8CVue.js%E5%BC%80%E5%8F%91%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 附-Flask和Vue.js开发单页应用 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/%E9%99%84-Flask%E5%AE%B9%E5%99%A8%E5%8C%96%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> 附-Flask容器化实践 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask-Web%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/%E9%99%84-Flask%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/ class=md-nav__link> <span class=md-ellipsis> 附-Flask数据模型 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Python-vs-Go </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Python-vs-Go </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_1> <label class=md-nav__link for=__nav_7_1 id=__nav_7_1_label tabindex=0> <span class=md-ellipsis> 0.线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> 0.线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Python-vs-Go/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Python-vs-Go/ class=md-nav__link> <span class=md-ellipsis> Python-vs-Go </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class=md-ellipsis> 1.对比 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> 1.对比 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/1.Hello-World/ class=md-nav__link> <span class=md-ellipsis> Hello-World </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/2.Print/ class=md-nav__link> <span class=md-ellipsis> Print </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/3.%E6%B3%A8%E9%87%8A/ class=md-nav__link> <span class=md-ellipsis> 注释 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/4.%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2/ class=md-nav__link> <span class=md-ellipsis> 多行字符串 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/5.Lists/ class=md-nav__link> <span class=md-ellipsis> Lists </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/6.Map/ class=md-nav__link> <span class=md-ellipsis> Map </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/7.Booleans/ class=md-nav__link> <span class=md-ellipsis> Booleans </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/8.Forloop/ class=md-nav__link> <span class=md-ellipsis> Forloop </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/9.Range/ class=md-nav__link> <span class=md-ellipsis> Range </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/10.Switch/ class=md-nav__link> <span class=md-ellipsis> Switch </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/11.%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 可变参数函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/12.%E6%97%B6%E9%97%B4%E8%AE%A1%E7%AE%97/ class=md-nav__link> <span class=md-ellipsis> 时间计算 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/13.%E5%87%BD%E6%95%B0%E7%9A%84%E9%97%AD%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> 函数的闭包 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/14.%E9%80%80%E5%87%BA%E5%A4%84%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 退出处理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/15.%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7/ class=md-nav__link> <span class=md-ellipsis> 异常捕获 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/16.%E5%8F%AF%E5%8F%98%E9%A1%B9/ class=md-nav__link> <span class=md-ellipsis> 可变项 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/17.%E7%B1%BB/ class=md-nav__link> <span class=md-ellipsis> 类 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/18.%E6%96%B9%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 方法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/19.%E5%B9%B6%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 并发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/20.Args/ class=md-nav__link> <span class=md-ellipsis> Args </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/21.%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97%E5%88%AB%E5%90%8D/ class=md-nav__link> <span class=md-ellipsis> 导入模块别名 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/22.%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96/ class=md-nav__link> <span class=md-ellipsis> 字符串格式化 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/23.%E5%8E%BB%E9%87%8D/ class=md-nav__link> <span class=md-ellipsis> 去重 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/24.%E5%B8%A6%E9%A2%9C%E8%89%B2%E6%89%93%E5%8D%B0/ class=md-nav__link> <span class=md-ellipsis> 带颜色打印 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_3> <label class=md-nav__link for=__nav_7_3 id=__nav_7_3_label tabindex=0> <span class=md-ellipsis> 2.进阶 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_3_label aria-expanded=false> <label class=md-nav__title for=__nav_7_3> <span class="md-nav__icon md-icon"></span> 2.进阶 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Python-vs-Go/2.%E8%BF%9B%E9%98%B6/1.%E4%BD%BF%E7%94%A8RPC/ class=md-nav__link> <span class=md-ellipsis> 使用RPC </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/2.%E8%BF%9B%E9%98%B6/2.%E4%BD%BF%E7%94%A8MySQL/ class=md-nav__link> <span class=md-ellipsis> 使用MySQL </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/2.%E8%BF%9B%E9%98%B6/3.%E4%BD%BF%E7%94%A8Redis/ class=md-nav__link> <span class=md-ellipsis> 使用Redis </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/2.%E8%BF%9B%E9%98%B6/4.%E4%BD%BF%E7%94%A8MongoDB/ class=md-nav__link> <span class=md-ellipsis> 使用MongoDB </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_1> <label class=md-nav__link for=__nav_8_1 id=__nav_8_1_label tabindex=0> <span class=md-ellipsis> Shell </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_1_label aria-expanded=false> <label class=md-nav__title for=__nav_8_1> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Shell/Shell%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> Shell 教程概述 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/1.%E7%AC%AC%E4%B8%80%E4%B8%AAshell%E7%A8%8B%E5%BA%8F/ class=md-nav__link> <span class=md-ellipsis> 1.第一个 Shell 程序 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/2.Shell%E5%8F%98%E9%87%8F%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2/ class=md-nav__link> <span class=md-ellipsis> 2.Shell变量和字符串 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/3.Shell%E5%8F%82%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 3.Shell参数 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/4.Shell%E6%95%B0%E7%BB%84/ class=md-nav__link> <span class=md-ellipsis> 4.Shell数组 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/5.Shell%E8%BF%90%E7%AE%97%E7%AC%A6/ class=md-nav__link> <span class=md-ellipsis> 5.Shell运算符 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/6.Shell-echo_printf%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 6.Shell echo/printf 命令 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/7.Shell-test%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 7.Shell test命令 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/8.Shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 8.Shell流程控制 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/9.Shell%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 9.Shell函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/10.Shell%E8%BE%93%E5%85%A5_%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91/ class=md-nav__link> <span class=md-ellipsis> 10.Shell输入/输出重定向 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/11.Shell%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 11.Shell正则表达式 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/12.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bgrep/ class=md-nav__link> <span class=md-ellipsis> 12.Shell三剑客之grep </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/13.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bsed/ class=md-nav__link> <span class=md-ellipsis> 13.Shell三剑客之sed </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/14.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bawk/ class=md-nav__link> <span class=md-ellipsis> 14.Shell三剑客之awk </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/15.Shell%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 15.Shell常用工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/16.Shell%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> 16.Shell实战项目 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/17.Shell%E8%84%9A%E6%9C%AC%E7%A4%BA%E4%BE%8B/ class=md-nav__link> <span class=md-ellipsis> 17.Shell脚本示例 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/18.Shell%E8%84%9A%E6%9C%AC%E7%9A%84%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 18.Shell脚本的参数解析工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/19.%E5%AE%9E%E7%94%A8Linux-Shell%E8%84%9A%E6%9C%AC%E6%A1%88%E4%BE%8B/ class=md-nav__link> <span class=md-ellipsis> 19.实用Linux Shell脚本案例 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/20.Shell%E8%84%9A%E6%9C%AC%E7%9A%84%E8%A7%84%E8%8C%83/ class=md-nav__link> <span class=md-ellipsis> 20.Shell脚本的规范 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/21.Shell%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B9%B6%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 21.Shell多进程并发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell/%E9%99%84-vim%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/ class=md-nav__link> <span class=md-ellipsis> 附-vim常用操作 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_2> <label class=md-nav__link for=__nav_8_2 id=__nav_8_2_label tabindex=0> <span class=md-ellipsis> Ansible </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_2_label aria-expanded=false> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> Ansible </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Ansible/1.Ansible%E5%85%A5%E9%97%A8%E5%92%8C%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> 1.Ansible入门和实践 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Ansible/2.Ansible-wiki/ class=md-nav__link> <span class=md-ellipsis> 2.Ansible-wiki </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_3> <label class=md-nav__link for=__nav_8_3 id=__nav_8_3_label tabindex=0> <span class=md-ellipsis> Git </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_3_label aria-expanded=false> <label class=md-nav__title for=__nav_8_3> <span class="md-nav__icon md-icon"></span> Git </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Git/1.Git%E5%9F%BA%E7%A1%80/ class=md-nav__link> <span class=md-ellipsis> 1.Git基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Git/2.%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 2.远程仓库 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Git/3.%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 3.分支管理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Git/4.%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/ class=md-nav__link> <span class=md-ellipsis> 4.分支管理策略 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Git/7.%E4%BD%BF%E7%94%A8Github/ class=md-nav__link> <span class=md-ellipsis> 7.使用Github </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Git/8.%E5%AE%9E%E8%B7%B5GitHub-Flow/ class=md-nav__link> <span class=md-ellipsis> 8.实践GitHub Flow </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Git/9.%E5%AE%9E%E8%B7%B5Git-Flow/ class=md-nav__link> <span class=md-ellipsis> 9.实践Git Flow </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Git/10.%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83/ class=md-nav__link> <span class=md-ellipsis> 10.项目规范 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_4> <label class=md-nav__link for=__nav_8_4 id=__nav_8_4_label tabindex=0> <span class=md-ellipsis> KVM </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_4_label aria-expanded=false> <label class=md-nav__title for=__nav_8_4> <span class="md-nav__icon md-icon"></span> KVM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/KVM/1.kvm%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 1.kvm相关命令 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/KVM/2.kvm%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%88%9B%E5%BB%BA/ class=md-nav__link> <span class=md-ellipsis> 2.kvm虚拟机创建 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/KVM/3.kvm%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 3.kvm网络配置 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_5> <label class=md-nav__link for=__nav_8_5 id=__nav_8_5_label tabindex=0> <span class=md-ellipsis> Nginx </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_5_label aria-expanded=false> <label class=md-nav__title for=__nav_8_5> <span class="md-nav__icon md-icon"></span> Nginx </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Nginx/1.Nginx%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> 1.Nginx简介 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/2.Nginx%E5%AE%89%E8%A3%85%E5%8F%8A%E5%90%AF%E5%8A%A8/ class=md-nav__link> <span class=md-ellipsis> 2.Nginx安装及启动 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/3.Nginx%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 3.Nginx配置 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/4.Nginx%E9%85%8D%E7%BD%AE%E4%B8%8B%E8%BD%BD%E7%AB%99%E7%82%B9/ class=md-nav__link> <span class=md-ellipsis> 4.Nginx配置下载站点 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/5.Nginx%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 5.Nginx访问控制 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/6.Nginx%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA/ class=md-nav__link> <span class=md-ellipsis> 6.Nginx虚拟主机 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/7.Nginx%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/ class=md-nav__link> <span class=md-ellipsis> 7.Nginx静态资源 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/8.Nginx%E7%BC%93%E5%AD%98%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 8.Nginx缓存配置 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/9.Nginx%E6%AD%A3%E5%8F%8D%E4%BB%A3%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 9.Nginx正反向代理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/10.Nginx%E9%98%B2%E7%9B%97%E9%93%BE/ class=md-nav__link> <span class=md-ellipsis> 10.Nginx防盗链 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/11.Nginx%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/ class=md-nav__link> <span class=md-ellipsis> 11.Nginx负载均衡 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/12.Nginx%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/ class=md-nav__link> <span class=md-ellipsis> 12.Nginx动静分离 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/13.Nginx%E8%B7%A8%E5%9F%9F%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 13.Nginx跨域配置 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/14.Nginx%E9%87%8D%E5%AE%9A%E5%90%91/ class=md-nav__link> <span class=md-ellipsis> 14.Nginx重定向 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/15.Nginx-HTTPS/ class=md-nav__link> <span class=md-ellipsis> 15.Nginx HttPS </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_6> <label class=md-nav__link for=__nav_8_6 id=__nav_8_6_label tabindex=0> <span class=md-ellipsis> System </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_6_label aria-expanded=false> <label class=md-nav__title for=__nav_8_6> <span class="md-nav__icon md-icon"></span> System </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/System/1.%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E5%92%8C%E8%BD%AF%E4%BB%B6%E6%BA%90/ class=md-nav__link> <span class=md-ellipsis> 1.系统镜像和软件源 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/2.Linux%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA/ class=md-nav__link> <span class=md-ellipsis> 2.Linux安全加固 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/3.Systemd/ class=md-nav__link> <span class=md-ellipsis> 3.Systemd </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/4.Superivisor/ class=md-nav__link> <span class=md-ellipsis> 4.Superivisor </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/5.SSH%E7%99%BB%E5%BD%95Linux%E6%98%BE%E7%A4%BA%E6%A8%AA%E5%B9%85/ class=md-nav__link> <span class=md-ellipsis> 5.SSH登录Linux显示横幅.md </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/6.Linux%E4%B8%AD%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E6%8E%92%E6%9F%A5/ class=md-nav__link> <span class=md-ellipsis> 6.Linux中端口占用排查 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/7.%E4%BD%BF%E7%94%A8curl%E5%8F%91%E9%80%81REST-API%E8%AF%B7%E6%B1%82/ class=md-nav__link> <span class=md-ellipsis> 7.使用curl发送REST API请求 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/8.%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E7%B3%8A%E6%9F%A5%E6%89%BE%E5%99%A8fzf/ class=md-nav__link> <span class=md-ellipsis> 8.命令行模糊查找器fzf </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/9.Centos7.9%E7%B3%BB%E7%BB%9F%E7%9B%98%E6%89%A9%E5%AE%B9/ class=md-nav__link> <span class=md-ellipsis> 9.Centos7.9系统盘扩容 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/10.Centos%E5%9C%A8%E7%BA%BF-%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96/ class=md-nav__link> <span class=md-ellipsis> 10.Centos在线-离线安装依赖 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/11.rsync-ssh/ class=md-nav__link> <span class=md-ellipsis> 11.rsync ssh使用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/12.%E5%90%84%E5%A4%A7%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%81%9ARAID/ class=md-nav__link> <span class=md-ellipsis> 各大服务器做RAID </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_7> <label class=md-nav__link for=__nav_8_7 id=__nav_8_7_label tabindex=0> <span class=md-ellipsis> Serveices </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_7_label aria-expanded=false> <label class=md-nav__title for=__nav_8_7> <span class="md-nav__icon md-icon"></span> Serveices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Serveices/0.ubuntu-desktop-vmware/ class=md-nav__link> <span class=md-ellipsis> ubuntu-desktop-vmware </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex> <span class=md-ellipsis> Other </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Other </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_1> <label class=md-nav__link for=__nav_9_1 id=__nav_9_1_label tabindex=0> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_1_label aria-expanded=false> <label class=md-nav__title for=__nav_9_1> <span class="md-nav__icon md-icon"></span> tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Other/tools/1.PicGo%E5%9B%BE%E5%BA%8A/ class=md-nav__link> <span class=md-ellipsis> 1.PicGo图床 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/2.PicX%E5%9B%BE%E5%BA%8A/ class=md-nav__link> <span class=md-ellipsis> 2.Picx图床 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/3.Markdown%E8%AF%AD%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 3.Markdown语法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/4.KeyManager/ class=md-nav__link> <span class=md-ellipsis> 4.KeyManager </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/5.mkdocs-material%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/ class=md-nav__link> <span class=md-ellipsis> 5.mkdocs-material搭建博客 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/6.sphinx%E6%9E%84%E5%BB%BA%E5%8D%9A%E5%AE%A2/ class=md-nav__link> <span class=md-ellipsis> 6.sphinx构建博客 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/7.%E4%BC%81%E4%B8%9A%E7%BA%A7VPN%E8%BD%AF%E4%BB%B6AnyLink/ class=md-nav__link> <span class=md-ellipsis> 7.企业级VPN软件AnyLink </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/8.%E5%B9%B3%E5%8F%B0%E5%8F%8A%E5%B7%A5%E5%85%B7%E6%B1%87%E6%80%BB/ class=md-nav__link> <span class=md-ellipsis> 8.平台及工具汇总 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_2> <label class=md-nav__link for=__nav_9_2 id=__nav_9_2_label tabindex=0> <span class=md-ellipsis> windows </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_2_label aria-expanded=false> <label class=md-nav__title for=__nav_9_2> <span class="md-nav__icon md-icon"></span> windows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Other/windows/1.%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E4%B8%8B%E8%BD%BD/ class=md-nav__link> <span class=md-ellipsis> 1.常用软件下载 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/2.windows%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 2.windows查看端口占用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/3.Win11%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E3%80%81%E5%A3%81%E7%BA%B8%E5%8F%8AKMS%E6%BF%80%E6%B4%BB/ class=md-nav__link> <span class=md-ellipsis> 3.Win11镜像下载、壁纸及KMS激活 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/4.windows%E4%B8%8Bnetcat%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> 4.windows下netcat安装 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-mvcmtv class=md-nav__link> <span class=md-ellipsis> 1. MVC/MTV </span> </a> <nav class=md-nav aria-label="1. MVC/MTV"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11-mvc框架 class=md-nav__link> <span class=md-ellipsis> 1.1 MVC框架 </span> </a> </li> <li class=md-nav__item> <a href=#12-mtv框架 class=md-nav__link> <span class=md-ellipsis> 1.2 MTV框架 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-模型与数据库 class=md-nav__link> <span class=md-ellipsis> 2. 模型与数据库 </span> </a> <nav class=md-nav aria-label="2. 模型与数据库"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-django-配置mysql class=md-nav__link> <span class=md-ellipsis> 2.1 django-配置mysql </span> </a> </li> <li class=md-nav__item> <a href=#22-构建模型 class=md-nav__link> <span class=md-ellipsis> 2.2 构建模型 </span> </a> <nav class=md-nav aria-label="2.2 构建模型"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#表字段数据类型及说明 class=md-nav__link> <span class=md-ellipsis> 表字段数据类型及说明 </span> </a> </li> <li class=md-nav__item> <a href=#表字段参数及说明 class=md-nav__link> <span class=md-ellipsis> 表字段参数及说明 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#23-数据表的关系 class=md-nav__link> <span class=md-ellipsis> 2.3 数据表的关系 </span> </a> <nav class=md-nav aria-label="2.3 数据表的关系"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#一对一 class=md-nav__link> <span class=md-ellipsis> 一对一 </span> </a> <nav class=md-nav aria-label=一对一> <ul class=md-nav__list> <li class=md-nav__item> <a href=#如何建立关联 class=md-nav__link> <span class=md-ellipsis> 如何建立关联 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#一对多 class=md-nav__link> <span class=md-ellipsis> 一对多 </span> </a> <nav class=md-nav aria-label=一对多> <ul class=md-nav__list> <li class=md-nav__item> <a href=#如何建立关联_1 class=md-nav__link> <span class=md-ellipsis> 如何建立关联 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#多对多 class=md-nav__link> <span class=md-ellipsis> 多对多 </span> </a> <nav class=md-nav aria-label=多对多> <ul class=md-nav__list> <li class=md-nav__item> <a href=#如何建立关联_2 class=md-nav__link> <span class=md-ellipsis> 如何建立关联 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#24-数据表的crud class=md-nav__link> <span class=md-ellipsis> 2.4 数据表的CRUD </span> </a> <nav class=md-nav aria-label="2.4 数据表的CRUD"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#update class=md-nav__link> <span class=md-ellipsis> update </span> </a> </li> <li class=md-nav__item> <a href=#delete class=md-nav__link> <span class=md-ellipsis> delete </span> </a> </li> <li class=md-nav__item> <a href=#read class=md-nav__link> <span class=md-ellipsis> Read </span> </a> </li> <li class=md-nav__item> <a href=#多表查询 class=md-nav__link> <span class=md-ellipsis> 多表查询 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-使用django开发rest-接口 class=md-nav__link> <span class=md-ellipsis> 3. 使用Django开发REST 接口 </span> </a> <nav class=md-nav aria-label="3. 使用Django开发REST 接口"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#基本配置 class=md-nav__link> <span class=md-ellipsis> 基本配置 </span> </a> </li> <li class=md-nav__item> <a href=#模型 class=md-nav__link> <span class=md-ellipsis> 模型 </span> </a> </li> <li class=md-nav__item> <a href=#视图 class=md-nav__link> <span class=md-ellipsis> 视图 </span> </a> </li> <li class=md-nav__item> <a href=#路由 class=md-nav__link> <span class=md-ellipsis> 路由 </span> </a> </li> <li class=md-nav__item> <a href=#启动应用 class=md-nav__link> <span class=md-ellipsis> 启动应用 </span> </a> </li> <li class=md-nav__item> <a href=#使用postman测试接口 class=md-nav__link> <span class=md-ellipsis> 使用postman测试接口 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-明确rest接口开发的核心任务 class=md-nav__link> <span class=md-ellipsis> 4. 明确REST接口开发的核心任务 </span> </a> <nav class=md-nav aria-label="4. 明确REST接口开发的核心任务"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#41-序列化 class=md-nav__link> <span class=md-ellipsis> 4.1 序列化 </span> </a> </li> <li class=md-nav__item> <a href=#42-反序列化 class=md-nav__link> <span class=md-ellipsis> 4.2 反序列化 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-django-rest-framework-简介 class=md-nav__link> <span class=md-ellipsis> 5. Django REST framework 简介 </span> </a> <nav class=md-nav aria-label="5. Django REST framework 简介"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#51-认识django-rest-framework class=md-nav__link> <span class=md-ellipsis> 5.1 认识Django REST framework </span> </a> </li> <li class=md-nav__item> <a href=#52-django-rest-framework常用组件 class=md-nav__link> <span class=md-ellipsis> 5.2 Django REST framework常用组件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#6-用django-rest-framework实现豆瓣api应用 class=md-nav__link> <span class=md-ellipsis> 6. 用Django REST framework实现豆瓣API应用 </span> </a> <nav class=md-nav aria-label="6. 用Django REST framework实现豆瓣API应用"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61-豆瓣api功能介绍 class=md-nav__link> <span class=md-ellipsis> 6.1 豆瓣API功能介绍 </span> </a> </li> <li class=md-nav__item> <a href=#62-django-rest-framework序列化 class=md-nav__link> <span class=md-ellipsis> 6.2 Django REST framework序列化 </span> </a> <nav class=md-nav aria-label="6.2 Django REST framework序列化"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#621-postman的使用 class=md-nav__link> <span class=md-ellipsis> 6.2.1 Postman的使用 </span> </a> </li> <li class=md-nav__item> <a href=#622-用serializersserializer方式序列化 class=md-nav__link> <span class=md-ellipsis> 6.2.2 用serializers.Serializer方式序列化 </span> </a> </li> <li class=md-nav__item> <a href=#623-用serializersmodelserializer方式序列化 class=md-nav__link> <span class=md-ellipsis> 6.2.3 用serializers.ModelSerializer方式序列化 </span> </a> <nav class=md-nav aria-label="6.2.3 用serializers.ModelSerializer方式序列化"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1定义 class=md-nav__link> <span class=md-ellipsis> 1.定义 </span> </a> </li> <li class=md-nav__item> <a href=#2指定字段 class=md-nav__link> <span class=md-ellipsis> 2.指定字段 </span> </a> </li> <li class=md-nav__item> <a href=#3添加额外参数 class=md-nav__link> <span class=md-ellipsis> 3.添加额外参数 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#624-serializer和modelserializer序列化选择 class=md-nav__link> <span class=md-ellipsis> 6.2.4 Serializer和ModelSerializer序列化选择 </span> </a> </li> <li class=md-nav__item> <a href=#625-hyperlinkedmodelserializer序列化方式 class=md-nav__link> <span class=md-ellipsis> 6.2.5 HyperlinkedModelSerializer序列化方式 </span> </a> </li> <li class=md-nav__item> <a href=#626-总结 class=md-nav__link> <span class=md-ellipsis> 6.2.6 总结 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7-django-rest-framework视图 class=md-nav__link> <span class=md-ellipsis> 7. Django REST framework视图 </span> </a> <nav class=md-nav aria-label="7. Django REST framework视图"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#71-视图类总结 class=md-nav__link> <span class=md-ellipsis> 7.1 视图类总结 </span> </a> </li> <li class=md-nav__item> <a href=#72-基于api_view函数视图示例 class=md-nav__link> <span class=md-ellipsis> 7.2 基于api_view函数视图示例 </span> </a> <nav class=md-nav aria-label="7.2 基于api_view函数视图示例"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#721-request class=md-nav__link> <span class=md-ellipsis> 7.2.1 Request </span> </a> <nav class=md-nav aria-label="7.2.1 Request"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#request-objects class=md-nav__link> <span class=md-ellipsis> Request objects </span> </a> </li> <li class=md-nav__item> <a href=#常用属性 class=md-nav__link> <span class=md-ellipsis> 常用属性 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#722-response class=md-nav__link> <span class=md-ellipsis> 7.2.2 Response </span> </a> <nav class=md-nav aria-label="7.2.2 Response"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#response-objects class=md-nav__link> <span class=md-ellipsis> Response objects </span> </a> </li> <li class=md-nav__item> <a href=#构造方式 class=md-nav__link> <span class=md-ellipsis> 构造方式 </span> </a> </li> <li class=md-nav__item> <a href=#常用属性_1 class=md-nav__link> <span class=md-ellipsis> 常用属性 </span> </a> </li> <li class=md-nav__item> <a href=#状态码 class=md-nav__link> <span class=md-ellipsis> 状态码 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#723-函数视图 class=md-nav__link> <span class=md-ellipsis> 7.2.3 函数视图 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#73-2个视图基类 class=md-nav__link> <span class=md-ellipsis> 7.3 2个视图基类 </span> </a> <nav class=md-nav aria-label="7.3 2个视图基类"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#apiview class=md-nav__link> <span class=md-ellipsis> APIView </span> </a> <nav class=md-nav aria-label=APIView> <ul class=md-nav__list> <li class=md-nav__item> <a href=#基本配置_1 class=md-nav__link> <span class=md-ellipsis> 基本配置 </span> </a> </li> <li class=md-nav__item> <a href=#配置模型 class=md-nav__link> <span class=md-ellipsis> 配置模型 </span> </a> </li> <li class=md-nav__item> <a href=#配置序列化器 class=md-nav__link> <span class=md-ellipsis> 配置序列化器 </span> </a> </li> <li class=md-nav__item> <a href=#配置视图 class=md-nav__link> <span class=md-ellipsis> 配置视图 </span> </a> </li> <li class=md-nav__item> <a href=#配置路由 class=md-nav__link> <span class=md-ellipsis> 配置路由 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#genericapiview class=md-nav__link> <span class=md-ellipsis> GenericAPIView </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#74-5个视图扩展类 class=md-nav__link> <span class=md-ellipsis> 7.4 5个视图扩展类 </span> </a> </li> <li class=md-nav__item> <a href=#75-9个视图子类 class=md-nav__link> <span class=md-ellipsis> 7.5 9个视图子类 </span> </a> </li> <li class=md-nav__item> <a href=#76-视图集viewset class=md-nav__link> <span class=md-ellipsis> 7.6 视图集ViewSet </span> </a> <nav class=md-nav aria-label="7.6 视图集ViewSet"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modelviewset class=md-nav__link> <span class=md-ellipsis> ModelViewSet </span> </a> </li> <li class=md-nav__item> <a href=#路由router class=md-nav__link> <span class=md-ellipsis> 路由Router </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#77-视图如何选择 class=md-nav__link> <span class=md-ellipsis> 7.7 视图如何选择? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#参考文献 class=md-nav__link> <span class=md-ellipsis> 参考文献 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=附-django-web开发>附-Django-web开发<a class=headerlink href=#附-django-web开发 title="Permanent link">&para;</a></h1> <h2 id=1-mvcmtv>1. MVC/MTV<a class=headerlink href=#1-mvcmtv title="Permanent link">&para;</a></h2> <h3 id=11-mvc框架>1.1 MVC框架<a class=headerlink href=#11-mvc框架 title="Permanent link">&para;</a></h3> <ul> <li>controllers:处理用户请求</li> <li>views：放置html模板</li> <li>modals：操作数据库</li> </ul> <h3 id=12-mtv框架>1.2 MTV框架<a class=headerlink href=#12-mtv框架 title="Permanent link">&para;</a></h3> <ul> <li>views：处理用户请求</li> <li>template：放置html模板</li> <li>modals：操作数据库</li> </ul> <h2 id=2-模型与数据库>2. 模型与数据库<a class=headerlink href=#2-模型与数据库 title="Permanent link">&para;</a></h2> <p>Django提供了完善的模型(model)层来创建和存取数据，它包含你所储存数据的必要字段和行为。通常，每个模型对应数据库中唯一的一张表。所以，模型避免了我们直接对数据库操作。</p> <p>Django模型基础知识：</p> <ul> <li>每个模型是一个Python类，继承 django.db.models.Model 类。</li> <li>该模型的每个属性表示一个数据库表字段。</li> <li>所有这一切，己经给了你一个自动生成的数据库访问的API。</li> </ul> <p>Django对各种数据库提供了很好的支持，包括：PostgreSQL、MySQL、SQLite和Oracle，而且为这些数据库提供了统一的调用API，这些API统称为ORM框架。</p> <p>通过使用Django内置的ORM框架可以实现数据库连接和读写操作。</p> <h3 id=21-django-配置mysql>2.1 django-配置mysql<a class=headerlink href=#21-django-配置mysql title="Permanent link">&para;</a></h3> <p>1.安装 pymysql</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>pip<span class=w> </span>install<span class=w> </span>pymysql
</code></pre></div> <p>2.修改 settings.py</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=nv>DATABASES</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>{</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>    </span><span class=s1>&#39;default&#39;</span>:<span class=w> </span><span class=o>{</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>        </span><span class=s1>&#39;ENGINE&#39;</span>:<span class=w> </span><span class=s1>&#39;django.db.backends.mysql&#39;</span>,
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>        </span><span class=s1>&#39;NAME&#39;</span>:<span class=w> </span><span class=s1>&#39;django_test&#39;</span>,
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>        </span><span class=s1>&#39;USER&#39;</span>:<span class=w> </span><span class=s1>&#39;root&#39;</span>,
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>        </span><span class=s1>&#39;PASSWORD&#39;</span>:<span class=w> </span><span class=s1>&#39;123456&#39;</span>,
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>        </span><span class=s1>&#39;HOST&#39;</span>:<span class=w> </span><span class=s1>&#39;localhost&#39;</span>,
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>        </span><span class=s1>&#39;PORT&#39;</span>:<span class=w> </span><span class=s1>&#39;3306&#39;</span>,
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=o>}</span>
</code></pre></div> <blockquote> <p>更多参数: <a href=https://docs.djangoproject.com/zh-hans/4.2/ref/settings/ >https://docs.djangoproject.com/zh-hans/4.2/ref/settings/</a></p> </blockquote> <p>3.修改项目的<code>__init__.py</code> (和 <code>settings.py</code> 同级目录)</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=kn>from</span> <span class=nn>pymysql</span> <span class=kn>import</span> <span class=n>install_as_MySQLdb</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=n>install_as_MySQLdb</span><span class=p>()</span>
</code></pre></div> <h3 id=22-构建模型>2.2 构建模型<a class=headerlink href=#22-构建模型 title="Permanent link">&para;</a></h3> <p>ORM框架是一种程序技术，用于实现面向对象编程语言中不同类型系统的数据之间的转换。从效果上说，其实是创建了一个可在编程语言中使用的"虚拟对象数据库"，通过对虚拟对象数据库操作从而实现对目标数控的操作，虚拟对象数据库与模板数据库是相互对应的。在Django中，虚拟对象数据库也成为模型。通过模型先对模板数据库的读写操作，实现如下：</p> <ol> <li>配置模板数据库信息，主要在setting.py中设置数据库信息</li> <li>构建虚拟对象数据库，在App的models.py文件中以类的形式定义模型。</li> <li>通过模型在模板数据库中创建相应的数据表</li> <li>在视图函数中通过对模型操作实现目标数据库的读写操作。</li> </ol> <p>以 MyDjango 项目为例，创建项目并配置</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>python2</label><label for=__tabbed_1_2>python3</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>pip<span class=w> </span>install<span class=w> </span>virtualenv
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=nb>cd</span><span class=w> </span>MyDjango
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>virtualenv<span class=w> </span>venv
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=nb>source</span><span class=w> </span>./venv/bin/activate
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=c1># 创建项目</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=o>(</span>venv<span class=o>)</span><span class=c1># pip install django==4.2.7</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=o>(</span>venv<span class=o>)</span><span class=c1># django-admin startproject MyDjango</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=c1># 创建app</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=o>(</span>venv<span class=o>)</span><span class=c1># python manage.py startapp index</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1>#创建虚拟环境</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>python<span class=w> </span>-m<span class=w> </span>venv<span class=w> </span>MyDjango
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=nb>cd</span><span class=w> </span>MyDjango
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=c1># 激活虚拟环境</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=nb>source</span><span class=w> </span>bin/activite
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=c1># 此时就可以在虚拟环境中使用pip install &lt;package_name&gt;来安装python包了</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=c1># 创建项目</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=o>(</span>venv<span class=o>)</span><span class=c1># pip install django==4.2.7</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=o>(</span>venv<span class=o>)</span><span class=c1># django-admin startproject MyDjango</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=c1># 创建app</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=o>(</span>venv<span class=o>)</span><span class=c1># python manage.py startapp index</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=c1># 退出虚拟环境</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a>deactivate
</code></pre></div> </div> </div> </div> <p>settings.py文件里面的INSTALLED_APPS。注册你的app</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># 设置时区</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=n>LANGUAGE_CODE</span> <span class=o>=</span> <span class=s1>&#39;zh-hans&#39;</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=n>TIME_ZONE</span> <span class=o>=</span> <span class=s1>&#39;Asia/Shanghai&#39;</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=n>USE_I18N</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=n>USE_L10N</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=n>USE_TZ</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=n>INSTALLED_APPS</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>    <span class=s1>&#39;django.contrib.admin&#39;</span><span class=p>,</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>    <span class=s1>&#39;django.contrib.auth&#39;</span><span class=p>,</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>    <span class=s1>&#39;django.contrib.contenttypes&#39;</span><span class=p>,</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>    <span class=s1>&#39;django.contrib.sessions&#39;</span><span class=p>,</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>    <span class=s1>&#39;django.contrib.messages&#39;</span><span class=p>,</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>    <span class=s1>&#39;django.contrib.staticfiles&#39;</span><span class=p>,</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>    <span class=s1>&#39;index.apps.IndexConfig&#39;</span><span class=p>,</span>   <span class=c1># 注册app</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=p>]</span>
</code></pre></div> 不注册它，你的数据库就不知道该给哪个 app 创建表。</p> <p>若想将模型转为mysql数据库中的表，需要在settings中配置：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=n>DATABASES</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>    <span class=s1>&#39;default&#39;</span><span class=p>:</span> <span class=p>{</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>        <span class=s1>&#39;ENGINE&#39;</span><span class=p>:</span> <span class=s1>&#39;django.db.backends.mysql&#39;</span><span class=p>,</span>   <span class=c1># 数据库引擎mysql</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>        <span class=s1>&#39;NAME&#39;</span><span class=p>:</span> <span class=s1>&#39;mydjango&#39;</span><span class=p>,</span>       <span class=c1># 你要存储数据的库名，事先要创建之</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>        <span class=s1>&#39;USER&#39;</span><span class=p>:</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span>      <span class=c1># 数据库用户名</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>        <span class=s1>&#39;PASSWORD&#39;</span><span class=p>:</span> <span class=s1>&#39;oschina&#39;</span><span class=p>,</span>      <span class=c1># 密码</span>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>        <span class=s1>&#39;HOST&#39;</span><span class=p>:</span> <span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=c1># 主机</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>        <span class=s1>&#39;PORT&#39;</span><span class=p>:</span> <span class=s1>&#39;3306&#39;</span><span class=p>,</span>      <span class=c1># 数据库使用的端口</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>    <span class=p>}</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=p>}</span>
</code></pre></div> <p>由于ORM不能创建数据库，需要手动创建 mydjango 数据库。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>mydjango</span><span class=w> </span><span class=nb>CHARACTER</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>utf8</span><span class=p>;</span>
</code></pre></div> <p>django连接MySQL，使用的是pymysql模块，必须得安装pymysql模块。否则后面会创建表不成功！</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>pip<span class=w> </span>install<span class=w> </span>pymysql
</code></pre></div> <p>在 <code>book/user/__init__.py</code> 文件中加入代码： <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=kn>from</span> <span class=nn>pymysql</span> <span class=kn>import</span> <span class=n>install_as_MySQLdb</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=n>install_as_MySQLdb</span><span class=p>()</span>
</code></pre></div></p> <p>在项目index的models.py文件中定义模型如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=c1># Create your models here.</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=c1># 创建产品分类表</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=k>class</span> <span class=nc>Type</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>AutoField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>    <span class=n>type_name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=c1># 创建产品信息表</span>
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=k>class</span> <span class=nc>Product</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a>    <span class=n>weight</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a>    <span class=n>size</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a>    <span class=nb>type</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>Type</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
</code></pre></div> <p>接下来要在pycharm的teminal中通过命令创建数据库的表了。有2条命令，分别是：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>python<span class=w> </span>manage.py<span class=w> </span>makemigrations
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>python<span class=w> </span>manage.py<span class=w> </span>migrate
</code></pre></div> <h4 id=表字段数据类型及说明>表字段数据类型及说明<a class=headerlink href=#表字段数据类型及说明 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>字段类型</th> <th>用途</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td><code>AutoField</code></td> <td>自增长整数字段</td> <td><code>id = models.AutoField(primary_key=True)</code></td> </tr> <tr> <td><code>CharField</code></td> <td>字符串字段</td> <td><code>title = models.CharField(max_length=100)</code></td> </tr> <tr> <td><code>BooleanField</code></td> <td>布尔类型字段</td> <td><code>is_published = models.BooleanField(default=False)</code></td> </tr> <tr> <td><code>DateField</code></td> <td>日期字段</td> <td><code>published_date = models.DateField()</code></td> </tr> <tr> <td><code>DateTimeField</code></td> <td>日期时间字段</td> <td><code>created_at = models.DateTimeField(auto_now_add=True)</code></td> </tr> <tr> <td><code>DecimalField</code></td> <td>十进制数值字段</td> <td><code>price = models.DecimalField(max_digits=6, decimal_places=2)</code></td> </tr> <tr> <td><code>EmailField</code></td> <td>电子邮件地址字段</td> <td><code>email = models.EmailField()</code></td> </tr> <tr> <td><code>FileField</code></td> <td>文件上传字段</td> <td><code>photo = models.FileField(upload_to='photos/')</code></td> </tr> <tr> <td><code>FloatField</code></td> <td>浮点数字段</td> <td><code>rating = models.FloatField()</code></td> </tr> <tr> <td><code>ForeignKey</code></td> <td>外键字段</td> <td><code>author = models.ForeignKey(User, on_delete=models.CASCADE)</code></td> </tr> <tr> <td><code>ImageField</code></td> <td>图片上传字段</td> <td><code>avatar = models.ImageField(upload_to='avatars/')</code></td> </tr> <tr> <td><code>IntegerField</code></td> <td>整数字段</td> <td><code>views = models.IntegerField(default=0)</code></td> </tr> <tr> <td><code>ManyToManyField</code></td> <td>多对多关系字段</td> <td><code>tags = models.ManyToManyField(Tag)</code></td> </tr> <tr> <td><code>OneToOneField</code></td> <td>一对一关系字段</td> <td><code>profile = models.OneToOneField(Profile, on_delete=models.CASCADE)</code></td> </tr> <tr> <td><code>TextField</code></td> <td>大文本字段</td> <td><code>content = models.TextField()</code></td> </tr> <tr> <td><code>TimeField</code></td> <td>时间字段</td> <td><code>published_time = models.TimeField()</code></td> </tr> </tbody> </table> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=k>class</span> <span class=nc>UserGroup</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>    <span class=n>uid</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>AutoField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>,</span><span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>    <span class=n>email</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>EmailField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>    <span class=n>text</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>TextField</span><span class=p>()</span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>    <span class=n>ctime</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now_add</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>      <span class=c1># 只有添加时才会更新时间</span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>    <span class=n>uptime</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>         <span class=c1># 只要修改就会更新时间</span>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>    <span class=n>ip1</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IPAddressField</span><span class=p>()</span>                  <span class=c1># 字符串类型，Django Admin以及ModelForm中提供验证 IPV4 机制</span>
<a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>    <span class=n>ip2</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>GenericIPAddressField</span><span class=p>()</span>           <span class=c1># 字符串类型，Django Admin以及ModelForm中提供验证 Ipv4和Ipv6</span>
<a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a>
<a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a>    <span class=n>active</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>BooleanField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a>
<a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a>    <span class=n>data01</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>()</span>              <span class=c1># 日期+时间格式 YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ</span>
<a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a>    <span class=n>data02</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateField</span><span class=p>()</span>                 <span class=c1># 日期格式      YYYY-MM-DD</span>
<a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a>    <span class=n>data03</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>TimeField</span><span class=p>()</span>                 <span class=c1># 时间格式      HH:MM[:ss[.uuuuuu]]</span>
<a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a>
<a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a>    <span class=n>age</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>PositiveIntegerField</span><span class=p>()</span>           <span class=c1># 正小整数 0 ～ 32767</span>
<a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a>    <span class=n>balance</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>SmallIntegerField</span><span class=p>()</span>          <span class=c1># 小整数 -32768 ～ 32767</span>
<a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a>    <span class=n>money</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>PositiveIntegerField</span><span class=p>()</span>         <span class=c1># 正整数 0 ～ 2147483647</span>
<a id=__codelineno-12-25 name=__codelineno-12-25 href=#__codelineno-12-25></a>    <span class=n>bignum</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>BigIntegerField</span><span class=p>()</span>           <span class=c1># 长整型(有符号的) -9223372036854775808 ～ 9223372036854775807</span>
<a id=__codelineno-12-26 name=__codelineno-12-26 href=#__codelineno-12-26></a>
<a id=__codelineno-12-27 name=__codelineno-12-27 href=#__codelineno-12-27></a>    <span class=n>user_type_choices</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-12-28 name=__codelineno-12-28 href=#__codelineno-12-28></a>        <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s2>&quot;超级用户&quot;</span><span class=p>),</span>
<a id=__codelineno-12-29 name=__codelineno-12-29 href=#__codelineno-12-29></a>        <span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s2>&quot;普通用户&quot;</span><span class=p>),</span>
<a id=__codelineno-12-30 name=__codelineno-12-30 href=#__codelineno-12-30></a>        <span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=s2>&quot;普普通用户&quot;</span><span class=p>),</span>
<a id=__codelineno-12-31 name=__codelineno-12-31 href=#__codelineno-12-31></a>    <span class=p>)</span>
<a id=__codelineno-12-32 name=__codelineno-12-32 href=#__codelineno-12-32></a>    <span class=n>user_type_id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>choices</span><span class=o>=</span><span class=n>user_type_choices</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</code></pre></div> <h4 id=表字段参数及说明>表字段参数及说明<a class=headerlink href=#表字段参数及说明 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>字段属性</th> <th>用途</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td><code>null</code></td> <td>是否可以为空</td> <td><code>name = models.CharField(max_length=100, null=True)</code></td> </tr> <tr> <td><code>blank</code></td> <td>是否可以为空白</td> <td><code>description = models.TextField(blank=True)</code></td> </tr> <tr> <td><code>default</code></td> <td>默认值</td> <td><code>is_published = models.BooleanField(default=False)</code></td> </tr> <tr> <td><code>primary_key</code></td> <td>是否为主键</td> <td><code>id = models.AutoField(primary_key=True)</code></td> </tr> <tr> <td><code>db_column</code></td> <td>字段在数据库中的列名</td> <td><code>first_name = models.CharField(max_length=50, db_column='first')</code></td> </tr> <tr> <td><code>unique</code></td> <td>是否唯一</td> <td><code>email = models.EmailField(unique=True)</code></td> </tr> <tr> <td><code>db_index</code></td> <td>是否在数据库中创建索引</td> <td><code>name = models.CharField(max_length=100, db_index=True)</code></td> </tr> <tr> <td><code>verbose_name</code></td> <td>字段的可读名称</td> <td><code>title = models.CharField(max_length=100, verbose_name='文章标题')</code></td> </tr> <tr> <td><code>related_name</code></td> <td>关联模型的反向引用名称</td> <td><code>author = models.ForeignKey(User, on_delete=models.CASCADE, related_name='posts')</code></td> </tr> <tr> <td><code>max_length</code></td> <td>最大长度限制</td> <td><code>title = models.CharField(max_length=100)</code></td> </tr> <tr> <td><code>choices</code></td> <td>选项列表</td> <td><code>status = models.CharField(choices=STATUS_CHOICES, max_length=20)</code></td> </tr> <tr> <td><code>on_delete</code></td> <td>级联删除行为</td> <td><code>author = models.ForeignKey(User, on_delete=models.CASCADE)</code></td> </tr> <tr> <td><code>upload_to</code></td> <td>上传文件保存路径</td> <td><code>photo = models.FileField(upload_to='photos/')</code></td> </tr> <tr> <td><code>auto_now</code></td> <td>自动更新为当前时间</td> <td><code>modified_at = models.DateTimeField(auto_now=True)</code></td> </tr> <tr> <td><code>auto_now_add</code></td> <td>创建时自动设置为当前时间</td> <td><code>created_at = models.DateTimeField(auto_now_add=True)</code></td> </tr> <tr> <td><code>editable</code></td> <td>是否可编辑</td> <td><code>views = models.IntegerField(default=0, editable=False)</code></td> </tr> <tr> <td><code>help_text</code></td> <td>字段的帮助文本</td> <td><code>content = models.TextField(help_text='请输入文章内容')</code></td> </tr> <tr> <td><code>db_table</code></td> <td>指定表名</td> <td><code>class Meta: db_table = 'my_table'</code></td> </tr> <tr> <td><code>unique_together</code></td> <td>多个字段组合唯一</td> <td><code>class Meta: unique_together = [['field1', 'field2']]</code></td> </tr> <tr> <td><code>db_constraint</code></td> <td>是否在数据库中创建约束</td> <td><code>author = models.ForeignKey(User, on_delete=models.CASCADE, db_constraint=False)</code></td> </tr> </tbody> </table> <blockquote> <p>参考官方文档：<a href=https://docs.djangoproject.com/zh-hans/4.2/ref/models/fields/ >https://docs.djangoproject.com/zh-hans/4.2/ref/models/fields/</a>。</p> </blockquote> <h3 id=23-数据表的关系>2.3 数据表的关系<a class=headerlink href=#23-数据表的关系 title="Permanent link">&para;</a></h3> <p>一个模型对应目标数据库的一个数据表，但我们知道，每个数据表之间是可以存在关联的，表与表之间有三种关系：</p> <ul> <li>一对一</li> <li>一对多</li> <li>多对多</li> </ul> <h4 id=一对一>一对一<a class=headerlink href=#一对一 title="Permanent link">&para;</a></h4> <p>一对一的关系，就很简单了，彼此唯一。 </p> <h5 id=如何建立关联>如何建立关联<a class=headerlink href=#如何建立关联 title="Permanent link">&para;</a></h5> <p><strong>一对一的关系 ： 创建关联字段(任意一张表创建都可以), 一般情况下，在重要的表创建关联字段</strong></p> <p>一对一存在于在两个数据表中，第一个表的某一行数据只与第二个表的某一行数据相关，同时第二个表的某一行数据也只与第一个表的某一行数据相关，这种表关系被称为一对一关系，以下列为例：</p> <p>比如 Performer 和 Performer_info 是一对一的关系。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=c1># 一对一关系</span>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=k>class</span> <span class=nc>Performer</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>    <span class=n>nationality</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>    <span class=n>masterpiece</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>
<a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=k>class</span> <span class=nc>Performer_info</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>    <span class=n>performer</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>OneToOneField</span><span class=p>(</span><span class=n>to</span><span class=o>=</span><span class=n>Performer</span><span class=p>,</span><span class=n>to_field</span><span class=o>=</span><span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
<a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>    <span class=n>birth</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>    <span class=n>elapse</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
</code></pre></div> <ul> <li>OneToOneField 表示创建一对一关系。</li> <li>to 表示需要和哪张表创建关系</li> <li>to_field 表示关联字段</li> <li>on_delete=models.CASCADE 表示级联删除。假设a表删除了一条记录，b表也还会删除对应的记录。</li> </ul> <p>performer 表示关联字段，但是ORM创建表的时候，会自动添加_id后缀。那么关联字段为performer_id</p> <blockquote> <p>注意：创建一对一关系，会将关联字添加唯一属性。比如：performer_id</p> </blockquote> <p>使用DJango的管理工具manage.py创建数据表Performer和Performer_info,创建数据表前最好先删除0001_initial.py文件并清空数据库里的数据表。</p> <p>然后重新执行数据迁移。如下</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>python<span class=w> </span>manage.py<span class=w> </span>makemigrations<span class=w> </span>--empty<span class=w> </span>index
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>python<span class=w> </span>manage.py<span class=w> </span>makemigrations
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>python<span class=w> </span>manage.py<span class=w> </span>migrate
</code></pre></div> <h4 id=一对多>一对多<a class=headerlink href=#一对多 title="Permanent link">&para;</a></h4> <p>比如 book 和 publish 。一本书不能对应多个出版社(常规是这样的,否则就盗版了),那么不成立。</p> <p>一个出版社可以对应多本书，关系线成立。所以 book 和 publish 表的关系是一对多的关系。</p> <h5 id=如何建立关联_1>如何建立关联<a class=headerlink href=#如何建立关联_1 title="Permanent link">&para;</a></h5> <p><strong>一对多：一旦确定一对多的关系：在多的表中创建关联字段</strong></p> <p>示例：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=k>class</span> <span class=nc>Publish</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>    <span class=n>name</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>    <span class=n>email</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>    <span class=n>addr</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=k>class</span> <span class=nc>Book</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>    <span class=n>title</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>,</span><span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>    <span class=n>price</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>DecimalField</span><span class=p>(</span><span class=n>max_digits</span><span class=o>=</span><span class=mi>8</span><span class=p>,</span><span class=n>decimal_places</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span><span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>    <span class=n>pub_date</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>DateField</span><span class=p>()</span>
<a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a>    <span class=c1># 与Publish建立一对多的关系,外键字段建立在多的一方</span>
<a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>    <span class=n>publish</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>to</span><span class=o>=</span><span class=s2>&quot;Publish&quot;</span><span class=p>,</span><span class=n>to_field</span><span class=o>=</span><span class=s2>&quot;id&quot;</span><span class=p>,</span><span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
<a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a>    <span class=c1># 与Author表建立多对多的关系,ManyToManyField可以建在两个模型中的任意一个，自动创建关系表book_authors</span>
<a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>    <span class=n>authors</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>ManyToManyField</span><span class=p>(</span><span class=n>to</span><span class=o>=</span><span class=s2>&quot;Author&quot;</span><span class=p>)</span>
</code></pre></div> <ul> <li>ForeignKey 表示建立外键</li> <li>to 表示需要和哪张表创建关系</li> <li>to_field 表示关联字段</li> <li>on_delete=models.CASCADE 表示级联删除。使用ForeignKey必须要加on_delete。否则报错。这是2.x规</li> </ul> <p>一对多存在于两个或两个以上的数据表中，第一个表的数据可以与第二个表的一道多行数据进行关联，但是第二个表的每一行数据只能与第一个表的某一行进行管理，以下列表为例：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1>#一对多关系</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=k>class</span> <span class=nc>Performer</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>    <span class=n>nationality</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>    <span class=n>masterpiece</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=k>class</span> <span class=nc>Program</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>    <span class=n>performer</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>Performer</span><span class=p>,</span><span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
</code></pre></div> <p>使用Django的管理工具manage.py创建数据表 Performer 和 Program，创建数据表前最好先删除0001_initial.py文件并清空数据库里的数据表。数据表的表关系如图：</p> <p>然后重新执行数据迁移。如下 <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>python<span class=w> </span>manage.py<span class=w> </span>makemigrations<span class=w> </span>--empty<span class=w> </span>index
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>python<span class=w> </span>manage.py<span class=w> </span>makemigrations
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>python<span class=w> </span>manage.py<span class=w> </span>migrate
</code></pre></div></p> <h4 id=多对多>多对多<a class=headerlink href=#多对多 title="Permanent link">&para;</a></h4> <p>多对多存在于两个或两个以上的数据表中，第一个表的某一行数据可以与第二个表的一到多行数据进行关联，同时在第二个表中的某一行数据也可以与第一个表的一到多行数据进行关联。</p> <p>多对多关系会在两张表的基础之上，新增一个映射表。</p> <h5 id=如何建立关联_2>如何建立关联<a class=headerlink href=#如何建立关联_2 title="Permanent link">&para;</a></h5> <p><strong>多对多：一旦确定多对多的关系：创建第三张关系表</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1>#多对多</span>
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=k>class</span> <span class=nc>Performer</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>    <span class=n>nationality</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>    <span class=n>masterpiece</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=k>class</span> <span class=nc>Manytomany</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>    <span class=n>performer</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ManyToManyField</span><span class=p>(</span><span class=n>Performer</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=c1># Create your models here.</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=k>class</span> <span class=nc>Book</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>    <span class=n>title</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>,</span><span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>    <span class=n>price</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>DecimalField</span><span class=p>(</span><span class=n>max_digits</span><span class=o>=</span><span class=mi>8</span><span class=p>,</span><span class=n>decimal_places</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span><span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>    <span class=n>pub_date</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>DateField</span><span class=p>()</span>
<a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>    <span class=c1># 与Publish建立一对多的关系,外键字段建立在多的一方</span>
<a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>    <span class=n>publish</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>to</span><span class=o>=</span><span class=s2>&quot;Publish&quot;</span><span class=p>,</span><span class=n>to_field</span><span class=o>=</span><span class=s2>&quot;id&quot;</span><span class=p>,</span><span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
<a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a>    <span class=c1># 与Author表建立多对多的关系,ManyToManyField可以建在两个模型中的任意一个，自动创建关系表book_authors</span>
<a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a>    <span class=n>authors</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>ManyToManyField</span><span class=p>(</span><span class=n>to</span><span class=o>=</span><span class=s2>&quot;Author&quot;</span><span class=p>)</span>
<a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a>
<a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=k>class</span> <span class=nc>Publish</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a>    <span class=n>name</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a>    <span class=n>email</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a>    <span class=n>addr</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a>
<a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a>
<a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a><span class=k>class</span> <span class=nc>Author</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a>    <span class=n>name</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a>    <span class=n>age</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>()</span>
<a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a>    <span class=c1># 与AuthorDetail建立一对一的关系</span>
<a id=__codelineno-19-24 name=__codelineno-19-24 href=#__codelineno-19-24></a>    <span class=c1># ad=models.ForeignKey(to=&quot;AuthorDetail&quot;,to_field=&quot;id&quot;,on_delete=models.CASCADE,unique=True)</span>
<a id=__codelineno-19-25 name=__codelineno-19-25 href=#__codelineno-19-25></a>    <span class=n>ad</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>OneToOneField</span><span class=p>(</span><span class=n>to</span><span class=o>=</span><span class=s2>&quot;AuthorDetail&quot;</span><span class=p>,</span><span class=n>to_field</span><span class=o>=</span><span class=s2>&quot;id&quot;</span><span class=p>,</span><span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>,)</span>
<a id=__codelineno-19-26 name=__codelineno-19-26 href=#__codelineno-19-26></a>
<a id=__codelineno-19-27 name=__codelineno-19-27 href=#__codelineno-19-27></a>
<a id=__codelineno-19-28 name=__codelineno-19-28 href=#__codelineno-19-28></a><span class=k>class</span> <span class=nc>AuthorDetail</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-19-29 name=__codelineno-19-29 href=#__codelineno-19-29></a>    <span class=n>gf</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<a id=__codelineno-19-30 name=__codelineno-19-30 href=#__codelineno-19-30></a>    <span class=n>tel</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
</code></pre></div> <h3 id=24-数据表的crud>2.4 数据表的CRUD<a class=headerlink href=#24-数据表的crud title="Permanent link">&para;</a></h3> <p>index的models.py文件中定义模型如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=c1># Create your models here.</span>
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=c1># 创建产品分类表</span>
<a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=k>class</span> <span class=nc>Type</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>AutoField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>    <span class=n>type_name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>
<a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>
<a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=c1># 创建产品信息表</span>
<a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a><span class=k>class</span> <span class=nc>Product</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a>    <span class=nb>id</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>AutoField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a>    <span class=n>weight</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a>    <span class=n>size</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<a id=__codelineno-20-17 name=__codelineno-20-17 href=#__codelineno-20-17></a>    <span class=nb>type</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>Type</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
</code></pre></div> <p>首先插入测试数据</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_type</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;手机&#39;</span><span class=p>);</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_type</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;平板电脑&#39;</span><span class=p>);</span>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_type</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;智能穿戴&#39;</span><span class=p>);</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_type</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;其他配置&#39;</span><span class=p>);</span>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Pluots&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;M&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Huawei v1&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;XXL&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>);</span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Khwi plus&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;XL&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>);</span>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;omni-Mango&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;S&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Apfle&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;XXL&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>);</span>
<a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;aluots plus&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;XXL&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
<a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Orange&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;XS&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
<a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Rhspberry&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;XS&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
<a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>9</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;华为荣耀 v9&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;XS&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
<a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Cheory&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;XL&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
<a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>11</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;荣耀V9&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;111g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;120*75*7mm&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>index_product</span><span class=o>`</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>13</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;荣耀V9&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;111g&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;120*75*7mm&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</code></pre></div> <p>在MyDjango项目中使用shell模式(启动命令行和执行脚本)进行讲述，该模式主要为方便开发人员开发和调式程序。在PyCharm的Terminal下开启shell模式，输入python manage.py shell指令即可开启。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=o>(</span>venv<span class=o>)</span><span class=w> </span>PS<span class=w> </span>D:<span class=se>\c</span>oder<span class=se>\p</span>ython-project<span class=se>\M</span>yDjango&gt;<span class=w> </span>python<span class=w> </span>manage.py<span class=w> </span>shell
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>&gt;&gt;&gt;<span class=w> </span>from<span class=w> </span>index.models<span class=w> </span>import<span class=w> </span>*
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>&gt;&gt;&gt;<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product<span class=o>()</span>
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>&gt;&gt;&gt;<span class=w> </span>p.name<span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;荣耀V9&quot;</span><span class=w> </span>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>&gt;&gt;&gt;<span class=w> </span>p.weight<span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;111g&quot;</span><span class=w> </span>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>&gt;&gt;&gt;<span class=w> </span>p.size<span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;120*75*7mm&quot;</span><span class=w> </span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a>&gt;&gt;&gt;<span class=w> </span>p.type_id<span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>1</span>
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>&gt;&gt;&gt;<span class=w> </span>p.save<span class=o>()</span>
</code></pre></div> <h4 id=create>create<a class=headerlink href=#create title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1>#方法一</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=c1>#通过Django的ORM框架提供的API实现，使用create方法实现数据插入</span>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>from<span class=w> </span>index.models<span class=w> </span>import<span class=w> </span>*
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>Product.objects.create<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;荣耀V9&#39;</span>,weight<span class=o>=</span><span class=s1>&#39;119g&#39;</span>,size<span class=o>=</span><span class=s1>&#39;120*75*7mm&#39;</span>,type_id<span class=o>=</span><span class=m>1</span><span class=o>)</span>
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=c1>#方法二</span>
<a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=c1>#在实例化时直接设置属性值</span>
<a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;荣耀V9&#39;</span>,weight<span class=o>=</span><span class=s1>&#39;111g&#39;</span>,size<span class=o>=</span><span class=s1>&#39;120*75*7mm&#39;</span>,type_id<span class=o>=</span><span class=m>1</span><span class=o>)</span>
<a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a>p.save<span class=o>()</span>
</code></pre></div> <h4 id=update>update<a class=headerlink href=#update title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.get<span class=o>(</span><span class=nv>id</span><span class=o>=</span><span class=m>9</span><span class=o>)</span>
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>p.name<span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;华为荣耀 v9&quot;</span>
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>p.save<span class=o>()</span>
</code></pre></div> <p>除此之外，还可以使用update方法实现单条和多条数据的更新，使用方法如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=c1>#通过Django的ORM框架提供的API实现</span>
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=c1>#更新单条数据，查询条件filter使用于查询单条数据</span>
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>Product.objects.filter<span class=o>(</span><span class=nv>id</span><span class=o>=</span><span class=m>9</span><span class=o>)</span>.update<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;华为荣耀V10&#39;</span><span class=o>)</span>
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=c1>#更新多条数据，查询条件filter以列表格式返回，查询结果可能是一条或多条数据</span>
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>Product.objects.filter<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;荣耀V9&#39;</span><span class=o>)</span>.update<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;华为荣耀V9&#39;</span><span class=o>)</span>
<a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=c1>#全表数据更新，不使用查询条件，默认对全表的数据进行更新</span>
<a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a>Product.objects.update<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;华为荣耀V9&#39;</span><span class=o>)</span>
</code></pre></div> <h4 id=delete>delete<a class=headerlink href=#delete title="Permanent link">&para;</a></h4> <p>删除一条数据</p> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=c1># 删除一条id为1的数据</span>
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.get<span class=o>(</span><span class=nv>id</span><span class=o>=</span><span class=m>1</span><span class=o>)</span>
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>p.delete<span class=o>()</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=c1># 删除一条id为1的数据</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>Product.objects.get<span class=o>(</span><span class=nv>id</span><span class=o>=</span><span class=m>1</span><span class=o>)</span>.delete<span class=o>()</span>
</code></pre></div> <p>删除多条数据</p> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>Product.objects.filter<span class=o>(</span><span class=nv>weight</span><span class=o>=</span><span class=s1>&#39;119g&#39;</span><span class=o>)</span>.delete<span class=o>()</span>
</code></pre></div> <p>删除表中全部数据</p> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>Product.objects.all<span class=o>()</span>.delete<span class=o>()</span>
</code></pre></div> <p>数据删除有ORM框架的delete方法实现。</p> <p>从数据的删除和更新可以看到这两种数据操作都使用查询条件get和filter，查询条件get和filter的区别如下：</p> <table> <thead> <tr> <th>方法</th> <th>说明</th> </tr> </thead> <tbody> <tr> <td>get</td> <td>查询字段必须是主键或者唯一约束的字段，并且查询的数据必须存在，如果查询的字段有重复值或者查询的数据不存在，程序都会抛出异常信息。</td> </tr> <tr> <td>filter</td> <td>查询字段没有限制，只要该字段是数据表的某一字段即可。查询结果以列表的形式返回，如果查询结果为空（查询的数据在数据库中找不到），就返回空列表[]。</td> </tr> </tbody> </table> <h4 id=read>Read<a class=headerlink href=#read title="Permanent link">&para;</a></h4> <p>数据查询是数据库操作中最为复杂并且内容最多的部分，我们以代码的形式来讲述如何通过ORM框架提供的API实现数据查询，代码如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a>In<span class=w> </span><span class=o>[</span><span class=m>39</span><span class=o>]</span>:<span class=w> </span>from<span class=w> </span>index.models<span class=w> </span>import<span class=w> </span>*
<a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=c1>#全表查询，等同于SQL语句Select * from index_product,数据以类不形式返回</span>
<a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>In<span class=w> </span><span class=o>[</span><span class=m>40</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.all<span class=o>()</span>
<a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a>
<a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>In<span class=w> </span><span class=o>[</span><span class=m>41</span><span class=o>]</span>:<span class=w> </span>p<span class=o>[</span><span class=m>1</span><span class=o>]</span>.name
<a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a>Out<span class=o>[</span><span class=m>41</span><span class=o>]</span>:<span class=w> </span><span class=s1>&#39;华为荣耀V9&#39;</span>
<a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a>
<a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=c1>#查询前5条数据，等同于SQL语句Select * from index_product LIMIT 5</span>
<a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=c1>#SQL语句里面的LIMIT方法，在Django中使用Python的列表截取分解即可实现</span>
<a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a>In<span class=w> </span><span class=o>[</span><span class=m>43</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.all<span class=o>()[</span>:5<span class=o>]</span>
<a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a>
<a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a>In<span class=w> </span><span class=o>[</span><span class=m>44</span><span class=o>]</span>:<span class=w> </span>p
<a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a>
<a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a>
<a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a><span class=c1>#查询某个字段，等同于SQL语句Select  name from index_product</span>
<a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a><span class=c1>#values方法，以列表形式返回数据，列表元素以字典格式表示</span>
<a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a>In<span class=w> </span><span class=o>[</span><span class=m>45</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.values<span class=o>(</span><span class=s1>&#39;name&#39;</span><span class=o>)</span>
<a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a>
<a id=__codelineno-30-19 name=__codelineno-30-19 href=#__codelineno-30-19></a>In<span class=w> </span><span class=o>[</span><span class=m>46</span><span class=o>]</span>:<span class=w> </span>p<span class=o>[</span><span class=m>1</span><span class=o>][</span><span class=s1>&#39;name&#39;</span><span class=o>]</span>
<a id=__codelineno-30-20 name=__codelineno-30-20 href=#__codelineno-30-20></a>Out<span class=o>[</span><span class=m>46</span><span class=o>]</span>:<span class=w> </span><span class=s1>&#39;华为荣耀V9&#39;</span>
<a id=__codelineno-30-21 name=__codelineno-30-21 href=#__codelineno-30-21></a>
<a id=__codelineno-30-22 name=__codelineno-30-22 href=#__codelineno-30-22></a><span class=c1>#values_list方法，以列表表示返回数据，列表元素以元组格式表示</span>
<a id=__codelineno-30-23 name=__codelineno-30-23 href=#__codelineno-30-23></a>In<span class=w> </span><span class=o>[</span><span class=m>47</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.values_list<span class=o>(</span><span class=s1>&#39;name&#39;</span><span class=o>)[</span>:3<span class=o>]</span>
<a id=__codelineno-30-24 name=__codelineno-30-24 href=#__codelineno-30-24></a>
<a id=__codelineno-30-25 name=__codelineno-30-25 href=#__codelineno-30-25></a>In<span class=w> </span><span class=o>[</span><span class=m>48</span><span class=o>]</span>:<span class=w> </span>p
<a id=__codelineno-30-26 name=__codelineno-30-26 href=#__codelineno-30-26></a>Out<span class=o>[</span><span class=m>48</span><span class=o>]</span>:<span class=w> </span>&lt;QuerySet<span class=w> </span><span class=o>[(</span><span class=s1>&#39;华为荣耀V9&#39;</span>,<span class=o>)</span>,<span class=w> </span><span class=o>(</span><span class=s1>&#39;华为荣耀V9&#39;</span>,<span class=o>)</span>,<span class=w> </span><span class=o>(</span><span class=s1>&#39;华为荣耀V9&#39;</span>,<span class=o>)]</span>&gt;
<a id=__codelineno-30-27 name=__codelineno-30-27 href=#__codelineno-30-27></a>
<a id=__codelineno-30-28 name=__codelineno-30-28 href=#__codelineno-30-28></a><span class=c1>#使用get方法查询数据，等于同SQL语句Select * from index_product where id=2</span>
<a id=__codelineno-30-29 name=__codelineno-30-29 href=#__codelineno-30-29></a>In<span class=w> </span><span class=o>[</span><span class=m>49</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.get<span class=o>(</span><span class=nv>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>2</span><span class=o>)</span>
<a id=__codelineno-30-30 name=__codelineno-30-30 href=#__codelineno-30-30></a>
<a id=__codelineno-30-31 name=__codelineno-30-31 href=#__codelineno-30-31></a>In<span class=w> </span><span class=o>[</span><span class=m>50</span><span class=o>]</span>:<span class=w> </span>p.name
<a id=__codelineno-30-32 name=__codelineno-30-32 href=#__codelineno-30-32></a>Out<span class=o>[</span><span class=m>50</span><span class=o>]</span>:<span class=w> </span><span class=s1>&#39;华为荣耀V9&#39;</span>
<a id=__codelineno-30-33 name=__codelineno-30-33 href=#__codelineno-30-33></a>
<a id=__codelineno-30-34 name=__codelineno-30-34 href=#__codelineno-30-34></a><span class=c1>#使用filter方法查询数据，注意区分get和filter的差异</span>
<a id=__codelineno-30-35 name=__codelineno-30-35 href=#__codelineno-30-35></a>In<span class=w> </span><span class=o>[</span><span class=m>51</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.filter<span class=o>(</span><span class=nv>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>2</span><span class=o>)</span>
<a id=__codelineno-30-36 name=__codelineno-30-36 href=#__codelineno-30-36></a>
<a id=__codelineno-30-37 name=__codelineno-30-37 href=#__codelineno-30-37></a>In<span class=w> </span><span class=o>[</span><span class=m>52</span><span class=o>]</span>:<span class=w> </span>p<span class=o>[</span><span class=m>0</span><span class=o>]</span>.name
<a id=__codelineno-30-38 name=__codelineno-30-38 href=#__codelineno-30-38></a>Out<span class=o>[</span><span class=m>52</span><span class=o>]</span>:<span class=w> </span><span class=s1>&#39;华为荣耀V9&#39;</span>
<a id=__codelineno-30-39 name=__codelineno-30-39 href=#__codelineno-30-39></a>
<a id=__codelineno-30-40 name=__codelineno-30-40 href=#__codelineno-30-40></a>
<a id=__codelineno-30-41 name=__codelineno-30-41 href=#__codelineno-30-41></a><span class=c1>#SQL的 and查询主要在filter里面添加多个查询条件</span>
<a id=__codelineno-30-42 name=__codelineno-30-42 href=#__codelineno-30-42></a>In<span class=w> </span><span class=o>[</span><span class=m>53</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.filter<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;华为荣耀V9&#39;</span>,id<span class=o>=</span><span class=m>9</span><span class=o>)</span>
<a id=__codelineno-30-43 name=__codelineno-30-43 href=#__codelineno-30-43></a>
<a id=__codelineno-30-44 name=__codelineno-30-44 href=#__codelineno-30-44></a>In<span class=w> </span><span class=o>[</span><span class=m>54</span><span class=o>]</span>:<span class=w> </span>p
<a id=__codelineno-30-45 name=__codelineno-30-45 href=#__codelineno-30-45></a>Out<span class=o>[</span><span class=m>54</span><span class=o>]</span>:<span class=w> </span>&lt;QuerySet<span class=w> </span><span class=o>[</span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>9</span><span class=o>)</span>&gt;<span class=o>]</span>&gt;
<a id=__codelineno-30-46 name=__codelineno-30-46 href=#__codelineno-30-46></a>
<a id=__codelineno-30-47 name=__codelineno-30-47 href=#__codelineno-30-47></a>
<a id=__codelineno-30-48 name=__codelineno-30-48 href=#__codelineno-30-48></a><span class=c1>#SQL的or查询，需要引入Q，编写格式Q(field=value)|Q(field=value)</span>
<a id=__codelineno-30-49 name=__codelineno-30-49 href=#__codelineno-30-49></a><span class=c1>#等同于SQL语句Select * from index_product where name=&#39;华为荣耀V9‘ or id=9</span>
<a id=__codelineno-30-50 name=__codelineno-30-50 href=#__codelineno-30-50></a>In<span class=w> </span><span class=o>[</span><span class=m>55</span><span class=o>]</span>:<span class=w> </span>from<span class=w> </span>django.db.models<span class=w> </span>import<span class=w> </span>Q
<a id=__codelineno-30-51 name=__codelineno-30-51 href=#__codelineno-30-51></a>
<a id=__codelineno-30-52 name=__codelineno-30-52 href=#__codelineno-30-52></a>In<span class=w> </span><span class=o>[</span><span class=m>57</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.filter<span class=o>(</span>Q<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;华为荣耀V&#39;</span><span class=o>)</span><span class=p>|</span>Q<span class=o>(</span><span class=nv>id</span><span class=o>=</span><span class=m>9</span><span class=o>))</span>
<a id=__codelineno-30-53 name=__codelineno-30-53 href=#__codelineno-30-53></a>
<a id=__codelineno-30-54 name=__codelineno-30-54 href=#__codelineno-30-54></a>In<span class=w> </span><span class=o>[</span><span class=m>58</span><span class=o>]</span>:<span class=w> </span>p
<a id=__codelineno-30-55 name=__codelineno-30-55 href=#__codelineno-30-55></a>Out<span class=o>[</span><span class=m>58</span><span class=o>]</span>:<span class=w> </span>&lt;QuerySet<span class=w> </span><span class=o>[</span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>9</span><span class=o>)</span>&gt;<span class=o>]</span>&gt;
<a id=__codelineno-30-56 name=__codelineno-30-56 href=#__codelineno-30-56></a>
<a id=__codelineno-30-57 name=__codelineno-30-57 href=#__codelineno-30-57></a><span class=c1>#使用count方法统计查询数据的数据量</span>
<a id=__codelineno-30-58 name=__codelineno-30-58 href=#__codelineno-30-58></a>In<span class=w> </span><span class=o>[</span><span class=m>63</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.filter<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;华为荣耀V9&#39;</span><span class=o>)</span>.count<span class=o>()</span>
<a id=__codelineno-30-59 name=__codelineno-30-59 href=#__codelineno-30-59></a>
<a id=__codelineno-30-60 name=__codelineno-30-60 href=#__codelineno-30-60></a>In<span class=w> </span><span class=o>[</span><span class=m>64</span><span class=o>]</span>:<span class=w> </span>p
<a id=__codelineno-30-61 name=__codelineno-30-61 href=#__codelineno-30-61></a>Out<span class=o>[</span><span class=m>64</span><span class=o>]</span>:<span class=w> </span><span class=m>8</span>
<a id=__codelineno-30-62 name=__codelineno-30-62 href=#__codelineno-30-62></a>
<a id=__codelineno-30-63 name=__codelineno-30-63 href=#__codelineno-30-63></a><span class=c1>#去重查询，distinct方法无需设置参数，去重方式根据values设置的字段执行</span>
<a id=__codelineno-30-64 name=__codelineno-30-64 href=#__codelineno-30-64></a><span class=c1>#等同SQL语句Select DISTINCT name from index_product where name=&#39;华为荣耀V9’</span>
<a id=__codelineno-30-65 name=__codelineno-30-65 href=#__codelineno-30-65></a>In<span class=w> </span><span class=o>[</span><span class=m>65</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.values<span class=o>(</span><span class=s1>&#39;name&#39;</span><span class=o>)</span>.filter<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;华为荣耀V9&#39;</span><span class=o>)</span>.distinct<span class=o>()</span>
<a id=__codelineno-30-66 name=__codelineno-30-66 href=#__codelineno-30-66></a>
<a id=__codelineno-30-67 name=__codelineno-30-67 href=#__codelineno-30-67></a>In<span class=w> </span><span class=o>[</span><span class=m>66</span><span class=o>]</span>:<span class=w> </span>p
<a id=__codelineno-30-68 name=__codelineno-30-68 href=#__codelineno-30-68></a>Out<span class=o>[</span><span class=m>66</span><span class=o>]</span>:<span class=w> </span>&lt;QuerySet<span class=w> </span><span class=o>[{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;华为荣耀V9&#39;</span><span class=o>}]</span>&gt;
<a id=__codelineno-30-69 name=__codelineno-30-69 href=#__codelineno-30-69></a>
<a id=__codelineno-30-70 name=__codelineno-30-70 href=#__codelineno-30-70></a>
<a id=__codelineno-30-71 name=__codelineno-30-71 href=#__codelineno-30-71></a><span class=c1>#根据字段id降序排列，降序只要在order_by里面的字段前面加&quot;-即可&quot;</span>
<a id=__codelineno-30-72 name=__codelineno-30-72 href=#__codelineno-30-72></a><span class=c1>#order_by可设置多字段排序，如Product.objects.order_by(&#39;-id&#39;, &#39;name&#39;)</span>
<a id=__codelineno-30-73 name=__codelineno-30-73 href=#__codelineno-30-73></a>In<span class=w> </span><span class=o>[</span><span class=m>67</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.order_by<span class=o>(</span><span class=s1>&#39;-id&#39;</span><span class=o>)</span>
<a id=__codelineno-30-74 name=__codelineno-30-74 href=#__codelineno-30-74></a>
<a id=__codelineno-30-75 name=__codelineno-30-75 href=#__codelineno-30-75></a>In<span class=w> </span><span class=o>[</span><span class=m>68</span><span class=o>]</span>:<span class=w> </span>p
<a id=__codelineno-30-76 name=__codelineno-30-76 href=#__codelineno-30-76></a>Out<span class=o>[</span><span class=m>68</span><span class=o>]</span>:<span class=w> </span>&lt;QuerySet<span class=w> </span><span class=o>[</span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>11</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>9</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>8</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>7</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>5</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>4</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>3</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>2</span><span class=o>)</span>&gt;<span class=o>]</span>&gt;
<a id=__codelineno-30-77 name=__codelineno-30-77 href=#__codelineno-30-77></a>
<a id=__codelineno-30-78 name=__codelineno-30-78 href=#__codelineno-30-78></a><span class=c1>#聚合查询，实现对数据值求和、求平均值等。Django提供annotate和aggregate方法实现</span>
<a id=__codelineno-30-79 name=__codelineno-30-79 href=#__codelineno-30-79></a><span class=c1>#annotate类似于SQL里面的GROUP BY方法，如果不设置values，就会默认对主键进行GROUP BY分组</span>
<a id=__codelineno-30-80 name=__codelineno-30-80 href=#__codelineno-30-80></a><span class=c1>#等同于SQL语句Select name,SUM(id) AS &#39;id_sum&#39; from index_product GROUP BY NAME ORDER BY NULL</span>
<a id=__codelineno-30-81 name=__codelineno-30-81 href=#__codelineno-30-81></a>In<span class=w> </span><span class=o>[</span><span class=m>69</span><span class=o>]</span>:<span class=w> </span>from<span class=w> </span>django.db.models<span class=w> </span>import<span class=w> </span>Sum,<span class=w> </span>Count
<a id=__codelineno-30-82 name=__codelineno-30-82 href=#__codelineno-30-82></a>
<a id=__codelineno-30-83 name=__codelineno-30-83 href=#__codelineno-30-83></a>In<span class=w> </span><span class=o>[</span><span class=m>70</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.values<span class=o>(</span><span class=s1>&#39;name&#39;</span><span class=o>)</span>.annotate<span class=o>(</span>Sum<span class=o>(</span><span class=s1>&#39;id&#39;</span><span class=o>))</span>
<a id=__codelineno-30-84 name=__codelineno-30-84 href=#__codelineno-30-84></a>In<span class=w> </span><span class=o>[</span><span class=m>71</span><span class=o>]</span>:<span class=w> </span>print<span class=o>(</span>p.query<span class=o>)</span>
<a id=__codelineno-30-85 name=__codelineno-30-85 href=#__codelineno-30-85></a>SELECT<span class=w> </span><span class=s2>&quot;index_product&quot;</span>.<span class=s2>&quot;name&quot;</span>,<span class=w> </span>SUM<span class=o>(</span><span class=s2>&quot;index_product&quot;</span>.<span class=s2>&quot;id&quot;</span><span class=o>)</span><span class=w> </span>AS<span class=w> </span><span class=s2>&quot;id__sum&quot;</span><span class=w> </span>FROM<span class=w> </span><span class=s2>&quot;index_product&quot;</span><span class=w> </span>GROUP<span class=w> </span>BY<span class=w> </span><span class=s2>&quot;index_product&quot;</span>.<span class=s2>&quot;name&quot;</span>
<a id=__codelineno-30-86 name=__codelineno-30-86 href=#__codelineno-30-86></a>
<a id=__codelineno-30-87 name=__codelineno-30-87 href=#__codelineno-30-87></a><span class=c1>#aggregate是将某个字段的值进行计算并置返回技术结果</span>
<a id=__codelineno-30-88 name=__codelineno-30-88 href=#__codelineno-30-88></a><span class=c1>#等同于SQL语句Select COUNT(id) AS &#39;id_count&#39; from index_product</span>
<a id=__codelineno-30-89 name=__codelineno-30-89 href=#__codelineno-30-89></a>In<span class=w> </span><span class=o>[</span><span class=m>72</span><span class=o>]</span>:<span class=w> </span>from<span class=w> </span>django.db.models<span class=w> </span>import<span class=w> </span>Count
<a id=__codelineno-30-90 name=__codelineno-30-90 href=#__codelineno-30-90></a>
<a id=__codelineno-30-91 name=__codelineno-30-91 href=#__codelineno-30-91></a>In<span class=w> </span><span class=o>[</span><span class=m>73</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.aggregate<span class=o>(</span><span class=nv>id_count</span><span class=o>=</span>Count<span class=o>(</span><span class=s1>&#39;id&#39;</span><span class=o>))</span>
<a id=__codelineno-30-92 name=__codelineno-30-92 href=#__codelineno-30-92></a>
<a id=__codelineno-30-93 name=__codelineno-30-93 href=#__codelineno-30-93></a>In<span class=w> </span><span class=o>[</span><span class=m>74</span><span class=o>]</span>:<span class=w> </span>p
<a id=__codelineno-30-94 name=__codelineno-30-94 href=#__codelineno-30-94></a>Out<span class=o>[</span><span class=m>74</span><span class=o>]</span>:<span class=w> </span><span class=o>{</span><span class=s1>&#39;id_count&#39;</span>:<span class=w> </span><span class=m>8</span><span class=o>}</span>
</code></pre></div> <p>上述代码将是了日常开发中常用的数据查询方法，但又时候需要设置不同的查询条件来满足多方面的查询要求。上述例子中，查询条件filter和get使用等值的方法来匹配结果。若想使用大于、不等于和模糊查询的匹配方法，则可以使用如下表所以的匹配附实现：</p> <table> <thead> <tr> <th>匹配符</th> <th>使用</th> <th>说明</th> </tr> </thead> <tbody> <tr> <td><code>__exact</code></td> <td><code>filter(name__exact='荣耀')</code></td> <td>精确等于，如 SQL 的 like ‘荣耀’</td> </tr> <tr> <td><code>__iexact</code></td> <td><code>filter(name__iexact='荣耀')</code></td> <td>精确等于并忽略大小写</td> </tr> <tr> <td><code>__contains</code></td> <td><code>filter(name__contains='荣耀')</code></td> <td>模糊匹配，如 SQL 的 like '%荣耀%'</td> </tr> <tr> <td><code>__icontains</code></td> <td><code>filter(name__icontains='荣耀')</code></td> <td>模糊匹配，忽略大小写</td> </tr> <tr> <td><code>__gt</code></td> <td><code>filter(id__gt=5)</code></td> <td>大于</td> </tr> <tr> <td><code>__gte</code></td> <td><code>filter(id__gte=5)</code></td> <td>大于等于</td> </tr> <tr> <td><code>__lt</code></td> <td><code>filter(id__lt=5)</code></td> <td>小于</td> </tr> <tr> <td><code>__lte</code></td> <td><code>filter(id__lte=5)</code></td> <td>小于等于</td> </tr> <tr> <td><code>__in</code></td> <td><code>filter(id__in=[1,2,3])</code></td> <td>判断是否在列表内</td> </tr> <tr> <td><code>__startswith</code></td> <td><code>filter(name__startswith='荣耀')</code></td> <td>以...开头</td> </tr> <tr> <td><code>__istartswith</code></td> <td><code>filter(name__istartswith='荣耀')</code></td> <td>以...开头并忽略大小写</td> </tr> <tr> <td><code>__endswith</code></td> <td><code>filter(name__endswith='荣耀')</code></td> <td>以...结尾</td> </tr> <tr> <td><code>__iendswith</code></td> <td><code>filter(name__iendswith='荣耀')</code></td> <td>以...结尾并忽略大小写</td> </tr> <tr> <td><code>__range</code></td> <td><code>filter(name__range='荣耀')</code></td> <td>在...范围内</td> </tr> <tr> <td><code>__year</code></td> <td><code>filter(date__year=2018)</code></td> <td>日期字段的年份</td> </tr> <tr> <td><code>__month</code></td> <td><code>filter(date__month=12)</code></td> <td>日期字段的月份</td> </tr> <tr> <td><code>__day</code></td> <td><code>filter(date__day='')</code></td> <td>日期字段的天数</td> </tr> <tr> <td><code>__isnull</code></td> <td><code>filter(name__isnull=True/False)</code></td> <td>判断是否为空</td> </tr> </tbody> </table> <p>从表中可以看到，只要在查询的字段后添加相应的匹配符，就能实现多种不同的数据查询，如<code>filter(id__gt=9)</code>用于获取字段id大于9的数据，在shell模式下使用该匹配符进行数据查询，代码如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a>In<span class=w> </span><span class=o>[</span><span class=m>75</span><span class=o>]</span>:<span class=w> </span>from<span class=w> </span>index.models<span class=w> </span>import<span class=w> </span>*
<a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>
<a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>In<span class=w> </span><span class=o>[</span><span class=m>76</span><span class=o>]</span>:<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.filter<span class=o>(</span><span class=nv>id__gt</span><span class=o>=</span><span class=m>9</span><span class=o>)</span>
<a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>
<a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>In<span class=w> </span><span class=o>[</span><span class=m>77</span><span class=o>]</span>:<span class=w> </span>p
<a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a>Out<span class=o>[</span><span class=m>77</span><span class=o>]</span>:<span class=w> </span>&lt;QuerySet<span class=w> </span><span class=o>[</span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>10</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>11</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>13</span><span class=o>)</span>&gt;<span class=o>]</span>&gt;
<a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>
<a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>&gt;&gt;&gt;<span class=w> </span><span class=k>for</span><span class=w> </span>product<span class=w> </span><span class=k>in</span><span class=w> </span>p:
<a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a>...<span class=w>     </span>print<span class=o>(</span>f<span class=s2>&quot;Product: {product.name}, {product.weight}, {product.size}&quot;</span><span class=o>)</span><span class=w> </span>
<a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>...
<a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>Product:<span class=w> </span>Cheory,<span class=w> </span>g,<span class=w> </span>XL
<a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a>Product:<span class=w> </span>荣耀V9,<span class=w> </span>111g,<span class=w> </span><span class=m>120</span>*75*7mm
<a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a>Product:<span class=w> </span>荣耀V9,<span class=w> </span>111g,<span class=w> </span><span class=m>120</span>*75*7mm
</code></pre></div> <h4 id=多表查询>多表查询<a class=headerlink href=#多表查询 title="Permanent link">&para;</a></h4> <p>一对多或一对一的表关系是通过外键实现关联的，而多表查询分为正向查询和反向查询。以模型Product和Type为例：</p> <p>1、如果查询对象的主体是模型Type，要查询模型Type的数据，那么该查询成为正向查询。</p> <p>2、如果查询对象的主体是模型Type，要通过模型Type查询模型Product的数据，那么该查询称为反向查询。</p> <p>无论是正向查询还是反向查询，两者的实现方法大致相同，代码如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=o>(</span>venv<span class=o>)</span><span class=w> </span>PS<span class=w> </span>D:<span class=se>\c</span>oder<span class=se>\p</span>ython-project<span class=se>\M</span>yDjango&gt;<span class=w> </span>python<span class=w> </span>manage.py<span class=w> </span>shell
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>&gt;&gt;&gt;<span class=w> </span>from<span class=w> </span>index.models<span class=w> </span>import<span class=w> </span>*<span class=w>              </span>
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=c1># 正向查询                                </span>
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>&gt;&gt;&gt;<span class=w> </span><span class=nv>t</span><span class=w> </span><span class=o>=</span><span class=w> </span>Type.objects.filter<span class=o>(</span><span class=nv>product__id</span><span class=o>=</span><span class=m>9</span><span class=o>)</span>
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>&gt;&gt;&gt;<span class=w> </span>t
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>&lt;QuerySet<span class=w> </span><span class=o>[</span>&lt;Type:<span class=w> </span>Type<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>3</span><span class=o>)</span>&gt;<span class=o>]</span>&gt;
<a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a>&gt;&gt;&gt;<span class=w> </span>t<span class=o>[</span><span class=m>0</span><span class=o>]</span>.type_name
<a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=s1>&#39;智能穿戴&#39;</span>
<a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>
<a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=c1># 反向查询</span>
<a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a>&gt;&gt;&gt;<span class=w> </span>t<span class=o>[</span><span class=m>0</span><span class=o>]</span>.product_set.values<span class=o>(</span><span class=s1>&#39;name&#39;</span><span class=o>)</span>
<a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>&lt;QuerySet<span class=w> </span><span class=o>[{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Pluots&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;aluots plus&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Orange&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Rhspberry&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;华为荣耀 v9&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Cheory&#39;</span><span class=o>}]</span>&gt;
</code></pre></div> <p>从上面的代码分析，因为正向查询的查询对象主体和查询的数据都来自于模型Type,因此正向查询在数据库中只执行了一次SQL查询。</p> <p>而反向查询通过 <code>t[0].product_set.values('name')</code> 来获取模型Product的数据，因此反向查询执行了两次SQL查询，首先查询模型Type的数据，然后根据第一次查询的结果再查询与模型 Product相互关联的数据。</p> <p>为了减少反向查询的查询次数，我们可以使用 select_related 方法实现，该方法只执行一次SQL查询就能达到反向查询的效果。select_related 使用方法如下：</p> <p>查询模型 Product 的字段 name 和模型 Type 的字段 type_name <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=c1># &gt;&gt;&gt; p = Product.objects.select_related(&#39;type&#39;).values(&#39;name&#39;,&#39;type__type_name&#39;) </span>
<a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=c1># &gt;&gt;&gt; print(p.query) </span>
<a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=c1># SELECT `index_product`.`name`, `index_type`.`type_name` FROM `index_product` INNER JOIN `index_type` ON (`index_product`.`type_id` = `index_type`.`id`)</span>
<a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>
<a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>&gt;&gt;&gt;<span class=w> </span>from<span class=w> </span>index.models<span class=w> </span>import<span class=w> </span>*<span class=w>                   </span>
<a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>&gt;&gt;&gt;<span class=w> </span>Product.objects.select_related<span class=o>(</span><span class=s1>&#39;type&#39;</span><span class=o>)</span>.values<span class=o>(</span><span class=s1>&#39;name&#39;</span>,<span class=s1>&#39;type__type_name&#39;</span><span class=o>)</span>
<a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>&lt;QuerySet<span class=w> </span><span class=o>[{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;omni-Mango&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;手机&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;荣耀V9&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;手机&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;荣耀V9&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;手机&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Huawei v1&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:
<a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=w> </span><span class=s1>&#39;平板电脑&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Khwi plus&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;平板电脑&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Apfle&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;平板电脑&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Pluots&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;智能穿戴&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;aluots plus&#39;</span>,<span class=w> </span><span class=s1>&#39;ty</span>
<a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a><span class=s1>pe__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;智能穿戴&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Orange&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;智能穿戴&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Rhspberry&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;智能穿戴&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;华为荣耀 v9&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;智能穿戴&#39;</span><span class=o>}</span>,<span class=w> </span><span class=o>{</span><span class=s1>&#39;name&#39;</span>:<span class=w> </span><span class=s1>&#39;Cheory&#39;</span>,<span class=w> </span><span class=s1>&#39;type__type_name&#39;</span>:<span class=w> </span><span class=s1>&#39;智能穿戴&#39;</span><span class=o>}]</span>&gt;
</code></pre></div></p> <p>查询两个模型的全部数据</p> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=c1># &gt;&gt;&gt; p = Product.objects.select_related(&#39;type&#39;).all()                            </span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=c1># &gt;&gt;&gt; print(p.query)                                   </span>
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=c1># SELECT `index_product`.`id`, `index_product`.`name`, `index_product`.`weight`, `index_product`.`size`, `index_product`.`type_id`, `index_type`.`id`, `index_type`.`type_name` FROM `index_product` INNER JOIN `index_type` ON (`index_product`.`type_id` = `index_type`.`id`)</span>
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>&gt;&gt;&gt;<span class=w> </span>from<span class=w> </span>index.models<span class=w> </span>import<span class=w> </span>*<span class=w>  </span>
<a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a>&gt;&gt;&gt;<span class=w> </span>Product.objects.select_related<span class=o>(</span><span class=s1>&#39;type&#39;</span><span class=o>)</span>.all<span class=o>()</span><span class=w>    </span>
<a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a>&lt;QuerySet<span class=w> </span><span class=o>[</span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>4</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>11</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>13</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>2</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>3</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>5</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>1</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>6</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>7</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>8</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>9</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>10</span><span class=o>)</span>&gt;<span class=o>]</span>&gt;
</code></pre></div> <p>获取两个模型的数据，以模型Product的id大于8为查询条件 <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1># &gt;&gt; p = Product.objects.select_related(&#39;type&#39;).filter(id__gt=8)</span>
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=c1># #输出SQL查询语句</span>
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=c1># &gt;&gt;&gt; print(p.query)</span>
<a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=c1># SELECT `index_product`.`id`, `index_product`.`name`, `index_product`.`weight`, `index_product`.`size`, `index_product`.`type_id`, `index_type`.`id`, `index_type`.`type_name` FROM `index_product` INNER JOIN `index_type` ON (`index_product`.`type_id` = `index_type`.`id`) WHERE `index_product`.`id` &gt; 8</span>
<a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>
<a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>&gt;&gt;&gt;<span class=w> </span>Product.objects.select_related<span class=o>(</span><span class=s1>&#39;type&#39;</span><span class=o>)</span>.filter<span class=o>(</span><span class=nv>id__gt</span><span class=o>=</span><span class=m>8</span><span class=o>)</span><span class=w>     </span>
<a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a>&lt;QuerySet<span class=w> </span><span class=o>[</span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>9</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>10</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>11</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>13</span><span class=o>)</span>&gt;<span class=o>]</span>&gt;
</code></pre></div></p> <p>获取两模型数据，以模型Type的type_name字段等于手机为查询条件 <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1># &gt;&gt;&gt; p = Product.objects.select_related(&#39;type&#39;).filter(type__type_name=&#39;手机&#39;).all()</span>
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=c1># &gt;&gt;&gt; print(p.query) </span>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=c1># SELECT `index_product`.`id`, `index_product`.`name`, `index_product`.`weight`, `index_product`.`size`, `index_product`.`type_id`, `index_type`.`id`, `index_type`.`type_name` FROM `index_product` INNER JOIN `index_type` ON (`index_product`.`type_id` = `index_type`.`id`) WHERE `index_type`.`type_name` = 手机</span>
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a>&gt;&gt;&gt;<span class=w> </span>Product.objects.select_related<span class=o>(</span><span class=s1>&#39;type&#39;</span><span class=o>)</span>.filter<span class=o>(</span><span class=nv>type__type_name</span><span class=o>=</span><span class=s1>&#39;手机&#39;</span><span class=o>)</span>.all<span class=o>()</span><span class=w>     </span>
<a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>&lt;QuerySet<span class=w> </span><span class=o>[</span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>4</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>11</span><span class=o>)</span>&gt;,<span class=w> </span>&lt;Product:<span class=w> </span>Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>13</span><span class=o>)</span>&gt;<span class=o>]</span>&gt;
<a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a>&gt;&gt;&gt;<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Product.objects.select_related<span class=o>(</span><span class=s1>&#39;type&#39;</span><span class=o>)</span>.filter<span class=o>(</span><span class=nv>type__type_name</span><span class=o>=</span><span class=s1>&#39;手机&#39;</span><span class=o>)</span>.all<span class=o>()</span>
<a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=c1>#输出模型Product信息</span>
<a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a>&gt;&gt;&gt;<span class=w> </span>p<span class=o>[</span><span class=m>0</span><span class=o>]</span>
<a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a>&lt;Product:Product<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>1</span><span class=o>)</span>&gt;
<a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a><span class=c1>#输出模型Product所关联模型Type的信息</span>
<a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a>&gt;&gt;<span class=w> </span>p<span class=o>[</span><span class=m>0</span><span class=o>]</span>.type
<a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a>&lt;Type:Type<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>1</span><span class=o>)</span>&gt;
<a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a>&gt;&gt;<span class=w> </span>p<span class=o>[</span><span class=m>0</span><span class=o>]</span>.type.type_name
<a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a>手机·
</code></pre></div></p> <p>select related的使用说明如下：</p> <ul> <li>以模型Product作为查询对象主体，当然也可以使用模型Type,只要两表之间有外键关联即可。</li> <li>设置 select_related 的参数值为“type”,该参数值是模型Product定义的type字段。</li> <li>如果在查询过程中需要使用另一个数据表的字段，可以使用 <code>"外键__字段名"</code> 来指向该表的字段。如 <code>type__type_name</code> 代表由模型Product的外键type指向模型 Type 的字段 type_name ,type代表模型Product的外键 type,双下画线“_”代表连接符，type_name是模型Type的字段。</li> </ul> <p>除此之外，select_related 还可以支持三个或三个以上的数据表同时查询，以下面的例子进行说明。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>
<a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>
<a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=c1># 省份信息表</span>
<a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=k>class</span> <span class=nc>Province</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a>
<a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>
<a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=c1># 城市信息表</span>
<a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=k>class</span> <span class=nc>City</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
<a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>    <span class=n>province</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>Province</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
<a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a>
<a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a>
<a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a><span class=c1># 人物信息表</span>
<a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a><span class=k>class</span> <span class=nc>Person</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a>    <span class=n>living</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>City</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
</code></pre></div> <p>然后重新执行数据迁移。如下 <div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a>python<span class=w> </span>manage.py<span class=w> </span>makemigrations
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>python<span class=w> </span>manage.py<span class=w> </span>migrate
</code></pre></div></p> <p>在上述模型中，模型Person通过外键living关联模型City，模型City通过外键province关联模型Province，从而使三个模型形成一种递进关系。</p> <p>例如查询张三现在所居住的省份，首先通过模型Person和模型City查出张三所居住的城市，然后通过模型City和模型Province查询当前城市所属的省份。因此，select_related的实现方法如下：</p> <p>首先生成测试数据 <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>mydjango</span><span class=o>`</span><span class=p>.</span><span class=o>`</span><span class=n>index_province</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>11</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;湖北省&#39;</span><span class=p>);</span>
<a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>mydjango</span><span class=o>`</span><span class=p>.</span><span class=o>`</span><span class=n>index_province</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;广东省&#39;</span><span class=p>);</span>
<a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>mydjango</span><span class=o>`</span><span class=p>.</span><span class=o>`</span><span class=n>index_city</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>province_id</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;武汉&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>);</span>
<a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>mydjango</span><span class=o>`</span><span class=p>.</span><span class=o>`</span><span class=n>index_city</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>province_id</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;深圳&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>12</span><span class=p>);</span>
<a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>mydjango</span><span class=o>`</span><span class=p>.</span><span class=o>`</span><span class=n>index_person</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>living_id</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;胡建力&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>mydjango</span><span class=o>`</span><span class=p>.</span><span class=o>`</span><span class=n>index_person</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=n>living_id</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;胡小建&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>);</span>
</code></pre></div></p> <div class=highlight><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=o>(</span>venv<span class=o>)</span><span class=w> </span>PS<span class=w> </span>D:<span class=se>\c</span>oder<span class=se>\p</span>ython-project<span class=se>\M</span>yDjango&gt;<span class=w> </span>python<span class=w> </span>manage.py<span class=w> </span>shell
<a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>&gt;&gt;&gt;<span class=w> </span>from<span class=w> </span>index.models<span class=w> </span>import<span class=w> </span>*<span class=w>     </span>
<a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>&gt;&gt;&gt;<span class=w> </span><span class=nv>p</span><span class=w> </span><span class=o>=</span><span class=w> </span>Person.objects.select_related<span class=o>(</span><span class=s1>&#39;living__province&#39;</span><span class=o>)</span>.get<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;胡建力&#39;</span><span class=o>)</span>
<a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a>&gt;&gt;&gt;<span class=w> </span>p.living.province
<a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>&lt;Province:<span class=w> </span>Province<span class=w> </span>object<span class=w> </span><span class=o>(</span><span class=m>11</span><span class=o>)</span>&gt;
<a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a>&gt;&gt;&gt;<span class=w> </span>p.living.province.name
<a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=s1>&#39;湖北省&#39;</span>
</code></pre></div> <p>在上述例子可以发现，通过设置 select_related 的参数值即可实现三个或三个以上的多表查询。例子中的参数值为 <code>living__province</code>, 参数值说明如下：</p> <p>1、living是模型Person的字段，该字段指向模型City。</p> <p>2、province是模型City的字段，该字段指向模型Province</p> <p>3、两个字段之间使用双下划线连接并且两个字段都是指向另一个模型的，这说明在查询过程中，模型Person的字段living指向模型City，再从模型City的字段province指向模型Province，从而实现两个或三个以上的多表查询。</p> <h2 id=3-使用django开发rest-接口>3. 使用Django开发REST 接口<a class=headerlink href=#3-使用django开发rest-接口 title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a>git<span class=w> </span>chekout<span class=w> </span>-b<span class=w> </span><span class=s2>&quot;django-json&quot;</span>
</code></pre></div> <p>我们以在Django框架中使用的图书英雄案例来写一套支持图书数据增删改查的REST API接口，来理解REST API的开发。</p> <p>在此案例中，前后端均发送JSON格式数据, 使用视图基类 View 。</p> <h5 id=基本配置>基本配置<a class=headerlink href=#基本配置 title="Permanent link">&para;</a></h5> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=c1>#创建虚拟环境</span>
<a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>python<span class=w> </span>-m<span class=w> </span>venv<span class=w> </span>bookv1
<a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=nb>cd</span><span class=w> </span>bookv1
<a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a>
<a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=c1># 激活虚拟环境</span>
<a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=nb>source</span><span class=w> </span>bin/activite
<a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=c1># 此时就可以在虚拟环境中使用pip install &lt;package_name&gt;来安装python包了</span>
<a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a>
<a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a><span class=c1># 创建项目</span>
<a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a><span class=o>(</span>venv<span class=o>)</span><span class=c1># pip install django==4.2.7</span>
<a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a><span class=o>(</span>venv<span class=o>)</span><span class=c1># django-admin startproject bookv1</span>
<a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a><span class=c1># 创建app</span>
<a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a><span class=o>(</span>venv<span class=o>)</span><span class=c1># python manage.py startapp app</span>
</code></pre></div> <p><code>bookv1/settings.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=c1># 设置时区</span>
<a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=n>LANGUAGE_CODE</span> <span class=o>=</span> <span class=s1>&#39;zh-hans&#39;</span>
<a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=n>TIME_ZONE</span> <span class=o>=</span> <span class=s1>&#39;Asia/Shanghai&#39;</span>
<a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=n>USE_I18N</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=n>USE_L10N</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=n>USE_TZ</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a>
<a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=n>INSTALLED_APPS</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a>    <span class=s1>&#39;django.contrib.admin&#39;</span><span class=p>,</span>
<a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a>    <span class=s1>&#39;django.contrib.auth&#39;</span><span class=p>,</span>
<a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a>    <span class=s1>&#39;django.contrib.contenttypes&#39;</span><span class=p>,</span>
<a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a>    <span class=s1>&#39;django.contrib.sessions&#39;</span><span class=p>,</span>
<a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a>    <span class=s1>&#39;django.contrib.messages&#39;</span><span class=p>,</span>
<a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a>    <span class=s1>&#39;django.contrib.staticfiles&#39;</span><span class=p>,</span>
<a id=__codelineno-43-15 name=__codelineno-43-15 href=#__codelineno-43-15></a>    <span class=s1>&#39;app.apps.AppConfig&#39;</span><span class=p>,</span>
<a id=__codelineno-43-16 name=__codelineno-43-16 href=#__codelineno-43-16></a><span class=p>]</span>
<a id=__codelineno-43-17 name=__codelineno-43-17 href=#__codelineno-43-17></a>
<a id=__codelineno-43-18 name=__codelineno-43-18 href=#__codelineno-43-18></a><span class=n>DATABASES</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-43-19 name=__codelineno-43-19 href=#__codelineno-43-19></a>    <span class=s1>&#39;default&#39;</span><span class=p>:</span> <span class=p>{</span>
<a id=__codelineno-43-20 name=__codelineno-43-20 href=#__codelineno-43-20></a>        <span class=s1>&#39;ENGINE&#39;</span><span class=p>:</span> <span class=s1>&#39;django.db.backends.mysql&#39;</span><span class=p>,</span>
<a id=__codelineno-43-21 name=__codelineno-43-21 href=#__codelineno-43-21></a>        <span class=s1>&#39;NAME&#39;</span><span class=p>:</span> <span class=s1>&#39;book_demo&#39;</span><span class=p>,</span>
<a id=__codelineno-43-22 name=__codelineno-43-22 href=#__codelineno-43-22></a>        <span class=s1>&#39;HOST&#39;</span><span class=p>:</span> <span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span>
<a id=__codelineno-43-23 name=__codelineno-43-23 href=#__codelineno-43-23></a>        <span class=s1>&#39;USER&#39;</span><span class=p>:</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span>
<a id=__codelineno-43-24 name=__codelineno-43-24 href=#__codelineno-43-24></a>        <span class=s1>&#39;PASSWORD&#39;</span><span class=p>:</span> <span class=s1>&#39;oschina&#39;</span><span class=p>,</span>
<a id=__codelineno-43-25 name=__codelineno-43-25 href=#__codelineno-43-25></a>        <span class=s1>&#39;PORT&#39;</span><span class=p>:</span> <span class=s1>&#39;3306&#39;</span><span class=p>,</span>
<a id=__codelineno-43-26 name=__codelineno-43-26 href=#__codelineno-43-26></a>        <span class=s2>&quot;OPTIONS&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;init_command&quot;</span><span class=p>:</span> <span class=s2>&quot;SET default_storage_engine=INNODB;&quot;</span><span class=p>}</span>
<a id=__codelineno-43-27 name=__codelineno-43-27 href=#__codelineno-43-27></a>    <span class=p>}</span>
<a id=__codelineno-43-28 name=__codelineno-43-28 href=#__codelineno-43-28></a><span class=p>}</span>
</code></pre></div> <h5 id=模型>模型<a class=headerlink href=#模型 title="Permanent link">&para;</a></h5> <p><code>app/models.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
<a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>
<a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a>
<a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=c1># Create your models here.</span>
<a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=c1># 定义图书模型类BookInfo</span>
<a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=k>class</span> <span class=nc>BookInfo</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a>    <span class=n>btitle</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;名称&#39;</span><span class=p>)</span>
<a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a>    <span class=n>bpub_date</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateField</span><span class=p>(</span><span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;发布日期&#39;</span><span class=p>)</span>
<a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a>    <span class=n>bread</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;阅读量&#39;</span><span class=p>)</span>
<a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>    <span class=n>bcomment</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;评论量&#39;</span><span class=p>)</span>
<a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a>    <span class=n>is_delete</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>BooleanField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;逻辑删除&#39;</span><span class=p>)</span>
<a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a>    <span class=c1># 注意,如果模型已经迁移建表并且表中如果已经有数据了,那么后新增的字段,必须给默认值或可以为空,不然迁移就报错</span>
<a id=__codelineno-44-13 name=__codelineno-44-13 href=#__codelineno-44-13></a>    <span class=c1># upload_to 指定上传到media_root配置项的目录中再创建booktest里面</span>
<a id=__codelineno-44-14 name=__codelineno-44-14 href=#__codelineno-44-14></a>    <span class=n>image</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ImageField</span><span class=p>(</span><span class=n>upload_to</span><span class=o>=</span><span class=s1>&#39;booktest&#39;</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;图片&#39;</span><span class=p>,</span> <span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-44-15 name=__codelineno-44-15 href=#__codelineno-44-15></a>
<a id=__codelineno-44-16 name=__codelineno-44-16 href=#__codelineno-44-16></a>
<a id=__codelineno-44-17 name=__codelineno-44-17 href=#__codelineno-44-17></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-44-18 name=__codelineno-44-18 href=#__codelineno-44-18></a>        <span class=n>db_table</span> <span class=o>=</span> <span class=s1>&#39;tb_books&#39;</span>  <span class=c1># 指明数据库表名</span>
<a id=__codelineno-44-19 name=__codelineno-44-19 href=#__codelineno-44-19></a>        <span class=n>verbose_name</span> <span class=o>=</span> <span class=s1>&#39;图书&#39;</span>  <span class=c1># 在admin站点中显示的名称</span>
<a id=__codelineno-44-20 name=__codelineno-44-20 href=#__codelineno-44-20></a>        <span class=n>verbose_name_plural</span> <span class=o>=</span> <span class=n>verbose_name</span>  <span class=c1># 显示的复数名称</span>
<a id=__codelineno-44-21 name=__codelineno-44-21 href=#__codelineno-44-21></a>
<a id=__codelineno-44-22 name=__codelineno-44-22 href=#__codelineno-44-22></a>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-44-23 name=__codelineno-44-23 href=#__codelineno-44-23></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;定义每个数据对象的显示信息&quot;&quot;&quot;</span>
<a id=__codelineno-44-24 name=__codelineno-44-24 href=#__codelineno-44-24></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>btitle</span>
<a id=__codelineno-44-25 name=__codelineno-44-25 href=#__codelineno-44-25></a>
<a id=__codelineno-44-26 name=__codelineno-44-26 href=#__codelineno-44-26></a>    <span class=k>def</span> <span class=nf>pub_date_format</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-44-27 name=__codelineno-44-27 href=#__codelineno-44-27></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>bpub_date</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%Y-%m-</span><span class=si>%d</span><span class=s1>&#39;</span><span class=p>)</span>
<a id=__codelineno-44-28 name=__codelineno-44-28 href=#__codelineno-44-28></a>    <span class=c1># 修改方法名在列表界面的展示</span>
<a id=__codelineno-44-29 name=__codelineno-44-29 href=#__codelineno-44-29></a>    <span class=n>pub_date_format</span><span class=o>.</span><span class=n>short_description</span> <span class=o>=</span> <span class=s1>&#39;发布日期&#39;</span>
<a id=__codelineno-44-30 name=__codelineno-44-30 href=#__codelineno-44-30></a>    <span class=c1># 指定自定义方法的排序依据</span>
<a id=__codelineno-44-31 name=__codelineno-44-31 href=#__codelineno-44-31></a>    <span class=n>pub_date_format</span><span class=o>.</span><span class=n>admin_order_field</span> <span class=o>=</span> <span class=s1>&#39;bpub_date&#39;</span>
<a id=__codelineno-44-32 name=__codelineno-44-32 href=#__codelineno-44-32></a>
<a id=__codelineno-44-33 name=__codelineno-44-33 href=#__codelineno-44-33></a>
<a id=__codelineno-44-34 name=__codelineno-44-34 href=#__codelineno-44-34></a><span class=c1># 定义英雄模型类HeroInfo</span>
<a id=__codelineno-44-35 name=__codelineno-44-35 href=#__codelineno-44-35></a><span class=k>class</span> <span class=nc>HeroInfo</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-44-36 name=__codelineno-44-36 href=#__codelineno-44-36></a>    <span class=n>GENDER_CHOICES</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-44-37 name=__codelineno-44-37 href=#__codelineno-44-37></a>        <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;female&#39;</span><span class=p>),</span>
<a id=__codelineno-44-38 name=__codelineno-44-38 href=#__codelineno-44-38></a>        <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;male&#39;</span><span class=p>)</span>
<a id=__codelineno-44-39 name=__codelineno-44-39 href=#__codelineno-44-39></a>    <span class=p>)</span>
<a id=__codelineno-44-40 name=__codelineno-44-40 href=#__codelineno-44-40></a>    <span class=n>hname</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;名称&#39;</span><span class=p>)</span>
<a id=__codelineno-44-41 name=__codelineno-44-41 href=#__codelineno-44-41></a>    <span class=n>hgender</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>SmallIntegerField</span><span class=p>(</span><span class=n>choices</span><span class=o>=</span><span class=n>GENDER_CHOICES</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;性别&#39;</span><span class=p>)</span>
<a id=__codelineno-44-42 name=__codelineno-44-42 href=#__codelineno-44-42></a>    <span class=n>hcomment</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>200</span><span class=p>,</span> <span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;描述信息&#39;</span><span class=p>)</span>
<a id=__codelineno-44-43 name=__codelineno-44-43 href=#__codelineno-44-43></a>    <span class=n>hbook</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>BookInfo</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;图书&#39;</span><span class=p>)</span>  <span class=c1># 外键</span>
<a id=__codelineno-44-44 name=__codelineno-44-44 href=#__codelineno-44-44></a>    <span class=n>is_delete</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>BooleanField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;逻辑删除&#39;</span><span class=p>)</span>
<a id=__codelineno-44-45 name=__codelineno-44-45 href=#__codelineno-44-45></a>
<a id=__codelineno-44-46 name=__codelineno-44-46 href=#__codelineno-44-46></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-44-47 name=__codelineno-44-47 href=#__codelineno-44-47></a>        <span class=n>db_table</span> <span class=o>=</span> <span class=s1>&#39;tb_heros&#39;</span>
<a id=__codelineno-44-48 name=__codelineno-44-48 href=#__codelineno-44-48></a>        <span class=n>verbose_name</span> <span class=o>=</span> <span class=s1>&#39;英雄&#39;</span>
<a id=__codelineno-44-49 name=__codelineno-44-49 href=#__codelineno-44-49></a>        <span class=n>verbose_name_plural</span> <span class=o>=</span> <span class=n>verbose_name</span>
<a id=__codelineno-44-50 name=__codelineno-44-50 href=#__codelineno-44-50></a>
<a id=__codelineno-44-51 name=__codelineno-44-51 href=#__codelineno-44-51></a>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-44-52 name=__codelineno-44-52 href=#__codelineno-44-52></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>hname</span>
<a id=__codelineno-44-53 name=__codelineno-44-53 href=#__codelineno-44-53></a>
<a id=__codelineno-44-54 name=__codelineno-44-54 href=#__codelineno-44-54></a>    <span class=k>def</span> <span class=nf>read</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-44-55 name=__codelineno-44-55 href=#__codelineno-44-55></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>bread</span>
<a id=__codelineno-44-56 name=__codelineno-44-56 href=#__codelineno-44-56></a>    <span class=n>read</span><span class=o>.</span><span class=n>short_description</span> <span class=o>=</span> <span class=s1>&#39;阅读量&#39;</span>
<a id=__codelineno-44-57 name=__codelineno-44-57 href=#__codelineno-44-57></a>    <span class=n>read</span><span class=o>.</span><span class=n>admin_order_field</span> <span class=o>=</span> <span class=s1>&#39;hbook__bread&#39;</span>
<a id=__codelineno-44-58 name=__codelineno-44-58 href=#__codelineno-44-58></a>    <span class=c1># HeroInfo.objects.filter(hbook__bread=xx)</span>
</code></pre></div> <p>迁移数据库命令，如下</p> <div class=highlight><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a>python<span class=w> </span>manage.py<span class=w> </span>makemigrations
<a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a>python<span class=w> </span>manage.py<span class=w> </span>migrate
</code></pre></div> <p>首先插入一些测试数据,如下</p> <div class=highlight><pre><span></span><code><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>tb_books</span><span class=p>(</span><span class=n>btitle</span><span class=p>,</span><span class=n>bpub_date</span><span class=p>,</span><span class=n>bread</span><span class=p>,</span><span class=n>bcomment</span><span class=p>,</span><span class=n>is_delete</span><span class=p>)</span><span class=w> </span><span class=k>values</span>
<a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=p>(</span><span class=s1>&#39;射雕英雄传&#39;</span><span class=p>,</span><span class=s1>&#39;1980-05-01&#39;</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=p>(</span><span class=s1>&#39;天龙八部&#39;</span><span class=p>,</span><span class=s1>&#39;1986-07-24&#39;</span><span class=p>,</span><span class=mi>36</span><span class=p>,</span><span class=mi>40</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=p>(</span><span class=s1>&#39;笑傲江湖&#39;</span><span class=p>,</span><span class=s1>&#39;1995-12-24&#39;</span><span class=p>,</span><span class=mi>20</span><span class=p>,</span><span class=mi>80</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a><span class=p>(</span><span class=s1>&#39;雪山飞狐&#39;</span><span class=p>,</span><span class=s1>&#39;1987-11-11&#39;</span><span class=p>,</span><span class=mi>58</span><span class=p>,</span><span class=mi>24</span><span class=p>,</span><span class=mi>0</span><span class=p>);</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>tb_heros</span><span class=p>(</span><span class=n>hname</span><span class=p>,</span><span class=n>hgender</span><span class=p>,</span><span class=n>hbook_id</span><span class=p>,</span><span class=n>hcomment</span><span class=p>,</span><span class=n>is_delete</span><span class=p>)</span><span class=w> </span><span class=k>values</span>
<a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=p>(</span><span class=s1>&#39;郭靖&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;降龙十八掌&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=p>(</span><span class=s1>&#39;黄蓉&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;打狗棍法&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a><span class=p>(</span><span class=s1>&#39;黄药师&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;弹指神通&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=p>(</span><span class=s1>&#39;欧阳锋&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;蛤蟆功&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a><span class=p>(</span><span class=s1>&#39;梅超风&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;九阴白骨爪&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a><span class=p>(</span><span class=s1>&#39;乔峰&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=s1>&#39;降龙十八掌&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a><span class=p>(</span><span class=s1>&#39;段誉&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=s1>&#39;六脉神剑&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=p>(</span><span class=s1>&#39;虚竹&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=s1>&#39;天山六阳掌&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a><span class=p>(</span><span class=s1>&#39;王语嫣&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=s1>&#39;神仙姐姐&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a><span class=p>(</span><span class=s1>&#39;令狐冲&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=s1>&#39;独孤九剑&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a><span class=p>(</span><span class=s1>&#39;任盈盈&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=s1>&#39;弹琴&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a><span class=p>(</span><span class=s1>&#39;岳不群&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=s1>&#39;华山剑法&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-14 name=__codelineno-47-14 href=#__codelineno-47-14></a><span class=p>(</span><span class=s1>&#39;东方不败&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=s1>&#39;葵花宝典&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-15 name=__codelineno-47-15 href=#__codelineno-47-15></a><span class=p>(</span><span class=s1>&#39;胡斐&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=s1>&#39;胡家刀法&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-16 name=__codelineno-47-16 href=#__codelineno-47-16></a><span class=p>(</span><span class=s1>&#39;苗若兰&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=s1>&#39;黄衣&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-17 name=__codelineno-47-17 href=#__codelineno-47-17></a><span class=p>(</span><span class=s1>&#39;程灵素&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=s1>&#39;医术&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>
<a id=__codelineno-47-18 name=__codelineno-47-18 href=#__codelineno-47-18></a><span class=p>(</span><span class=s1>&#39;袁紫衣&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=s1>&#39;六合拳&#39;</span><span class=p>,</span><span class=mi>0</span><span class=p>);</span>
</code></pre></div> <h5 id=视图>视图<a class=headerlink href=#视图 title="Permanent link">&para;</a></h5> <p><code>app/views.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=kn>import</span> <span class=nn>json</span>
<a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
<a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a><span class=kn>from</span> <span class=nn>django.http</span> <span class=kn>import</span> <span class=n>JsonResponse</span><span class=p>,</span> <span class=n>HttpResponse</span>
<a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=kn>from</span> <span class=nn>django.views</span> <span class=kn>import</span> <span class=n>View</span>
<a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>BookInfo</span><span class=p>,</span> <span class=n>HeroInfo</span>
<a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a>
<a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a>
<a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a><span class=sd># 书籍信息</span>
<a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a><span class=sd>GET         /api/books/</span>
<a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a><span class=sd>POST        /api/books/</span>
<a id=__codelineno-48-12 name=__codelineno-48-12 href=#__codelineno-48-12></a><span class=sd>GET         /api/books/&lt;pk&gt;/</span>
<a id=__codelineno-48-13 name=__codelineno-48-13 href=#__codelineno-48-13></a><span class=sd>PUT         /api/books/&lt;pk&gt;/</span>
<a id=__codelineno-48-14 name=__codelineno-48-14 href=#__codelineno-48-14></a><span class=sd>DELETE      /api/books/&lt;pk&gt;/</span>
<a id=__codelineno-48-15 name=__codelineno-48-15 href=#__codelineno-48-15></a>
<a id=__codelineno-48-16 name=__codelineno-48-16 href=#__codelineno-48-16></a><span class=sd># 人物信息</span>
<a id=__codelineno-48-17 name=__codelineno-48-17 href=#__codelineno-48-17></a><span class=sd>GET         /api/heros/</span>
<a id=__codelineno-48-18 name=__codelineno-48-18 href=#__codelineno-48-18></a><span class=sd>POST        /api/heros/</span>
<a id=__codelineno-48-19 name=__codelineno-48-19 href=#__codelineno-48-19></a><span class=sd>GET         /api/heros/&lt;pk&gt;/</span>
<a id=__codelineno-48-20 name=__codelineno-48-20 href=#__codelineno-48-20></a><span class=sd>PUT         /api/heros/&lt;pk&gt;/</span>
<a id=__codelineno-48-21 name=__codelineno-48-21 href=#__codelineno-48-21></a><span class=sd>DELETE      /api/heros/&lt;pk&gt;/</span>
<a id=__codelineno-48-22 name=__codelineno-48-22 href=#__codelineno-48-22></a>
<a id=__codelineno-48-23 name=__codelineno-48-23 href=#__codelineno-48-23></a>
<a id=__codelineno-48-24 name=__codelineno-48-24 href=#__codelineno-48-24></a><span class=sd>响应数据  JSON</span>
<a id=__codelineno-48-25 name=__codelineno-48-25 href=#__codelineno-48-25></a><span class=sd># 列表视图: 路由后边没有 pk/ID</span>
<a id=__codelineno-48-26 name=__codelineno-48-26 href=#__codelineno-48-26></a><span class=sd># 详情视图: 路由后面   pk/ID</span>
<a id=__codelineno-48-27 name=__codelineno-48-27 href=#__codelineno-48-27></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-28 name=__codelineno-48-28 href=#__codelineno-48-28></a>
<a id=__codelineno-48-29 name=__codelineno-48-29 href=#__codelineno-48-29></a>
<a id=__codelineno-48-30 name=__codelineno-48-30 href=#__codelineno-48-30></a><span class=k>class</span> <span class=nc>BooksAPIVIew</span><span class=p>(</span><span class=n>View</span><span class=p>):</span>
<a id=__codelineno-48-31 name=__codelineno-48-31 href=#__codelineno-48-31></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-32 name=__codelineno-48-32 href=#__codelineno-48-32></a><span class=sd>    查询所有图书、增加图书</span>
<a id=__codelineno-48-33 name=__codelineno-48-33 href=#__codelineno-48-33></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-48-34 name=__codelineno-48-34 href=#__codelineno-48-34></a>
<a id=__codelineno-48-35 name=__codelineno-48-35 href=#__codelineno-48-35></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-48-36 name=__codelineno-48-36 href=#__codelineno-48-36></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-37 name=__codelineno-48-37 href=#__codelineno-48-37></a><span class=sd>        查询所有图书</span>
<a id=__codelineno-48-38 name=__codelineno-48-38 href=#__codelineno-48-38></a><span class=sd>        路由：GET /api/books/</span>
<a id=__codelineno-48-39 name=__codelineno-48-39 href=#__codelineno-48-39></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-40 name=__codelineno-48-40 href=#__codelineno-48-40></a>        <span class=c1># 1. 查询出所有图书模型</span>
<a id=__codelineno-48-41 name=__codelineno-48-41 href=#__codelineno-48-41></a>        <span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-48-42 name=__codelineno-48-42 href=#__codelineno-48-42></a>        <span class=c1># 2. 遍历查询集，去除里边的每个书籍模型对象，把模型对象转换成字典</span>
<a id=__codelineno-48-43 name=__codelineno-48-43 href=#__codelineno-48-43></a>        <span class=c1># 定义一个列表保存所有字典</span>
<a id=__codelineno-48-44 name=__codelineno-48-44 href=#__codelineno-48-44></a>        <span class=n>book_list</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-48-45 name=__codelineno-48-45 href=#__codelineno-48-45></a>        <span class=k>for</span> <span class=n>book</span> <span class=ow>in</span> <span class=n>queryset</span><span class=p>:</span>
<a id=__codelineno-48-46 name=__codelineno-48-46 href=#__codelineno-48-46></a>            <span class=n>book_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-48-47 name=__codelineno-48-47 href=#__codelineno-48-47></a>                <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-48 name=__codelineno-48-48 href=#__codelineno-48-48></a>                <span class=s1>&#39;btitle&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>btitle</span><span class=p>,</span>
<a id=__codelineno-48-49 name=__codelineno-48-49 href=#__codelineno-48-49></a>                <span class=s1>&#39;bput_date&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bpub_date</span><span class=p>,</span>
<a id=__codelineno-48-50 name=__codelineno-48-50 href=#__codelineno-48-50></a>                <span class=s1>&#39;bread&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bcomment</span><span class=p>,</span>
<a id=__codelineno-48-51 name=__codelineno-48-51 href=#__codelineno-48-51></a>                <span class=s1>&#39;image&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span><span class=o>.</span><span class=n>url</span> <span class=k>if</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span> <span class=k>else</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
<a id=__codelineno-48-52 name=__codelineno-48-52 href=#__codelineno-48-52></a>            <span class=p>}</span>
<a id=__codelineno-48-53 name=__codelineno-48-53 href=#__codelineno-48-53></a>            <span class=n>book_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>book_dict</span><span class=p>)</span>  <span class=c1># 将转换好的字典添加到列表中</span>
<a id=__codelineno-48-54 name=__codelineno-48-54 href=#__codelineno-48-54></a>        <span class=c1># 3. 响应给前端</span>
<a id=__codelineno-48-55 name=__codelineno-48-55 href=#__codelineno-48-55></a>        <span class=c1># 如果book_list 不是一个字典的话就需要将safe设置成False.</span>
<a id=__codelineno-48-56 name=__codelineno-48-56 href=#__codelineno-48-56></a>        <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>(</span><span class=n>book_list</span><span class=p>,</span> <span class=n>safe</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<a id=__codelineno-48-57 name=__codelineno-48-57 href=#__codelineno-48-57></a>
<a id=__codelineno-48-58 name=__codelineno-48-58 href=#__codelineno-48-58></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-48-59 name=__codelineno-48-59 href=#__codelineno-48-59></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-60 name=__codelineno-48-60 href=#__codelineno-48-60></a><span class=sd>        新增图书</span>
<a id=__codelineno-48-61 name=__codelineno-48-61 href=#__codelineno-48-61></a><span class=sd>        路由：POST /api/books/</span>
<a id=__codelineno-48-62 name=__codelineno-48-62 href=#__codelineno-48-62></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-63 name=__codelineno-48-63 href=#__codelineno-48-63></a>        <span class=c1># 获取前端传入的请求体数据(json) request.body</span>
<a id=__codelineno-48-64 name=__codelineno-48-64 href=#__codelineno-48-64></a>        <span class=n>json_bytes</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>body</span>
<a id=__codelineno-48-65 name=__codelineno-48-65 href=#__codelineno-48-65></a>        <span class=c1># 把bytes类型的json字符串转换成json_str</span>
<a id=__codelineno-48-66 name=__codelineno-48-66 href=#__codelineno-48-66></a>        <span class=n>json_str</span> <span class=o>=</span> <span class=n>json_bytes</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
<a id=__codelineno-48-67 name=__codelineno-48-67 href=#__codelineno-48-67></a>        <span class=c1># 利用json.loads将json字符串转换为json（字典/列表）</span>
<a id=__codelineno-48-68 name=__codelineno-48-68 href=#__codelineno-48-68></a>        <span class=n>book_dict</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>json_str</span><span class=p>)</span>
<a id=__codelineno-48-69 name=__codelineno-48-69 href=#__codelineno-48-69></a>
<a id=__codelineno-48-70 name=__codelineno-48-70 href=#__codelineno-48-70></a>        <span class=c1># 此处详细的校验参数省略</span>
<a id=__codelineno-48-71 name=__codelineno-48-71 href=#__codelineno-48-71></a>        <span class=c1># 创建模型对象并保存（把字典转换成模型并储存）</span>
<a id=__codelineno-48-72 name=__codelineno-48-72 href=#__codelineno-48-72></a>        <span class=n>book</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=p>(</span>
<a id=__codelineno-48-73 name=__codelineno-48-73 href=#__codelineno-48-73></a>            <span class=n>btitle</span><span class=o>=</span><span class=n>book_dict</span><span class=p>[</span><span class=s1>&#39;btitle&#39;</span><span class=p>],</span>
<a id=__codelineno-48-74 name=__codelineno-48-74 href=#__codelineno-48-74></a>            <span class=n>bpub_date</span><span class=o>=</span><span class=n>book_dict</span><span class=p>[</span><span class=s1>&#39;bpub_date&#39;</span><span class=p>],</span>
<a id=__codelineno-48-75 name=__codelineno-48-75 href=#__codelineno-48-75></a>
<a id=__codelineno-48-76 name=__codelineno-48-76 href=#__codelineno-48-76></a>        <span class=p>)</span>
<a id=__codelineno-48-77 name=__codelineno-48-77 href=#__codelineno-48-77></a>        <span class=n>book</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-48-78 name=__codelineno-48-78 href=#__codelineno-48-78></a>
<a id=__codelineno-48-79 name=__codelineno-48-79 href=#__codelineno-48-79></a>        <span class=c1># 把新增的模型转换成字典</span>
<a id=__codelineno-48-80 name=__codelineno-48-80 href=#__codelineno-48-80></a>        <span class=n>json_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-48-81 name=__codelineno-48-81 href=#__codelineno-48-81></a>            <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-82 name=__codelineno-48-82 href=#__codelineno-48-82></a>            <span class=s1>&#39;btitle&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>btitle</span><span class=p>,</span>
<a id=__codelineno-48-83 name=__codelineno-48-83 href=#__codelineno-48-83></a>            <span class=s1>&#39;bput_date&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bpub_date</span><span class=p>,</span>
<a id=__codelineno-48-84 name=__codelineno-48-84 href=#__codelineno-48-84></a>            <span class=s1>&#39;bread&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bread</span><span class=p>,</span>
<a id=__codelineno-48-85 name=__codelineno-48-85 href=#__codelineno-48-85></a>            <span class=s1>&#39;bcomment&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bcomment</span><span class=p>,</span>
<a id=__codelineno-48-86 name=__codelineno-48-86 href=#__codelineno-48-86></a>            <span class=s1>&#39;image&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span><span class=o>.</span><span class=n>url</span> <span class=k>if</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span> <span class=k>else</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
<a id=__codelineno-48-87 name=__codelineno-48-87 href=#__codelineno-48-87></a>        <span class=p>}</span>
<a id=__codelineno-48-88 name=__codelineno-48-88 href=#__codelineno-48-88></a>        <span class=c1># 响应（把新增的数据再响应回去，201）</span>
<a id=__codelineno-48-89 name=__codelineno-48-89 href=#__codelineno-48-89></a>        <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>(</span><span class=n>json_dict</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=mi>201</span><span class=p>)</span>
<a id=__codelineno-48-90 name=__codelineno-48-90 href=#__codelineno-48-90></a>
<a id=__codelineno-48-91 name=__codelineno-48-91 href=#__codelineno-48-91></a>
<a id=__codelineno-48-92 name=__codelineno-48-92 href=#__codelineno-48-92></a><span class=k>class</span> <span class=nc>BookAPIView</span><span class=p>(</span><span class=n>View</span><span class=p>):</span>
<a id=__codelineno-48-93 name=__codelineno-48-93 href=#__codelineno-48-93></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;详情视图&quot;&quot;&quot;</span>
<a id=__codelineno-48-94 name=__codelineno-48-94 href=#__codelineno-48-94></a>
<a id=__codelineno-48-95 name=__codelineno-48-95 href=#__codelineno-48-95></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-48-96 name=__codelineno-48-96 href=#__codelineno-48-96></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-97 name=__codelineno-48-97 href=#__codelineno-48-97></a><span class=sd>        获取单个图书信息</span>
<a id=__codelineno-48-98 name=__codelineno-48-98 href=#__codelineno-48-98></a><span class=sd>        路由： GET  /api/books/&lt;pk&gt;/</span>
<a id=__codelineno-48-99 name=__codelineno-48-99 href=#__codelineno-48-99></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-100 name=__codelineno-48-100 href=#__codelineno-48-100></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-48-101 name=__codelineno-48-101 href=#__codelineno-48-101></a>            <span class=n>book</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-48-102 name=__codelineno-48-102 href=#__codelineno-48-102></a>        <span class=k>except</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-48-103 name=__codelineno-48-103 href=#__codelineno-48-103></a>            <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>({</span><span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=s1>&#39;查询的数据不存在&#39;</span><span class=p>},</span> <span class=n>status</span><span class=o>=</span><span class=mi>404</span><span class=p>)</span>
<a id=__codelineno-48-104 name=__codelineno-48-104 href=#__codelineno-48-104></a>        <span class=c1># 2. 模型对象转字典</span>
<a id=__codelineno-48-105 name=__codelineno-48-105 href=#__codelineno-48-105></a>        <span class=n>book_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-48-106 name=__codelineno-48-106 href=#__codelineno-48-106></a>            <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-107 name=__codelineno-48-107 href=#__codelineno-48-107></a>            <span class=s1>&#39;btitle&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>btitle</span><span class=p>,</span>
<a id=__codelineno-48-108 name=__codelineno-48-108 href=#__codelineno-48-108></a>            <span class=s1>&#39;bput_date&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bpub_date</span><span class=p>,</span>
<a id=__codelineno-48-109 name=__codelineno-48-109 href=#__codelineno-48-109></a>            <span class=s1>&#39;bread&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bread</span><span class=p>,</span>
<a id=__codelineno-48-110 name=__codelineno-48-110 href=#__codelineno-48-110></a>            <span class=s1>&#39;bcomment&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bcomment</span><span class=p>,</span>
<a id=__codelineno-48-111 name=__codelineno-48-111 href=#__codelineno-48-111></a>            <span class=s1>&#39;image&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span><span class=o>.</span><span class=n>url</span> <span class=k>if</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span> <span class=k>else</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
<a id=__codelineno-48-112 name=__codelineno-48-112 href=#__codelineno-48-112></a>        <span class=p>}</span>
<a id=__codelineno-48-113 name=__codelineno-48-113 href=#__codelineno-48-113></a>        <span class=c1># 3. 响应</span>
<a id=__codelineno-48-114 name=__codelineno-48-114 href=#__codelineno-48-114></a>        <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>(</span><span class=n>book_dict</span><span class=p>)</span>
<a id=__codelineno-48-115 name=__codelineno-48-115 href=#__codelineno-48-115></a>
<a id=__codelineno-48-116 name=__codelineno-48-116 href=#__codelineno-48-116></a>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-48-117 name=__codelineno-48-117 href=#__codelineno-48-117></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-118 name=__codelineno-48-118 href=#__codelineno-48-118></a><span class=sd>        修改图书信息</span>
<a id=__codelineno-48-119 name=__codelineno-48-119 href=#__codelineno-48-119></a><span class=sd>        路由： PUT  /api/books/&lt;pk&gt;</span>
<a id=__codelineno-48-120 name=__codelineno-48-120 href=#__codelineno-48-120></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-121 name=__codelineno-48-121 href=#__codelineno-48-121></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-48-122 name=__codelineno-48-122 href=#__codelineno-48-122></a>            <span class=n>book</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-48-123 name=__codelineno-48-123 href=#__codelineno-48-123></a>        <span class=k>except</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-48-124 name=__codelineno-48-124 href=#__codelineno-48-124></a>            <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>({</span><span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=s1>&#39;修改的数据不存在&#39;</span><span class=p>},</span> <span class=n>status</span><span class=o>=</span><span class=mi>404</span><span class=p>)</span>
<a id=__codelineno-48-125 name=__codelineno-48-125 href=#__codelineno-48-125></a>
<a id=__codelineno-48-126 name=__codelineno-48-126 href=#__codelineno-48-126></a>        <span class=c1># 获取前端传入的新数据（把数据转换成字典）</span>
<a id=__codelineno-48-127 name=__codelineno-48-127 href=#__codelineno-48-127></a>        <span class=c1># json_str_bytes = request.body</span>
<a id=__codelineno-48-128 name=__codelineno-48-128 href=#__codelineno-48-128></a>        <span class=c1># json_str = json_str_bytes.decode()</span>
<a id=__codelineno-48-129 name=__codelineno-48-129 href=#__codelineno-48-129></a>        <span class=c1># book_dict = json.loads(json_str)</span>
<a id=__codelineno-48-130 name=__codelineno-48-130 href=#__codelineno-48-130></a>
<a id=__codelineno-48-131 name=__codelineno-48-131 href=#__codelineno-48-131></a>        <span class=c1># 此处详细的校验参数省略</span>
<a id=__codelineno-48-132 name=__codelineno-48-132 href=#__codelineno-48-132></a>        <span class=n>book_dict</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>body</span><span class=o>.</span><span class=n>decode</span><span class=p>())</span>
<a id=__codelineno-48-133 name=__codelineno-48-133 href=#__codelineno-48-133></a>        <span class=c1># 重新给模型指定的属性赋值</span>
<a id=__codelineno-48-134 name=__codelineno-48-134 href=#__codelineno-48-134></a>        <span class=n>book</span><span class=o>.</span><span class=n>btitle</span> <span class=o>=</span> <span class=n>book_dict</span><span class=p>[</span><span class=s1>&#39;btitle&#39;</span><span class=p>]</span>
<a id=__codelineno-48-135 name=__codelineno-48-135 href=#__codelineno-48-135></a>        <span class=n>book</span><span class=o>.</span><span class=n>bpub_date</span> <span class=o>=</span> <span class=n>book_dict</span><span class=p>[</span><span class=s1>&#39;bpub_date&#39;</span><span class=p>]</span>
<a id=__codelineno-48-136 name=__codelineno-48-136 href=#__codelineno-48-136></a>        <span class=c1># 调用save方法进行修改操作</span>
<a id=__codelineno-48-137 name=__codelineno-48-137 href=#__codelineno-48-137></a>        <span class=n>book</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-48-138 name=__codelineno-48-138 href=#__codelineno-48-138></a>        <span class=c1># 把修改后的模型再转换成字典</span>
<a id=__codelineno-48-139 name=__codelineno-48-139 href=#__codelineno-48-139></a>        <span class=n>json_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-48-140 name=__codelineno-48-140 href=#__codelineno-48-140></a>            <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-141 name=__codelineno-48-141 href=#__codelineno-48-141></a>            <span class=s1>&#39;btitle&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>btitle</span><span class=p>,</span>
<a id=__codelineno-48-142 name=__codelineno-48-142 href=#__codelineno-48-142></a>            <span class=s1>&#39;bput_date&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bpub_date</span><span class=p>,</span>
<a id=__codelineno-48-143 name=__codelineno-48-143 href=#__codelineno-48-143></a>            <span class=s1>&#39;bread&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bread</span><span class=p>,</span>
<a id=__codelineno-48-144 name=__codelineno-48-144 href=#__codelineno-48-144></a>            <span class=s1>&#39;bcomment&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bcomment</span><span class=p>,</span>
<a id=__codelineno-48-145 name=__codelineno-48-145 href=#__codelineno-48-145></a>            <span class=s1>&#39;image&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span><span class=o>.</span><span class=n>url</span> <span class=k>if</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span> <span class=k>else</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
<a id=__codelineno-48-146 name=__codelineno-48-146 href=#__codelineno-48-146></a>        <span class=p>}</span>
<a id=__codelineno-48-147 name=__codelineno-48-147 href=#__codelineno-48-147></a>        <span class=c1># 响应</span>
<a id=__codelineno-48-148 name=__codelineno-48-148 href=#__codelineno-48-148></a>        <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>(</span><span class=n>json_dict</span><span class=p>)</span>
<a id=__codelineno-48-149 name=__codelineno-48-149 href=#__codelineno-48-149></a>
<a id=__codelineno-48-150 name=__codelineno-48-150 href=#__codelineno-48-150></a>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-48-151 name=__codelineno-48-151 href=#__codelineno-48-151></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-152 name=__codelineno-48-152 href=#__codelineno-48-152></a><span class=sd>        删除图书</span>
<a id=__codelineno-48-153 name=__codelineno-48-153 href=#__codelineno-48-153></a><span class=sd>        路由： DELETE /api/books/&lt;pk&gt;/</span>
<a id=__codelineno-48-154 name=__codelineno-48-154 href=#__codelineno-48-154></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-155 name=__codelineno-48-155 href=#__codelineno-48-155></a>        <span class=c1># 获取要删除的模型对象</span>
<a id=__codelineno-48-156 name=__codelineno-48-156 href=#__codelineno-48-156></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-48-157 name=__codelineno-48-157 href=#__codelineno-48-157></a>            <span class=n>book</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-48-158 name=__codelineno-48-158 href=#__codelineno-48-158></a>        <span class=k>except</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-48-159 name=__codelineno-48-159 href=#__codelineno-48-159></a>            <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>({</span><span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=s1>&#39;删除的数据不存在&#39;</span><span class=p>},</span> <span class=n>status</span><span class=o>=</span><span class=mi>404</span><span class=p>)</span>
<a id=__codelineno-48-160 name=__codelineno-48-160 href=#__codelineno-48-160></a>        <span class=c1># 删除指定模型对象</span>
<a id=__codelineno-48-161 name=__codelineno-48-161 href=#__codelineno-48-161></a>        <span class=c1># book.delete()  # 物理删除（真正从数据库删除）</span>
<a id=__codelineno-48-162 name=__codelineno-48-162 href=#__codelineno-48-162></a>        <span class=n>book</span><span class=o>.</span><span class=n>is_delete</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-48-163 name=__codelineno-48-163 href=#__codelineno-48-163></a>        <span class=n>book</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>  <span class=c1># （逻辑删除）</span>
<a id=__codelineno-48-164 name=__codelineno-48-164 href=#__codelineno-48-164></a>        <span class=c1># 响应：删除时不需要有响应体但要指定状态码为 204</span>
<a id=__codelineno-48-165 name=__codelineno-48-165 href=#__codelineno-48-165></a>        <span class=k>return</span> <span class=n>HttpResponse</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=mi>204</span><span class=p>)</span>
<a id=__codelineno-48-166 name=__codelineno-48-166 href=#__codelineno-48-166></a>
<a id=__codelineno-48-167 name=__codelineno-48-167 href=#__codelineno-48-167></a>
<a id=__codelineno-48-168 name=__codelineno-48-168 href=#__codelineno-48-168></a><span class=k>class</span> <span class=nc>HerosAPIVIew</span><span class=p>(</span><span class=n>View</span><span class=p>):</span>
<a id=__codelineno-48-169 name=__codelineno-48-169 href=#__codelineno-48-169></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-170 name=__codelineno-48-170 href=#__codelineno-48-170></a><span class=sd>    查询所有人物信息，新增人物</span>
<a id=__codelineno-48-171 name=__codelineno-48-171 href=#__codelineno-48-171></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-48-172 name=__codelineno-48-172 href=#__codelineno-48-172></a>
<a id=__codelineno-48-173 name=__codelineno-48-173 href=#__codelineno-48-173></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-48-174 name=__codelineno-48-174 href=#__codelineno-48-174></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-175 name=__codelineno-48-175 href=#__codelineno-48-175></a><span class=sd>        查询所有人物</span>
<a id=__codelineno-48-176 name=__codelineno-48-176 href=#__codelineno-48-176></a><span class=sd>        路由：GET /api/heros/</span>
<a id=__codelineno-48-177 name=__codelineno-48-177 href=#__codelineno-48-177></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-178 name=__codelineno-48-178 href=#__codelineno-48-178></a>        <span class=n>queryset</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-48-179 name=__codelineno-48-179 href=#__codelineno-48-179></a>        <span class=n>heros_list</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-48-180 name=__codelineno-48-180 href=#__codelineno-48-180></a>        <span class=k>for</span> <span class=n>hero</span> <span class=ow>in</span> <span class=n>queryset</span><span class=p>:</span>
<a id=__codelineno-48-181 name=__codelineno-48-181 href=#__codelineno-48-181></a>            <span class=n>book_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-48-182 name=__codelineno-48-182 href=#__codelineno-48-182></a>                <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-183 name=__codelineno-48-183 href=#__codelineno-48-183></a>                <span class=s1>&#39;hname&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hname</span><span class=p>,</span>
<a id=__codelineno-48-184 name=__codelineno-48-184 href=#__codelineno-48-184></a>                <span class=s1>&#39;hgender&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hgender</span><span class=p>,</span>
<a id=__codelineno-48-185 name=__codelineno-48-185 href=#__codelineno-48-185></a>                <span class=s1>&#39;hcomment&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hcomment</span><span class=p>,</span>
<a id=__codelineno-48-186 name=__codelineno-48-186 href=#__codelineno-48-186></a>                <span class=s2>&quot;hbookid&quot;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-187 name=__codelineno-48-187 href=#__codelineno-48-187></a>                <span class=s2>&quot;hbookBtitle&quot;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>btitle</span><span class=p>,</span>
<a id=__codelineno-48-188 name=__codelineno-48-188 href=#__codelineno-48-188></a>                <span class=s2>&quot;hbookBread&quot;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>bread</span>
<a id=__codelineno-48-189 name=__codelineno-48-189 href=#__codelineno-48-189></a>            <span class=p>}</span>
<a id=__codelineno-48-190 name=__codelineno-48-190 href=#__codelineno-48-190></a>            <span class=n>heros_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>book_dict</span><span class=p>)</span>
<a id=__codelineno-48-191 name=__codelineno-48-191 href=#__codelineno-48-191></a>        <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>(</span><span class=n>heros_list</span><span class=p>,</span> <span class=n>safe</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<a id=__codelineno-48-192 name=__codelineno-48-192 href=#__codelineno-48-192></a>
<a id=__codelineno-48-193 name=__codelineno-48-193 href=#__codelineno-48-193></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-48-194 name=__codelineno-48-194 href=#__codelineno-48-194></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-195 name=__codelineno-48-195 href=#__codelineno-48-195></a><span class=sd>        新增人物</span>
<a id=__codelineno-48-196 name=__codelineno-48-196 href=#__codelineno-48-196></a><span class=sd>        路由：POST /api/heros/</span>
<a id=__codelineno-48-197 name=__codelineno-48-197 href=#__codelineno-48-197></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-198 name=__codelineno-48-198 href=#__codelineno-48-198></a>        <span class=n>json_bytes</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>body</span>
<a id=__codelineno-48-199 name=__codelineno-48-199 href=#__codelineno-48-199></a>        <span class=n>json_str</span> <span class=o>=</span> <span class=n>json_bytes</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
<a id=__codelineno-48-200 name=__codelineno-48-200 href=#__codelineno-48-200></a>        <span class=n>heros_dict</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>json_str</span><span class=p>)</span>
<a id=__codelineno-48-201 name=__codelineno-48-201 href=#__codelineno-48-201></a>
<a id=__codelineno-48-202 name=__codelineno-48-202 href=#__codelineno-48-202></a>        <span class=c1># 获取关联的图书对象</span>
<a id=__codelineno-48-203 name=__codelineno-48-203 href=#__codelineno-48-203></a>        <span class=n>book_id</span> <span class=o>=</span> <span class=n>heros_dict</span><span class=p>[</span><span class=s1>&#39;hbook&#39;</span><span class=p>]</span>
<a id=__codelineno-48-204 name=__codelineno-48-204 href=#__codelineno-48-204></a>        <span class=n>book</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>book_id</span><span class=p>)</span>
<a id=__codelineno-48-205 name=__codelineno-48-205 href=#__codelineno-48-205></a>
<a id=__codelineno-48-206 name=__codelineno-48-206 href=#__codelineno-48-206></a>        <span class=c1># 创建英雄对象并保存到数据库</span>
<a id=__codelineno-48-207 name=__codelineno-48-207 href=#__codelineno-48-207></a>        <span class=n>hero</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=p>(</span>
<a id=__codelineno-48-208 name=__codelineno-48-208 href=#__codelineno-48-208></a>            <span class=n>hname</span><span class=o>=</span><span class=n>heros_dict</span><span class=p>[</span><span class=s1>&#39;hname&#39;</span><span class=p>],</span>
<a id=__codelineno-48-209 name=__codelineno-48-209 href=#__codelineno-48-209></a>            <span class=n>hgender</span><span class=o>=</span><span class=n>heros_dict</span><span class=p>[</span><span class=s1>&#39;hgender&#39;</span><span class=p>],</span>
<a id=__codelineno-48-210 name=__codelineno-48-210 href=#__codelineno-48-210></a>            <span class=n>hcomment</span><span class=o>=</span><span class=n>heros_dict</span><span class=p>[</span><span class=s1>&#39;hcomment&#39;</span><span class=p>],</span>
<a id=__codelineno-48-211 name=__codelineno-48-211 href=#__codelineno-48-211></a>            <span class=n>hbook</span><span class=o>=</span><span class=n>book</span><span class=p>,</span>  <span class=c1># 将关联的图书对象赋值给外键属性</span>
<a id=__codelineno-48-212 name=__codelineno-48-212 href=#__codelineno-48-212></a>        <span class=p>)</span>
<a id=__codelineno-48-213 name=__codelineno-48-213 href=#__codelineno-48-213></a>        <span class=n>hero</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-48-214 name=__codelineno-48-214 href=#__codelineno-48-214></a>        <span class=n>json_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-48-215 name=__codelineno-48-215 href=#__codelineno-48-215></a>            <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-216 name=__codelineno-48-216 href=#__codelineno-48-216></a>            <span class=s1>&#39;hname&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hname</span><span class=p>,</span>
<a id=__codelineno-48-217 name=__codelineno-48-217 href=#__codelineno-48-217></a>            <span class=s1>&#39;hgender&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hgender</span><span class=p>,</span>
<a id=__codelineno-48-218 name=__codelineno-48-218 href=#__codelineno-48-218></a>            <span class=s1>&#39;hcomment&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hcomment</span><span class=p>,</span>
<a id=__codelineno-48-219 name=__codelineno-48-219 href=#__codelineno-48-219></a>            <span class=s1>&#39;hbook&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>btitle</span>
<a id=__codelineno-48-220 name=__codelineno-48-220 href=#__codelineno-48-220></a>        <span class=p>}</span>
<a id=__codelineno-48-221 name=__codelineno-48-221 href=#__codelineno-48-221></a>        <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>(</span><span class=n>json_dict</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=mi>201</span><span class=p>)</span>
<a id=__codelineno-48-222 name=__codelineno-48-222 href=#__codelineno-48-222></a>
<a id=__codelineno-48-223 name=__codelineno-48-223 href=#__codelineno-48-223></a>
<a id=__codelineno-48-224 name=__codelineno-48-224 href=#__codelineno-48-224></a><span class=k>class</span> <span class=nc>HeroAPIView</span><span class=p>(</span><span class=n>View</span><span class=p>):</span>
<a id=__codelineno-48-225 name=__codelineno-48-225 href=#__codelineno-48-225></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;详情视图&quot;&quot;&quot;</span>
<a id=__codelineno-48-226 name=__codelineno-48-226 href=#__codelineno-48-226></a>
<a id=__codelineno-48-227 name=__codelineno-48-227 href=#__codelineno-48-227></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-48-228 name=__codelineno-48-228 href=#__codelineno-48-228></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-229 name=__codelineno-48-229 href=#__codelineno-48-229></a><span class=sd>        获取单个人物信息</span>
<a id=__codelineno-48-230 name=__codelineno-48-230 href=#__codelineno-48-230></a><span class=sd>        路由： GET  /api/heros/&lt;pk&gt;/</span>
<a id=__codelineno-48-231 name=__codelineno-48-231 href=#__codelineno-48-231></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-232 name=__codelineno-48-232 href=#__codelineno-48-232></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-48-233 name=__codelineno-48-233 href=#__codelineno-48-233></a>            <span class=n>hero</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-48-234 name=__codelineno-48-234 href=#__codelineno-48-234></a>        <span class=k>except</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-48-235 name=__codelineno-48-235 href=#__codelineno-48-235></a>            <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>({</span><span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=s1>&#39;查询的数据不存在&#39;</span><span class=p>},</span> <span class=n>status</span><span class=o>=</span><span class=mi>404</span><span class=p>)</span>
<a id=__codelineno-48-236 name=__codelineno-48-236 href=#__codelineno-48-236></a>        <span class=n>book_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-48-237 name=__codelineno-48-237 href=#__codelineno-48-237></a>            <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-238 name=__codelineno-48-238 href=#__codelineno-48-238></a>            <span class=s1>&#39;hname&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hname</span><span class=p>,</span>
<a id=__codelineno-48-239 name=__codelineno-48-239 href=#__codelineno-48-239></a>            <span class=s1>&#39;hgender&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hgender</span><span class=p>,</span>
<a id=__codelineno-48-240 name=__codelineno-48-240 href=#__codelineno-48-240></a>            <span class=s1>&#39;hcomment&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hcomment</span><span class=p>,</span>
<a id=__codelineno-48-241 name=__codelineno-48-241 href=#__codelineno-48-241></a>            <span class=s2>&quot;hbookid&quot;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-242 name=__codelineno-48-242 href=#__codelineno-48-242></a>            <span class=s2>&quot;hbookBtitle&quot;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>btitle</span><span class=p>,</span>
<a id=__codelineno-48-243 name=__codelineno-48-243 href=#__codelineno-48-243></a>            <span class=s2>&quot;hbookBread&quot;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>bread</span>
<a id=__codelineno-48-244 name=__codelineno-48-244 href=#__codelineno-48-244></a>        <span class=p>}</span>
<a id=__codelineno-48-245 name=__codelineno-48-245 href=#__codelineno-48-245></a>        <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>(</span><span class=n>book_dict</span><span class=p>)</span>
<a id=__codelineno-48-246 name=__codelineno-48-246 href=#__codelineno-48-246></a>
<a id=__codelineno-48-247 name=__codelineno-48-247 href=#__codelineno-48-247></a>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-48-248 name=__codelineno-48-248 href=#__codelineno-48-248></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-249 name=__codelineno-48-249 href=#__codelineno-48-249></a><span class=sd>        更新人物信息</span>
<a id=__codelineno-48-250 name=__codelineno-48-250 href=#__codelineno-48-250></a><span class=sd>        路由： PUT  /api/heros/&lt;pk&gt;</span>
<a id=__codelineno-48-251 name=__codelineno-48-251 href=#__codelineno-48-251></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-252 name=__codelineno-48-252 href=#__codelineno-48-252></a>        <span class=n>json_bytes</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>body</span>
<a id=__codelineno-48-253 name=__codelineno-48-253 href=#__codelineno-48-253></a>        <span class=n>json_str</span> <span class=o>=</span> <span class=n>json_bytes</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
<a id=__codelineno-48-254 name=__codelineno-48-254 href=#__codelineno-48-254></a>        <span class=n>heros_dict</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>json_str</span><span class=p>)</span>
<a id=__codelineno-48-255 name=__codelineno-48-255 href=#__codelineno-48-255></a>
<a id=__codelineno-48-256 name=__codelineno-48-256 href=#__codelineno-48-256></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-48-257 name=__codelineno-48-257 href=#__codelineno-48-257></a>            <span class=c1># 获取需要更新的英雄对象</span>
<a id=__codelineno-48-258 name=__codelineno-48-258 href=#__codelineno-48-258></a>            <span class=n>hero</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-48-259 name=__codelineno-48-259 href=#__codelineno-48-259></a>        <span class=k>except</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-48-260 name=__codelineno-48-260 href=#__codelineno-48-260></a>            <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>({</span><span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=s1>&#39;修改的数据不存在&#39;</span><span class=p>},</span> <span class=n>status</span><span class=o>=</span><span class=mi>404</span><span class=p>)</span>
<a id=__codelineno-48-261 name=__codelineno-48-261 href=#__codelineno-48-261></a>
<a id=__codelineno-48-262 name=__codelineno-48-262 href=#__codelineno-48-262></a>        <span class=c1># 更新英雄信息</span>
<a id=__codelineno-48-263 name=__codelineno-48-263 href=#__codelineno-48-263></a>        <span class=n>hero</span><span class=o>.</span><span class=n>hname</span> <span class=o>=</span> <span class=n>heros_dict</span><span class=p>[</span><span class=s1>&#39;hname&#39;</span><span class=p>]</span>
<a id=__codelineno-48-264 name=__codelineno-48-264 href=#__codelineno-48-264></a>        <span class=n>hero</span><span class=o>.</span><span class=n>hgender</span> <span class=o>=</span> <span class=n>heros_dict</span><span class=p>[</span><span class=s1>&#39;hgender&#39;</span><span class=p>]</span>
<a id=__codelineno-48-265 name=__codelineno-48-265 href=#__codelineno-48-265></a>        <span class=n>hero</span><span class=o>.</span><span class=n>hcomment</span> <span class=o>=</span> <span class=n>heros_dict</span><span class=p>[</span><span class=s1>&#39;hcomment&#39;</span><span class=p>]</span>
<a id=__codelineno-48-266 name=__codelineno-48-266 href=#__codelineno-48-266></a>
<a id=__codelineno-48-267 name=__codelineno-48-267 href=#__codelineno-48-267></a>        <span class=c1># 获取关联的图书对象</span>
<a id=__codelineno-48-268 name=__codelineno-48-268 href=#__codelineno-48-268></a>        <span class=n>book_id</span> <span class=o>=</span> <span class=n>heros_dict</span><span class=p>[</span><span class=s1>&#39;hbook&#39;</span><span class=p>]</span>
<a id=__codelineno-48-269 name=__codelineno-48-269 href=#__codelineno-48-269></a>        <span class=n>book</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>book_id</span><span class=p>)</span>
<a id=__codelineno-48-270 name=__codelineno-48-270 href=#__codelineno-48-270></a>        <span class=c1># 更新外键关联属性</span>
<a id=__codelineno-48-271 name=__codelineno-48-271 href=#__codelineno-48-271></a>        <span class=n>hero</span><span class=o>.</span><span class=n>hbook</span> <span class=o>=</span> <span class=n>book</span>
<a id=__codelineno-48-272 name=__codelineno-48-272 href=#__codelineno-48-272></a>        <span class=c1># 保存更新后的英雄对象</span>
<a id=__codelineno-48-273 name=__codelineno-48-273 href=#__codelineno-48-273></a>        <span class=n>hero</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-48-274 name=__codelineno-48-274 href=#__codelineno-48-274></a>
<a id=__codelineno-48-275 name=__codelineno-48-275 href=#__codelineno-48-275></a>        <span class=c1># 构造响应数据并返回</span>
<a id=__codelineno-48-276 name=__codelineno-48-276 href=#__codelineno-48-276></a>        <span class=n>json_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-48-277 name=__codelineno-48-277 href=#__codelineno-48-277></a>            <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-48-278 name=__codelineno-48-278 href=#__codelineno-48-278></a>            <span class=s1>&#39;hname&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hname</span><span class=p>,</span>
<a id=__codelineno-48-279 name=__codelineno-48-279 href=#__codelineno-48-279></a>            <span class=s1>&#39;hgender&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hgender</span><span class=p>,</span>
<a id=__codelineno-48-280 name=__codelineno-48-280 href=#__codelineno-48-280></a>            <span class=s1>&#39;hcomment&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hcomment</span><span class=p>,</span>
<a id=__codelineno-48-281 name=__codelineno-48-281 href=#__codelineno-48-281></a>            <span class=s1>&#39;hbook&#39;</span><span class=p>:</span> <span class=n>hero</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>btitle</span>  <span class=c1># 将外键关联对象的名称进行序列化</span>
<a id=__codelineno-48-282 name=__codelineno-48-282 href=#__codelineno-48-282></a>        <span class=p>}</span>
<a id=__codelineno-48-283 name=__codelineno-48-283 href=#__codelineno-48-283></a>        <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>(</span><span class=n>json_dict</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=mi>200</span><span class=p>)</span>
<a id=__codelineno-48-284 name=__codelineno-48-284 href=#__codelineno-48-284></a>
<a id=__codelineno-48-285 name=__codelineno-48-285 href=#__codelineno-48-285></a>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-48-286 name=__codelineno-48-286 href=#__codelineno-48-286></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-48-287 name=__codelineno-48-287 href=#__codelineno-48-287></a><span class=sd>        删除人物</span>
<a id=__codelineno-48-288 name=__codelineno-48-288 href=#__codelineno-48-288></a><span class=sd>        路由： DELETE /api/heros/&lt;pk&gt;/</span>
<a id=__codelineno-48-289 name=__codelineno-48-289 href=#__codelineno-48-289></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-48-290 name=__codelineno-48-290 href=#__codelineno-48-290></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-48-291 name=__codelineno-48-291 href=#__codelineno-48-291></a>            <span class=n>hero</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-48-292 name=__codelineno-48-292 href=#__codelineno-48-292></a>        <span class=k>except</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-48-293 name=__codelineno-48-293 href=#__codelineno-48-293></a>            <span class=k>return</span> <span class=n>JsonResponse</span><span class=p>({</span><span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=s1>&#39;删除的数据不存在&#39;</span><span class=p>},</span> <span class=n>status</span><span class=o>=</span><span class=mi>404</span><span class=p>)</span>
<a id=__codelineno-48-294 name=__codelineno-48-294 href=#__codelineno-48-294></a>        <span class=c1># hero.delete()  # 物理删除（真正从数据库删除）</span>
<a id=__codelineno-48-295 name=__codelineno-48-295 href=#__codelineno-48-295></a>        <span class=n>hero</span><span class=o>.</span><span class=n>is_delete</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-48-296 name=__codelineno-48-296 href=#__codelineno-48-296></a>        <span class=n>hero</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>  <span class=c1># （逻辑删除）</span>
<a id=__codelineno-48-297 name=__codelineno-48-297 href=#__codelineno-48-297></a>        <span class=c1># 响应：删除时不需要有响应体但要指定状态码为 204</span>
<a id=__codelineno-48-298 name=__codelineno-48-298 href=#__codelineno-48-298></a>        <span class=k>return</span> <span class=n>HttpResponse</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=mi>204</span><span class=p>)</span>
</code></pre></div> <h5 id=路由>路由<a class=headerlink href=#路由 title="Permanent link">&para;</a></h5> <p><code>bookv1/urls.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>
<a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>include</span><span class=p>,</span> <span class=n>re_path</span><span class=p>,</span> <span class=n>path</span>
<a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=kn>from</span> <span class=nn>app</span> <span class=kn>import</span> <span class=n>urls</span>
<a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a>
<a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;admin/&#39;</span><span class=p>,</span> <span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>urls</span><span class=p>),</span>
<a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a>    <span class=n>re_path</span><span class=p>(</span><span class=s1>&#39;api/&#39;</span><span class=p>,</span> <span class=n>include</span><span class=p>(</span><span class=n>urls</span><span class=p>)),</span>
<a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a><span class=p>]</span>
</code></pre></div> <p><code>app/urls.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>re_path</span>
<a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a><span class=kn>from</span> <span class=nn>.</span> <span class=kn>import</span> <span class=n>views</span>
<a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a>
<a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a>    <span class=c1># 书籍</span>
<a id=__codelineno-50-6 name=__codelineno-50-6 href=#__codelineno-50-6></a>    <span class=n>re_path</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^books/$&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>BooksAPIVIew</span><span class=o>.</span><span class=n>as_view</span><span class=p>()),</span>
<a id=__codelineno-50-7 name=__codelineno-50-7 href=#__codelineno-50-7></a>    <span class=n>re_path</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^books/(?P&lt;pk&gt;\d+)/$&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>BookAPIView</span><span class=o>.</span><span class=n>as_view</span><span class=p>()),</span>
<a id=__codelineno-50-8 name=__codelineno-50-8 href=#__codelineno-50-8></a>    <span class=c1># 人物</span>
<a id=__codelineno-50-9 name=__codelineno-50-9 href=#__codelineno-50-9></a>    <span class=n>re_path</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^heros/$&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>HerosAPIVIew</span><span class=o>.</span><span class=n>as_view</span><span class=p>()),</span>
<a id=__codelineno-50-10 name=__codelineno-50-10 href=#__codelineno-50-10></a>    <span class=n>re_path</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^heros/(?P&lt;pk&gt;\d+)/$&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>HeroAPIView</span><span class=o>.</span><span class=n>as_view</span><span class=p>()),</span>
<a id=__codelineno-50-11 name=__codelineno-50-11 href=#__codelineno-50-11></a>
<a id=__codelineno-50-12 name=__codelineno-50-12 href=#__codelineno-50-12></a><span class=p>]</span>
</code></pre></div> <h5 id=启动应用>启动应用<a class=headerlink href=#启动应用 title="Permanent link">&para;</a></h5> <div class=highlight><pre><span></span><code><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a>python<span class=w> </span>manage.py<span class=w> </span>runserver<span class=w> </span><span class=m>0</span>.0.0.0:8000
</code></pre></div> <h5 id=使用postman测试接口>使用postman测试接口<a class=headerlink href=#使用postman测试接口 title="Permanent link">&para;</a></h5> <table> <thead> <tr> <th>分类</th> <th>方法</th> <th>详细</th> <th>接口是否可用</th> </tr> </thead> <tbody> <tr> <td>图书</td> <td>GET<br>POST<br>PUT<br>DELETE</td> <td>获取图书列表<br>获取单个图书详细<br>修改图书信息<br>删除图书</td> <td>√<br>√<br>√<br>√<br></td> </tr> <tr> <td>人物</td> <td>GET<br>POST<br>PUT<br>DELETE</td> <td>获取人物列表<br>获取单个人物详细<br>修改人物信息<br>删除人物</td> <td>√<br>√<br>√<br>√<br></td> </tr> </tbody> </table> <p>Postman发送请求示例</p> <div class=highlight><pre><span></span><code><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=c1># GET 获取所有图书数据</span>
<a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>http://127.0.0.1:8000/api/books
<a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a>
<a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a><span class=c1># GET 获取单一图书数据</span>
<a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a>http://127.0.0.1:8000/api/books/1
<a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a>
<a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a><span class=c1># POST 新增读书数据</span>
<a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a>http://127.0.0.1:8000/api/books/
<a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a>
<a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a><span class=c1># Body - raw json</span>
<a id=__codelineno-52-11 name=__codelineno-52-11 href=#__codelineno-52-11></a><span class=o>{</span>
<a id=__codelineno-52-12 name=__codelineno-52-12 href=#__codelineno-52-12></a><span class=w>    </span><span class=s2>&quot;btitle&quot;</span>:<span class=w> </span><span class=s2>&quot;三国演义&quot;</span>,
<a id=__codelineno-52-13 name=__codelineno-52-13 href=#__codelineno-52-13></a><span class=w>    </span><span class=s2>&quot;bpub_date&quot;</span>:<span class=w> </span><span class=s2>&quot;1990-02-03&quot;</span>
<a id=__codelineno-52-14 name=__codelineno-52-14 href=#__codelineno-52-14></a><span class=o>}</span>
<a id=__codelineno-52-15 name=__codelineno-52-15 href=#__codelineno-52-15></a>
<a id=__codelineno-52-16 name=__codelineno-52-16 href=#__codelineno-52-16></a><span class=c1># PUT 修改图书数据</span>
<a id=__codelineno-52-17 name=__codelineno-52-17 href=#__codelineno-52-17></a>http://127.0.0.1:8000/api/books/5/
<a id=__codelineno-52-18 name=__codelineno-52-18 href=#__codelineno-52-18></a>
<a id=__codelineno-52-19 name=__codelineno-52-19 href=#__codelineno-52-19></a><span class=c1># Body - raw json</span>
<a id=__codelineno-52-20 name=__codelineno-52-20 href=#__codelineno-52-20></a><span class=o>{</span>
<a id=__codelineno-52-21 name=__codelineno-52-21 href=#__codelineno-52-21></a><span class=w>    </span><span class=s2>&quot;btitle&quot;</span>:<span class=w> </span><span class=s2>&quot;射雕英雄传2&quot;</span>,
<a id=__codelineno-52-22 name=__codelineno-52-22 href=#__codelineno-52-22></a><span class=w>    </span><span class=s2>&quot;bpub_date&quot;</span>:<span class=w> </span><span class=s2>&quot;1990-02-03&quot;</span>
<a id=__codelineno-52-23 name=__codelineno-52-23 href=#__codelineno-52-23></a><span class=o>}</span>
<a id=__codelineno-52-24 name=__codelineno-52-24 href=#__codelineno-52-24></a>
<a id=__codelineno-52-25 name=__codelineno-52-25 href=#__codelineno-52-25></a><span class=c1># DELETE 删除图书数据</span>
<a id=__codelineno-52-26 name=__codelineno-52-26 href=#__codelineno-52-26></a>http://127.0.0.1:8000/api/books/5/
<a id=__codelineno-52-27 name=__codelineno-52-27 href=#__codelineno-52-27></a>
<a id=__codelineno-52-28 name=__codelineno-52-28 href=#__codelineno-52-28></a><span class=c1># ......</span>
</code></pre></div> <h2 id=4-明确rest接口开发的核心任务>4. 明确REST接口开发的核心任务<a class=headerlink href=#4-明确rest接口开发的核心任务 title="Permanent link">&para;</a></h2> <p>分析一下上节的案例，可以发现，在开发REST API接口时，视图中做的最主要有三件事：</p> <p>1.将请求的数据（如JSON格式）转换为模型类对象</p> <p>2.操作数据库</p> <p>3.将模型类对象转换为响应的数据（如JSON格式）</p> <h3 id=41-序列化>4.1 序列化<a class=headerlink href=#41-序列化 title="Permanent link">&para;</a></h3> <p>序列化Serialization 简而言之，我们可以将序列化理解为：</p> <p>将程序中的一个数据结构类型转换为其他格式（字典、JSON、XML等），例如将Django中的模型类对象装换为JSON字符串，这个转换过程我们称为序列化。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=n>book_list</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a><span class=c1># 序列化</span>
<a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=k>for</span> <span class=n>book</span> <span class=ow>in</span> <span class=n>queryset</span><span class=p>:</span>
<a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a>    <span class=n>book_list</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
<a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a>        <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a>        <span class=s1>&#39;btitle&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>btitle</span><span class=p>,</span>
<a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a>        <span class=s1>&#39;bpub_date&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bpub_date</span><span class=p>,</span>
<a id=__codelineno-53-9 name=__codelineno-53-9 href=#__codelineno-53-9></a>        <span class=s1>&#39;bread&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bread</span><span class=p>,</span>
<a id=__codelineno-53-10 name=__codelineno-53-10 href=#__codelineno-53-10></a>        <span class=s1>&#39;bcomment&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>bcomment</span><span class=p>,</span>
<a id=__codelineno-53-11 name=__codelineno-53-11 href=#__codelineno-53-11></a>        <span class=s1>&#39;image&#39;</span><span class=p>:</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span><span class=o>.</span><span class=n>url</span> <span class=k>if</span> <span class=n>book</span><span class=o>.</span><span class=n>image</span> <span class=k>else</span> <span class=s1>&#39;&#39;</span>
<a id=__codelineno-53-12 name=__codelineno-53-12 href=#__codelineno-53-12></a>    <span class=p>})</span>
<a id=__codelineno-53-13 name=__codelineno-53-13 href=#__codelineno-53-13></a><span class=k>return</span> <span class=n>JsonResponse</span><span class=p>(</span><span class=n>book_list</span><span class=p>,</span> <span class=n>safe</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</code></pre></div> <p>反之，将其他格式（字典、JSON、XML等）转换为程序中的数据，例如将JSON字符串转换为Django中的模型类对象，这个过程我们称为反序列化。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=n>json_bytes</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>body</span>
<a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a><span class=n>json_str</span> <span class=o>=</span> <span class=n>json_bytes</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
</code></pre></div> <h3 id=42-反序列化>4.2 反序列化<a class=headerlink href=#42-反序列化 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=n>book_dict</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>json_str</span><span class=p>)</span>
<a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=n>book</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
<a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a>    <span class=n>btitle</span><span class=o>=</span><span class=n>book_dict</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;btitle&#39;</span><span class=p>),</span>
<a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a>    <span class=n>bpub_date</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>strptime</span><span class=p>(</span><span class=n>book_dict</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;bpub_date&#39;</span><span class=p>),</span> <span class=s1>&#39;%Y-%m-</span><span class=si>%d</span><span class=s1>&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>date</span><span class=p>()</span>
<a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a><span class=p>)</span>
</code></pre></div> <p>我们可以看到，在开发REST API时，视图中要频繁的进行序列化与反序列化的编写。</p> <p>总结 在开发REST API接口时，我们在视图中需要做的最核心的事是：</p> <ul> <li>将数据库数据序列化为前端所需要的格式，并返回；</li> <li>将前端发送的数据反序列化为模型类对象，并保存到数据库中</li> </ul> <h2 id=5-django-rest-framework-简介>5. Django REST framework 简介<a class=headerlink href=#5-django-rest-framework-简介 title="Permanent link">&para;</a></h2> <p>在序列化与反序列化时，虽然操作的数据不尽相同，但是执行的过程却是相似的，也就是说这部分代码是可以复用简化编写的。</p> <p>在开发RESTAPI的视图中，虽然每个视图具体操作的数据不同，但增、删、改、查的实现流程基本套路化，所以这部分代码也是可以复用简化编写的：</p> <ol> <li>增：校验请求数据 -&gt; 执行反序列化过程 -&gt; 保存数据库 -&gt; 将保存的对象序列化并返回</li> <li>删：判断要删除的数据是否存在 -&gt;执行数据库删除</li> <li>改：判断要修改的数据是否存在 -&gt; 校验请求的数据 -&gt; 执行反序列化过程 -&gt; 保存数据库 -&gt; 将保存的对象序列化并返回</li> <li>查：查询数据库 -&gt; 将数据序列化并返回</li> </ol> <p>Django REST framework可以帮助我们简化上述两部分的代码编写，大大提高REST API的开发速度。</p> <h3 id=51-认识django-rest-framework>5.1 认识Django REST framework<a class=headerlink href=#51-认识django-rest-framework title="Permanent link">&para;</a></h3> <p>Django REST framework 框架是一个用于构建Web API 的强大而又灵活的工具。</p> <p>通常简称为DRF框架 或 REST framework。</p> <p>DRF框架是建立在Django框架基础之上，由Tom Christie大牛二次开发的开源项目。</p> <p>特点</p> <ul> <li>提供了定义序列化器Serializer的方法，可以快速根据 Django ORM 或者其它库自动序列化/反序列化；</li> <li>提供了丰富的类视图、Mixin扩展类，简化视图的编写；</li> <li>丰富的定制层级：函数视图、类视图、视图集合到自动生成 API， 满足各种需要；</li> <li>多种身份认证和权限认证方式的支持；</li> <li>内置了限流系统；</li> <li>直观的 API web 界面；</li> <li>可扩展性，插件丰富</li> </ul> <h3 id=52-django-rest-framework常用组件>5.2 Django REST framework常用组件<a class=headerlink href=#52-django-rest-framework常用组件 title="Permanent link">&para;</a></h3> <p>可以毫不夸张地说，如果可以将Django REST framework的10个常用组件融会贯通，那么使用Django开发前后端分离的项目中有可能遇到的绝大部分需求，都能得到高效的解决。</p> <p>Django REST framework的10个常用组件如下：</p> <ul> <li>权限组件；</li> <li>认证组件；</li> <li>访问频率限制组件；</li> <li>序列化组件；</li> <li>路由组件；</li> <li>视图组件；</li> <li>分页组件；</li> <li>解析器组件；</li> <li>渲染器组件；</li> <li>版本组件。</li> </ul> <p>Django REST framework官方文档的地址是 <a href=https://www.django-rest-framework.org/ >https://www.django-rest-framework.org/</a></p> <h2 id=6-用django-rest-framework实现豆瓣api应用>6. 用Django REST framework实现豆瓣API应用<a class=headerlink href=#6-用django-rest-framework实现豆瓣api应用 title="Permanent link">&para;</a></h2> <p>新建一个Django项目，命名为book，作为贯穿本书的演示项目。</p> <p>选择PyCharm作为开发工具，在新建目录时，新建App命名为users。</p> <h3 id=61-豆瓣api功能介绍>6.1 豆瓣API功能介绍<a class=headerlink href=#61-豆瓣api功能介绍 title="Permanent link">&para;</a></h3> <p>豆瓣图书的API功能原理是用户通过输入图书的ISBN号（书号）、书名、作者、出版社等部分信息，就可获取到该图书在豆瓣上的所有信息。</p> <p>当然，API中除了要包含检索信息之外，还要包含开发者的apikey，用来记录开发者访问API的次数，以此向开发者收费。</p> <p>目前豆瓣图书的API是0.3元/100次。</p> <h3 id=62-django-rest-framework序列化>6.2 Django REST framework序列化<a class=headerlink href=#62-django-rest-framework序列化 title="Permanent link">&para;</a></h3> <p>序列化（Serialization）是指将对象的状态信息转换为可以存储或传输形式的过程。在客户端与服务端传输的数据形式主要分为两种：XML和JSON。</p> <p>在Django中的序列化就是指将对象状态的信息转换为JSON数据，以达到将数据信息传送给前端的目的。</p> <p>序列化是开发API不可缺少的一个环节，Django本身也有一套做序列化的方案，这个方案可以说已经做得很好了，但是若跟Django REST framework相比，还是不够极致，速度不够快。</p> <h4 id=621-postman的使用>6.2.1 Postman的使用<a class=headerlink href=#621-postman的使用 title="Permanent link">&para;</a></h4> <p>Postman是一款非常流行的API调试工具，其使用简单、方便，而且功能强大。</p> <p>通过Postman可以便捷地向API发送GET、POST、PUT和DELETE请求，几乎是资深或者伪资深开发人员调试API的首选。</p> <p>当然，这并不是Postman在开发领域如此受欢迎的唯一理由。</p> <p>Postman最早是以Chrome浏览器插件的形式存在，可以从Chrome应用商店搜索、下载并安装，后来因为一些原因，Chrome应用商店在国内无法访问，2018年Postman停止了对Chrome浏览器的支持，提供了独立安装包，不再依赖Chrome，同时支持Linux、Windows和Mac OS系统。</p> <p>测试人员做接口测试会有更多选择，例如Jmeter和soapUI等，因为测试人员就是完成产品的测试，而开发人员不需要有更多的选择，毕竟开发人员是创新者、创造者。</p> <p>Postman的下载地址是 <a href=https://www.getpostman.com/apps>https://www.getpostman.com/apps</a> 。</p> <p>同样的工具还有httpie，使用方法如下：</p> <p>http请求命令行工具(httpie)：<a href=https://www.cnblogs.com/yoyoketang/p/11546176.html>https://www.cnblogs.com/yoyoketang/p/11546176.html</a></p> <h4 id=622-用serializersserializer方式序列化>6.2.2 用serializers.Serializer方式序列化<a class=headerlink href=#622-用serializersserializer方式序列化 title="Permanent link">&para;</a></h4> <p>（1）打开项目book。</p> <p>（2）安装Django REST framework及其依赖包markdown和django-filter。命令如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a>pip<span class=w> </span>install<span class=w> </span>djangorestframework<span class=w> </span>markdown<span class=w> </span>django-filter
</code></pre></div> <p>（3）在settings中注册，代码如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=n>INSTALLED_APPS</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a>    <span class=s1>&#39;django.contrib.admin&#39;</span><span class=p>,</span>
<a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a>    <span class=s1>&#39;django.contrib.auth&#39;</span><span class=p>,</span>
<a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a>    <span class=s1>&#39;django.contrib.contenttypes&#39;</span><span class=p>,</span>
<a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a>    <span class=s1>&#39;django.contrib.sessions&#39;</span><span class=p>,</span>
<a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a>    <span class=s1>&#39;django.contrib.messages&#39;</span><span class=p>,</span>
<a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a>    <span class=s1>&#39;django.contrib.staticfiles&#39;</span><span class=p>,</span>
<a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a>    <span class=s1>&#39;users.apps.UsersConfig&#39;</span><span class=p>,</span>
<a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a>    <span class=s1>&#39;rest_framework&#39;</span>
<a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a><span class=p>]</span>
</code></pre></div> <p>（4）设计users的models.py，重构用户表UserProfile，增加字段APIkey和money。当然，为了演示核心功能，可以建立一张最简单的表，大家可以根据个人喜好增加一些业务字段来丰富项目功能。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
<a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
<a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a><span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>AbstractUser</span>
<a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a>
<a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a>
<a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a><span class=c1># Create your models here.</span>
<a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a><span class=k>class</span> <span class=nc>UserProfile</span><span class=p>(</span><span class=n>AbstractUser</span><span class=p>):</span>
<a id=__codelineno-58-8 name=__codelineno-58-8 href=#__codelineno-58-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-58-9 name=__codelineno-58-9 href=#__codelineno-58-9></a><span class=sd>    用户</span>
<a id=__codelineno-58-10 name=__codelineno-58-10 href=#__codelineno-58-10></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-58-11 name=__codelineno-58-11 href=#__codelineno-58-11></a>    <span class=n>APIkey</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;APIkey&#39;</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=s1>&#39;abcdefghigklmn&#39;</span><span class=p>)</span>
<a id=__codelineno-58-12 name=__codelineno-58-12 href=#__codelineno-58-12></a>    <span class=n>money</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;余额&#39;</span><span class=p>)</span>
<a id=__codelineno-58-13 name=__codelineno-58-13 href=#__codelineno-58-13></a>
<a id=__codelineno-58-14 name=__codelineno-58-14 href=#__codelineno-58-14></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-58-15 name=__codelineno-58-15 href=#__codelineno-58-15></a>        <span class=n>verbose_name</span> <span class=o>=</span> <span class=s1>&#39;用户&#39;</span>
<a id=__codelineno-58-16 name=__codelineno-58-16 href=#__codelineno-58-16></a>        <span class=n>verbose_name_plural</span> <span class=o>=</span> <span class=n>verbose_name</span>
<a id=__codelineno-58-17 name=__codelineno-58-17 href=#__codelineno-58-17></a>
<a id=__codelineno-58-18 name=__codelineno-58-18 href=#__codelineno-58-18></a>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-58-19 name=__codelineno-58-19 href=#__codelineno-58-19></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>username</span>
</code></pre></div> <p>（5）在settings中配置用户表的继承代码：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=n>AUTH_USER_MODEL</span><span class=o>=</span><span class=s1>&#39;users.UserProfile&#39;</span>
</code></pre></div> <p>（6）在users的models.py文件中新建书籍信息表book，为了演示方便，我们姑且将作者字段并入书籍信息表，读者在实际项目中可根据业务模式灵活设计数据表model：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=k>class</span> <span class=nc>Book</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a><span class=sd>    书籍信息</span>
<a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-60-5 name=__codelineno-60-5 href=#__codelineno-60-5></a>    <span class=n>title</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;书名&#39;</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
<a id=__codelineno-60-6 name=__codelineno-60-6 href=#__codelineno-60-6></a>    <span class=n>isbn</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;isbn&#39;</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
<a id=__codelineno-60-7 name=__codelineno-60-7 href=#__codelineno-60-7></a>    <span class=n>author</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;作者&#39;</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
<a id=__codelineno-60-8 name=__codelineno-60-8 href=#__codelineno-60-8></a>    <span class=n>publish</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;出版社&#39;</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
<a id=__codelineno-60-9 name=__codelineno-60-9 href=#__codelineno-60-9></a>    <span class=n>rate</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>FloatField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;豆瓣评分&#39;</span><span class=p>)</span>
<a id=__codelineno-60-10 name=__codelineno-60-10 href=#__codelineno-60-10></a>    <span class=n>add_time</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;添加时间&#39;</span><span class=p>)</span>
<a id=__codelineno-60-11 name=__codelineno-60-11 href=#__codelineno-60-11></a>
<a id=__codelineno-60-12 name=__codelineno-60-12 href=#__codelineno-60-12></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-60-13 name=__codelineno-60-13 href=#__codelineno-60-13></a>        <span class=n>verbose_name</span> <span class=o>=</span> <span class=s1>&#39;书籍信息&#39;</span>
<a id=__codelineno-60-14 name=__codelineno-60-14 href=#__codelineno-60-14></a>        <span class=n>verbose_name_plural</span> <span class=o>=</span> <span class=n>verbose_name</span>
<a id=__codelineno-60-15 name=__codelineno-60-15 href=#__codelineno-60-15></a>
<a id=__codelineno-60-16 name=__codelineno-60-16 href=#__codelineno-60-16></a>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-60-17 name=__codelineno-60-17 href=#__codelineno-60-17></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>title</span>
</code></pre></div> <p>（7）执行数据更新命令：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a>python<span class=w> </span>manage.py<span class=w> </span>makemigrations
<a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a>
<a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a>python<span class=w> </span>manage.py<span class=w> </span>migrate
</code></pre></div> <p>（8）建立一个超级用户，用户名为admin，邮箱为 <a href=mailto:1@1.com>&#49;&#64;&#49;&#46;&#99;&#111;&#109;</a> ，密码为admin1234。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a>python<span class=w> </span>manage.py<span class=w> </span>createsuperuser
<a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a>Username:<span class=w> </span>admin
<a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a>邮箱:<span class=w> </span><span class=m>1</span>@1.com
<a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a>Password:
<a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a>Password<span class=w> </span><span class=o>(</span>again<span class=o>)</span>:
</code></pre></div> <p>（9）通过PyCharm的Databases操作面板，直接在book表内增加一条记录，title为三国演义，isbn为777777，author为罗贯中，publish为一个出版社，rate为6.6，add_time为154087130331。</p> <p>（10）准备工作已经完成，接下来是我们的“正片”开始啦。在users目录下新建py文件serializers，将序列化的类代码写入其中：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>serializers</span>
<a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a>
<a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>UserProfile</span><span class=p>,</span> <span class=n>Book</span>
<a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a>
<a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a>
<a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a><span class=k>class</span> <span class=nc>BookSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>Serializer</span><span class=p>):</span>
<a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a>    <span class=n>title</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-63-8 name=__codelineno-63-8 href=#__codelineno-63-8></a>    <span class=n>isbn</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-63-9 name=__codelineno-63-9 href=#__codelineno-63-9></a>    <span class=n>author</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-63-10 name=__codelineno-63-10 href=#__codelineno-63-10></a>    <span class=n>publish</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-63-11 name=__codelineno-63-11 href=#__codelineno-63-11></a>    <span class=n>rate</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>FloatField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</code></pre></div> <p>其他Serializer字段与选项</p> <p><a href=https://q1mi.github.io/Django-REST-framework-documentation/api-guide/fields_zh/ >参考</a></p> <p>（11）在users/views中编写视图代码：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=kn>from</span> <span class=nn>.serializers</span> <span class=kn>import</span> <span class=n>BookSerializer</span>
<a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a><span class=kn>from</span> <span class=nn>rest_framework.views</span> <span class=kn>import</span> <span class=n>APIView</span>
<a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
<a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a>
<a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a><span class=c1># Create your views here.</span>
<a id=__codelineno-64-6 name=__codelineno-64-6 href=#__codelineno-64-6></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>UserProfile</span><span class=p>,</span> <span class=n>Book</span>
<a id=__codelineno-64-7 name=__codelineno-64-7 href=#__codelineno-64-7></a>
<a id=__codelineno-64-8 name=__codelineno-64-8 href=#__codelineno-64-8></a>
<a id=__codelineno-64-9 name=__codelineno-64-9 href=#__codelineno-64-9></a><span class=k>class</span> <span class=nc>BookAPIView1</span><span class=p>(</span><span class=n>APIView</span><span class=p>):</span>
<a id=__codelineno-64-10 name=__codelineno-64-10 href=#__codelineno-64-10></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-64-11 name=__codelineno-64-11 href=#__codelineno-64-11></a><span class=sd>    使用Serializer</span>
<a id=__codelineno-64-12 name=__codelineno-64-12 href=#__codelineno-64-12></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-64-13 name=__codelineno-64-13 href=#__codelineno-64-13></a>
<a id=__codelineno-64-14 name=__codelineno-64-14 href=#__codelineno-64-14></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=nb>format</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-64-15 name=__codelineno-64-15 href=#__codelineno-64-15></a>        <span class=n>APIKey</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;apikey&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-64-16 name=__codelineno-64-16 href=#__codelineno-64-16></a>        <span class=n>developer</span> <span class=o>=</span> <span class=n>UserProfile</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>APIkey</span><span class=o>=</span><span class=n>APIKey</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
<a id=__codelineno-64-17 name=__codelineno-64-17 href=#__codelineno-64-17></a>        <span class=k>if</span> <span class=n>developer</span><span class=p>:</span>
<a id=__codelineno-64-18 name=__codelineno-64-18 href=#__codelineno-64-18></a>            <span class=n>balance</span> <span class=o>=</span> <span class=n>developer</span><span class=o>.</span><span class=n>money</span>
<a id=__codelineno-64-19 name=__codelineno-64-19 href=#__codelineno-64-19></a>            <span class=k>if</span> <span class=n>balance</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-64-20 name=__codelineno-64-20 href=#__codelineno-64-20></a>                <span class=n>isbn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;isbn&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-64-21 name=__codelineno-64-21 href=#__codelineno-64-21></a>                <span class=n>books</span> <span class=o>=</span> <span class=n>Book</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>isbn</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>isbn</span><span class=p>))</span>
<a id=__codelineno-64-22 name=__codelineno-64-22 href=#__codelineno-64-22></a>                <span class=n>books_serializer</span> <span class=o>=</span> <span class=n>BookSerializer</span><span class=p>(</span><span class=n>books</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-64-23 name=__codelineno-64-23 href=#__codelineno-64-23></a>                <span class=n>developer</span><span class=o>.</span><span class=n>money</span> <span class=o>-=</span> <span class=mi>1</span>
<a id=__codelineno-64-24 name=__codelineno-64-24 href=#__codelineno-64-24></a>                <span class=n>developer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-64-25 name=__codelineno-64-25 href=#__codelineno-64-25></a>                <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>books_serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-64-26 name=__codelineno-64-26 href=#__codelineno-64-26></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-64-27 name=__codelineno-64-27 href=#__codelineno-64-27></a>                <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=s2>&quot;兄弟，又到了需要充钱的时候！好开心啊！&quot;</span><span class=p>)</span>
<a id=__codelineno-64-28 name=__codelineno-64-28 href=#__codelineno-64-28></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-64-29 name=__codelineno-64-29 href=#__codelineno-64-29></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=s2>&quot;查无此人啊&quot;</span><span class=p>)</span>
</code></pre></div> <p>（12）在urls中配置路由如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>
<a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>path</span>
<a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a><span class=kn>from</span> <span class=nn>users.views</span> <span class=kn>import</span> <span class=n>BookAPIView1</span>
<a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a>
<a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-65-6 name=__codelineno-65-6 href=#__codelineno-65-6></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;admin/&#39;</span><span class=p>,</span> <span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>urls</span><span class=p>),</span>
<a id=__codelineno-65-7 name=__codelineno-65-7 href=#__codelineno-65-7></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;apibook1/&#39;</span><span class=p>,</span> <span class=n>BookAPIView1</span><span class=o>.</span><span class=n>as_view</span><span class=p>(),</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;book1&#39;</span><span class=p>),</span>
<a id=__codelineno-65-8 name=__codelineno-65-8 href=#__codelineno-65-8></a><span class=p>]</span>
</code></pre></div> <p>至此，我们可以运行book项目，使用Postman访问API来测试一下啦。我们用Postman的GET方式访问API：</p> <p><a href="http://127.0.0.1:8000/apibook1/?apikey=abcdefghigklmn&isbn=777777">http://127.0.0.1:8000/apibook1/?apikey=abcdefghigklmn&amp;isbn=777777</a></p> <p>我们获得了想要的JSON数据：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=p>[</span>
<a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a><span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;三国演义&quot;</span><span class=p>,</span>
<a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a><span class=w>        </span><span class=nt>&quot;isbn&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;777777&quot;</span><span class=p>,</span>
<a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a><span class=w>        </span><span class=nt>&quot;author&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;罗贯中&quot;</span><span class=p>,</span>
<a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a><span class=w>        </span><span class=nt>&quot;publish&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;人民出版社&quot;</span><span class=p>,</span>
<a id=__codelineno-66-7 name=__codelineno-66-7 href=#__codelineno-66-7></a><span class=w>        </span><span class=nt>&quot;rate&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>6.6</span>
<a id=__codelineno-66-8 name=__codelineno-66-8 href=#__codelineno-66-8></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-66-9 name=__codelineno-66-9 href=#__codelineno-66-9></a><span class=p>]</span>
</code></pre></div> <p>然后到数据库中查看一下，发现用户admin的money被减去了1，变成了9。当我们用Postman故意填错apikey时，访问：</p> <p>当我们连续访问10次：</p> <p><a href="http://127.0.0.1:8000/apibook1/?apikey=abcdefghigklmn&isbn=777777">http://127.0.0.1:8000/apibook1/?apikey=abcdefghigklmn&amp;isbn=777777</a></p> <p>API返回的数据为：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=s2>&quot;兄弟，又到了需要充钱的时候！好开心啊！&quot;</span>
</code></pre></div> <p>至此，一个简单的模仿豆瓣图书API的功能就实现了。在实际的项目中，这样的实现方式虽然原理很清晰，但是存在着很明显的短板，比如被查询的表的字段不可能只有几个，我们在真正调用豆瓣图书API的时候就会发现，即使只查询一本书的信息，由于有很多的字段和外键字段，返回的数据量也会非常大。如果使用Serializer进行序列化，那么工作量实在太大，严重影响了开发效率。</p> <p>所以，这里使用Serializer进行序列化，目的是让大家通过这种序列化方式更加轻松地理解Django REST framework的序列化原理。在实际生产环境中，更加被广泛应用的序列化方式是采用了Django REST framework的ModelSerializer。</p> <h4 id=623-用serializersmodelserializer方式序列化>6.2.3 用serializers.ModelSerializer方式序列化<a class=headerlink href=#623-用serializersmodelserializer方式序列化 title="Permanent link">&para;</a></h4> <p>我们将要使用Django REST framework的ModelSerializer来实现这个功能。因为都是在book项目中，所以上一节中介绍的很多步骤我们没有必要重复。</p> <p>我们现在要做的，首先是到数据库中的UserProfile表中，将用户admin的money从0修改回10，不然API只能返回提醒充值的数据。</p> <h5 id=1定义>1.定义<a class=headerlink href=#1定义 title="Permanent link">&para;</a></h5> <p>在 users/serializer.py 中，写book的ModelSerializer序列化类：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>serializers</span>
<a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>UserProfile</span><span class=p>,</span> <span class=n>Book</span>
<a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a>
<a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a>
<a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a>
<a id=__codelineno-68-6 name=__codelineno-68-6 href=#__codelineno-68-6></a><span class=k>class</span> <span class=nc>BookSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>Serializer</span><span class=p>):</span>
<a id=__codelineno-68-7 name=__codelineno-68-7 href=#__codelineno-68-7></a>    <span class=n>title</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-68-8 name=__codelineno-68-8 href=#__codelineno-68-8></a>    <span class=n>isbn</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-68-9 name=__codelineno-68-9 href=#__codelineno-68-9></a>    <span class=n>author</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-68-10 name=__codelineno-68-10 href=#__codelineno-68-10></a>    <span class=n>publish</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-68-11 name=__codelineno-68-11 href=#__codelineno-68-11></a>    <span class=n>rate</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>FloatField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-68-12 name=__codelineno-68-12 href=#__codelineno-68-12></a>
<a id=__codelineno-68-13 name=__codelineno-68-13 href=#__codelineno-68-13></a>
<a id=__codelineno-68-14 name=__codelineno-68-14 href=#__codelineno-68-14></a><span class=k>class</span> <span class=nc>BookModelSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
<a id=__codelineno-68-15 name=__codelineno-68-15 href=#__codelineno-68-15></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-68-16 name=__codelineno-68-16 href=#__codelineno-68-16></a>        <span class=n>model</span> <span class=o>=</span> <span class=n>Book</span>
<a id=__codelineno-68-17 name=__codelineno-68-17 href=#__codelineno-68-17></a>        <span class=n>fields</span> <span class=o>=</span> <span class=s2>&quot;__all__&quot;</span>  <span class=c1># 将整个表的所有字段都序列化</span>
</code></pre></div> <ul> <li> <p>model 指明参照哪个模型类</p> </li> <li> <p>fields 指明为模型类的哪些字段生成</p> </li> </ul> <p>在 users/views.py 中，编写基于 BookModelSerializer 的图书API视图类：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=kn>from</span> <span class=nn>.serializers</span> <span class=kn>import</span> <span class=n>BookSerializer</span>
<a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a><span class=kn>from</span> <span class=nn>.serializers</span> <span class=kn>import</span> <span class=n>BookModelSerializer</span>
<a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a><span class=kn>from</span> <span class=nn>rest_framework.views</span> <span class=kn>import</span> <span class=n>APIView</span>
<a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
<a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>UserProfile</span><span class=p>,</span> <span class=n>Book</span>
<a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a>
<a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a>
<a id=__codelineno-69-8 name=__codelineno-69-8 href=#__codelineno-69-8></a><span class=c1># 省略代码片段</span>
<a id=__codelineno-69-9 name=__codelineno-69-9 href=#__codelineno-69-9></a><span class=k>class</span> <span class=nc>BookAPIView1</span><span class=p>(</span><span class=n>APIView</span><span class=p>):</span>
<a id=__codelineno-69-10 name=__codelineno-69-10 href=#__codelineno-69-10></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-69-11 name=__codelineno-69-11 href=#__codelineno-69-11></a><span class=sd>    使用Serializer</span>
<a id=__codelineno-69-12 name=__codelineno-69-12 href=#__codelineno-69-12></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-69-13 name=__codelineno-69-13 href=#__codelineno-69-13></a>
<a id=__codelineno-69-14 name=__codelineno-69-14 href=#__codelineno-69-14></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=nb>format</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-69-15 name=__codelineno-69-15 href=#__codelineno-69-15></a>    <span class=c1># ....</span>
<a id=__codelineno-69-16 name=__codelineno-69-16 href=#__codelineno-69-16></a>
<a id=__codelineno-69-17 name=__codelineno-69-17 href=#__codelineno-69-17></a>
<a id=__codelineno-69-18 name=__codelineno-69-18 href=#__codelineno-69-18></a><span class=c1># Create your views here.</span>
<a id=__codelineno-69-19 name=__codelineno-69-19 href=#__codelineno-69-19></a><span class=k>class</span> <span class=nc>BookAPIView2</span><span class=p>(</span><span class=n>APIView</span><span class=p>):</span>
<a id=__codelineno-69-20 name=__codelineno-69-20 href=#__codelineno-69-20></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-69-21 name=__codelineno-69-21 href=#__codelineno-69-21></a><span class=sd>    使用ModelSerializer</span>
<a id=__codelineno-69-22 name=__codelineno-69-22 href=#__codelineno-69-22></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-69-23 name=__codelineno-69-23 href=#__codelineno-69-23></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=nb>format</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-69-24 name=__codelineno-69-24 href=#__codelineno-69-24></a>        <span class=n>APIKey</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;apikey&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-69-25 name=__codelineno-69-25 href=#__codelineno-69-25></a>        <span class=n>developer</span> <span class=o>=</span> <span class=n>UserProfile</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>APIkey</span><span class=o>=</span><span class=n>APIKey</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
<a id=__codelineno-69-26 name=__codelineno-69-26 href=#__codelineno-69-26></a>
<a id=__codelineno-69-27 name=__codelineno-69-27 href=#__codelineno-69-27></a>        <span class=k>if</span> <span class=n>developer</span><span class=p>:</span>
<a id=__codelineno-69-28 name=__codelineno-69-28 href=#__codelineno-69-28></a>            <span class=n>balance</span> <span class=o>=</span> <span class=n>developer</span><span class=o>.</span><span class=n>money</span>
<a id=__codelineno-69-29 name=__codelineno-69-29 href=#__codelineno-69-29></a>            <span class=k>if</span> <span class=n>balance</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-69-30 name=__codelineno-69-30 href=#__codelineno-69-30></a>                <span class=n>isbn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;isbn&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-69-31 name=__codelineno-69-31 href=#__codelineno-69-31></a>                <span class=n>books</span> <span class=o>=</span> <span class=n>Book</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>isbn</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>isbn</span><span class=p>))</span>
<a id=__codelineno-69-32 name=__codelineno-69-32 href=#__codelineno-69-32></a>                <span class=n>books_serializer</span> <span class=o>=</span> <span class=n>BookModelSerializer</span><span class=p>(</span><span class=n>books</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-69-33 name=__codelineno-69-33 href=#__codelineno-69-33></a>                <span class=n>developer</span><span class=o>.</span><span class=n>money</span> <span class=o>-=</span> <span class=mi>1</span>
<a id=__codelineno-69-34 name=__codelineno-69-34 href=#__codelineno-69-34></a>                <span class=n>developer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-69-35 name=__codelineno-69-35 href=#__codelineno-69-35></a>                <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>books_serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-69-36 name=__codelineno-69-36 href=#__codelineno-69-36></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-69-37 name=__codelineno-69-37 href=#__codelineno-69-37></a>                <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=s2>&quot;兄弟，又到了需要充钱的时候！好开心啊！&quot;</span><span class=p>)</span>
<a id=__codelineno-69-38 name=__codelineno-69-38 href=#__codelineno-69-38></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-69-39 name=__codelineno-69-39 href=#__codelineno-69-39></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=s2>&quot;查无此人啊&quot;</span><span class=p>)</span>
</code></pre></div> <blockquote> <p>注意： 使用ModelSerializer序列化对应的视图类与使用Serializer进行序列化对应的视图类，除了序列化的方式不同，其他的代码都是相同的。</p> </blockquote> <p>在urls中配置路由代码：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>
<a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>path</span>
<a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a><span class=kn>from</span> <span class=nn>users.views</span> <span class=kn>import</span> <span class=n>BookAPIView1</span><span class=p>,</span><span class=n>BookAPIView2</span>
<a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a>
<a id=__codelineno-70-5 name=__codelineno-70-5 href=#__codelineno-70-5></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-70-6 name=__codelineno-70-6 href=#__codelineno-70-6></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;admin/&#39;</span><span class=p>,</span> <span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>urls</span><span class=p>),</span>
<a id=__codelineno-70-7 name=__codelineno-70-7 href=#__codelineno-70-7></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;apibook1/&#39;</span><span class=p>,</span> <span class=n>BookAPIView1</span><span class=o>.</span><span class=n>as_view</span><span class=p>(),</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;book1&#39;</span><span class=p>),</span>
<a id=__codelineno-70-8 name=__codelineno-70-8 href=#__codelineno-70-8></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;apibook2/&#39;</span><span class=p>,</span> <span class=n>BookAPIView2</span><span class=o>.</span><span class=n>as_view</span><span class=p>(),</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;book2&#39;</span><span class=p>),</span>
<a id=__codelineno-70-9 name=__codelineno-70-9 href=#__codelineno-70-9></a><span class=p>]</span>
</code></pre></div> <p>使用Postman对API进行测试，用GET的方式访问：</p> <p><a href="http://127.0.0.1:8000/apibook2/?apikey=abcdefghigklmn&isbn=777777">http://127.0.0.1:8000/apibook2/?apikey=abcdefghigklmn&amp;isbn=777777</a></p> <p>返回书籍所有的字段数据：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=p>[</span>
<a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a><span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;三国演义&quot;</span><span class=p>,</span>
<a id=__codelineno-71-5 name=__codelineno-71-5 href=#__codelineno-71-5></a><span class=w>        </span><span class=nt>&quot;isbn&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;777777&quot;</span><span class=p>,</span>
<a id=__codelineno-71-6 name=__codelineno-71-6 href=#__codelineno-71-6></a><span class=w>        </span><span class=nt>&quot;author&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;罗贯中&quot;</span><span class=p>,</span>
<a id=__codelineno-71-7 name=__codelineno-71-7 href=#__codelineno-71-7></a><span class=w>        </span><span class=nt>&quot;publish&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;人民出版社&quot;</span><span class=p>,</span>
<a id=__codelineno-71-8 name=__codelineno-71-8 href=#__codelineno-71-8></a><span class=w>        </span><span class=nt>&quot;rate&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>6.6</span><span class=p>,</span>
<a id=__codelineno-71-9 name=__codelineno-71-9 href=#__codelineno-71-9></a><span class=w>        </span><span class=nt>&quot;add_time&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span>
<a id=__codelineno-71-10 name=__codelineno-71-10 href=#__codelineno-71-10></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-71-11 name=__codelineno-71-11 href=#__codelineno-71-11></a><span class=p>]</span>
</code></pre></div> <blockquote> <p>注意： 这里的add_time字段为null，是因为这个项目使用了Django默认的db.sqlite3数据库。由于db.sqlite3在存储时间字段的时候，是以时间戳的格式保存的， 所以直接使用Django REST framework的Serializer进行序列化失败。在实际项目中，我们会选择MySQL等主流数据库，就不会出现这种情况了</p> </blockquote> <p>可以看出，对于一条有很多字段的数据记录来说，使用ModelSerializer的序列化方式，可以一句话将所有字段序列化，非常方便。</p> <h5 id=2指定字段>2.指定字段<a class=headerlink href=#2指定字段 title="Permanent link">&para;</a></h5> <p>当然，ModelSerializer也可以像Serializer一样对某几个特定字段进行序列化，写法也很简单，只需要对原本的BookModelSerializer修改一行代码：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=c1># 1. 使用fields来明确字段，__all__表名包含所有字段，也可以写明具体哪些字段</span>
<a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a><span class=n>fields</span> <span class=o>=</span> <span class=n>__all__</span>
<a id=__codelineno-72-3 name=__codelineno-72-3 href=#__codelineno-72-3></a>
<a id=__codelineno-72-4 name=__codelineno-72-4 href=#__codelineno-72-4></a>
<a id=__codelineno-72-5 name=__codelineno-72-5 href=#__codelineno-72-5></a><span class=c1># 2. 使用exclude可以明确排除掉哪些字段</span>
<a id=__codelineno-72-6 name=__codelineno-72-6 href=#__codelineno-72-6></a><span class=n>exclude</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;image&#39;</span><span class=p>,)</span>
<a id=__codelineno-72-7 name=__codelineno-72-7 href=#__codelineno-72-7></a>
<a id=__codelineno-72-8 name=__codelineno-72-8 href=#__codelineno-72-8></a>
<a id=__codelineno-72-9 name=__codelineno-72-9 href=#__codelineno-72-9></a><span class=c1># 3.显示指明字段</span>
<a id=__codelineno-72-10 name=__codelineno-72-10 href=#__codelineno-72-10></a><span class=n>fields</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;hname&#39;</span><span class=p>,</span> <span class=s1>&#39;hgender&#39;</span><span class=p>,</span> <span class=s1>&#39;hcomment&#39;</span><span class=p>,</span> <span class=s1>&#39;hbook&#39;</span><span class=p>)</span>
<a id=__codelineno-72-11 name=__codelineno-72-11 href=#__codelineno-72-11></a>
<a id=__codelineno-72-12 name=__codelineno-72-12 href=#__codelineno-72-12></a>
<a id=__codelineno-72-13 name=__codelineno-72-13 href=#__codelineno-72-13></a><span class=c1># 4.指明只读字段</span>
<a id=__codelineno-72-14 name=__codelineno-72-14 href=#__codelineno-72-14></a><span class=n>fields</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;btitle&#39;</span><span class=p>,</span> <span class=s1>&#39;bpub_date&#39;</span><span class=err>，</span> <span class=s1>&#39;bread&#39;</span><span class=p>,</span> <span class=s1>&#39;bcomment&#39;</span><span class=p>)</span>
<a id=__codelineno-72-15 name=__codelineno-72-15 href=#__codelineno-72-15></a><span class=n>read_only_fields</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;bread&#39;</span><span class=p>,</span> <span class=s1>&#39;bcomment&#39;</span><span class=p>)</span>
</code></pre></div> <p>显示指明字段</p> <div class=highlight><pre><span></span><code><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=k>class</span> <span class=nc>BookInfoSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
<a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;图书数据序列化器&quot;&quot;&quot;</span>
<a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-73-4 name=__codelineno-73-4 href=#__codelineno-73-4></a>        <span class=n>model</span> <span class=o>=</span> <span class=n>BookInfo</span>
<a id=__codelineno-73-5 name=__codelineno-73-5 href=#__codelineno-73-5></a>        <span class=n>fields</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;btitle&#39;</span><span class=p>,</span> <span class=s1>&#39;bpub_date&#39;</span><span class=p>)</span>
</code></pre></div> <p>指明只读字段</p> <div class=highlight><pre><span></span><code><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=k>class</span> <span class=nc>BookInfoSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
<a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;图书数据序列化器&quot;&quot;&quot;</span>
<a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-74-4 name=__codelineno-74-4 href=#__codelineno-74-4></a>        <span class=n>model</span> <span class=o>=</span> <span class=n>BookInfo</span>
<a id=__codelineno-74-5 name=__codelineno-74-5 href=#__codelineno-74-5></a>        <span class=n>fields</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;btitle&#39;</span><span class=p>,</span> <span class=s1>&#39;bpub_date&#39;</span><span class=p>,</span><span class=s1>&#39;bread&#39;</span><span class=p>,</span> <span class=s1>&#39;bcomment&#39;</span><span class=p>)</span>
<a id=__codelineno-74-6 name=__codelineno-74-6 href=#__codelineno-74-6></a>        <span class=n>read_only_fields</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;bread&#39;</span><span class=p>,</span> <span class=s1>&#39;bcomment&#39;</span><span class=p>)</span>
</code></pre></div> <p>使用Postman对API进行测试，用GET的方式访问：</p> <p><a href="http://127.0.0.1:8000/apibook2/?apikey=abcdefghigklmn&isbn=777777">http://127.0.0.1:8000/apibook2/?apikey=abcdefghigklmn&amp;isbn=777777</a></p> <p>返回的数据就成了：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a><span class=p>[</span>
<a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-75-3 name=__codelineno-75-3 href=#__codelineno-75-3></a><span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;三国演义&quot;</span><span class=p>,</span>
<a id=__codelineno-75-4 name=__codelineno-75-4 href=#__codelineno-75-4></a><span class=w>        </span><span class=nt>&quot;isbn&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;777777&quot;</span><span class=p>,</span>
<a id=__codelineno-75-5 name=__codelineno-75-5 href=#__codelineno-75-5></a><span class=w>        </span><span class=nt>&quot;author&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;罗贯中&quot;</span>
<a id=__codelineno-75-6 name=__codelineno-75-6 href=#__codelineno-75-6></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-75-7 name=__codelineno-75-7 href=#__codelineno-75-7></a><span class=p>]</span>
</code></pre></div> <h5 id=3添加额外参数>3.添加额外参数<a class=headerlink href=#3添加额外参数 title="Permanent link">&para;</a></h5> <p>我们可以使用 extra_kwargs 参数为 ModelSerializer 添加或修改原有的选项参数</p> <div class=highlight><pre><span></span><code><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a><span class=k>class</span> <span class=nc>BookInfoSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
<a id=__codelineno-76-2 name=__codelineno-76-2 href=#__codelineno-76-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;图书数据序列化器&quot;&quot;&quot;</span>
<a id=__codelineno-76-3 name=__codelineno-76-3 href=#__codelineno-76-3></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-76-4 name=__codelineno-76-4 href=#__codelineno-76-4></a>        <span class=n>model</span> <span class=o>=</span> <span class=n>BookInfo</span>
<a id=__codelineno-76-5 name=__codelineno-76-5 href=#__codelineno-76-5></a>        <span class=n>fields</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;btitle&#39;</span><span class=p>,</span> <span class=s1>&#39;bpub_date&#39;</span><span class=p>,</span> <span class=s1>&#39;bread&#39;</span><span class=p>,</span> <span class=s1>&#39;bcomment&#39;</span><span class=p>)</span>
<a id=__codelineno-76-6 name=__codelineno-76-6 href=#__codelineno-76-6></a>        <span class=n>extra_kwargs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-76-7 name=__codelineno-76-7 href=#__codelineno-76-7></a>            <span class=s1>&#39;bread&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;min_value&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>},</span>
<a id=__codelineno-76-8 name=__codelineno-76-8 href=#__codelineno-76-8></a>            <span class=s1>&#39;bcomment&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;min_value&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>},</span>
<a id=__codelineno-76-9 name=__codelineno-76-9 href=#__codelineno-76-9></a>        <span class=p>}</span>
<a id=__codelineno-76-10 name=__codelineno-76-10 href=#__codelineno-76-10></a>
<a id=__codelineno-76-11 name=__codelineno-76-11 href=#__codelineno-76-11></a><span class=c1># BookInfoSerializer():</span>
<a id=__codelineno-76-12 name=__codelineno-76-12 href=#__codelineno-76-12></a><span class=c1>#    id = IntegerField(label=&#39;ID&#39;, read_only=True)</span>
<a id=__codelineno-76-13 name=__codelineno-76-13 href=#__codelineno-76-13></a><span class=c1>#    btitle = CharField(label=&#39;名称&#39;, max_length=20)</span>
<a id=__codelineno-76-14 name=__codelineno-76-14 href=#__codelineno-76-14></a><span class=c1>#    bpub_date = DateField(allow_null=True, label=&#39;发布日期&#39;, required=False)</span>
<a id=__codelineno-76-15 name=__codelineno-76-15 href=#__codelineno-76-15></a><span class=c1>#    bread = IntegerField(label=&#39;阅读量&#39;, max_value=2147483647, min_value=0, required=True)</span>
<a id=__codelineno-76-16 name=__codelineno-76-16 href=#__codelineno-76-16></a><span class=c1>#    bcomment = IntegerField(label=&#39;评论量&#39;, max_value=2147483647, min_value=0, required=True)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=k>class</span> <span class=nc>LeaveMessageSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
<a id=__codelineno-77-2 name=__codelineno-77-2 href=#__codelineno-77-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-77-3 name=__codelineno-77-3 href=#__codelineno-77-3></a><span class=sd>    留言记录序列化器</span>
<a id=__codelineno-77-4 name=__codelineno-77-4 href=#__codelineno-77-4></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-77-5 name=__codelineno-77-5 href=#__codelineno-77-5></a>    <span class=n>username</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ReadOnlyField</span><span class=p>(</span><span class=n>source</span><span class=o>=</span><span class=s1>&#39;user.username&#39;</span><span class=p>)</span>
<a id=__codelineno-77-6 name=__codelineno-77-6 href=#__codelineno-77-6></a>    <span class=n>photo</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ReadOnlyField</span><span class=p>(</span><span class=n>source</span><span class=o>=</span><span class=s1>&#39;user.photo&#39;</span><span class=p>)</span>
<a id=__codelineno-77-7 name=__codelineno-77-7 href=#__codelineno-77-7></a>    <span class=n>child</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ListField</span><span class=p>(</span><span class=n>source</span><span class=o>=</span><span class=s1>&#39;get_child&#39;</span><span class=p>,</span> <span class=n>child</span><span class=o>=</span><span class=n>RecursiveField</span><span class=p>(),</span> <span class=n>read_only</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-77-8 name=__codelineno-77-8 href=#__codelineno-77-8></a>    <span class=n>father_name</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>ReadOnlyField</span><span class=p>(</span><span class=n>source</span><span class=o>=</span><span class=s1>&#39;get_father_name&#39;</span><span class=p>)</span>
<a id=__codelineno-77-9 name=__codelineno-77-9 href=#__codelineno-77-9></a>
<a id=__codelineno-77-10 name=__codelineno-77-10 href=#__codelineno-77-10></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-77-11 name=__codelineno-77-11 href=#__codelineno-77-11></a>        <span class=n>model</span> <span class=o>=</span> <span class=n>LeaveMessage</span>
<a id=__codelineno-77-12 name=__codelineno-77-12 href=#__codelineno-77-12></a>        <span class=n>fields</span> <span class=o>=</span> <span class=s2>&quot;__all__&quot;</span>
</code></pre></div> <h4 id=624-serializer和modelserializer序列化选择>6.2.4 Serializer和ModelSerializer序列化选择<a class=headerlink href=#624-serializer和modelserializer序列化选择 title="Permanent link">&para;</a></h4> <p>我们对Django REST framework的两种序列化方式做一个总结：</p> <p>Serializer和ModelSerializer两种序列化方式中，前者比较容易理解，适用于新手；后者则在商业项目中被使用的更多，在实际开发中建议大家多使用后者。</p> <p>许多教材中都将Django REST framework的Serializer和ModelSerializer,与Django的Form和ModelForm做对比，虽然二者相似，在优劣选择上却是不同的。Form虽然没有ModelForm效率高，但是ModelForm的使用增加了项目的耦合度，不符合项目解耦原则，所以Form比ModelForm更优（除了字段量过大的情况）；</p> <p>而ModelSerializer有Serializer所有的优点，同时并没有比Serializer明显的不足之外，<strong>所以ModelSerializer比Serializer更优。</strong></p> <p>ModelSerializer与常规的Serializer相同，但提供了：</p> <ul> <li>自动推断需要序列化的字段及类型</li> <li>提供对字段数据的验证器的默认实现</li> <li>提供了修改数据需要用到的 <code>.create()</code>、<code>.update()</code> 方法的默认实现</li> </ul> <p>另外我们还可以在 fileds 列表里挑选出需要的数据，以便减小数据的体积。</p> <h4 id=625-hyperlinkedmodelserializer序列化方式>6.2.5 HyperlinkedModelSerializer序列化方式<a class=headerlink href=#625-hyperlinkedmodelserializer序列化方式 title="Permanent link">&para;</a></h4> <p>HyperlinkedModelSerializer 基本上与之前用的 ModelSerializer 差不多，区别是它自动提供了外键字段的超链接，并且默认不包含模型对象的 id 字段。</p> <p>HyperlinkedModelSerializer与ModelSerializer有以下区别：</p> <ul> <li>默认情况下不包括id字段。</li> <li>它包含一个url字段，使用HyperlinkedIdentityField。</li> <li>关联关系使用HyperlinkedRelatedField，而不是PrimaryKeyRelatedField。</li> </ul> <p>参考文献：</p> <p><a href=https://q1mi.github.io/Django-REST-framework-documentation/api-guide/serializers_zh/#hyperlinkedmodelserializer>https://q1mi.github.io/Django-REST-framework-documentation/api-guide/serializers_zh/#hyperlinkedmodelserializer</a></p> <h4 id=626-总结>6.2.6 总结<a class=headerlink href=#626-总结 title="Permanent link">&para;</a></h4> <p>ModelSerializer比Serializer好用是模型序列化的首选方案!</p> <p>参考文献：</p> <p><a href=https://www.cnblogs.com/gengfenglog/p/14658470.html#_lab2_0_4>https://www.cnblogs.com/gengfenglog/p/14658470.html#_lab2_0_4</a></p> <p><a href=https://www.cuiliangblog.cn/detail/article/13>https://www.cuiliangblog.cn/detail/article/13</a></p> <h2 id=7-django-rest-framework视图>7. Django REST framework视图<a class=headerlink href=#7-django-rest-framework视图 title="Permanent link">&para;</a></h2> <h3 id=71-视图类总结>7.1 视图类总结<a class=headerlink href=#71-视图类总结 title="Permanent link">&para;</a></h3> <p>REST framework 提供了众多的通用视图基类与扩展类，以简化视图的编写。</p> <p>视图的继承关系：</p> <p><img alt=1700798042427 class=zoom src=https://cdn.jsdelivr.net/gh/hujianli94/Picgo-atlas@main/img/1700798042427.2ol9tvnog420.webp></p> <p><img alt=1700648982801 class=zoom src=https://cdn.jsdelivr.net/gh/hujianli94/Picgo-atlas@main/img/1700648982801.3vua8iq84hu0.png></p> <h3 id=72-基于api_view函数视图示例>7.2 基于api_view函数视图示例<a class=headerlink href=#72-基于api_view函数视图示例 title="Permanent link">&para;</a></h3> <h4 id=721-request>7.2.1 Request<a class=headerlink href=#721-request title="Permanent link">&para;</a></h4> <h5 id=request-objects>Request objects<a class=headerlink href=#request-objects title="Permanent link">&para;</a></h5> <p>1.REST framework 传入视图的request对象不再是Django默认的HttpRequest对象，而是REST framework提供的扩展了HttpRequest类的Request类的对象。REST framework 提供了Parser解析器，在接收到请求后会自动根据Content-Type指明的请求数据类型（如JSON、表单等）将请求数据进行parse解析，解析为类字典对象保存到Request对象中</p> <p>2.Request对象的数据是自动根据前端发送数据的格式进行解析之后的结果。无论前端发送的哪种格式的数据，我们都可以以统一的方式读取数据。</p> <h5 id=常用属性>常用属性<a class=headerlink href=#常用属性 title="Permanent link">&para;</a></h5> <p><strong>1.request.data</strong></p> <p>返回解析之后的请求体数据。类似于Django中标准的request.POST和 request.FILES属性，但提供如下特性：</p> <ul> <li>包含了解析之后的文件和非文件数据</li> <li>包含了对POST、PUT、PATCH请求方式解析后的数据</li> <li>利用了REST framework的parsers解析器，不仅支持表单类型数据，也支持JSON数据</li> </ul> <p><strong>2.request.query_params</strong></p> <p>与Django标准的request.GET相同，只是更换了更正确的名称而已。</p> <p><strong>3.总结</strong></p> <ul> <li>GET请求：如果想获取GET请求的所有参数，使用request.query_params即可</li> <li>POST请求：使用request.data就可以处理传入的json请求，或者其他格式请求。</li> </ul> <h4 id=722-response>7.2.2 Response<a class=headerlink href=#722-response title="Permanent link">&para;</a></h4> <h5 id=response-objects>Response objects<a class=headerlink href=#response-objects title="Permanent link">&para;</a></h5> <p>REST framework提供了一个响应类Response，使用该类构造响应对象时，响应的具体数据内容会被转换（render渲染）成符合前端需求的类型。</p> <p>REST framework提供了Renderer渲染器，用来根据请求头中的Accept（接收数据类型声明）来自动转换响应数据到对应格式。如果前端请求中未进行Accept声明，则会采用默认方式处理响应数据，我们可以通过配置来修改默认响应格式。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=n>REST_FRAMEWORK</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a>    <span class=s1>&#39;DEFAULT_RENDERER_CLASSES&#39;</span><span class=p>:</span> <span class=p>(</span>  <span class=c1># 默认响应渲染类</span>
<a id=__codelineno-78-3 name=__codelineno-78-3 href=#__codelineno-78-3></a>        <span class=s1>&#39;rest_framework.renderers.JSONRenderer&#39;</span><span class=p>,</span>  <span class=c1># json渲染器</span>
<a id=__codelineno-78-4 name=__codelineno-78-4 href=#__codelineno-78-4></a>        <span class=s1>&#39;rest_framework.renderers.BrowsableAPIRenderer&#39;</span><span class=p>,</span>  <span class=c1># 浏览API渲染器</span>
<a id=__codelineno-78-5 name=__codelineno-78-5 href=#__codelineno-78-5></a>    <span class=p>)</span>
<a id=__codelineno-78-6 name=__codelineno-78-6 href=#__codelineno-78-6></a><span class=p>}</span>
</code></pre></div> <h5 id=构造方式>构造方式<a class=headerlink href=#构造方式 title="Permanent link">&para;</a></h5> <div class=highlight><pre><span></span><code><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a><span class=n>Response</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>template_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>content_type</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <p>参数说明:</p> <ul> <li>data: 为响应准备的序列化处理后的数据（序列化器序列化处理后的数据）</li> <li>status: 状态码，默认200；</li> <li>template_name: 模板名称，如果使用HTMLRenderer 时需指明；</li> <li>headers: 用于存放响应头信息的字典；</li> <li>content_type: 响应数据的Content-Type，通常此参数无需传递，REST framework会根据前端所需类型数据来设置该参数。</li> </ul> <h5 id=常用属性_1>常用属性<a class=headerlink href=#常用属性_1 title="Permanent link">&para;</a></h5> <p>1）.data</p> <p>传给response对象的序列化后，但尚未render处理的数据</p> <p>2）.status_code</p> <p>状态码的数字</p> <p>3）.content</p> <p>经过render处理后的响应数据</p> <h5 id=状态码>状态码<a class=headerlink href=#状态码 title="Permanent link">&para;</a></h5> <p>为了方便设置状态码，REST framewrok在rest_framework.status模块中提供了常用状态码常量。</p> <h4 id=723-函数视图>7.2.3 函数视图<a class=headerlink href=#723-函数视图 title="Permanent link">&para;</a></h4> <p>我们基于 Django开发REST 接口的 bookv1 项目 进行视图改造</p> <p>项目地址： 存放在 gitee</p> <p><a href=https://gitee.com/django-devops/bookv1>bookv1</a></p> <p>创建并切换到新分支</p> <div class=highlight><pre><span></span><code><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a>git<span class=w> </span>checkout<span class=w> </span>-b<span class=w> </span>drf-api_view
</code></pre></div> <p><code>app/views.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a><span class=kn>from</span> <span class=nn>app.models</span> <span class=kn>import</span> <span class=n>BookInfo</span><span class=p>,</span> <span class=n>HeroInfo</span>
<a id=__codelineno-81-2 name=__codelineno-81-2 href=#__codelineno-81-2></a><span class=kn>from</span> <span class=nn>app.serializers</span> <span class=kn>import</span> <span class=n>BookInfoSerializer</span><span class=p>,</span> <span class=n>HeroInfoSerializer</span><span class=p>,</span> <span class=n>SimpleHeroInfoSerializer</span>
<a id=__codelineno-81-3 name=__codelineno-81-3 href=#__codelineno-81-3></a><span class=kn>from</span> <span class=nn>rest_framework.decorators</span> <span class=kn>import</span> <span class=n>api_view</span>
<a id=__codelineno-81-4 name=__codelineno-81-4 href=#__codelineno-81-4></a><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>status</span>
<a id=__codelineno-81-5 name=__codelineno-81-5 href=#__codelineno-81-5></a><span class=c1># from django.http import HttpResponse</span>
<a id=__codelineno-81-6 name=__codelineno-81-6 href=#__codelineno-81-6></a><span class=kn>from</span> <span class=nn>rest_framework.renderers</span> <span class=kn>import</span> <span class=n>JSONRenderer</span>
<a id=__codelineno-81-7 name=__codelineno-81-7 href=#__codelineno-81-7></a><span class=c1># 不再需要JSONResponse类，所有响应通过response即可</span>
<a id=__codelineno-81-8 name=__codelineno-81-8 href=#__codelineno-81-8></a><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
<a id=__codelineno-81-9 name=__codelineno-81-9 href=#__codelineno-81-9></a>
<a id=__codelineno-81-10 name=__codelineno-81-10 href=#__codelineno-81-10></a>
<a id=__codelineno-81-11 name=__codelineno-81-11 href=#__codelineno-81-11></a><span class=c1># 如果没有使用rest_framework的Response方法，使用HttpResponse的话需要对基类进行改写，改写方法如下</span>
<a id=__codelineno-81-12 name=__codelineno-81-12 href=#__codelineno-81-12></a><span class=c1># class JSONResponse(HttpResponse):</span>
<a id=__codelineno-81-13 name=__codelineno-81-13 href=#__codelineno-81-13></a><span class=c1>#     &quot;&quot;&quot;</span>
<a id=__codelineno-81-14 name=__codelineno-81-14 href=#__codelineno-81-14></a><span class=c1>#     将内容渲染成JSON的HttpResponse</span>
<a id=__codelineno-81-15 name=__codelineno-81-15 href=#__codelineno-81-15></a><span class=c1>#     &quot;&quot;&quot;</span>
<a id=__codelineno-81-16 name=__codelineno-81-16 href=#__codelineno-81-16></a><span class=c1>#</span>
<a id=__codelineno-81-17 name=__codelineno-81-17 href=#__codelineno-81-17></a><span class=c1>#     def __init__(self, data, **kwargs):</span>
<a id=__codelineno-81-18 name=__codelineno-81-18 href=#__codelineno-81-18></a><span class=c1>#         content = JSONRenderer().render(data)</span>
<a id=__codelineno-81-19 name=__codelineno-81-19 href=#__codelineno-81-19></a><span class=c1>#         kwargs[&#39;content_type&#39;] = &#39;application/json&#39;</span>
<a id=__codelineno-81-20 name=__codelineno-81-20 href=#__codelineno-81-20></a><span class=c1>#         super(JSONResponse, self).__init__(content, **kwargs)</span>
<a id=__codelineno-81-21 name=__codelineno-81-21 href=#__codelineno-81-21></a>
<a id=__codelineno-81-22 name=__codelineno-81-22 href=#__codelineno-81-22></a>
<a id=__codelineno-81-23 name=__codelineno-81-23 href=#__codelineno-81-23></a>
<a id=__codelineno-81-24 name=__codelineno-81-24 href=#__codelineno-81-24></a><span class=c1># 使用函数修饰器修改GET和POST请求</span>
<a id=__codelineno-81-25 name=__codelineno-81-25 href=#__codelineno-81-25></a><span class=nd>@api_view</span><span class=p>([</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;POST&#39;</span><span class=p>])</span>
<a id=__codelineno-81-26 name=__codelineno-81-26 href=#__codelineno-81-26></a><span class=k>def</span> <span class=nf>BookInfoView</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
<a id=__codelineno-81-27 name=__codelineno-81-27 href=#__codelineno-81-27></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-81-28 name=__codelineno-81-28 href=#__codelineno-81-28></a><span class=sd>    列出所有的book信息，或创建一个新book。</span>
<a id=__codelineno-81-29 name=__codelineno-81-29 href=#__codelineno-81-29></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-81-30 name=__codelineno-81-30 href=#__codelineno-81-30></a>    <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;GET&#39;</span><span class=p>:</span>
<a id=__codelineno-81-31 name=__codelineno-81-31 href=#__codelineno-81-31></a>        <span class=n>books</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-81-32 name=__codelineno-81-32 href=#__codelineno-81-32></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span><span class=p>(</span><span class=n>books</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-81-33 name=__codelineno-81-33 href=#__codelineno-81-33></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-34 name=__codelineno-81-34 href=#__codelineno-81-34></a>
<a id=__codelineno-81-35 name=__codelineno-81-35 href=#__codelineno-81-35></a>    <span class=k>elif</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;POST&#39;</span><span class=p>:</span>
<a id=__codelineno-81-36 name=__codelineno-81-36 href=#__codelineno-81-36></a>        <span class=c1># book = JSONParser().parse(request)</span>
<a id=__codelineno-81-37 name=__codelineno-81-37 href=#__codelineno-81-37></a>        <span class=c1># serializer = BookInfoSerializer(data=book)</span>
<a id=__codelineno-81-38 name=__codelineno-81-38 href=#__codelineno-81-38></a>        <span class=c1># 使用request.data自动将请求内容数据部分处理</span>
<a id=__codelineno-81-39 name=__codelineno-81-39 href=#__codelineno-81-39></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-40 name=__codelineno-81-40 href=#__codelineno-81-40></a>        <span class=k>if</span> <span class=n>serializer</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-81-41 name=__codelineno-81-41 href=#__codelineno-81-41></a>            <span class=n>serializer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-81-42 name=__codelineno-81-42 href=#__codelineno-81-42></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_201_CREATED</span><span class=p>)</span>
<a id=__codelineno-81-43 name=__codelineno-81-43 href=#__codelineno-81-43></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>errors</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>)</span>
<a id=__codelineno-81-44 name=__codelineno-81-44 href=#__codelineno-81-44></a>
<a id=__codelineno-81-45 name=__codelineno-81-45 href=#__codelineno-81-45></a>
<a id=__codelineno-81-46 name=__codelineno-81-46 href=#__codelineno-81-46></a><span class=nd>@api_view</span><span class=p>([</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;PUT&#39;</span><span class=p>,</span> <span class=s1>&#39;DELETE&#39;</span><span class=p>])</span>
<a id=__codelineno-81-47 name=__codelineno-81-47 href=#__codelineno-81-47></a><span class=k>def</span> <span class=nf>BookInfoDetailView</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-81-48 name=__codelineno-81-48 href=#__codelineno-81-48></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-81-49 name=__codelineno-81-49 href=#__codelineno-81-49></a><span class=sd>    获取，更新或删除一个指定ID的book。</span>
<a id=__codelineno-81-50 name=__codelineno-81-50 href=#__codelineno-81-50></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-81-51 name=__codelineno-81-51 href=#__codelineno-81-51></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-81-52 name=__codelineno-81-52 href=#__codelineno-81-52></a>        <span class=n>book</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>pk</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-81-53 name=__codelineno-81-53 href=#__codelineno-81-53></a>    <span class=k>except</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-81-54 name=__codelineno-81-54 href=#__codelineno-81-54></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_404_NOT_FOUND</span><span class=p>)</span>
<a id=__codelineno-81-55 name=__codelineno-81-55 href=#__codelineno-81-55></a>
<a id=__codelineno-81-56 name=__codelineno-81-56 href=#__codelineno-81-56></a>    <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;GET&#39;</span><span class=p>:</span>
<a id=__codelineno-81-57 name=__codelineno-81-57 href=#__codelineno-81-57></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span><span class=p>(</span><span class=n>book</span><span class=p>)</span>
<a id=__codelineno-81-58 name=__codelineno-81-58 href=#__codelineno-81-58></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-59 name=__codelineno-81-59 href=#__codelineno-81-59></a>
<a id=__codelineno-81-60 name=__codelineno-81-60 href=#__codelineno-81-60></a>    <span class=k>elif</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;PUT&#39;</span><span class=p>:</span>
<a id=__codelineno-81-61 name=__codelineno-81-61 href=#__codelineno-81-61></a>        <span class=c1># data = JSONParser().parse(request)</span>
<a id=__codelineno-81-62 name=__codelineno-81-62 href=#__codelineno-81-62></a>        <span class=c1># serializer = BookInfoSerializer(book, data=data)</span>
<a id=__codelineno-81-63 name=__codelineno-81-63 href=#__codelineno-81-63></a>        <span class=c1># 使用request.data自动将请求内容数据部分处理</span>
<a id=__codelineno-81-64 name=__codelineno-81-64 href=#__codelineno-81-64></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span><span class=p>(</span><span class=n>book</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-65 name=__codelineno-81-65 href=#__codelineno-81-65></a>        <span class=k>if</span> <span class=n>serializer</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-81-66 name=__codelineno-81-66 href=#__codelineno-81-66></a>            <span class=n>serializer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-81-67 name=__codelineno-81-67 href=#__codelineno-81-67></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-68 name=__codelineno-81-68 href=#__codelineno-81-68></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>errors</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>)</span>
<a id=__codelineno-81-69 name=__codelineno-81-69 href=#__codelineno-81-69></a>
<a id=__codelineno-81-70 name=__codelineno-81-70 href=#__codelineno-81-70></a>    <span class=k>elif</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;DELETE&#39;</span><span class=p>:</span>
<a id=__codelineno-81-71 name=__codelineno-81-71 href=#__codelineno-81-71></a>        <span class=n>book</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>
<a id=__codelineno-81-72 name=__codelineno-81-72 href=#__codelineno-81-72></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_204_NO_CONTENT</span><span class=p>)</span>
<a id=__codelineno-81-73 name=__codelineno-81-73 href=#__codelineno-81-73></a>
<a id=__codelineno-81-74 name=__codelineno-81-74 href=#__codelineno-81-74></a>
<a id=__codelineno-81-75 name=__codelineno-81-75 href=#__codelineno-81-75></a><span class=nd>@api_view</span><span class=p>([</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;POST&#39;</span><span class=p>])</span>
<a id=__codelineno-81-76 name=__codelineno-81-76 href=#__codelineno-81-76></a><span class=k>def</span> <span class=nf>HeroInfoView</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
<a id=__codelineno-81-77 name=__codelineno-81-77 href=#__codelineno-81-77></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-81-78 name=__codelineno-81-78 href=#__codelineno-81-78></a><span class=sd>    查询所有人物信息，新增人物</span>
<a id=__codelineno-81-79 name=__codelineno-81-79 href=#__codelineno-81-79></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-81-80 name=__codelineno-81-80 href=#__codelineno-81-80></a>    <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;GET&#39;</span><span class=p>:</span>
<a id=__codelineno-81-81 name=__codelineno-81-81 href=#__codelineno-81-81></a>        <span class=n>heros</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-81-82 name=__codelineno-81-82 href=#__codelineno-81-82></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>SimpleHeroInfoSerializer</span><span class=p>(</span><span class=n>heros</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-81-83 name=__codelineno-81-83 href=#__codelineno-81-83></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-84 name=__codelineno-81-84 href=#__codelineno-81-84></a>
<a id=__codelineno-81-85 name=__codelineno-81-85 href=#__codelineno-81-85></a>    <span class=k>elif</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;POST&#39;</span><span class=p>:</span>
<a id=__codelineno-81-86 name=__codelineno-81-86 href=#__codelineno-81-86></a>        <span class=c1># heros = JSONParser().parse(request)</span>
<a id=__codelineno-81-87 name=__codelineno-81-87 href=#__codelineno-81-87></a>        <span class=c1># serializer = HeroInfoSerializer(data=book)</span>
<a id=__codelineno-81-88 name=__codelineno-81-88 href=#__codelineno-81-88></a>        <span class=c1># 使用request.data自动将请求内容数据部分处理</span>
<a id=__codelineno-81-89 name=__codelineno-81-89 href=#__codelineno-81-89></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-90 name=__codelineno-81-90 href=#__codelineno-81-90></a>        <span class=k>if</span> <span class=n>serializer</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-81-91 name=__codelineno-81-91 href=#__codelineno-81-91></a>            <span class=n>serializer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-81-92 name=__codelineno-81-92 href=#__codelineno-81-92></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_201_CREATED</span><span class=p>)</span>
<a id=__codelineno-81-93 name=__codelineno-81-93 href=#__codelineno-81-93></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>errors</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>)</span>
<a id=__codelineno-81-94 name=__codelineno-81-94 href=#__codelineno-81-94></a>
<a id=__codelineno-81-95 name=__codelineno-81-95 href=#__codelineno-81-95></a>
<a id=__codelineno-81-96 name=__codelineno-81-96 href=#__codelineno-81-96></a><span class=nd>@api_view</span><span class=p>([</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;PUT&#39;</span><span class=p>,</span> <span class=s1>&#39;DELETE&#39;</span><span class=p>])</span>
<a id=__codelineno-81-97 name=__codelineno-81-97 href=#__codelineno-81-97></a><span class=k>def</span> <span class=nf>HeroInfoDetailView</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-81-98 name=__codelineno-81-98 href=#__codelineno-81-98></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-81-99 name=__codelineno-81-99 href=#__codelineno-81-99></a><span class=sd>    获取，更新或删除一个指定ID的人物。</span>
<a id=__codelineno-81-100 name=__codelineno-81-100 href=#__codelineno-81-100></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-81-101 name=__codelineno-81-101 href=#__codelineno-81-101></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-81-102 name=__codelineno-81-102 href=#__codelineno-81-102></a>        <span class=n>heros</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>pk</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-81-103 name=__codelineno-81-103 href=#__codelineno-81-103></a>    <span class=k>except</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-81-104 name=__codelineno-81-104 href=#__codelineno-81-104></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_404_NOT_FOUND</span><span class=p>)</span>
<a id=__codelineno-81-105 name=__codelineno-81-105 href=#__codelineno-81-105></a>
<a id=__codelineno-81-106 name=__codelineno-81-106 href=#__codelineno-81-106></a>    <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;GET&#39;</span><span class=p>:</span>
<a id=__codelineno-81-107 name=__codelineno-81-107 href=#__codelineno-81-107></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span><span class=p>(</span><span class=n>heros</span><span class=p>)</span>
<a id=__codelineno-81-108 name=__codelineno-81-108 href=#__codelineno-81-108></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-109 name=__codelineno-81-109 href=#__codelineno-81-109></a>
<a id=__codelineno-81-110 name=__codelineno-81-110 href=#__codelineno-81-110></a>    <span class=k>elif</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;PUT&#39;</span><span class=p>:</span>
<a id=__codelineno-81-111 name=__codelineno-81-111 href=#__codelineno-81-111></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span><span class=p>(</span><span class=n>heros</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-112 name=__codelineno-81-112 href=#__codelineno-81-112></a>        <span class=k>if</span> <span class=n>serializer</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-81-113 name=__codelineno-81-113 href=#__codelineno-81-113></a>            <span class=n>serializer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-81-114 name=__codelineno-81-114 href=#__codelineno-81-114></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-81-115 name=__codelineno-81-115 href=#__codelineno-81-115></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>errors</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>)</span>
<a id=__codelineno-81-116 name=__codelineno-81-116 href=#__codelineno-81-116></a>
<a id=__codelineno-81-117 name=__codelineno-81-117 href=#__codelineno-81-117></a>    <span class=k>elif</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;DELETE&#39;</span><span class=p>:</span>
<a id=__codelineno-81-118 name=__codelineno-81-118 href=#__codelineno-81-118></a>        <span class=n>heros</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>
<a id=__codelineno-81-119 name=__codelineno-81-119 href=#__codelineno-81-119></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_204_NO_CONTENT</span><span class=p>)</span>
</code></pre></div> <h3 id=73-2个视图基类>7.3 2个视图基类<a class=headerlink href=#73-2个视图基类 title="Permanent link">&para;</a></h3> <h4 id=apiview>APIView<a class=headerlink href=#apiview title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a><span class=kn>from</span> <span class=nn>rest_framework.views</span> <span class=kn>import</span> <span class=n>APIView</span>
</code></pre></div> <p>1.APIView是REST framework提供的所有视图的基类，继承自Django的View父类。</p> <p>2.APIView与View的不同之处在于：</p> <p>● 传入到视图方法中的是REST framework的Request对象，而不是Django的HttpRequeset对象；</p> <p>● 视图方法可以返回REST framework的Response对象，视图会为响应数据设置（render）符合前端要求的格式；</p> <p>● 任何APIException异常都会被捕获到，并且处理成合适的响应信息；</p> <p>● 在进行dispatch()分发前，会对请求进行身份认证、权限检查、流量控制。</p> <p>3.支持定义的属性：</p> <p>● authentication_classes 列表或元祖，身份认证类</p> <p>● permissoin_classes 列表或元祖，权限检查类</p> <p>● throttle_classes 列表或元祖，流量控制类</p> <p>4.在APIView中仍以常规的类视图定义方法来实现get() 、post() 或者其他请求方式的方法。</p> <p>我们基于 Django开发REST 接口的 bookv1 项目 进行视图改造</p> <p>项目地址： 存放在 gitee</p> <p><a href=https://gitee.com/django-devops/bookv1>bookv1</a></p> <p>创建并切换到新分支</p> <div class=highlight><pre><span></span><code><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a>git<span class=w> </span>checkout<span class=w> </span>-b<span class=w> </span>drf-APIView
</code></pre></div> <h5 id=基本配置_1>基本配置<a class=headerlink href=#基本配置_1 title="Permanent link">&para;</a></h5> <p>安装Django REST framework及其依赖包markdown和django-filter。命令如下</p> <div class=highlight><pre><span></span><code><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a>pip<span class=w> </span>install<span class=w> </span>djangorestframework<span class=w> </span>markdown<span class=w> </span>django-filter
</code></pre></div> <p>在settings中注册，代码如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=n>INSTALLED_APPS</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-85-2 name=__codelineno-85-2 href=#__codelineno-85-2></a>    <span class=s1>&#39;django.contrib.admin&#39;</span><span class=p>,</span>
<a id=__codelineno-85-3 name=__codelineno-85-3 href=#__codelineno-85-3></a>    <span class=s1>&#39;django.contrib.auth&#39;</span><span class=p>,</span>
<a id=__codelineno-85-4 name=__codelineno-85-4 href=#__codelineno-85-4></a>    <span class=s1>&#39;django.contrib.contenttypes&#39;</span><span class=p>,</span>
<a id=__codelineno-85-5 name=__codelineno-85-5 href=#__codelineno-85-5></a>    <span class=s1>&#39;django.contrib.sessions&#39;</span><span class=p>,</span>
<a id=__codelineno-85-6 name=__codelineno-85-6 href=#__codelineno-85-6></a>    <span class=s1>&#39;django.contrib.messages&#39;</span><span class=p>,</span>
<a id=__codelineno-85-7 name=__codelineno-85-7 href=#__codelineno-85-7></a>    <span class=s1>&#39;django.contrib.staticfiles&#39;</span><span class=p>,</span>
<a id=__codelineno-85-8 name=__codelineno-85-8 href=#__codelineno-85-8></a>    <span class=s1>&#39;users.apps.UsersConfig&#39;</span><span class=p>,</span>
<a id=__codelineno-85-9 name=__codelineno-85-9 href=#__codelineno-85-9></a>    <span class=s1>&#39;rest_framework&#39;</span>
<a id=__codelineno-85-10 name=__codelineno-85-10 href=#__codelineno-85-10></a><span class=p>]</span>
</code></pre></div> <h5 id=配置模型>配置模型<a class=headerlink href=#配置模型 title="Permanent link">&para;</a></h5> <p><code>app/models.py</code>数据定义保持不变</p> <div class=highlight><pre><span></span><code><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
<a id=__codelineno-86-2 name=__codelineno-86-2 href=#__codelineno-86-2></a>
<a id=__codelineno-86-3 name=__codelineno-86-3 href=#__codelineno-86-3></a>
<a id=__codelineno-86-4 name=__codelineno-86-4 href=#__codelineno-86-4></a><span class=c1># Create your models here.</span>
<a id=__codelineno-86-5 name=__codelineno-86-5 href=#__codelineno-86-5></a><span class=c1># 定义图书模型类BookInfo</span>
<a id=__codelineno-86-6 name=__codelineno-86-6 href=#__codelineno-86-6></a><span class=k>class</span> <span class=nc>BookInfo</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-86-7 name=__codelineno-86-7 href=#__codelineno-86-7></a>    <span class=n>btitle</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;名称&#39;</span><span class=p>)</span>
<a id=__codelineno-86-8 name=__codelineno-86-8 href=#__codelineno-86-8></a>    <span class=n>bpub_date</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateField</span><span class=p>(</span><span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;发布日期&#39;</span><span class=p>)</span>
<a id=__codelineno-86-9 name=__codelineno-86-9 href=#__codelineno-86-9></a>    <span class=n>bread</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;阅读量&#39;</span><span class=p>)</span>
<a id=__codelineno-86-10 name=__codelineno-86-10 href=#__codelineno-86-10></a>    <span class=n>bcomment</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;评论量&#39;</span><span class=p>)</span>
<a id=__codelineno-86-11 name=__codelineno-86-11 href=#__codelineno-86-11></a>    <span class=n>is_delete</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>BooleanField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;逻辑删除&#39;</span><span class=p>)</span>
<a id=__codelineno-86-12 name=__codelineno-86-12 href=#__codelineno-86-12></a>    <span class=c1># 注意,如果模型已经迁移建表并且表中如果已经有数据了,那么后新增的字段,必须给默认值或可以为空,不然迁移就报错</span>
<a id=__codelineno-86-13 name=__codelineno-86-13 href=#__codelineno-86-13></a>    <span class=c1># upload_to 指定上传到media_root配置项的目录中再创建booktest里面</span>
<a id=__codelineno-86-14 name=__codelineno-86-14 href=#__codelineno-86-14></a>    <span class=n>image</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ImageField</span><span class=p>(</span><span class=n>upload_to</span><span class=o>=</span><span class=s1>&#39;booktest&#39;</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;图片&#39;</span><span class=p>,</span> <span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-86-15 name=__codelineno-86-15 href=#__codelineno-86-15></a>
<a id=__codelineno-86-16 name=__codelineno-86-16 href=#__codelineno-86-16></a>
<a id=__codelineno-86-17 name=__codelineno-86-17 href=#__codelineno-86-17></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-86-18 name=__codelineno-86-18 href=#__codelineno-86-18></a>        <span class=n>db_table</span> <span class=o>=</span> <span class=s1>&#39;tb_books&#39;</span>  <span class=c1># 指明数据库表名</span>
<a id=__codelineno-86-19 name=__codelineno-86-19 href=#__codelineno-86-19></a>        <span class=n>verbose_name</span> <span class=o>=</span> <span class=s1>&#39;图书&#39;</span>  <span class=c1># 在admin站点中显示的名称</span>
<a id=__codelineno-86-20 name=__codelineno-86-20 href=#__codelineno-86-20></a>        <span class=n>verbose_name_plural</span> <span class=o>=</span> <span class=n>verbose_name</span>  <span class=c1># 显示的复数名称</span>
<a id=__codelineno-86-21 name=__codelineno-86-21 href=#__codelineno-86-21></a>
<a id=__codelineno-86-22 name=__codelineno-86-22 href=#__codelineno-86-22></a>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-86-23 name=__codelineno-86-23 href=#__codelineno-86-23></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;定义每个数据对象的显示信息&quot;&quot;&quot;</span>
<a id=__codelineno-86-24 name=__codelineno-86-24 href=#__codelineno-86-24></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>btitle</span>
<a id=__codelineno-86-25 name=__codelineno-86-25 href=#__codelineno-86-25></a>
<a id=__codelineno-86-26 name=__codelineno-86-26 href=#__codelineno-86-26></a>    <span class=k>def</span> <span class=nf>pub_date_format</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-86-27 name=__codelineno-86-27 href=#__codelineno-86-27></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>bpub_date</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%Y-%m-</span><span class=si>%d</span><span class=s1>&#39;</span><span class=p>)</span>
<a id=__codelineno-86-28 name=__codelineno-86-28 href=#__codelineno-86-28></a>    <span class=c1># 修改方法名在列表界面的展示</span>
<a id=__codelineno-86-29 name=__codelineno-86-29 href=#__codelineno-86-29></a>    <span class=n>pub_date_format</span><span class=o>.</span><span class=n>short_description</span> <span class=o>=</span> <span class=s1>&#39;发布日期&#39;</span>
<a id=__codelineno-86-30 name=__codelineno-86-30 href=#__codelineno-86-30></a>    <span class=c1># 指定自定义方法的排序依据</span>
<a id=__codelineno-86-31 name=__codelineno-86-31 href=#__codelineno-86-31></a>    <span class=n>pub_date_format</span><span class=o>.</span><span class=n>admin_order_field</span> <span class=o>=</span> <span class=s1>&#39;bpub_date&#39;</span>
<a id=__codelineno-86-32 name=__codelineno-86-32 href=#__codelineno-86-32></a>
<a id=__codelineno-86-33 name=__codelineno-86-33 href=#__codelineno-86-33></a>
<a id=__codelineno-86-34 name=__codelineno-86-34 href=#__codelineno-86-34></a><span class=c1># 定义英雄模型类HeroInfo</span>
<a id=__codelineno-86-35 name=__codelineno-86-35 href=#__codelineno-86-35></a><span class=k>class</span> <span class=nc>HeroInfo</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
<a id=__codelineno-86-36 name=__codelineno-86-36 href=#__codelineno-86-36></a>    <span class=n>GENDER_CHOICES</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-86-37 name=__codelineno-86-37 href=#__codelineno-86-37></a>        <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;female&#39;</span><span class=p>),</span>
<a id=__codelineno-86-38 name=__codelineno-86-38 href=#__codelineno-86-38></a>        <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;male&#39;</span><span class=p>)</span>
<a id=__codelineno-86-39 name=__codelineno-86-39 href=#__codelineno-86-39></a>    <span class=p>)</span>
<a id=__codelineno-86-40 name=__codelineno-86-40 href=#__codelineno-86-40></a>    <span class=n>hname</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;名称&#39;</span><span class=p>)</span>
<a id=__codelineno-86-41 name=__codelineno-86-41 href=#__codelineno-86-41></a>    <span class=n>hgender</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>SmallIntegerField</span><span class=p>(</span><span class=n>choices</span><span class=o>=</span><span class=n>GENDER_CHOICES</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;性别&#39;</span><span class=p>)</span>
<a id=__codelineno-86-42 name=__codelineno-86-42 href=#__codelineno-86-42></a>    <span class=n>hcomment</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>200</span><span class=p>,</span> <span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;描述信息&#39;</span><span class=p>)</span>
<a id=__codelineno-86-43 name=__codelineno-86-43 href=#__codelineno-86-43></a>    <span class=n>hbook</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>BookInfo</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;图书&#39;</span><span class=p>)</span>  <span class=c1># 外键</span>
<a id=__codelineno-86-44 name=__codelineno-86-44 href=#__codelineno-86-44></a>    <span class=n>is_delete</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>BooleanField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;逻辑删除&#39;</span><span class=p>)</span>
<a id=__codelineno-86-45 name=__codelineno-86-45 href=#__codelineno-86-45></a>
<a id=__codelineno-86-46 name=__codelineno-86-46 href=#__codelineno-86-46></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-86-47 name=__codelineno-86-47 href=#__codelineno-86-47></a>        <span class=n>db_table</span> <span class=o>=</span> <span class=s1>&#39;tb_heros&#39;</span>
<a id=__codelineno-86-48 name=__codelineno-86-48 href=#__codelineno-86-48></a>        <span class=n>verbose_name</span> <span class=o>=</span> <span class=s1>&#39;英雄&#39;</span>
<a id=__codelineno-86-49 name=__codelineno-86-49 href=#__codelineno-86-49></a>        <span class=n>verbose_name_plural</span> <span class=o>=</span> <span class=n>verbose_name</span>
<a id=__codelineno-86-50 name=__codelineno-86-50 href=#__codelineno-86-50></a>
<a id=__codelineno-86-51 name=__codelineno-86-51 href=#__codelineno-86-51></a>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-86-52 name=__codelineno-86-52 href=#__codelineno-86-52></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>hname</span>
<a id=__codelineno-86-53 name=__codelineno-86-53 href=#__codelineno-86-53></a>
<a id=__codelineno-86-54 name=__codelineno-86-54 href=#__codelineno-86-54></a>    <span class=k>def</span> <span class=nf>read</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-86-55 name=__codelineno-86-55 href=#__codelineno-86-55></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>bread</span>
<a id=__codelineno-86-56 name=__codelineno-86-56 href=#__codelineno-86-56></a>    <span class=n>read</span><span class=o>.</span><span class=n>short_description</span> <span class=o>=</span> <span class=s1>&#39;阅读量&#39;</span>
<a id=__codelineno-86-57 name=__codelineno-86-57 href=#__codelineno-86-57></a>    <span class=n>read</span><span class=o>.</span><span class=n>admin_order_field</span> <span class=o>=</span> <span class=s1>&#39;hbook__bread&#39;</span>
<a id=__codelineno-86-58 name=__codelineno-86-58 href=#__codelineno-86-58></a>    <span class=c1># HeroInfo.objects.filter(hbook__bread=xx)</span>
</code></pre></div> <h5 id=配置序列化器>配置序列化器<a class=headerlink href=#配置序列化器 title="Permanent link">&para;</a></h5> <p>app目录下新建py文件serializers，将序列化的类代码写入其中：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>serializers</span>
<a id=__codelineno-87-2 name=__codelineno-87-2 href=#__codelineno-87-2></a>
<a id=__codelineno-87-3 name=__codelineno-87-3 href=#__codelineno-87-3></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>BookInfo</span><span class=p>,</span> <span class=n>HeroInfo</span>
<a id=__codelineno-87-4 name=__codelineno-87-4 href=#__codelineno-87-4></a>
<a id=__codelineno-87-5 name=__codelineno-87-5 href=#__codelineno-87-5></a>
<a id=__codelineno-87-6 name=__codelineno-87-6 href=#__codelineno-87-6></a><span class=k>class</span> <span class=nc>SimpleHeroInfoSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
<a id=__codelineno-87-7 name=__codelineno-87-7 href=#__codelineno-87-7></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-87-8 name=__codelineno-87-8 href=#__codelineno-87-8></a>        <span class=n>model</span> <span class=o>=</span> <span class=n>HeroInfo</span>
<a id=__codelineno-87-9 name=__codelineno-87-9 href=#__codelineno-87-9></a>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;hname&#39;</span><span class=p>,</span> <span class=s1>&#39;hgender&#39;</span><span class=p>,</span> <span class=s1>&#39;hcomment&#39;</span><span class=p>]</span>
<a id=__codelineno-87-10 name=__codelineno-87-10 href=#__codelineno-87-10></a>
<a id=__codelineno-87-11 name=__codelineno-87-11 href=#__codelineno-87-11></a>
<a id=__codelineno-87-12 name=__codelineno-87-12 href=#__codelineno-87-12></a><span class=k>class</span> <span class=nc>HeroInfoSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
<a id=__codelineno-87-13 name=__codelineno-87-13 href=#__codelineno-87-13></a>    <span class=n>hbook</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>PrimaryKeyRelatedField</span><span class=p>(</span><span class=n>queryset</span><span class=o>=</span><span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>())</span>
<a id=__codelineno-87-14 name=__codelineno-87-14 href=#__codelineno-87-14></a>
<a id=__codelineno-87-15 name=__codelineno-87-15 href=#__codelineno-87-15></a>    <span class=n>book_name</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>source</span><span class=o>=</span><span class=s1>&#39;hbook.btitle&#39;</span><span class=p>,</span> <span class=n>read_only</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-87-16 name=__codelineno-87-16 href=#__codelineno-87-16></a>    <span class=n>read</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>SerializerMethodField</span><span class=p>()</span>
<a id=__codelineno-87-17 name=__codelineno-87-17 href=#__codelineno-87-17></a>    <span class=n>comment</span> <span class=o>=</span> <span class=n>serializers</span><span class=o>.</span><span class=n>SerializerMethodField</span><span class=p>()</span>
<a id=__codelineno-87-18 name=__codelineno-87-18 href=#__codelineno-87-18></a>
<a id=__codelineno-87-19 name=__codelineno-87-19 href=#__codelineno-87-19></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-87-20 name=__codelineno-87-20 href=#__codelineno-87-20></a>        <span class=n>model</span> <span class=o>=</span> <span class=n>HeroInfo</span>
<a id=__codelineno-87-21 name=__codelineno-87-21 href=#__codelineno-87-21></a>        <span class=n>fields</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;hname&#39;</span><span class=p>,</span> <span class=s1>&#39;hgender&#39;</span><span class=p>,</span> <span class=s1>&#39;hcomment&#39;</span><span class=p>,</span> <span class=s1>&#39;hbook&#39;</span><span class=p>,</span> <span class=s1>&#39;book_name&#39;</span><span class=p>,</span> <span class=s1>&#39;read&#39;</span><span class=p>,</span> <span class=s1>&#39;comment&#39;</span><span class=p>]</span>
<a id=__codelineno-87-22 name=__codelineno-87-22 href=#__codelineno-87-22></a>
<a id=__codelineno-87-23 name=__codelineno-87-23 href=#__codelineno-87-23></a>    <span class=k>def</span> <span class=nf>get_read</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>):</span>
<a id=__codelineno-87-24 name=__codelineno-87-24 href=#__codelineno-87-24></a>        <span class=k>return</span> <span class=n>obj</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>bread</span>
<a id=__codelineno-87-25 name=__codelineno-87-25 href=#__codelineno-87-25></a>
<a id=__codelineno-87-26 name=__codelineno-87-26 href=#__codelineno-87-26></a>    <span class=k>def</span> <span class=nf>get_comment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>):</span>
<a id=__codelineno-87-27 name=__codelineno-87-27 href=#__codelineno-87-27></a>        <span class=k>return</span> <span class=n>obj</span><span class=o>.</span><span class=n>hbook</span><span class=o>.</span><span class=n>bcomment</span>
<a id=__codelineno-87-28 name=__codelineno-87-28 href=#__codelineno-87-28></a>
<a id=__codelineno-87-29 name=__codelineno-87-29 href=#__codelineno-87-29></a>
<a id=__codelineno-87-30 name=__codelineno-87-30 href=#__codelineno-87-30></a><span class=k>class</span> <span class=nc>BookInfoSerializer</span><span class=p>(</span><span class=n>serializers</span><span class=o>.</span><span class=n>ModelSerializer</span><span class=p>):</span>
<a id=__codelineno-87-31 name=__codelineno-87-31 href=#__codelineno-87-31></a>    <span class=c1># 反向关联字段，表示与BookInfo模型关联的所有HeroInfo实例</span>
<a id=__codelineno-87-32 name=__codelineno-87-32 href=#__codelineno-87-32></a>    <span class=n>hero_set</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span><span class=p>(</span><span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>read_only</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-87-33 name=__codelineno-87-33 href=#__codelineno-87-33></a>
<a id=__codelineno-87-34 name=__codelineno-87-34 href=#__codelineno-87-34></a>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
<a id=__codelineno-87-35 name=__codelineno-87-35 href=#__codelineno-87-35></a>        <span class=n>model</span> <span class=o>=</span> <span class=n>BookInfo</span>
<a id=__codelineno-87-36 name=__codelineno-87-36 href=#__codelineno-87-36></a>        <span class=n>fields</span> <span class=o>=</span> <span class=s1>&#39;__all__&#39;</span>
</code></pre></div> <h5 id=配置视图>配置视图<a class=headerlink href=#配置视图 title="Permanent link">&para;</a></h5> <p><code>app/views</code>中编写视图代码</p> <div class=highlight><pre><span></span><code><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a><span class=kn>from</span> <span class=nn>django.http</span> <span class=kn>import</span> <span class=n>Http404</span>
<a id=__codelineno-88-2 name=__codelineno-88-2 href=#__codelineno-88-2></a><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>status</span>
<a id=__codelineno-88-3 name=__codelineno-88-3 href=#__codelineno-88-3></a><span class=kn>from</span> <span class=nn>rest_framework.views</span> <span class=kn>import</span> <span class=n>APIView</span>
<a id=__codelineno-88-4 name=__codelineno-88-4 href=#__codelineno-88-4></a><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
<a id=__codelineno-88-5 name=__codelineno-88-5 href=#__codelineno-88-5></a><span class=kn>from</span> <span class=nn>app.serializers</span> <span class=kn>import</span> <span class=n>BookInfoSerializer</span><span class=p>,</span> <span class=n>HeroInfoSerializer</span><span class=p>,</span> <span class=n>SimpleHeroInfoSerializer</span>
<a id=__codelineno-88-6 name=__codelineno-88-6 href=#__codelineno-88-6></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>BookInfo</span><span class=p>,</span> <span class=n>HeroInfo</span>
<a id=__codelineno-88-7 name=__codelineno-88-7 href=#__codelineno-88-7></a>
<a id=__codelineno-88-8 name=__codelineno-88-8 href=#__codelineno-88-8></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-88-9 name=__codelineno-88-9 href=#__codelineno-88-9></a>
<a id=__codelineno-88-10 name=__codelineno-88-10 href=#__codelineno-88-10></a><span class=sd># 书籍信息</span>
<a id=__codelineno-88-11 name=__codelineno-88-11 href=#__codelineno-88-11></a><span class=sd>GET         /api/books/</span>
<a id=__codelineno-88-12 name=__codelineno-88-12 href=#__codelineno-88-12></a><span class=sd>POST        /api/books/</span>
<a id=__codelineno-88-13 name=__codelineno-88-13 href=#__codelineno-88-13></a><span class=sd>GET         /api/books/&lt;pk&gt;/</span>
<a id=__codelineno-88-14 name=__codelineno-88-14 href=#__codelineno-88-14></a><span class=sd>PUT         /api/books/&lt;pk&gt;/</span>
<a id=__codelineno-88-15 name=__codelineno-88-15 href=#__codelineno-88-15></a><span class=sd>DELETE      /api/books/&lt;pk&gt;/</span>
<a id=__codelineno-88-16 name=__codelineno-88-16 href=#__codelineno-88-16></a>
<a id=__codelineno-88-17 name=__codelineno-88-17 href=#__codelineno-88-17></a><span class=sd># 人物信息</span>
<a id=__codelineno-88-18 name=__codelineno-88-18 href=#__codelineno-88-18></a><span class=sd>GET         /api/heros/</span>
<a id=__codelineno-88-19 name=__codelineno-88-19 href=#__codelineno-88-19></a><span class=sd>POST        /api/heros/</span>
<a id=__codelineno-88-20 name=__codelineno-88-20 href=#__codelineno-88-20></a><span class=sd>GET         /api/heros/&lt;pk&gt;/</span>
<a id=__codelineno-88-21 name=__codelineno-88-21 href=#__codelineno-88-21></a><span class=sd>PUT         /api/heros/&lt;pk&gt;/</span>
<a id=__codelineno-88-22 name=__codelineno-88-22 href=#__codelineno-88-22></a><span class=sd>DELETE      /api/heros/&lt;pk&gt;/</span>
<a id=__codelineno-88-23 name=__codelineno-88-23 href=#__codelineno-88-23></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-88-24 name=__codelineno-88-24 href=#__codelineno-88-24></a>
<a id=__codelineno-88-25 name=__codelineno-88-25 href=#__codelineno-88-25></a>
<a id=__codelineno-88-26 name=__codelineno-88-26 href=#__codelineno-88-26></a><span class=k>class</span> <span class=nc>BookInfoListAPIView</span><span class=p>(</span><span class=n>APIView</span><span class=p>):</span>
<a id=__codelineno-88-27 name=__codelineno-88-27 href=#__codelineno-88-27></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-88-28 name=__codelineno-88-28 href=#__codelineno-88-28></a>        <span class=n>books</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-88-29 name=__codelineno-88-29 href=#__codelineno-88-29></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span><span class=p>(</span><span class=n>books</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-88-30 name=__codelineno-88-30 href=#__codelineno-88-30></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-31 name=__codelineno-88-31 href=#__codelineno-88-31></a>
<a id=__codelineno-88-32 name=__codelineno-88-32 href=#__codelineno-88-32></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-88-33 name=__codelineno-88-33 href=#__codelineno-88-33></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-34 name=__codelineno-88-34 href=#__codelineno-88-34></a>        <span class=k>if</span> <span class=n>serializer</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-88-35 name=__codelineno-88-35 href=#__codelineno-88-35></a>            <span class=n>serializer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-88-36 name=__codelineno-88-36 href=#__codelineno-88-36></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_201_CREATED</span><span class=p>)</span>
<a id=__codelineno-88-37 name=__codelineno-88-37 href=#__codelineno-88-37></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>errors</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>)</span>
<a id=__codelineno-88-38 name=__codelineno-88-38 href=#__codelineno-88-38></a>
<a id=__codelineno-88-39 name=__codelineno-88-39 href=#__codelineno-88-39></a>
<a id=__codelineno-88-40 name=__codelineno-88-40 href=#__codelineno-88-40></a><span class=k>class</span> <span class=nc>BookInfoDetailAPIView</span><span class=p>(</span><span class=n>APIView</span><span class=p>):</span>
<a id=__codelineno-88-41 name=__codelineno-88-41 href=#__codelineno-88-41></a>    <span class=k>def</span> <span class=nf>get_object</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-88-42 name=__codelineno-88-42 href=#__codelineno-88-42></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-88-43 name=__codelineno-88-43 href=#__codelineno-88-43></a>            <span class=k>return</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>pk</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-88-44 name=__codelineno-88-44 href=#__codelineno-88-44></a>        <span class=k>except</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-88-45 name=__codelineno-88-45 href=#__codelineno-88-45></a>            <span class=k>raise</span> <span class=n>Http404</span>
<a id=__codelineno-88-46 name=__codelineno-88-46 href=#__codelineno-88-46></a>
<a id=__codelineno-88-47 name=__codelineno-88-47 href=#__codelineno-88-47></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-88-48 name=__codelineno-88-48 href=#__codelineno-88-48></a>        <span class=n>book</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>(</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-88-49 name=__codelineno-88-49 href=#__codelineno-88-49></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span><span class=p>(</span><span class=n>book</span><span class=p>)</span>
<a id=__codelineno-88-50 name=__codelineno-88-50 href=#__codelineno-88-50></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-51 name=__codelineno-88-51 href=#__codelineno-88-51></a>
<a id=__codelineno-88-52 name=__codelineno-88-52 href=#__codelineno-88-52></a>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-88-53 name=__codelineno-88-53 href=#__codelineno-88-53></a>        <span class=n>book</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>(</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-88-54 name=__codelineno-88-54 href=#__codelineno-88-54></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span><span class=p>(</span><span class=n>book</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-55 name=__codelineno-88-55 href=#__codelineno-88-55></a>        <span class=k>if</span> <span class=n>serializer</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-88-56 name=__codelineno-88-56 href=#__codelineno-88-56></a>            <span class=n>serializer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-88-57 name=__codelineno-88-57 href=#__codelineno-88-57></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-58 name=__codelineno-88-58 href=#__codelineno-88-58></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>errors</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>)</span>
<a id=__codelineno-88-59 name=__codelineno-88-59 href=#__codelineno-88-59></a>
<a id=__codelineno-88-60 name=__codelineno-88-60 href=#__codelineno-88-60></a>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-88-61 name=__codelineno-88-61 href=#__codelineno-88-61></a>        <span class=n>book</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>(</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-88-62 name=__codelineno-88-62 href=#__codelineno-88-62></a>        <span class=n>book</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>
<a id=__codelineno-88-63 name=__codelineno-88-63 href=#__codelineno-88-63></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_204_NO_CONTENT</span><span class=p>)</span>
<a id=__codelineno-88-64 name=__codelineno-88-64 href=#__codelineno-88-64></a>
<a id=__codelineno-88-65 name=__codelineno-88-65 href=#__codelineno-88-65></a>
<a id=__codelineno-88-66 name=__codelineno-88-66 href=#__codelineno-88-66></a><span class=k>class</span> <span class=nc>HeroInfoListAPIView</span><span class=p>(</span><span class=n>APIView</span><span class=p>):</span>
<a id=__codelineno-88-67 name=__codelineno-88-67 href=#__codelineno-88-67></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-88-68 name=__codelineno-88-68 href=#__codelineno-88-68></a>        <span class=n>heroes</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-88-69 name=__codelineno-88-69 href=#__codelineno-88-69></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>SimpleHeroInfoSerializer</span><span class=p>(</span><span class=n>heroes</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-88-70 name=__codelineno-88-70 href=#__codelineno-88-70></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-71 name=__codelineno-88-71 href=#__codelineno-88-71></a>
<a id=__codelineno-88-72 name=__codelineno-88-72 href=#__codelineno-88-72></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-88-73 name=__codelineno-88-73 href=#__codelineno-88-73></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-74 name=__codelineno-88-74 href=#__codelineno-88-74></a>        <span class=k>if</span> <span class=n>serializer</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-88-75 name=__codelineno-88-75 href=#__codelineno-88-75></a>            <span class=n>serializer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-88-76 name=__codelineno-88-76 href=#__codelineno-88-76></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_201_CREATED</span><span class=p>)</span>
<a id=__codelineno-88-77 name=__codelineno-88-77 href=#__codelineno-88-77></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>errors</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>)</span>
<a id=__codelineno-88-78 name=__codelineno-88-78 href=#__codelineno-88-78></a>
<a id=__codelineno-88-79 name=__codelineno-88-79 href=#__codelineno-88-79></a>
<a id=__codelineno-88-80 name=__codelineno-88-80 href=#__codelineno-88-80></a><span class=k>class</span> <span class=nc>HeroInfoDetailAPIView</span><span class=p>(</span><span class=n>APIView</span><span class=p>):</span>
<a id=__codelineno-88-81 name=__codelineno-88-81 href=#__codelineno-88-81></a>    <span class=k>def</span> <span class=nf>get_object</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-88-82 name=__codelineno-88-82 href=#__codelineno-88-82></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-88-83 name=__codelineno-88-83 href=#__codelineno-88-83></a>            <span class=k>return</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>pk</span><span class=o>=</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-88-84 name=__codelineno-88-84 href=#__codelineno-88-84></a>        <span class=k>except</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-88-85 name=__codelineno-88-85 href=#__codelineno-88-85></a>            <span class=k>raise</span> <span class=n>Http404</span>
<a id=__codelineno-88-86 name=__codelineno-88-86 href=#__codelineno-88-86></a>
<a id=__codelineno-88-87 name=__codelineno-88-87 href=#__codelineno-88-87></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-88-88 name=__codelineno-88-88 href=#__codelineno-88-88></a>        <span class=n>hero</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>(</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-88-89 name=__codelineno-88-89 href=#__codelineno-88-89></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span><span class=p>(</span><span class=n>hero</span><span class=p>)</span>
<a id=__codelineno-88-90 name=__codelineno-88-90 href=#__codelineno-88-90></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-91 name=__codelineno-88-91 href=#__codelineno-88-91></a>
<a id=__codelineno-88-92 name=__codelineno-88-92 href=#__codelineno-88-92></a>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-88-93 name=__codelineno-88-93 href=#__codelineno-88-93></a>        <span class=n>hero</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>(</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-88-94 name=__codelineno-88-94 href=#__codelineno-88-94></a>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span><span class=p>(</span><span class=n>hero</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-95 name=__codelineno-88-95 href=#__codelineno-88-95></a>        <span class=k>if</span> <span class=n>serializer</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-88-96 name=__codelineno-88-96 href=#__codelineno-88-96></a>            <span class=n>serializer</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-88-97 name=__codelineno-88-97 href=#__codelineno-88-97></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-88-98 name=__codelineno-88-98 href=#__codelineno-88-98></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>serializer</span><span class=o>.</span><span class=n>errors</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>)</span>
<a id=__codelineno-88-99 name=__codelineno-88-99 href=#__codelineno-88-99></a>
<a id=__codelineno-88-100 name=__codelineno-88-100 href=#__codelineno-88-100></a>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>pk</span><span class=p>):</span>
<a id=__codelineno-88-101 name=__codelineno-88-101 href=#__codelineno-88-101></a>        <span class=n>hero</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>(</span><span class=n>pk</span><span class=p>)</span>
<a id=__codelineno-88-102 name=__codelineno-88-102 href=#__codelineno-88-102></a>        <span class=n>hero</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>
<a id=__codelineno-88-103 name=__codelineno-88-103 href=#__codelineno-88-103></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_204_NO_CONTENT</span><span class=p>)</span>
</code></pre></div> <h5 id=配置路由>配置路由<a class=headerlink href=#配置路由 title="Permanent link">&para;</a></h5> <p><code>bookv1/urls.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-89-1 name=__codelineno-89-1 href=#__codelineno-89-1></a><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>
<a id=__codelineno-89-2 name=__codelineno-89-2 href=#__codelineno-89-2></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>include</span><span class=p>,</span> <span class=n>re_path</span><span class=p>,</span> <span class=n>path</span>
<a id=__codelineno-89-3 name=__codelineno-89-3 href=#__codelineno-89-3></a><span class=kn>from</span> <span class=nn>app</span> <span class=kn>import</span> <span class=n>urls</span>
<a id=__codelineno-89-4 name=__codelineno-89-4 href=#__codelineno-89-4></a>
<a id=__codelineno-89-5 name=__codelineno-89-5 href=#__codelineno-89-5></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-89-6 name=__codelineno-89-6 href=#__codelineno-89-6></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;admin/&#39;</span><span class=p>,</span> <span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>urls</span><span class=p>),</span>
<a id=__codelineno-89-7 name=__codelineno-89-7 href=#__codelineno-89-7></a>    <span class=n>re_path</span><span class=p>(</span><span class=s1>&#39;api/&#39;</span><span class=p>,</span> <span class=n>include</span><span class=p>(</span><span class=n>urls</span><span class=p>)),</span>
<a id=__codelineno-89-8 name=__codelineno-89-8 href=#__codelineno-89-8></a><span class=p>]</span>
</code></pre></div> <p><code>app/urls.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-90-1 name=__codelineno-90-1 href=#__codelineno-90-1></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>re_path</span>
<a id=__codelineno-90-2 name=__codelineno-90-2 href=#__codelineno-90-2></a><span class=kn>from</span> <span class=nn>.</span> <span class=kn>import</span> <span class=n>views</span>
<a id=__codelineno-90-3 name=__codelineno-90-3 href=#__codelineno-90-3></a>
<a id=__codelineno-90-4 name=__codelineno-90-4 href=#__codelineno-90-4></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-90-5 name=__codelineno-90-5 href=#__codelineno-90-5></a>    <span class=c1># 书籍</span>
<a id=__codelineno-90-6 name=__codelineno-90-6 href=#__codelineno-90-6></a>    <span class=n>re_path</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^books/$&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>BooksAPIVIew</span><span class=o>.</span><span class=n>as_view</span><span class=p>()),</span>
<a id=__codelineno-90-7 name=__codelineno-90-7 href=#__codelineno-90-7></a>    <span class=n>re_path</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^books/(?P&lt;pk&gt;\d+)/$&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>BookAPIView</span><span class=o>.</span><span class=n>as_view</span><span class=p>()),</span>
<a id=__codelineno-90-8 name=__codelineno-90-8 href=#__codelineno-90-8></a>    <span class=c1># 人物</span>
<a id=__codelineno-90-9 name=__codelineno-90-9 href=#__codelineno-90-9></a>    <span class=n>re_path</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^heros/$&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>HerosAPIVIew</span><span class=o>.</span><span class=n>as_view</span><span class=p>()),</span>
<a id=__codelineno-90-10 name=__codelineno-90-10 href=#__codelineno-90-10></a>    <span class=n>re_path</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^heros/(?P&lt;pk&gt;\d+)/$&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>HeroAPIView</span><span class=o>.</span><span class=n>as_view</span><span class=p>()),</span>
<a id=__codelineno-90-11 name=__codelineno-90-11 href=#__codelineno-90-11></a>
<a id=__codelineno-90-12 name=__codelineno-90-12 href=#__codelineno-90-12></a><span class=p>]</span>
</code></pre></div> <h4 id=genericapiview>GenericAPIView<a class=headerlink href=#genericapiview title="Permanent link">&para;</a></h4> <p>GenericAPIView - 通用视图类</p> <p>继承自APIVIew，主要增加了操作序列化器和数据库查询的方法，作用是为下面Mixin扩展类的执行提供方法支持。通常在使用时，可搭配一个或多个Mixin扩展类。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-91-1 name=__codelineno-91-1 href=#__codelineno-91-1></a><span class=kn>from</span> <span class=nn>rest_framework.generics</span> <span class=kn>import</span> <span class=n>GenericAPIView</span>
</code></pre></div> <p>GenericAPIView(APIView):做了一些封装</p> <table> <thead> <tr> <th>属性</th> <th>说明</th> </tr> </thead> <tbody> <tr> <td>queryset</td> <td>要序列化的数据</td> </tr> <tr> <td>serializer_class</td> <td>指明视图使用的序列化器</td> </tr> </tbody> </table> <table> <thead> <tr> <th>方法</th> <th>说明</th> </tr> </thead> <tbody> <tr> <td>get_queryset</td> <td>获取qs数据(返回视图使用的查询集，主要用来提供给Mixin扩展类使用，是列表视图与详情视图获取数据的基础，默认返回queryset属性)</td> </tr> <tr> <td>get_object</td> <td>获取一条数据的对象(返回详情视图所需的模型类数据对象，主要用来提供给Mixin扩展类使用。在试图中可以调用该方法获取详情信息的模型类对象)</td> </tr> <tr> <td>get_serializer</td> <td>以后使用它来实例化得到ser对象(返回序列化器对象，主要用来提供给Mixin扩展类使用，如果我们在视图中想要获取序列化器对象，也可以直接调用此方法)</td> </tr> <tr> <td>get_serializer_class</td> <td>获取序列化类，注意跟上面区分</td> </tr> </tbody> </table> <p>我们基于 Django开发REST 接口的 bookv1 项目 进行视图改造</p> <p>项目地址： 存放在 gitee</p> <p><a href=https://gitee.com/django-devops/bookv1>bookv1</a></p> <p>创建并切换到新分支</p> <div class=highlight><pre><span></span><code><a id=__codelineno-92-1 name=__codelineno-92-1 href=#__codelineno-92-1></a>git<span class=w> </span>checkout<span class=w> </span>-b<span class=w> </span>drf-GenericAPIView
</code></pre></div> <p><code>app/views.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-93-1 name=__codelineno-93-1 href=#__codelineno-93-1></a><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
<a id=__codelineno-93-2 name=__codelineno-93-2 href=#__codelineno-93-2></a><span class=kn>from</span> <span class=nn>app.serializers</span> <span class=kn>import</span> <span class=n>BookInfoSerializer</span><span class=p>,</span> <span class=n>HeroInfoSerializer</span><span class=p>,</span> <span class=n>SimpleHeroInfoSerializer</span>
<a id=__codelineno-93-3 name=__codelineno-93-3 href=#__codelineno-93-3></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>BookInfo</span><span class=p>,</span> <span class=n>HeroInfo</span>
<a id=__codelineno-93-4 name=__codelineno-93-4 href=#__codelineno-93-4></a><span class=kn>from</span> <span class=nn>rest_framework.generics</span> <span class=kn>import</span> <span class=n>GenericAPIView</span>
<a id=__codelineno-93-5 name=__codelineno-93-5 href=#__codelineno-93-5></a>
<a id=__codelineno-93-6 name=__codelineno-93-6 href=#__codelineno-93-6></a>
<a id=__codelineno-93-7 name=__codelineno-93-7 href=#__codelineno-93-7></a><span class=k>class</span> <span class=nc>BookInfoListAPIView</span><span class=p>(</span><span class=n>GenericAPIView</span><span class=p>):</span>
<a id=__codelineno-93-8 name=__codelineno-93-8 href=#__codelineno-93-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-93-9 name=__codelineno-93-9 href=#__codelineno-93-9></a><span class=sd>    查询所有书籍，增加书籍</span>
<a id=__codelineno-93-10 name=__codelineno-93-10 href=#__codelineno-93-10></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-93-11 name=__codelineno-93-11 href=#__codelineno-93-11></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>  <span class=c1># 要序列化的数据</span>
<a id=__codelineno-93-12 name=__codelineno-93-12 href=#__codelineno-93-12></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span>  <span class=c1># 要序列化的类</span>
<a id=__codelineno-93-13 name=__codelineno-93-13 href=#__codelineno-93-13></a>
<a id=__codelineno-93-14 name=__codelineno-93-14 href=#__codelineno-93-14></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-93-15 name=__codelineno-93-15 href=#__codelineno-93-15></a>        <span class=n>qs</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_queryset</span><span class=p>()</span>  <span class=c1># 推荐用self.get_queryset来获取要序列化的数据</span>
<a id=__codelineno-93-16 name=__codelineno-93-16 href=#__codelineno-93-16></a>        <span class=n>ser</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_serializer</span><span class=p>(</span><span class=n>qs</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># 推荐使用self.get_serializer获取实例化后并且传入数据的对象</span>
<a id=__codelineno-93-17 name=__codelineno-93-17 href=#__codelineno-93-17></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-18 name=__codelineno-93-18 href=#__codelineno-93-18></a>
<a id=__codelineno-93-19 name=__codelineno-93-19 href=#__codelineno-93-19></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-93-20 name=__codelineno-93-20 href=#__codelineno-93-20></a>        <span class=n>ser</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_serializer</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-21 name=__codelineno-93-21 href=#__codelineno-93-21></a>        <span class=k>if</span> <span class=n>ser</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-93-22 name=__codelineno-93-22 href=#__codelineno-93-22></a>            <span class=n>ser</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-93-23 name=__codelineno-93-23 href=#__codelineno-93-23></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-24 name=__codelineno-93-24 href=#__codelineno-93-24></a>
<a id=__codelineno-93-25 name=__codelineno-93-25 href=#__codelineno-93-25></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>errors</span><span class=p>)</span>
<a id=__codelineno-93-26 name=__codelineno-93-26 href=#__codelineno-93-26></a>
<a id=__codelineno-93-27 name=__codelineno-93-27 href=#__codelineno-93-27></a>
<a id=__codelineno-93-28 name=__codelineno-93-28 href=#__codelineno-93-28></a><span class=k>class</span> <span class=nc>BookInfoDetailAPIView</span><span class=p>(</span><span class=n>GenericAPIView</span><span class=p>):</span>
<a id=__codelineno-93-29 name=__codelineno-93-29 href=#__codelineno-93-29></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-93-30 name=__codelineno-93-30 href=#__codelineno-93-30></a><span class=sd>    查询，修改，删除单本书籍</span>
<a id=__codelineno-93-31 name=__codelineno-93-31 href=#__codelineno-93-31></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-93-32 name=__codelineno-93-32 href=#__codelineno-93-32></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>  <span class=c1># 要序列化的数据</span>
<a id=__codelineno-93-33 name=__codelineno-93-33 href=#__codelineno-93-33></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span>  <span class=c1># 要序列化的类</span>
<a id=__codelineno-93-34 name=__codelineno-93-34 href=#__codelineno-93-34></a>
<a id=__codelineno-93-35 name=__codelineno-93-35 href=#__codelineno-93-35></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-93-36 name=__codelineno-93-36 href=#__codelineno-93-36></a>        <span class=n>obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>()</span>  <span class=c1># 获取单条self.get_object要序列化的数据</span>
<a id=__codelineno-93-37 name=__codelineno-93-37 href=#__codelineno-93-37></a>        <span class=n>ser</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_serializer</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span>  <span class=c1># 第一个参数是instance=obj，可以直接写obj</span>
<a id=__codelineno-93-38 name=__codelineno-93-38 href=#__codelineno-93-38></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-39 name=__codelineno-93-39 href=#__codelineno-93-39></a>
<a id=__codelineno-93-40 name=__codelineno-93-40 href=#__codelineno-93-40></a>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-93-41 name=__codelineno-93-41 href=#__codelineno-93-41></a>        <span class=n>obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>()</span>
<a id=__codelineno-93-42 name=__codelineno-93-42 href=#__codelineno-93-42></a>        <span class=n>ser</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_serializer</span><span class=p>(</span><span class=n>instance</span><span class=o>=</span><span class=n>obj</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-43 name=__codelineno-93-43 href=#__codelineno-93-43></a>        <span class=k>if</span> <span class=n>ser</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-93-44 name=__codelineno-93-44 href=#__codelineno-93-44></a>            <span class=n>ser</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-93-45 name=__codelineno-93-45 href=#__codelineno-93-45></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-46 name=__codelineno-93-46 href=#__codelineno-93-46></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-93-47 name=__codelineno-93-47 href=#__codelineno-93-47></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>errors</span><span class=p>)</span>
<a id=__codelineno-93-48 name=__codelineno-93-48 href=#__codelineno-93-48></a>
<a id=__codelineno-93-49 name=__codelineno-93-49 href=#__codelineno-93-49></a>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-93-50 name=__codelineno-93-50 href=#__codelineno-93-50></a>        <span class=n>res</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>()</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>  <span class=c1># get_object()拿到对象直接删除了</span>
<a id=__codelineno-93-51 name=__codelineno-93-51 href=#__codelineno-93-51></a>        <span class=k>if</span> <span class=n>res</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-93-52 name=__codelineno-93-52 href=#__codelineno-93-52></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
<a id=__codelineno-93-53 name=__codelineno-93-53 href=#__codelineno-93-53></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-93-54 name=__codelineno-93-54 href=#__codelineno-93-54></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=s1>&#39;要删的不存在&#39;</span><span class=p>)</span>
<a id=__codelineno-93-55 name=__codelineno-93-55 href=#__codelineno-93-55></a>
<a id=__codelineno-93-56 name=__codelineno-93-56 href=#__codelineno-93-56></a>
<a id=__codelineno-93-57 name=__codelineno-93-57 href=#__codelineno-93-57></a><span class=k>class</span> <span class=nc>HeroInfoListAPIView</span><span class=p>(</span><span class=n>GenericAPIView</span><span class=p>):</span>
<a id=__codelineno-93-58 name=__codelineno-93-58 href=#__codelineno-93-58></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-93-59 name=__codelineno-93-59 href=#__codelineno-93-59></a><span class=sd>    查询所有人物，增加人物</span>
<a id=__codelineno-93-60 name=__codelineno-93-60 href=#__codelineno-93-60></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-93-61 name=__codelineno-93-61 href=#__codelineno-93-61></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-93-62 name=__codelineno-93-62 href=#__codelineno-93-62></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span>
<a id=__codelineno-93-63 name=__codelineno-93-63 href=#__codelineno-93-63></a>
<a id=__codelineno-93-64 name=__codelineno-93-64 href=#__codelineno-93-64></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-93-65 name=__codelineno-93-65 href=#__codelineno-93-65></a>        <span class=n>qs</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_queryset</span><span class=p>()</span>
<a id=__codelineno-93-66 name=__codelineno-93-66 href=#__codelineno-93-66></a>        <span class=n>ser</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_serializer</span><span class=p>(</span><span class=n>qs</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-93-67 name=__codelineno-93-67 href=#__codelineno-93-67></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-68 name=__codelineno-93-68 href=#__codelineno-93-68></a>
<a id=__codelineno-93-69 name=__codelineno-93-69 href=#__codelineno-93-69></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-93-70 name=__codelineno-93-70 href=#__codelineno-93-70></a>        <span class=n>ser</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_serializer</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-71 name=__codelineno-93-71 href=#__codelineno-93-71></a>        <span class=k>if</span> <span class=n>ser</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-93-72 name=__codelineno-93-72 href=#__codelineno-93-72></a>            <span class=n>ser</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-93-73 name=__codelineno-93-73 href=#__codelineno-93-73></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-74 name=__codelineno-93-74 href=#__codelineno-93-74></a>
<a id=__codelineno-93-75 name=__codelineno-93-75 href=#__codelineno-93-75></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>errors</span><span class=p>)</span>
<a id=__codelineno-93-76 name=__codelineno-93-76 href=#__codelineno-93-76></a>
<a id=__codelineno-93-77 name=__codelineno-93-77 href=#__codelineno-93-77></a>
<a id=__codelineno-93-78 name=__codelineno-93-78 href=#__codelineno-93-78></a><span class=k>class</span> <span class=nc>HeroInfoDetailAPIView</span><span class=p>(</span><span class=n>GenericAPIView</span><span class=p>):</span>
<a id=__codelineno-93-79 name=__codelineno-93-79 href=#__codelineno-93-79></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-93-80 name=__codelineno-93-80 href=#__codelineno-93-80></a><span class=sd>    查询，修改，删除人物信息</span>
<a id=__codelineno-93-81 name=__codelineno-93-81 href=#__codelineno-93-81></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-93-82 name=__codelineno-93-82 href=#__codelineno-93-82></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-93-83 name=__codelineno-93-83 href=#__codelineno-93-83></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span>
<a id=__codelineno-93-84 name=__codelineno-93-84 href=#__codelineno-93-84></a>
<a id=__codelineno-93-85 name=__codelineno-93-85 href=#__codelineno-93-85></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-93-86 name=__codelineno-93-86 href=#__codelineno-93-86></a>        <span class=n>obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>()</span>  <span class=c1># 获取单条self.get_object要序列化的数据</span>
<a id=__codelineno-93-87 name=__codelineno-93-87 href=#__codelineno-93-87></a>        <span class=n>ser</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_serializer</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span>  <span class=c1># 第一个参数是instance=obj，可以直接写obj</span>
<a id=__codelineno-93-88 name=__codelineno-93-88 href=#__codelineno-93-88></a>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-89 name=__codelineno-93-89 href=#__codelineno-93-89></a>
<a id=__codelineno-93-90 name=__codelineno-93-90 href=#__codelineno-93-90></a>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-93-91 name=__codelineno-93-91 href=#__codelineno-93-91></a>        <span class=n>obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>()</span>
<a id=__codelineno-93-92 name=__codelineno-93-92 href=#__codelineno-93-92></a>        <span class=n>ser</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_serializer</span><span class=p>(</span><span class=n>instance</span><span class=o>=</span><span class=n>obj</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-93 name=__codelineno-93-93 href=#__codelineno-93-93></a>        <span class=k>if</span> <span class=n>ser</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-93-94 name=__codelineno-93-94 href=#__codelineno-93-94></a>            <span class=n>ser</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-93-95 name=__codelineno-93-95 href=#__codelineno-93-95></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-93-96 name=__codelineno-93-96 href=#__codelineno-93-96></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-93-97 name=__codelineno-93-97 href=#__codelineno-93-97></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=n>ser</span><span class=o>.</span><span class=n>errors</span><span class=p>)</span>
<a id=__codelineno-93-98 name=__codelineno-93-98 href=#__codelineno-93-98></a>
<a id=__codelineno-93-99 name=__codelineno-93-99 href=#__codelineno-93-99></a>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-93-100 name=__codelineno-93-100 href=#__codelineno-93-100></a>        <span class=n>res</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_object</span><span class=p>()</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>  <span class=c1># get_object()拿到对象直接删除了</span>
<a id=__codelineno-93-101 name=__codelineno-93-101 href=#__codelineno-93-101></a>        <span class=k>if</span> <span class=n>res</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-93-102 name=__codelineno-93-102 href=#__codelineno-93-102></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
<a id=__codelineno-93-103 name=__codelineno-93-103 href=#__codelineno-93-103></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-93-104 name=__codelineno-93-104 href=#__codelineno-93-104></a>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span><span class=s1>&#39;要删的不存在&#39;</span><span class=p>)</span>
</code></pre></div> <h3 id=74-5个视图扩展类>7.4 5个视图扩展类<a class=headerlink href=#74-5个视图扩展类 title="Permanent link">&para;</a></h3> <p>作用：</p> <p>提供了几种后端视图（对数据资源进行曾删改查）处理流程的实现，如果需要编写的视图属于这五种，则视图可以通过继承相应的扩展类来复用代码，减少自己编写的代码量。</p> <p>这五个扩展类需要搭配GenericAPIView父类，因为五个扩展类的实现需要调用GenericAPIView提供的序列化器与数据库查询的方法。</p> <table> <thead> <tr> <th>父类</th> <th>扩展类</th> <th>说明</th> <th>备注</th> </tr> </thead> <tbody> <tr> <td>GenericAPIView</td> <td>ListModelMixin</td> <td>查所有</td> <td>列表视图扩展类，提供 <code>list(request, *args, **kwargs)</code>方法快速实现列表视图，返回200状态码。<br>该Mixin的list方法会对数据进行过滤和分页。</td> </tr> <tr> <td>GenericAPIView</td> <td>RetrieveModelMixin</td> <td>查一个</td> <td>创建视图扩展类，提供 <code>create(request, *args, **kwargs)</code> 方法快速实现创建资源的视图，成功返回201状态码。<br>如果序列化器对前端发送的数据验证失败，返回400错误。</td> </tr> <tr> <td>GenericAPIView</td> <td>CreateModelMixin</td> <td>增一个</td> <td>详情视图扩展类，提供 <code>retrieve(request, *args, **kwargs)</code>方法，可以快速实现返回一个存在的数据对象。<br>如果存在，返回200， 否则返回404</td> </tr> <tr> <td>GenericAPIView</td> <td>UpdateModelMixin</td> <td>改一个</td> <td>更新视图扩展类，提供<code>update(request, *args, **kwargs)</code>方法，可以快速实现更新一个存在的数据对象。<br>同时也提供<code>partial_update(request, *args, **kwargs)</code>方法，可以实现局部更新。<br>成功返回200，序列化器校验数据失败时，返回400错误。</td> </tr> <tr> <td>GenericAPIView</td> <td>DestroyModelMixin</td> <td>删一个</td> <td>删除视图扩展类，提供<code>destroy(request, *args, **kwargs)</code>方法，可以快速实现删除一个存在的数据对象。成功返回204，不存在返回404。</td> </tr> </tbody> </table> <p>我们基于 Django开发REST 接口的 bookv1 项目 进行视图改造</p> <p>项目地址： 存放在 gitee</p> <p><a href=https://gitee.com/django-devops/bookv1>bookv1</a></p> <p>创建并切换到新分支</p> <div class=highlight><pre><span></span><code><a id=__codelineno-94-1 name=__codelineno-94-1 href=#__codelineno-94-1></a>git<span class=w> </span>checkout<span class=w> </span>-b<span class=w> </span>drf-GenericAPIView-5Extended_class
</code></pre></div> <p><code>app/views.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-95-1 name=__codelineno-95-1 href=#__codelineno-95-1></a><span class=kn>from</span> <span class=nn>app.serializers</span> <span class=kn>import</span> <span class=n>BookInfoSerializer</span><span class=p>,</span> <span class=n>HeroInfoSerializer</span><span class=p>,</span> <span class=n>SimpleHeroInfoSerializer</span>
<a id=__codelineno-95-2 name=__codelineno-95-2 href=#__codelineno-95-2></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>BookInfo</span><span class=p>,</span> <span class=n>HeroInfo</span>
<a id=__codelineno-95-3 name=__codelineno-95-3 href=#__codelineno-95-3></a><span class=kn>from</span> <span class=nn>rest_framework.generics</span> <span class=kn>import</span> <span class=n>GenericAPIView</span>
<a id=__codelineno-95-4 name=__codelineno-95-4 href=#__codelineno-95-4></a><span class=kn>from</span> <span class=nn>rest_framework.mixins</span> <span class=kn>import</span> <span class=n>CreateModelMixin</span><span class=p>,</span> <span class=n>RetrieveModelMixin</span><span class=p>,</span> <span class=n>UpdateModelMixin</span><span class=p>,</span> <span class=n>DestroyModelMixin</span><span class=p>,</span> \
<a id=__codelineno-95-5 name=__codelineno-95-5 href=#__codelineno-95-5></a>    <span class=n>ListModelMixin</span>
<a id=__codelineno-95-6 name=__codelineno-95-6 href=#__codelineno-95-6></a>
<a id=__codelineno-95-7 name=__codelineno-95-7 href=#__codelineno-95-7></a>
<a id=__codelineno-95-8 name=__codelineno-95-8 href=#__codelineno-95-8></a><span class=k>class</span> <span class=nc>BookInfoListAPIView</span><span class=p>(</span><span class=n>GenericAPIView</span><span class=p>,</span> <span class=n>ListModelMixin</span><span class=p>,</span> <span class=n>CreateModelMixin</span><span class=p>):</span>
<a id=__codelineno-95-9 name=__codelineno-95-9 href=#__codelineno-95-9></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-95-10 name=__codelineno-95-10 href=#__codelineno-95-10></a><span class=sd>    查询所有书籍，增加书籍</span>
<a id=__codelineno-95-11 name=__codelineno-95-11 href=#__codelineno-95-11></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-95-12 name=__codelineno-95-12 href=#__codelineno-95-12></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>  <span class=c1># 要序列化的数据</span>
<a id=__codelineno-95-13 name=__codelineno-95-13 href=#__codelineno-95-13></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span>  <span class=c1># 要序列化的类</span>
<a id=__codelineno-95-14 name=__codelineno-95-14 href=#__codelineno-95-14></a>
<a id=__codelineno-95-15 name=__codelineno-95-15 href=#__codelineno-95-15></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>  <span class=c1># 不管有值无值最好都把 *args, **kwargs传过来</span>
<a id=__codelineno-95-16 name=__codelineno-95-16 href=#__codelineno-95-16></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>list</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-95-17 name=__codelineno-95-17 href=#__codelineno-95-17></a>
<a id=__codelineno-95-18 name=__codelineno-95-18 href=#__codelineno-95-18></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-95-19 name=__codelineno-95-19 href=#__codelineno-95-19></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
<a id=__codelineno-95-20 name=__codelineno-95-20 href=#__codelineno-95-20></a>
<a id=__codelineno-95-21 name=__codelineno-95-21 href=#__codelineno-95-21></a>
<a id=__codelineno-95-22 name=__codelineno-95-22 href=#__codelineno-95-22></a><span class=k>class</span> <span class=nc>BookInfoDetailAPIView</span><span class=p>(</span><span class=n>GenericAPIView</span><span class=p>,</span> <span class=n>RetrieveModelMixin</span><span class=p>,</span> <span class=n>UpdateModelMixin</span><span class=p>,</span> <span class=n>DestroyModelMixin</span><span class=p>):</span>
<a id=__codelineno-95-23 name=__codelineno-95-23 href=#__codelineno-95-23></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-95-24 name=__codelineno-95-24 href=#__codelineno-95-24></a><span class=sd>    查询，修改，删除单本书籍</span>
<a id=__codelineno-95-25 name=__codelineno-95-25 href=#__codelineno-95-25></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-95-26 name=__codelineno-95-26 href=#__codelineno-95-26></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-95-27 name=__codelineno-95-27 href=#__codelineno-95-27></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span>
<a id=__codelineno-95-28 name=__codelineno-95-28 href=#__codelineno-95-28></a>
<a id=__codelineno-95-29 name=__codelineno-95-29 href=#__codelineno-95-29></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-95-30 name=__codelineno-95-30 href=#__codelineno-95-30></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>retrieve</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-95-31 name=__codelineno-95-31 href=#__codelineno-95-31></a>
<a id=__codelineno-95-32 name=__codelineno-95-32 href=#__codelineno-95-32></a>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-95-33 name=__codelineno-95-33 href=#__codelineno-95-33></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-95-34 name=__codelineno-95-34 href=#__codelineno-95-34></a>
<a id=__codelineno-95-35 name=__codelineno-95-35 href=#__codelineno-95-35></a>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-95-36 name=__codelineno-95-36 href=#__codelineno-95-36></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>destroy</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-95-37 name=__codelineno-95-37 href=#__codelineno-95-37></a>
<a id=__codelineno-95-38 name=__codelineno-95-38 href=#__codelineno-95-38></a>
<a id=__codelineno-95-39 name=__codelineno-95-39 href=#__codelineno-95-39></a><span class=k>class</span> <span class=nc>HeroInfoListAPIView</span><span class=p>(</span><span class=n>GenericAPIView</span><span class=p>,</span> <span class=n>ListModelMixin</span><span class=p>,</span> <span class=n>CreateModelMixin</span><span class=p>):</span>
<a id=__codelineno-95-40 name=__codelineno-95-40 href=#__codelineno-95-40></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-95-41 name=__codelineno-95-41 href=#__codelineno-95-41></a><span class=sd>    查询所有人物，增加人物</span>
<a id=__codelineno-95-42 name=__codelineno-95-42 href=#__codelineno-95-42></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-95-43 name=__codelineno-95-43 href=#__codelineno-95-43></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-95-44 name=__codelineno-95-44 href=#__codelineno-95-44></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span>
<a id=__codelineno-95-45 name=__codelineno-95-45 href=#__codelineno-95-45></a>
<a id=__codelineno-95-46 name=__codelineno-95-46 href=#__codelineno-95-46></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-95-47 name=__codelineno-95-47 href=#__codelineno-95-47></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>list</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-95-48 name=__codelineno-95-48 href=#__codelineno-95-48></a>
<a id=__codelineno-95-49 name=__codelineno-95-49 href=#__codelineno-95-49></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
<a id=__codelineno-95-50 name=__codelineno-95-50 href=#__codelineno-95-50></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
<a id=__codelineno-95-51 name=__codelineno-95-51 href=#__codelineno-95-51></a>
<a id=__codelineno-95-52 name=__codelineno-95-52 href=#__codelineno-95-52></a>
<a id=__codelineno-95-53 name=__codelineno-95-53 href=#__codelineno-95-53></a><span class=k>class</span> <span class=nc>HeroInfoDetailAPIView</span><span class=p>(</span><span class=n>GenericAPIView</span><span class=p>,</span> <span class=n>RetrieveModelMixin</span><span class=p>,</span> <span class=n>UpdateModelMixin</span><span class=p>,</span> <span class=n>DestroyModelMixin</span><span class=p>):</span>
<a id=__codelineno-95-54 name=__codelineno-95-54 href=#__codelineno-95-54></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-95-55 name=__codelineno-95-55 href=#__codelineno-95-55></a><span class=sd>    查询，修改，删除人物信息</span>
<a id=__codelineno-95-56 name=__codelineno-95-56 href=#__codelineno-95-56></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-95-57 name=__codelineno-95-57 href=#__codelineno-95-57></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-95-58 name=__codelineno-95-58 href=#__codelineno-95-58></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span>
<a id=__codelineno-95-59 name=__codelineno-95-59 href=#__codelineno-95-59></a>
<a id=__codelineno-95-60 name=__codelineno-95-60 href=#__codelineno-95-60></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-95-61 name=__codelineno-95-61 href=#__codelineno-95-61></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>retrieve</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-95-62 name=__codelineno-95-62 href=#__codelineno-95-62></a>
<a id=__codelineno-95-63 name=__codelineno-95-63 href=#__codelineno-95-63></a>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-95-64 name=__codelineno-95-64 href=#__codelineno-95-64></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-95-65 name=__codelineno-95-65 href=#__codelineno-95-65></a>
<a id=__codelineno-95-66 name=__codelineno-95-66 href=#__codelineno-95-66></a>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-95-67 name=__codelineno-95-67 href=#__codelineno-95-67></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>destroy</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <h3 id=75-9个视图子类>7.5 9个视图子类<a class=headerlink href=#75-9个视图子类 title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>父类</th> <th>扩展类</th> <th>说明</th> <th>备注</th> </tr> </thead> <tbody> <tr> <td>GenericAPIView</td> <td>ListAPIView</td> <td>查所有</td> <td>提供 get 方法 继承自：GenericAPIView、ListModelMixin。</td> </tr> <tr> <td>GenericAPIView</td> <td>CreateAPIView</td> <td>增一个</td> <td>提供 post 方法 继承自： GenericAPIView、CreateModelMixin</td> </tr> <tr> <td>GenericAPIView</td> <td>ListCreateAPIView</td> <td>查所有 + 增一个</td> <td>提供 get 和 post 方法 继承自： GenericAPIView、ListModelMixin、CreateModelMixin</td> </tr> <tr> <td>GenericAPIView</td> <td>RetrieveAPIView</td> <td>查一个</td> <td>提供 get 方法继承自: GenericAPIView、RetrieveModelMixin</td> </tr> <tr> <td>GenericAPIView</td> <td>UpdateAPIView</td> <td>改一个</td> <td>提供 put 和 patch 方法继承自：GenericAPIView、UpdateModelMixin</td> </tr> <tr> <td>GenericAPIView</td> <td>DestoryAPIView</td> <td>删一个</td> <td>提供 delete 方法 继承自：GenericAPIView、DestoryModelMixin</td> </tr> <tr> <td>GenericAPIView</td> <td>RetrieveUpdateAPIView</td> <td>查一个+改一个</td> <td>提供 get、put、patch方法 继承自： GenericAPIView、RetrieveModelMixin、UpdateModelMixin</td> </tr> <tr> <td>GenericAPIView</td> <td>RetrieveDestroyAPIView</td> <td>查一个+删一个</td> <td>提供 get 和 delete 方法继承自： GenericAPIView、RetrieveModelMixin、DestoryModelMixin</td> </tr> <tr> <td>GenericAPIView</td> <td>RetrieveUpdateDestoryAPIView</td> <td>查一个+改一个+删一个</td> <td>提供 get、put、patch、delete方法 继承自：GenericAPIView、RetrieveModelMixin、UpdateModelMixin、DestoryModelMixin</td> </tr> </tbody> </table> <p>我们基于 Django开发REST 接口的 bookv1 项目 进行视图改造</p> <p>项目地址： 存放在 gitee</p> <p><a href=https://gitee.com/django-devops/bookv1>bookv1</a></p> <p>创建并切换到新分支</p> <div class=highlight><pre><span></span><code><a id=__codelineno-96-1 name=__codelineno-96-1 href=#__codelineno-96-1></a>git<span class=w> </span>checkout<span class=w> </span>-b<span class=w> </span>drf-GenericAPIView-9view_subclass
</code></pre></div> <p><code>app/views.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-97-1 name=__codelineno-97-1 href=#__codelineno-97-1></a><span class=kn>from</span> <span class=nn>app.serializers</span> <span class=kn>import</span> <span class=n>BookInfoSerializer</span><span class=p>,</span> <span class=n>HeroInfoSerializer</span><span class=p>,</span> <span class=n>SimpleHeroInfoSerializer</span>
<a id=__codelineno-97-2 name=__codelineno-97-2 href=#__codelineno-97-2></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>BookInfo</span><span class=p>,</span> <span class=n>HeroInfo</span>
<a id=__codelineno-97-3 name=__codelineno-97-3 href=#__codelineno-97-3></a><span class=kn>from</span> <span class=nn>rest_framework.generics</span> <span class=kn>import</span> <span class=n>CreateAPIView</span><span class=p>,</span> <span class=n>ListAPIView</span><span class=p>,</span> <span class=n>ListCreateAPIView</span>
<a id=__codelineno-97-4 name=__codelineno-97-4 href=#__codelineno-97-4></a><span class=kn>from</span> <span class=nn>rest_framework.generics</span> <span class=kn>import</span> <span class=n>RetrieveAPIView</span><span class=p>,</span> <span class=n>UpdateAPIView</span><span class=p>,</span> <span class=n>DestroyAPIView</span><span class=p>,</span> <span class=n>RetrieveUpdateAPIView</span><span class=p>,</span> \
<a id=__codelineno-97-5 name=__codelineno-97-5 href=#__codelineno-97-5></a>    <span class=n>RetrieveDestroyAPIView</span><span class=p>,</span> <span class=n>RetrieveUpdateDestroyAPIView</span>
<a id=__codelineno-97-6 name=__codelineno-97-6 href=#__codelineno-97-6></a>
<a id=__codelineno-97-7 name=__codelineno-97-7 href=#__codelineno-97-7></a>
<a id=__codelineno-97-8 name=__codelineno-97-8 href=#__codelineno-97-8></a><span class=k>class</span> <span class=nc>BookInfoListAPIView</span><span class=p>(</span><span class=n>ListCreateAPIView</span><span class=p>):</span>
<a id=__codelineno-97-9 name=__codelineno-97-9 href=#__codelineno-97-9></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-97-10 name=__codelineno-97-10 href=#__codelineno-97-10></a><span class=sd>    查询所有书籍，增加书籍</span>
<a id=__codelineno-97-11 name=__codelineno-97-11 href=#__codelineno-97-11></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-97-12 name=__codelineno-97-12 href=#__codelineno-97-12></a>
<a id=__codelineno-97-13 name=__codelineno-97-13 href=#__codelineno-97-13></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>  <span class=c1># 要序列化的数据</span>
<a id=__codelineno-97-14 name=__codelineno-97-14 href=#__codelineno-97-14></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span>  <span class=c1># 要序列化的类</span>
<a id=__codelineno-97-15 name=__codelineno-97-15 href=#__codelineno-97-15></a>
<a id=__codelineno-97-16 name=__codelineno-97-16 href=#__codelineno-97-16></a>
<a id=__codelineno-97-17 name=__codelineno-97-17 href=#__codelineno-97-17></a><span class=k>class</span> <span class=nc>BookInfoDetailAPIView</span><span class=p>(</span><span class=n>RetrieveUpdateDestroyAPIView</span><span class=p>):</span>
<a id=__codelineno-97-18 name=__codelineno-97-18 href=#__codelineno-97-18></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-97-19 name=__codelineno-97-19 href=#__codelineno-97-19></a><span class=sd>    查询，修改，删除单本书籍</span>
<a id=__codelineno-97-20 name=__codelineno-97-20 href=#__codelineno-97-20></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-97-21 name=__codelineno-97-21 href=#__codelineno-97-21></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-97-22 name=__codelineno-97-22 href=#__codelineno-97-22></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span>
<a id=__codelineno-97-23 name=__codelineno-97-23 href=#__codelineno-97-23></a>
<a id=__codelineno-97-24 name=__codelineno-97-24 href=#__codelineno-97-24></a>
<a id=__codelineno-97-25 name=__codelineno-97-25 href=#__codelineno-97-25></a><span class=c1># # 查询，删除，修改单本书籍</span>
<a id=__codelineno-97-26 name=__codelineno-97-26 href=#__codelineno-97-26></a><span class=c1># class BookInfoDetailAPIView2(RetrieveAPIView, UpdateAPIView, DestroyAPIView):</span>
<a id=__codelineno-97-27 name=__codelineno-97-27 href=#__codelineno-97-27></a><span class=c1>#     queryset = BookInfo.objects.all()</span>
<a id=__codelineno-97-28 name=__codelineno-97-28 href=#__codelineno-97-28></a><span class=c1>#     serializer_class = BookInfoSerializer</span>
<a id=__codelineno-97-29 name=__codelineno-97-29 href=#__codelineno-97-29></a><span class=c1>#</span>
<a id=__codelineno-97-30 name=__codelineno-97-30 href=#__codelineno-97-30></a><span class=c1># # 查询，删除，修改单本书籍</span>
<a id=__codelineno-97-31 name=__codelineno-97-31 href=#__codelineno-97-31></a><span class=c1># class BookInfoDetailAPIView3(RetrieveDestroyAPIView, UpdateAPIView):</span>
<a id=__codelineno-97-32 name=__codelineno-97-32 href=#__codelineno-97-32></a><span class=c1>#     queryset = BookInfo.objects.all()</span>
<a id=__codelineno-97-33 name=__codelineno-97-33 href=#__codelineno-97-33></a><span class=c1>#     serializer_class = BookInfoSerializer</span>
<a id=__codelineno-97-34 name=__codelineno-97-34 href=#__codelineno-97-34></a><span class=c1>#</span>
<a id=__codelineno-97-35 name=__codelineno-97-35 href=#__codelineno-97-35></a><span class=c1># # 查询，删除，修改单本书籍</span>
<a id=__codelineno-97-36 name=__codelineno-97-36 href=#__codelineno-97-36></a><span class=c1># class BookInfoDetailAPIView4(RetrieveUpdateAPIView, DestroyAPIView):</span>
<a id=__codelineno-97-37 name=__codelineno-97-37 href=#__codelineno-97-37></a><span class=c1>#     queryset = BookInfo.objects.all()</span>
<a id=__codelineno-97-38 name=__codelineno-97-38 href=#__codelineno-97-38></a><span class=c1>#     serializer_class = BookInfoSerializer</span>
<a id=__codelineno-97-39 name=__codelineno-97-39 href=#__codelineno-97-39></a>
<a id=__codelineno-97-40 name=__codelineno-97-40 href=#__codelineno-97-40></a>
<a id=__codelineno-97-41 name=__codelineno-97-41 href=#__codelineno-97-41></a><span class=k>class</span> <span class=nc>HeroInfoListAPIView</span><span class=p>(</span><span class=n>ListCreateAPIView</span><span class=p>):</span>
<a id=__codelineno-97-42 name=__codelineno-97-42 href=#__codelineno-97-42></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-97-43 name=__codelineno-97-43 href=#__codelineno-97-43></a><span class=sd>    查询所有人物，增加人物</span>
<a id=__codelineno-97-44 name=__codelineno-97-44 href=#__codelineno-97-44></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-97-45 name=__codelineno-97-45 href=#__codelineno-97-45></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-97-46 name=__codelineno-97-46 href=#__codelineno-97-46></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span>
<a id=__codelineno-97-47 name=__codelineno-97-47 href=#__codelineno-97-47></a>
<a id=__codelineno-97-48 name=__codelineno-97-48 href=#__codelineno-97-48></a>
<a id=__codelineno-97-49 name=__codelineno-97-49 href=#__codelineno-97-49></a><span class=k>class</span> <span class=nc>HeroInfoDetailAPIView</span><span class=p>(</span><span class=n>RetrieveUpdateDestroyAPIView</span><span class=p>):</span>
<a id=__codelineno-97-50 name=__codelineno-97-50 href=#__codelineno-97-50></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-97-51 name=__codelineno-97-51 href=#__codelineno-97-51></a><span class=sd>    查询，修改，删除人物信息</span>
<a id=__codelineno-97-52 name=__codelineno-97-52 href=#__codelineno-97-52></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-97-53 name=__codelineno-97-53 href=#__codelineno-97-53></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-97-54 name=__codelineno-97-54 href=#__codelineno-97-54></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span>
</code></pre></div> <h3 id=76-视图集viewset>7.6 视图集ViewSet<a class=headerlink href=#76-视图集viewset title="Permanent link">&para;</a></h3> <p>使用视图集ViewSet，可以将一系列逻辑相关的动作放到一个类中：</p> <table> <thead> <tr> <th>动作</th> <th>说明</th> </tr> </thead> <tbody> <tr> <td>list()</td> <td>提供一组数据</td> </tr> <tr> <td>retrieve()</td> <td>提供单个数据</td> </tr> <tr> <td>create()</td> <td>创建数据</td> </tr> <tr> <td>update()</td> <td>保存数据</td> </tr> <tr> <td>destory()</td> <td>删除数据</td> </tr> </tbody> </table> <p>ViewSet视图集类不再实现get()、post()等方法，而是实现动作 action 如 list() 、create() 等。</p> <p>视图集只在使用 as_view() 方法的时候，才会将action动作与具体请求方式对应上。</p> <p>在视图集中，我们可以通过action对象属性来获取当前请求视图集时的action动作是哪一个。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-98-1 name=__codelineno-98-1 href=#__codelineno-98-1></a><span class=k>class</span> <span class=nc>BooksModelViewSet</span><span class=p>(</span><span class=n>ModelViewSet</span><span class=p>):</span>
<a id=__codelineno-98-2 name=__codelineno-98-2 href=#__codelineno-98-2></a>    <span class=c1># serializer_class = BookSerializer</span>
<a id=__codelineno-98-3 name=__codelineno-98-3 href=#__codelineno-98-3></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-98-4 name=__codelineno-98-4 href=#__codelineno-98-4></a>
<a id=__codelineno-98-5 name=__codelineno-98-5 href=#__codelineno-98-5></a>    <span class=c1># 对于不同的方法使用不同的序列化器</span>
<a id=__codelineno-98-6 name=__codelineno-98-6 href=#__codelineno-98-6></a>    <span class=k>def</span> <span class=nf>get_serializer_class</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-98-7 name=__codelineno-98-7 href=#__codelineno-98-7></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>action</span> <span class=o>==</span> <span class=s2>&quot;list&quot;</span><span class=p>:</span>
<a id=__codelineno-98-8 name=__codelineno-98-8 href=#__codelineno-98-8></a>            <span class=k>return</span> <span class=n>BookSerializer</span>
<a id=__codelineno-98-9 name=__codelineno-98-9 href=#__codelineno-98-9></a>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>action</span> <span class=o>==</span> <span class=s2>&quot;create&quot;</span><span class=p>:</span>
<a id=__codelineno-98-10 name=__codelineno-98-10 href=#__codelineno-98-10></a>            <span class=k>return</span> <span class=n>BookSerializer1</span>
<a id=__codelineno-98-11 name=__codelineno-98-11 href=#__codelineno-98-11></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-98-12 name=__codelineno-98-12 href=#__codelineno-98-12></a>            <span class=k>return</span> <span class=n>BookSerializer2</span>
</code></pre></div> <p>常用的视图集父类</p> <table> <thead> <tr> <th>父类</th> <th>视图集名称</th> <th>说明</th> <th>备注</th> </tr> </thead> <tbody> <tr> <td>APIView与ViewSetMixin</td> <td>ViewSet</td> <td>与APIView基本类似，提供了身份认证、权限校验、流量管理等。<br>使用ViewSet通常并不方便，因为list、retrieve、create、update、destory等方法都需要自己编写，而这些方法与前面讲过的Mixin扩展类提供的方法同名，所以我们可以通过继承Mixin扩展类来复用这些方法而无需自己编写。</td> <td>ViewSet主要通过继承ViewSetMixin来实现在调用 <code>as_view()</code> 时传入字典(如{‘get’:’list’})的映射处理工作。<br>在 ViewSet 中，没有提供任何动作 action 方法，需要我们自己实现action方法。</td> </tr> <tr> <td>GenericAPIView与ViewSetMixin</td> <td>GenericViewSet</td> <td>实现了调用<code>as_view()</code>时传入字典（如{'get':'list'}）的映射处理工作的同时，还提供了GenericAPIView提供的基础方法，可以直接搭配Mixin扩展类使用。</td> <td></td> </tr> <tr> <td>GenericViewSet</td> <td>ModelViewSet</td> <td>继承自GenericViewSet，同时包括了ListModelMixin、RetrieveModelMixin、CreateModelMixin、UpdateModelMixin、DestoryModelMixin。</td> <td></td> </tr> <tr> <td>GenericViewSet</td> <td>ReadOnlyModelViewSet</td> <td>继承自GenericViewSet，同时包括了ListModelMixin、RetrieveModelMixin。</td> <td></td> </tr> </tbody> </table> <div class=highlight><pre><span></span><code><a id=__codelineno-99-1 name=__codelineno-99-1 href=#__codelineno-99-1></a>ViewSetMixin：<span class=w>            </span><span class=c1># 重写了as_view</span>
<a id=__codelineno-99-2 name=__codelineno-99-2 href=#__codelineno-99-2></a>
<a id=__codelineno-99-3 name=__codelineno-99-3 href=#__codelineno-99-3></a>ViewSet：<span class=w>                 </span><span class=c1># 继承ViewSetMixin和APIView</span>
<a id=__codelineno-99-4 name=__codelineno-99-4 href=#__codelineno-99-4></a>
<a id=__codelineno-99-5 name=__codelineno-99-5 href=#__codelineno-99-5></a>GenericViewSet：<span class=w>          </span><span class=c1># 继承ViewSetMixin, generics.GenericAPIView</span>
<a id=__codelineno-99-6 name=__codelineno-99-6 href=#__codelineno-99-6></a>
<a id=__codelineno-99-7 name=__codelineno-99-7 href=#__codelineno-99-7></a>ModelViewSet：<span class=w>            </span><span class=c1># 继承mixins.CreateModelMixin,mixins.RetrieveModelMixin,mixins.UpdateModelMixin,mixins.DestroyModelMixin,mixins.ListModelMixin,GenericViewSet</span>
</code></pre></div> <p>我们来剖析视图的封装层数。要知道，我们经常说到的Django REST framework的“三层视图封装”，并不是仅仅封装了三层，下面解剖一个viewsets.ModelViewSet看一下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-100-1 name=__codelineno-100-1 href=#__codelineno-100-1></a><span class=c1>#源码：</span>
<a id=__codelineno-100-2 name=__codelineno-100-2 href=#__codelineno-100-2></a><span class=k>class</span> <span class=nc>ModelViewSet</span><span class=p>(</span><span class=n>mixins</span><span class=o>.</span><span class=n>CreateModelMixin</span><span class=p>,</span>
<a id=__codelineno-100-3 name=__codelineno-100-3 href=#__codelineno-100-3></a>                   <span class=n>mixins</span><span class=o>.</span><span class=n>RetrieveModelMixin</span><span class=p>,</span>
<a id=__codelineno-100-4 name=__codelineno-100-4 href=#__codelineno-100-4></a>                   <span class=n>mixins</span><span class=o>.</span><span class=n>UpdateModelMixin</span><span class=p>,</span>
<a id=__codelineno-100-5 name=__codelineno-100-5 href=#__codelineno-100-5></a>                   <span class=n>mixins</span><span class=o>.</span><span class=n>DestroyModelMixin</span><span class=p>,</span>
<a id=__codelineno-100-6 name=__codelineno-100-6 href=#__codelineno-100-6></a>                   <span class=n>mixins</span><span class=o>.</span><span class=n>ListModelMixin</span><span class=p>,</span>
<a id=__codelineno-100-7 name=__codelineno-100-7 href=#__codelineno-100-7></a>                   <span class=n>GenericViewSet</span><span class=p>):</span>
<a id=__codelineno-100-8 name=__codelineno-100-8 href=#__codelineno-100-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-100-9 name=__codelineno-100-9 href=#__codelineno-100-9></a><span class=sd>    A viewset that provides default `create()`, `retrieve()`, `update()`,</span>
<a id=__codelineno-100-10 name=__codelineno-100-10 href=#__codelineno-100-10></a><span class=sd>    `partial_update()`, `destroy()` and `list()` actions.</span>
<a id=__codelineno-100-11 name=__codelineno-100-11 href=#__codelineno-100-11></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-100-12 name=__codelineno-100-12 href=#__codelineno-100-12></a>    <span class=k>pass</span>
<a id=__codelineno-100-13 name=__codelineno-100-13 href=#__codelineno-100-13></a>
<a id=__codelineno-100-14 name=__codelineno-100-14 href=#__codelineno-100-14></a><span class=k>class</span> <span class=nc>GenericViewSet</span><span class=p>(</span><span class=n>ViewSetMixin</span><span class=p>,</span> <span class=n>generics</span><span class=o>.</span><span class=n>GenericAPIView</span><span class=p>):</span>
<a id=__codelineno-100-15 name=__codelineno-100-15 href=#__codelineno-100-15></a>    <span class=k>pass</span>
<a id=__codelineno-100-16 name=__codelineno-100-16 href=#__codelineno-100-16></a>
<a id=__codelineno-100-17 name=__codelineno-100-17 href=#__codelineno-100-17></a><span class=k>class</span> <span class=nc>GenericAPIView</span><span class=p>(</span><span class=n>views</span><span class=o>.</span><span class=n>APIView</span><span class=p>):</span>
<a id=__codelineno-100-18 name=__codelineno-100-18 href=#__codelineno-100-18></a>    <span class=k>pass</span>
</code></pre></div> <p>ReadOnlyModelViewSet：继承mixins.RetrieveModelMixin,mixins.ListModelMixin,GenericViewSet 示例参照 ModelViewSet代码，区别仅在于 ReadOnlyModelViewSet 仅实现封装了查询方法。</p> <p>下面主要介绍 ModelViewSet，较为常用。</p> <h4 id=modelviewset>ModelViewSet<a class=headerlink href=#modelviewset title="Permanent link">&para;</a></h4> <p>我们基于 Django开发REST 接口的 bookv1 项目 进行视图改造</p> <p>项目地址： 存放在 gitee</p> <p><a href=https://gitee.com/django-devops/bookv1>bookv1</a></p> <p>创建并切换到新分支</p> <div class=highlight><pre><span></span><code><a id=__codelineno-101-1 name=__codelineno-101-1 href=#__codelineno-101-1></a>git<span class=w> </span>checkout<span class=w> </span>-b<span class=w> </span>drf-ModelViewSet
</code></pre></div> <p><code>app/views.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-102-1 name=__codelineno-102-1 href=#__codelineno-102-1></a><span class=kn>from</span> <span class=nn>rest_framework.viewsets</span> <span class=kn>import</span> <span class=n>ModelViewSet</span>
<a id=__codelineno-102-2 name=__codelineno-102-2 href=#__codelineno-102-2></a><span class=kn>from</span> <span class=nn>app.serializers</span> <span class=kn>import</span> <span class=n>BookInfoSerializer</span><span class=p>,</span> <span class=n>HeroInfoSerializer</span>
<a id=__codelineno-102-3 name=__codelineno-102-3 href=#__codelineno-102-3></a><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>BookInfo</span><span class=p>,</span> <span class=n>HeroInfo</span>
<a id=__codelineno-102-4 name=__codelineno-102-4 href=#__codelineno-102-4></a>
<a id=__codelineno-102-5 name=__codelineno-102-5 href=#__codelineno-102-5></a>
<a id=__codelineno-102-6 name=__codelineno-102-6 href=#__codelineno-102-6></a><span class=c1># --------------- ModelViewSet视图类 --------------------------</span>
<a id=__codelineno-102-7 name=__codelineno-102-7 href=#__codelineno-102-7></a><span class=k>class</span> <span class=nc>BooksInfoModelViewSet</span><span class=p>(</span><span class=n>ModelViewSet</span><span class=p>):</span>
<a id=__codelineno-102-8 name=__codelineno-102-8 href=#__codelineno-102-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-102-9 name=__codelineno-102-9 href=#__codelineno-102-9></a><span class=sd>    获取所有图书和单个图书信息的增删改查</span>
<a id=__codelineno-102-10 name=__codelineno-102-10 href=#__codelineno-102-10></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-102-11 name=__codelineno-102-11 href=#__codelineno-102-11></a>    <span class=n>authentication_classes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-102-12 name=__codelineno-102-12 href=#__codelineno-102-12></a>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-102-13 name=__codelineno-102-13 href=#__codelineno-102-13></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>BookInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-102-14 name=__codelineno-102-14 href=#__codelineno-102-14></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>BookInfoSerializer</span>
<a id=__codelineno-102-15 name=__codelineno-102-15 href=#__codelineno-102-15></a>
<a id=__codelineno-102-16 name=__codelineno-102-16 href=#__codelineno-102-16></a>
<a id=__codelineno-102-17 name=__codelineno-102-17 href=#__codelineno-102-17></a><span class=k>class</span> <span class=nc>HeroInfoModelViewSet</span><span class=p>(</span><span class=n>ModelViewSet</span><span class=p>):</span>
<a id=__codelineno-102-18 name=__codelineno-102-18 href=#__codelineno-102-18></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-102-19 name=__codelineno-102-19 href=#__codelineno-102-19></a><span class=sd>    获取所有人物和单个人物信息的增删改查</span>
<a id=__codelineno-102-20 name=__codelineno-102-20 href=#__codelineno-102-20></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-102-21 name=__codelineno-102-21 href=#__codelineno-102-21></a>    <span class=n>authentication_classes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-102-22 name=__codelineno-102-22 href=#__codelineno-102-22></a>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-102-23 name=__codelineno-102-23 href=#__codelineno-102-23></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>HeroInfo</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-102-24 name=__codelineno-102-24 href=#__codelineno-102-24></a>    <span class=n>serializer_class</span> <span class=o>=</span> <span class=n>HeroInfoSerializer</span>
</code></pre></div> <p><code>app/urls.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-103-1 name=__codelineno-103-1 href=#__codelineno-103-1></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>re_path</span><span class=p>,</span> <span class=n>path</span>
<a id=__codelineno-103-2 name=__codelineno-103-2 href=#__codelineno-103-2></a><span class=kn>from</span> <span class=nn>.</span> <span class=kn>import</span> <span class=n>views</span>
<a id=__codelineno-103-3 name=__codelineno-103-3 href=#__codelineno-103-3></a>
<a id=__codelineno-103-4 name=__codelineno-103-4 href=#__codelineno-103-4></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-103-5 name=__codelineno-103-5 href=#__codelineno-103-5></a>    <span class=c1># 图书</span>
<a id=__codelineno-103-6 name=__codelineno-103-6 href=#__codelineno-103-6></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;books/&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>BooksInfoModelViewSet</span><span class=o>.</span><span class=n>as_view</span><span class=p>({</span><span class=s1>&#39;get&#39;</span><span class=p>:</span> <span class=s1>&#39;list&#39;</span><span class=p>,</span> <span class=s1>&#39;post&#39;</span><span class=p>:</span> <span class=s1>&#39;create&#39;</span><span class=p>})),</span>
<a id=__codelineno-103-7 name=__codelineno-103-7 href=#__codelineno-103-7></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;books/&lt;int:pk&gt;/&#39;</span><span class=p>,</span>
<a id=__codelineno-103-8 name=__codelineno-103-8 href=#__codelineno-103-8></a>         <span class=n>views</span><span class=o>.</span><span class=n>BooksInfoModelViewSet</span><span class=o>.</span><span class=n>as_view</span><span class=p>({</span><span class=s1>&#39;get&#39;</span><span class=p>:</span> <span class=s1>&#39;retrieve&#39;</span><span class=p>,</span> <span class=s1>&#39;put&#39;</span><span class=p>:</span> <span class=s1>&#39;update&#39;</span><span class=p>,</span> <span class=s1>&#39;delete&#39;</span><span class=p>:</span> <span class=s1>&#39;destroy&#39;</span><span class=p>})),</span>
<a id=__codelineno-103-9 name=__codelineno-103-9 href=#__codelineno-103-9></a>
<a id=__codelineno-103-10 name=__codelineno-103-10 href=#__codelineno-103-10></a>    <span class=c1># 人物</span>
<a id=__codelineno-103-11 name=__codelineno-103-11 href=#__codelineno-103-11></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;heros/&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>HeroInfoModelViewSet</span><span class=o>.</span><span class=n>as_view</span><span class=p>({</span><span class=s1>&#39;get&#39;</span><span class=p>:</span> <span class=s1>&#39;list&#39;</span><span class=p>,</span> <span class=s1>&#39;post&#39;</span><span class=p>:</span> <span class=s1>&#39;create&#39;</span><span class=p>})),</span>
<a id=__codelineno-103-12 name=__codelineno-103-12 href=#__codelineno-103-12></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;heros/&lt;int:pk&gt;/&#39;</span><span class=p>,</span>
<a id=__codelineno-103-13 name=__codelineno-103-13 href=#__codelineno-103-13></a>         <span class=n>views</span><span class=o>.</span><span class=n>HeroInfoModelViewSet</span><span class=o>.</span><span class=n>as_view</span><span class=p>({</span><span class=s1>&#39;get&#39;</span><span class=p>:</span> <span class=s1>&#39;retrieve&#39;</span><span class=p>,</span> <span class=s1>&#39;put&#39;</span><span class=p>:</span> <span class=s1>&#39;update&#39;</span><span class=p>,</span> <span class=s1>&#39;delete&#39;</span><span class=p>:</span> <span class=s1>&#39;destroy&#39;</span><span class=p>})),</span>
<a id=__codelineno-103-14 name=__codelineno-103-14 href=#__codelineno-103-14></a><span class=p>]</span>
</code></pre></div> <p>用viewsets + Router的方式实现视图封装</p> <p><code>bookv1/urls.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-104-1 name=__codelineno-104-1 href=#__codelineno-104-1></a><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>
<a id=__codelineno-104-2 name=__codelineno-104-2 href=#__codelineno-104-2></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>include</span><span class=p>,</span> <span class=n>re_path</span><span class=p>,</span> <span class=n>path</span>
<a id=__codelineno-104-3 name=__codelineno-104-3 href=#__codelineno-104-3></a><span class=kn>from</span> <span class=nn>app</span> <span class=kn>import</span> <span class=n>urls</span>
<a id=__codelineno-104-4 name=__codelineno-104-4 href=#__codelineno-104-4></a><span class=kn>from</span> <span class=nn>rest_framework.routers</span> <span class=kn>import</span> <span class=n>DefaultRouter</span>
<a id=__codelineno-104-5 name=__codelineno-104-5 href=#__codelineno-104-5></a><span class=kn>from</span> <span class=nn>app.views</span> <span class=kn>import</span> <span class=n>BooksInfoModelViewSet</span><span class=p>,</span> <span class=n>HeroInfoModelViewSet</span>
<a id=__codelineno-104-6 name=__codelineno-104-6 href=#__codelineno-104-6></a>
<a id=__codelineno-104-7 name=__codelineno-104-7 href=#__codelineno-104-7></a><span class=c1># 因为我们使用的是ViewSet类而不是View类，我们实际上不需要自己设计URL。</span>
<a id=__codelineno-104-8 name=__codelineno-104-8 href=#__codelineno-104-8></a><span class=c1># 将资源连接到视图和url的约定可以使用Router类自动处理。</span>
<a id=__codelineno-104-9 name=__codelineno-104-9 href=#__codelineno-104-9></a><span class=c1># 我们需要做的就是使用路由器注册相应的视图集，然后让它执行其余操作。</span>
<a id=__codelineno-104-10 name=__codelineno-104-10 href=#__codelineno-104-10></a><span class=n>router</span> <span class=o>=</span> <span class=n>DefaultRouter</span><span class=p>()</span>
<a id=__codelineno-104-11 name=__codelineno-104-11 href=#__codelineno-104-11></a><span class=n>router</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;books&#39;</span><span class=p>,</span> <span class=n>BooksInfoModelViewSet</span><span class=p>,</span> <span class=n>basename</span><span class=o>=</span><span class=s1>&#39;books&#39;</span><span class=p>)</span>
<a id=__codelineno-104-12 name=__codelineno-104-12 href=#__codelineno-104-12></a><span class=n>router</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;heros&#39;</span><span class=p>,</span> <span class=n>HeroInfoModelViewSet</span><span class=p>,</span> <span class=n>basename</span><span class=o>=</span><span class=s1>&#39;heros&#39;</span><span class=p>)</span>
<a id=__codelineno-104-13 name=__codelineno-104-13 href=#__codelineno-104-13></a>
<a id=__codelineno-104-14 name=__codelineno-104-14 href=#__codelineno-104-14></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=n>router</span><span class=o>.</span><span class=n>urls</span>
<a id=__codelineno-104-15 name=__codelineno-104-15 href=#__codelineno-104-15></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-104-16 name=__codelineno-104-16 href=#__codelineno-104-16></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;admin/&#39;</span><span class=p>,</span> <span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>urls</span><span class=p>),</span>
<a id=__codelineno-104-17 name=__codelineno-104-17 href=#__codelineno-104-17></a>    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;api/&#39;</span><span class=p>,</span> <span class=n>include</span><span class=p>(</span><span class=n>router</span><span class=o>.</span><span class=n>urls</span><span class=p>))</span>
<a id=__codelineno-104-18 name=__codelineno-104-18 href=#__codelineno-104-18></a>    <span class=c1># re_path(&#39;api/&#39;, include(urls)),</span>
<a id=__codelineno-104-19 name=__codelineno-104-19 href=#__codelineno-104-19></a><span class=p>]</span>
</code></pre></div> <h4 id=路由router>路由Router<a class=headerlink href=#路由router title="Permanent link">&para;</a></h4> <blockquote> <p>添加路由数据有2种方式</p> </blockquote> <p>第一种方式：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-105-1 name=__codelineno-105-1 href=#__codelineno-105-1></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-105-2 name=__codelineno-105-2 href=#__codelineno-105-2></a><span class=c1># ...</span>
<a id=__codelineno-105-3 name=__codelineno-105-3 href=#__codelineno-105-3></a><span class=p>]</span>
<a id=__codelineno-105-4 name=__codelineno-105-4 href=#__codelineno-105-4></a><span class=n>urlpatterns</span> <span class=o>+=</span> <span class=n>router</span><span class=o>.</span><span class=n>urls</span>
</code></pre></div> <p>第二种方式</p> <div class=highlight><pre><span></span><code><a id=__codelineno-106-1 name=__codelineno-106-1 href=#__codelineno-106-1></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-106-2 name=__codelineno-106-2 href=#__codelineno-106-2></a><span class=c1># ...</span>
<a id=__codelineno-106-3 name=__codelineno-106-3 href=#__codelineno-106-3></a><span class=n>path</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^&#39;</span><span class=p>,</span> <span class=n>include</span><span class=p>(</span><span class=n>router</span><span class=o>.</span><span class=n>urls</span><span class=p>))</span>
<a id=__codelineno-106-4 name=__codelineno-106-4 href=#__codelineno-106-4></a><span class=p>]</span>
</code></pre></div> <h3 id=77-视图如何选择>7.7 视图如何选择?<a class=headerlink href=#77-视图如何选择 title="Permanent link">&para;</a></h3> <p>可以说，我们在今后的项目中，只需要优先在 APIView 和 viewsets 中选择即可。至于 mixins 就好像是斐波那契数列一样，几乎永远不会缺席于应聘Django REST framework技术岗位的笔试题中，但在实际项目中却很少能用得上。</p> <p>APIView和viewsets应该怎样选择呢？</p> <p>当视图要实现的功能中，存在数据运算、拼接的业务逻辑时，可以一律选择APIView的方式来写视图类，除此以外，优先使用viewsets的方式来写视图类，毕竟使用viewsets+Router在常规功能上效率极高。</p> <h2 id=参考文献>参考文献<a class=headerlink href=#参考文献 title="Permanent link">&para;</a></h2> <p><a href=https://www.cnblogs.com/Slience-me/p/14456752.html>django rest framework学习</a></p> <p><a href=https://www.yuque.com/wslynn/python/ouh3zo>Django REST Framework</a></p> <p><a href=https://www.yuque.com/cuiliang0302/python/enqmvp>DRF知识点总结</a></p> <p><a href=http://www.sunrisenan.com/docs/drf/drf-1do8mau479ha8>DRF</a></p> <p><a href=https://www.dusaiphoto.com/article/77/ >Django-Vue搭建个人博客</a></p> <p><a href=https://pythondjango.cn/django/rest-framework-tutorials>Django REST Framework教程</a></p> <p><a href=https://www.cnblogs.com/bladecheng/p/11565336.html>Django drf 从入门到精通</a></p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">December 12, 2023 17:40:44</span> </span> <span class=md-source-file__fact> <span class=md-icon title=创建日期> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">November 21, 2023 22:50:54</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/hujianli94/hujianli94.github.io/issues/new/?title=[Feedback]+%E9%99%84-Django-web%E5%BC%80%E5%8F%91+-+/Python/2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-Django-web%E5%BC%80%E5%8F%91/" target=_blank>feedback form</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=页脚> <a href=../%E9%99%84-CMDB/ class="md-footer__link md-footer__link--prev" aria-label="上一页: 附-CMDB"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> 上一页 </span> <div class=md-ellipsis> 附-CMDB </div> </div> </a> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/1.Python2%E4%B8%8EPython3%E5%8C%BA%E5%88%AB/ class="md-footer__link md-footer__link--next" aria-label="下一页: 1.Python2与Python3区别"> <div class=md-footer__title> <span class=md-footer__direction> 下一页 </span> <div class=md-ellipsis> 1.Python2与Python3区别 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2023 - 2024 hujainli94 </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/hujianli94 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20220125122524.png target=_blank rel=noopener title=kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154zm-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4zm-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2zM563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4zm-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6zm107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6z"/></svg> </a> <a href="mailto:<1879324764@qq.com>" target=_blank rel=noopener title=发送邮件 class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.7l167.6-182.9c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">同意</button> <label class=md-button for=__settings>管理设定</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script> <script id=__config type=application/json>{"base": "../../..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "content.code.annotate", "navigation.indexes", "navigation.footer", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../../assets/javascripts/bundle.d7c377c4.min.js></script> <script src=../../../javascripts/extra.js></script> <script src=https://file.cdn.shafish.cn/blog/js/video.min.js></script> </body> </html>