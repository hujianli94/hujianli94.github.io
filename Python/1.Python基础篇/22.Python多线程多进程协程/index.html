<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="stay hungry,stay foolish #magic___^_^___line"><meta name=author content=hujainli94><link href=https://hujianli94.github.io/Python/1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/22.Python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%8D%8F%E7%A8%8B/ rel=canonical><link href=../21.Python%E6%89%B9%E9%87%8F%E7%AE%A1%E7%90%86%E4%B8%BB%E6%9C%BA/ rel=prev><link href=../23.Python%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.48"><title>22.Python 多线程多进程协程 - DevOps运维开发</title><link rel=stylesheet href=../../../assets/stylesheets/main.6f8fc17f.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775m1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25m13.274 9.537zl-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074M4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5M4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13M6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75M8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.5 4.5 0 0 1-.563-1.191 3.84 3.84 0 0 1-.05-2.063 4.65 4.65 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .75.75 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.4 2.4 0 0 1-.507-.441 3.1 3.1 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19.01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.7 3.7 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.75.75 0 0 1 .018-1.042.75.75 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13M6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.76 2.76 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6 6 0 0 0-.26.16 1 1 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1 1 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.61.61 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1 1 0 0 0-.34.398M9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0M9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343za8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746m1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275M6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.75.75 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L6.94 8 4.97 6.03a.75.75 0 0 1 .018-1.042.75.75 0 0 1 1.042-.018"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.25 1.25 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005 0-.009.004"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.5 3.5 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327q0 .15-.025.292c.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5q-.002.615-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A5 5 0 0 1 8 16a5 5 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5 5 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.7 1.7 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06m.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.17.17 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5m4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5m0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5M2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0"/></svg>');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../stylesheets/extra.css><link rel=stylesheet href=https://file.cdn.shafish.cn/blog/css/vssue.css><link rel=stylesheet href=https://file.cdn.shafish.cn/blog/css/video-js.min.css><link rel=stylesheet href=https://file.cdn.shafish.cn/blog/css/video.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","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"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","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",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=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",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#22python-多线程多进程协程 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../.. title=DevOps运维开发 class="md-header__button md-logo" aria-label=DevOps运维开发 data-md-component=logo> <img src=../../../assets/images/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> DevOps运维开发 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 22.Python 多线程多进程协程 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label=切换至深色模式 type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title=切换至深色模式 for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=blue aria-label=切换至浅色模式 type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title=切换至浅色模式 for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hujianli94/hujianli94.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> hujianli94.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> 首页 </a> </li> <li class=md-tabs__item> <a href=../../../k8s/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.k8s/ class=md-tabs__link> k8s </a> </li> <li class=md-tabs__item> <a href=../../../Kubernetes/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Kubernetes/ class=md-tabs__link> Kubernetes </a> </li> <li class=md-tabs__item> <a href=../../../Docker/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Docker/ class=md-tabs__link> Docker </a> </li> <li class=md-tabs__item> <a href=../../../Golang/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Go-Web%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/ class=md-tabs__link> Golang </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Pythjon-auto-ops/ class=md-tabs__link> Python </a> </li> <li class=md-tabs__item> <a href=../../../Openstack/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.OpenStack/ class=md-tabs__link> Openstack </a> </li> <li class=md-tabs__item> <a href=../../../Python-vs-Go/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Python-vs-Go/ class=md-tabs__link> Python-vs-Go </a> </li> <li class=md-tabs__item> <a href=../../../Git/1.Git%E5%9F%BA%E7%A1%80/ class=md-tabs__link> Git </a> </li> <li class=md-tabs__item> <a href=../../../Ansible/1.Ansible%E7%AE%80%E4%BB%8B/ class=md-tabs__link> Ansible </a> </li> <li class=md-tabs__item> <a href=../../../Shell/Shell%E7%AE%80%E4%BB%8B/ class=md-tabs__link> Shell </a> </li> <li class=md-tabs__item> <a href=../../../Linux/KVM/1.kvm%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/ class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../../middleware/db/1.postgres/ class=md-tabs__link> middleware </a> </li> <li class=md-tabs__item> <a href=../../../Other/tools/1.PicGo%E5%9B%BE%E5%BA%8A/ class=md-tabs__link> Other </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=DevOps运维开发 class="md-nav__button md-logo" aria-label=DevOps运维开发 data-md-component=logo> <img src=../../../assets/images/logo.png alt=logo> </a> DevOps运维开发 </label> <div class=md-nav__source> <a href=https://github.com/hujianli94/hujianli94.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> hujianli94.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> 首页 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> k8s </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> k8s </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.k8s/ class=md-nav__link> <span class=md-ellipsis> Kubernetes 从入门到实践 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> 1.容器的发展史 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 1.容器的发展史 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/1.%E5%AE%B9%E5%99%A8%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/1.1%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E7%9A%84%E5%8F%91%E5%B1%95/ class=md-nav__link> <span class=md-ellipsis> 1.1开发过程的发展 </span> </a> </li> <li class=md-nav__item> <a href=../../../k8s/1.%E5%AE%B9%E5%99%A8%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/1.2%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8F%91%E5%B1%95/ class=md-nav__link> <span class=md-ellipsis> 1.2应用架构的发展 </span> </a> </li> <li class=md-nav__item> <a href=../../../k8s/1.%E5%AE%B9%E5%99%A8%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/1.3%E9%83%A8%E7%BD%B2%E6%89%93%E5%8C%85%E7%9A%84%E5%8F%91%E5%B1%95/ class=md-nav__link> <span class=md-ellipsis> 1.3部署打包的发展 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> 2.Kubernetes的核心概念 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 2.Kubernetes的核心概念 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/2.Kubernetes%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/2.1Kubernetes%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%9E%B6%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> 2.1Kubernetes的设计架构 </span> </a> </li> <li class=md-nav__item> <a href=../../../k8s/2.Kubernetes%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/2.2Kubernetes%E7%9A%84%E6%A0%B8%E5%BF%83%E5%AF%B9%E8%B1%A1/ class=md-nav__link> <span class=md-ellipsis> 2.2Kubernetes的核心对象 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> 3.Kubernetes的安装和部署 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 3.Kubernetes的安装和部署 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/3.Kubernetes%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%83%A8%E7%BD%B2/3.1kubeadm%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> 3.1kubeadm搭建开发环境 </span> </a> </li> <li class=md-nav__item> <a href=../../../k8s/3.Kubernetes%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%83%A8%E7%BD%B2/3.2kubeadm%E6%90%AD%E5%BB%BA%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> 3.2kubeadm搭建生产环境 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class=md-ellipsis> 4.Pod </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> 4.Pod </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/4.Pod/4.1Pod%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/ class=md-nav__link> <span class=md-ellipsis> 4.1Pod的基本操作 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6 id=__nav_2_6_label tabindex=0> <span class=md-ellipsis> 5.控制器 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> 5.控制器 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/5.%E6%8E%A7%E5%88%B6%E5%99%A8/5.1Deployment/ class=md-nav__link> <span class=md-ellipsis> 5.1Deployment </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Kubernetes </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Kubernetes/ class=md-nav__link> <span class=md-ellipsis> Kubernetes </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> 1.安装篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> 1.安装篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/1.Kubeadm%E5%AE%89%E8%A3%85%E9%AB%98%E5%8F%AF%E7%94%A8K8s%E9%9B%86%E7%BE%A4/ class=md-nav__link> <span class=md-ellipsis> Kubeadm安装高可用集群 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/2.%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85%E9%AB%98%E5%8F%AF%E7%94%A8K8s%E9%9B%86%E7%BE%A4/ class=md-nav__link> <span class=md-ellipsis> 二进制安装高可用K8s集群 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/3.%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 安装常用工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/4.Kubeadm%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> Kubeadm安装开发环境 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/1.%E5%AE%89%E8%A3%85%E7%AF%87/5.K3s%E5%92%8CMinikube/ class=md-nav__link> <span class=md-ellipsis> K3s和Minikube </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> 2.基础篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> 2.基础篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/3.Docker%E5%9F%BA%E7%A1%80/ class=md-nav__link> <span class=md-ellipsis> Docker基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/4.Kubernetes%E7%9A%84%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/ class=md-nav__link> <span class=md-ellipsis> Kubernetes的基础概念 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/5.Kubernetes%E8%B0%83%E5%BA%A6%E5%9F%BA%E7%A1%80/ class=md-nav__link> <span class=md-ellipsis> Kubernetes调度基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/6.Kubernetes%E6%9C%8D%E5%8A%A1%E5%8F%91%E5%B8%83%E5%9F%BA%E7%A1%80/ class=md-nav__link> <span class=md-ellipsis> Kubernetes服务发布基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/2.%E5%9F%BA%E7%A1%80%E7%AF%87/7.Kubernetes%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> Kubernetes配置管理 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> 3.进阶篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> 3.进阶篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/3.%E8%BF%9B%E9%98%B6%E7%AF%87/8.Kubernetes%E5%AD%98%E5%82%A8%E5%85%A5%E9%97%A8/ class=md-nav__link> <span class=md-ellipsis> Kubernetes存储入门 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/3.%E8%BF%9B%E9%98%B6%E7%AF%87/9.Kubernetes%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6/ class=md-nav__link> <span class=md-ellipsis> Kubernetes高级调度 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> 4.高级篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> 4.高级篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/4.%E9%AB%98%E7%BA%A7%E7%AF%87/12.%E4%BA%91%E5%8E%9F%E7%94%9F%E5%AD%98%E5%82%A8Rook/ class=md-nav__link> <span class=md-ellipsis> 云原生存储Rook </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/4.%E9%AB%98%E7%BA%A7%E7%AF%87/13.%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%AE%B9%E5%99%A8%E5%8C%96/ class=md-nav__link> <span class=md-ellipsis> 中间件容器化 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> 5.运维篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> 5.运维篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/5.%E8%BF%90%E7%BB%B4%E7%AF%87/14.Kubernetes%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/ class=md-nav__link> <span class=md-ellipsis> Kubernetes 日志收集 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/5.%E8%BF%90%E7%BB%B4%E7%AF%87/15.Kubernetes%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/ class=md-nav__link> <span class=md-ellipsis> Kubernetes监控告警 </span> </a> </li> <li class=md-nav__item> <a href=../../../Kubernetes/5.%E8%BF%90%E7%BB%B4%E7%AF%87/16.%E6%9C%8D%E5%8A%A1%E5%8F%91%E5%B8%83Ingress%E8%BF%9B%E9%98%B6/ class=md-nav__link> <span class=md-ellipsis> 服务发布Ingress进阶 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class=md-ellipsis> 6.DevOps篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> 6.DevOps篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/6.DevOps%E7%AF%87/17.DevOps%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> DevOps 实践 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class=md-ellipsis> 7.Kubernetes面试 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> 7.Kubernetes面试 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/7.Kubernetes%E9%9D%A2%E8%AF%95/1.Kubernetes%E9%9D%A2%E8%AF%95%E9%A2%98/ class=md-nav__link> <span class=md-ellipsis> Kubernetes 面试题 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9 id=__nav_3_9_label tabindex=0> <span class=md-ellipsis> 8.Kubernetes-网络权威指南 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_9_label aria-expanded=false> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> 8.Kubernetes-网络权威指南 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/8.Kubernetes-%E7%BD%91%E7%BB%9C%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/1.network-namespace/ class=md-nav__link> <span class=md-ellipsis> 1.network-namespace </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Docker </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Docker/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Docker/ class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> 1.基础 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> 1.基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/1.%E5%AE%89%E8%A3%85Docker/ class=md-nav__link> <span class=md-ellipsis> 1.安装Docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/2.Docker%E9%95%9C%E5%83%8F/ class=md-nav__link> <span class=md-ellipsis> 2.Docker 镜像 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/3.Docker%E5%AE%B9%E5%99%A8/ class=md-nav__link> <span class=md-ellipsis> 3.Docker容器 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/4.%E4%BC%81%E4%B8%9A%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93harbor/ class=md-nav__link> <span class=md-ellipsis> 4.企业私有仓库 harbor </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/5.Docker%E6%95%B0%E6%8D%AE/ class=md-nav__link> <span class=md-ellipsis> 5.Docker数据 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/6.Docker%E7%BD%91%E7%BB%9C/ class=md-nav__link> <span class=md-ellipsis> 6.Docker网络 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/7.Dockerfile/ class=md-nav__link> <span class=md-ellipsis> 7.Dockerfile </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/8.docker-compose/ class=md-nav__link> <span class=md-ellipsis> 8.docker-compose </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/9.Docker%E7%9B%B8%E5%85%B3%E8%84%9A%E6%9C%AC/ class=md-nav__link> <span class=md-ellipsis> 9.Docker相关脚本 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/1.%E5%9F%BA%E7%A1%80/10.Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 10.Docker常用命令 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> 2.实战案例 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> 2.实战案例 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Docker/2.%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B/1.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ class=md-nav__link> <span class=md-ellipsis> 1.操作系统 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/2.%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B/2.Web%E6%9C%8D%E5%8A%A1%E4%B8%8E%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 2.Web服务与应用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/2.%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B/3.%E6%8C%81%E7%BB%AD%E5%BC%80%E5%8F%91%E4%B8%8E%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 3.持续开发与管理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/2.%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B/4.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 4.数据库应用 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> 3.Devops </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> 3.Devops </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Docker/3.Devops/0.keepalived-docker/ class=md-nav__link> <span class=md-ellipsis> 0.keepalived-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/1.confcenter-docker/ class=md-nav__link> <span class=md-ellipsis> 1.confcenter-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/2.simaple-jenkins/ class=md-nav__link> <span class=md-ellipsis> 2.simaple-jenkins </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/3.docker-nginx-spa/ class=md-nav__link> <span class=md-ellipsis> 3.docker-nginx-spa </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/4.fileserver-docker/ class=md-nav__link> <span class=md-ellipsis> 4.fileserver-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/5.haproxy-docker/ class=md-nav__link> <span class=md-ellipsis> 5.haproxy-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/6.mysql-docker/ class=md-nav__link> <span class=md-ellipsis> 6.mysql-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/7.frp-docker/ class=md-nav__link> <span class=md-ellipsis> 7.frp-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/8.coredns-docker/ class=md-nav__link> <span class=md-ellipsis> 8.coredns-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/9.simple-harbor/ class=md-nav__link> <span class=md-ellipsis> 9.simple-harbor </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/10.redis-docker/ class=md-nav__link> <span class=md-ellipsis> 10.redis-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/11.nexus3-docker/ class=md-nav__link> <span class=md-ellipsis> 11.nexus3-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/12.openvpn-docker/ class=md-nav__link> <span class=md-ellipsis> 12.openvpn-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/13.nfs-docker/ class=md-nav__link> <span class=md-ellipsis> 13.nfs-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/14.jumpserver-docker/ class=md-nav__link> <span class=md-ellipsis> 14.jumpserver-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/15.ansible-docker/ class=md-nav__link> <span class=md-ellipsis> 15.ansible-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/16.minio-docker/ class=md-nav__link> <span class=md-ellipsis> 16.minio-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/17.vaultwarden-docker/ class=md-nav__link> <span class=md-ellipsis> 17.vaultwarden-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/18.kasm-docker/ class=md-nav__link> <span class=md-ellipsis> 18.kasm-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/19.nginx-docker/ class=md-nav__link> <span class=md-ellipsis> 19.nginx-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/20.kafka-docker/ class=md-nav__link> <span class=md-ellipsis> 20.kafka-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/21.golang-docker/ class=md-nav__link> <span class=md-ellipsis> 21.golang-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/22.postgres-docker/ class=md-nav__link> <span class=md-ellipsis> 22.postgres-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/23.nginx-download-docker/ class=md-nav__link> <span class=md-ellipsis> 23.nginx-download-docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/24.helm%E9%83%A8%E7%BD%B2%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1/ class=md-nav__link> <span class=md-ellipsis> 24.helm部署常用服务 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/25.Python%E6%93%8D%E4%BD%9CDocker/ class=md-nav__link> <span class=md-ellipsis> 25.Python 操作 Docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/26.docker-compose-devops/ class=md-nav__link> <span class=md-ellipsis> 26.docker-compose-devops </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/27.DevOps%E4%B8%8B%E7%9A%84Shell%E8%84%9A%E6%9C%AC/ class=md-nav__link> <span class=md-ellipsis> 27.DevOps 下的 Shell 脚本 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/28.Devops%E4%B8%8B%E7%9A%84Python%E8%84%9A%E6%9C%AC/ class=md-nav__link> <span class=md-ellipsis> 28.Devops下的Python脚本 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/29.Vagrant%E8%99%9A%E6%8B%9F%E6%9C%BA/ class=md-nav__link> <span class=md-ellipsis> 29.Vagrant虚拟机 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/30.VMware-workstation/ class=md-nav__link> <span class=md-ellipsis> 30.VMware Workstation </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/31.VirtualBox/ class=md-nav__link> <span class=md-ellipsis> 31.VirtualBox </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/32.Devops%E7%9B%B8%E5%85%B3%E5%AD%98%E5%82%A8%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 32.Devops相关存储库 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/33.terraform%E6%A6%82%E8%BF%B0/ class=md-nav__link> <span class=md-ellipsis> 33.terraform概述 </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/34.%E5%8A%A0%E9%80%9Fdockerhub/ class=md-nav__link> <span class=md-ellipsis> 34.加速 dockerhub </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/35.instantbox/ class=md-nav__link> <span class=md-ellipsis> 35.instantbox </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/36.docker-prometheus-stack/ class=md-nav__link> <span class=md-ellipsis> 36.docker-prometheus-stack </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/37.grabber/ class=md-nav__link> <span class=md-ellipsis> 37.grabber </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/38.webhookbot/ class=md-nav__link> <span class=md-ellipsis> 38.webhookbot </span> </a> </li> <li class=md-nav__item> <a href=../../../Docker/3.Devops/39.docker_pull/ class=md-nav__link> <span class=md-ellipsis> 39.docker_pull </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Golang </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1> <label class=md-nav__link for=__nav_5_1 id=__nav_5_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Go-Web%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> Go Web 开发实战 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> 1.Go基础 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> 1.Go基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/1.Go%E5%9F%BA%E7%A1%80/1.%E5%AE%89%E8%A3%85Go/ class=md-nav__link> <span class=md-ellipsis> 安装 Go </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/1.Go%E5%9F%BA%E7%A1%80/2.%E7%AC%AC%E4%B8%80%E4%B8%AAGo%E7%A8%8B%E5%BA%8F/ class=md-nav__link> <span class=md-ellipsis> 第一个Go程序 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/1.Go%E5%9F%BA%E7%A1%80/3.Go%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> Go 基础语法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/1.Go%E5%9F%BA%E7%A1%80/4.Go-Module/ class=md-nav__link> <span class=md-ellipsis> Go Module </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/1.Go%E5%9F%BA%E7%A1%80/5.Go-%E6%A0%87%E5%87%86%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> Go 标准目录结构 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> 2.Go-Web基础 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> 2.Go-Web基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/2.Go-Web%E5%9F%BA%E7%A1%80/5.%E7%AC%AC%E4%B8%80%E4%B8%AAGo-Web%E7%A8%8B%E5%BA%8F/ class=md-nav__link> <span class=md-ellipsis> 第一个Go Web程序 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/2.Go-Web%E5%9F%BA%E7%A1%80/6.Web%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> Web程序运行原理简介 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/2.Go-Web%E5%9F%BA%E7%A1%80/7.net-http%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> net/http包 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/2.Go-Web%E5%9F%BA%E7%A1%80/8.html-template%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> html/template包 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> 3.Go-Web请求处理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> 3.Go-Web请求处理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/3.Go-Web%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86/9.%E7%AE%80%E5%8D%95Web%E6%9C%8D%E5%8A%A1%E5%99%A8/ class=md-nav__link> <span class=md-ellipsis> 简单Web服务器 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/3.Go-Web%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86/10.%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82/ class=md-nav__link> <span class=md-ellipsis> 处理请求 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/3.Go-Web%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86/11.session%E5%92%8Ccookie/ class=md-nav__link> <span class=md-ellipsis> session和cookie </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> 4.Go访问数据库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> 4.Go访问数据库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/12.Go%E6%93%8D%E4%BD%9CMySQL/ class=md-nav__link> <span class=md-ellipsis> Go操作MySQL </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/13.Go%E6%93%8D%E4%BD%9CRedis/ class=md-nav__link> <span class=md-ellipsis> Go操作Redis </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/14.Go%E6%93%8D%E4%BD%9CMongoDB/ class=md-nav__link> <span class=md-ellipsis> Go操作MongoDB </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/15.Go%E7%9A%84%E5%B8%B8%E8%A7%81ORM%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> Go 的常见 ORM 库 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/4.Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/16.Go%E6%93%8D%E4%BD%9CSQLite/ class=md-nav__link> <span class=md-ellipsis> Go操作SQLite </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex=0> <span class=md-ellipsis> 5.Go高级网络编程 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> 5.Go高级网络编程 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/5.Go%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/17.Go-Socket%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> Go Socket编程 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/5.Go%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/18.Go-RPC%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> Go RPC编程 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/5.Go%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/19.Go-%E5%BE%AE%E6%9C%8D%E5%8A%A1/ class=md-nav__link> <span class=md-ellipsis> Go 微服务 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex=0> <span class=md-ellipsis> 6.Go文件处理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> 6.Go文件处理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/20.%E5%A4%84%E7%90%86%E7%9B%AE%E5%BD%95%E4%B8%8E%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理目录与文件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/21.%E5%A4%84%E7%90%86XML%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理XML文件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/22.%E5%A4%84%E7%90%86JSON%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理JSON文件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/23.%E5%A4%84%E7%90%86CSV%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理CSV文件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/24.%E5%A4%84%E7%90%86Go%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95/ class=md-nav__link> <span class=md-ellipsis> 处理Go日志记录 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/25.%E5%A4%84%E7%90%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 处理正则表达式 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/6.Go%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/26.%E5%A4%84%E7%90%86Excel%E6%96%87%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 处理Excel文件 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_8> <label class=md-nav__link for=__nav_5_8 id=__nav_5_8_label tabindex=0> <span class=md-ellipsis> 7.Go并发编程 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_8_label aria-expanded=false> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> 7.Go并发编程 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/26.%E5%B9%B6%E5%8F%91-%E5%B9%B6%E8%A1%8C/ class=md-nav__link> <span class=md-ellipsis> 并发 并行 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/27.%E8%BF%9B%E7%A8%8B-%E7%BA%BF%E7%A8%8B-%E5%8D%8F%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> 进程 线程 协程 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/28.Go%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%9E%8B/ class=md-nav__link> <span class=md-ellipsis> Go并发模型 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/29.goroutine%E5%92%8Cchannel/ class=md-nav__link> <span class=md-ellipsis> goroutine和channel </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/30.sync%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> sync实现并发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/31.Go%E5%B9%B6%E5%8F%91%E7%9A%84Web%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> Go并发的Web应用 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_9> <label class=md-nav__link for=__nav_5_9 id=__nav_5_9_label tabindex=0> <span class=md-ellipsis> 8.Go标准库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_9_label aria-expanded=false> <label class=md-nav__title for=__nav_5_9> <span class="md-nav__icon md-icon"></span> 8.Go标准库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/32.time/ class=md-nav__link> <span class=md-ellipsis> time </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/33.strings/ class=md-nav__link> <span class=md-ellipsis> strings </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/34.bytes/ class=md-nav__link> <span class=md-ellipsis> bytes </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/35.json/ class=md-nav__link> <span class=md-ellipsis> json </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/36.io-bufio/ class=md-nav__link> <span class=md-ellipsis> io/bufio </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/37.fmt/ class=md-nav__link> <span class=md-ellipsis> fmt </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/38.strconv/ class=md-nav__link> <span class=md-ellipsis> strconv </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/39.regexp/ class=md-nav__link> <span class=md-ellipsis> regexp </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/40.log/ class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/41.reflect-unsafe/ class=md-nav__link> <span class=md-ellipsis> reflect/unsafe </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/42.os-path-filepath/ class=md-nav__link> <span class=md-ellipsis> os/path/filepath </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/43.unicode/ class=md-nav__link> <span class=md-ellipsis> unicode </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/44.flag/ class=md-nav__link> <span class=md-ellipsis> flag </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/45.net-url/ class=md-nav__link> <span class=md-ellipsis> net/url </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/46.net-http/ class=md-nav__link> <span class=md-ellipsis> net/http </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/47.sort/ class=md-nav__link> <span class=md-ellipsis> sort </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/48.errors/ class=md-nav__link> <span class=md-ellipsis> errors </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/49.%E5%87%BD%E6%95%B0%E5%B7%A5%E5%85%B7%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 函数工具库 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/8.Go%E6%A0%87%E5%87%86%E5%BA%93/50.Go%E8%AF%AD%E8%A8%80%E5%9C%A8%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> Go语言在运维开发中的应用 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_10> <label class=md-nav__link for=__nav_5_10 id=__nav_5_10_label tabindex=0> <span class=md-ellipsis> 9.Go三方库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_10_label aria-expanded=false> <label class=md-nav__title for=__nav_5_10> <span class="md-nav__icon md-icon"></span> 9.Go三方库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/0.%E5%BC%80%E6%BA%90%E8%87%AA%E5%B7%B1%E7%9A%84Go%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 开源自己的Go库 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/1.cobra/ class=md-nav__link> <span class=md-ellipsis> Cobra </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/2.viper/ class=md-nav__link> <span class=md-ellipsis> Viper </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/3.Zap/ class=md-nav__link> <span class=md-ellipsis> Zap </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/4.mahonia/ class=md-nav__link> <span class=md-ellipsis> mahonia </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/5.ssh/ class=md-nav__link> <span class=md-ellipsis> ssh </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/6.fsnotify/ class=md-nav__link> <span class=md-ellipsis> fsnotify </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/7.yaml/ class=md-nav__link> <span class=md-ellipsis> yaml </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/8.tail/ class=md-nav__link> <span class=md-ellipsis> tail </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/9.gRPC/ class=md-nav__link> <span class=md-ellipsis> gRPC </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/10.gopsutil/ class=md-nav__link> <span class=md-ellipsis> gopsutil </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/11.go-awesome/ class=md-nav__link> <span class=md-ellipsis> go-awesome </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/12.dmidecode/ class=md-nav__link> <span class=md-ellipsis> dmidecode </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/13.toml/ class=md-nav__link> <span class=md-ellipsis> toml </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/14.cli/ class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/15.goconfig/ class=md-nav__link> <span class=md-ellipsis> goconfig </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/9.Go%E4%B8%89%E6%96%B9%E5%BA%93/%E9%99%84-%E5%85%B6%E4%BB%96%E4%B8%89%E6%96%B9%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 附-其他三方库 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_11> <label class=md-nav__link for=__nav_5_11 id=__nav_5_11_label tabindex=0> <span class=md-ellipsis> 10.Go-RESTful-API接口开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_11_label aria-expanded=false> <label class=md-nav__title for=__nav_5_11> <span class="md-nav__icon md-icon"></span> 10.Go-RESTful-API接口开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/1.%E4%BB%80%E4%B9%88%E6%98%AFRESTful-API/ class=md-nav__link> <span class=md-ellipsis> 1.什么是 RESTful-API </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/2.GORMv2/ class=md-nav__link> <span class=md-ellipsis> 2.GORMv2 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/3.Gin%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 3.Gin 框架的使用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/4.%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E5%89%8D%E7%AB%AF/ class=md-nav__link> <span class=md-ellipsis> 4.图书管理系统-前端 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/5.%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E5%90%8E%E7%AB%AF/ class=md-nav__link> <span class=md-ellipsis> 5.图书管理系统-后端 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/10.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/6.Gin%2BVue%E5%85%A5%E9%97%A8%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> 6.Gin+Vue入门项目 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_12> <label class=md-nav__link for=__nav_5_12 id=__nav_5_12_label tabindex=0> <span class=md-ellipsis> 11.Web前端 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_12_label aria-expanded=false> <label class=md-nav__title for=__nav_5_12> <span class="md-nav__icon md-icon"></span> 11.Web前端 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/11.Web%E5%89%8D%E7%AB%AF/1.HTML%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80/ class=md-nav__link> <span class=md-ellipsis> 1.HTML标记语言 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/11.Web%E5%89%8D%E7%AB%AF/2.CSS%E6%A0%B7%E5%BC%8F%E8%AF%AD%E8%A8%80/ class=md-nav__link> <span class=md-ellipsis> 2.CSS样式语言 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/11.Web%E5%89%8D%E7%AB%AF/3.JavaScript%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/ class=md-nav__link> <span class=md-ellipsis> 3.JavaScript客户端脚本语言 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/11.Web%E5%89%8D%E7%AB%AF/4.JavaScript%E5%BA%93-JQuery/ class=md-nav__link> <span class=md-ellipsis> 4.JavaScript库:JQuery </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_13> <label class=md-nav__link for=__nav_5_13 id=__nav_5_13_label tabindex=0> <span class=md-ellipsis> 12.Vue前端开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_13_label aria-expanded=false> <label class=md-nav__title for=__nav_5_13> <span class="md-nav__icon md-icon"></span> 12.Vue前端开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/1.%E8%AE%A4%E8%AF%86Vue.js/ class=md-nav__link> <span class=md-ellipsis> 1.认识Vue.js.md </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/2.Vue%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 2.Vue常用指令 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/3.Vue%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7/ class=md-nav__link> <span class=md-ellipsis> 3.Vue常用属性 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/4.Vue%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E4%B9%8B%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 4.Vue常用指令之流程控制 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/5.Vue%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A/ class=md-nav__link> <span class=md-ellipsis> 5.Vue常用指令之数据双向绑定 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/6.Vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90/ class=md-nav__link> <span class=md-ellipsis> 6.Vue生命周期钩子 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/7.VueCli%E8%84%9A%E6%89%8B%E6%9E%B6/ class=md-nav__link> <span class=md-ellipsis> 7.VueCli脚手架 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/8.Vue%E7%BB%84%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 8.Vue组件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/9.Vue%E8%B7%AF%E7%94%B1/ class=md-nav__link> <span class=md-ellipsis> 9.Vue路由 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/10.Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 10.Vuex状态管理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/11.%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92-Axios/ class=md-nav__link> <span class=md-ellipsis> 11.前后端数据交互 Axios </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/12.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/12.Element-Plus/ class=md-nav__link> <span class=md-ellipsis> 12.Element Plus </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_14> <label class=md-nav__link for=__nav_5_14 id=__nav_5_14_label tabindex=0> <span class=md-ellipsis> 13.K8s管理系统项目实战 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_14_label aria-expanded=false> <label class=md-nav__title for=__nav_5_14> <span class="md-nav__icon md-icon"></span> 13.K8s管理系统项目实战 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/13.K8s%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/1.K8s%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> K8s 管理系统-后端开发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/13.K8s%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2.K8s%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> K8s管理系统-前端开发 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_15> <label class=md-nav__link for=__nav_5_15 id=__nav_5_15_label tabindex=0> <span class=md-ellipsis> 14.Go开发的三方平台 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_15_label aria-expanded=false> <label class=md-nav__title for=__nav_5_15> <span class="md-nav__icon md-icon"></span> 14.Go开发的三方平台 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/14.Go%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/0.%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8Go%E5%81%9A%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 为什么使用Go做后端开发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/14.Go%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/1.TBak-System%E5%A4%87%E4%BB%BD%E5%B9%B3%E5%8F%B0/ class=md-nav__link> <span class=md-ellipsis> TBak System备份平台 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/14.Go%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/2.kubernetes%E5%AE%B9%E5%99%A8%E4%BA%91%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/ class=md-nav__link> <span class=md-ellipsis> kubernetes容器云管理平台 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/14.Go%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/3.Go%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> Go 命令行工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/14.Go%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/4.%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/ class=md-nav__link> <span class=md-ellipsis> nps </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/14.Go%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/5.go-web%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> go-web项目 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/14.Go%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/6.go-%E4%B8%89%E6%96%B9%E5%B7%A5%E5%85%B7%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A8/ class=md-nav__link> <span class=md-ellipsis> go-三方工具简单入门 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/14.Go%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/7.diamond-devops/ class=md-nav__link> <span class=md-ellipsis> diamond-devops </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/14.Go%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/8.Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%9B%AE%E5%BD%95/ class=md-nav__link> <span class=md-ellipsis> Go语言学习目录 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_16> <label class=md-nav__link for=__nav_5_16 id=__nav_5_16_label tabindex=0> <span class=md-ellipsis> 15.容器化Go </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_16_label aria-expanded=false> <label class=md-nav__title for=__nav_5_16> <span class="md-nav__icon md-icon"></span> 15.容器化Go </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/15.%E5%AE%B9%E5%99%A8%E5%8C%96Go/0.%E6%9E%84%E5%BB%BAGo%E5%BA%94%E7%94%A8docker%E9%95%9C%E5%83%8F/ class=md-nav__link> <span class=md-ellipsis> 构建Go应用docker镜像 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_17> <label class=md-nav__link for=__nav_5_17 id=__nav_5_17_label tabindex=0> <span class=md-ellipsis> 16.算法 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_17_label aria-expanded=false> <label class=md-nav__title for=__nav_5_17> <span class="md-nav__icon md-icon"></span> 16.算法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Golang/16.%E7%AE%97%E6%B3%95/0.Go%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/ class=md-nav__link> <span class=md-ellipsis> 0.Go 实现的斐波那契数列 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/16.%E7%AE%97%E6%B3%95/1.Go%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%86%92%E6%B3%A1%E7%AE%97%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 1.Go 实现的冒泡算法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/16.%E7%AE%97%E6%B3%95/2.Go%E5%AE%9E%E7%8E%B0%E7%9A%84%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 2.Go 实现的选择排序算法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/16.%E7%AE%97%E6%B3%95/3.Go%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 3.Go 实现的插入排序算法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/16.%E7%AE%97%E6%B3%95/4.Go%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 4.Go 实现的希尔排序算法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/16.%E7%AE%97%E6%B3%95/5.Go%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 5.Go 实现的快速排序算法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/16.%E7%AE%97%E6%B3%95/6.Go%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 6.Go 实现的归并排序算法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Golang/16.%E7%AE%97%E6%B3%95/7.Go%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%A0%86%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 7.Go 实现的堆排序算法 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_1> <label class=md-nav__link for=__nav_6_1 id=__nav_6_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Pythjon-auto-ops/ class=md-nav__link> <span class=md-ellipsis> Python Linux 管理与自动化运维 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2 checked> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class=md-ellipsis> 1.Python基础篇 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=true> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> 1.Python基础篇 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../1.Python%E7%94%9F%E6%80%81%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 1.Python 生态工具 </span> </a> </li> <li class=md-nav__item> <a href=../2.Python%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> 2.Python 第三方库安装 </span> </a> </li> <li class=md-nav__item> <a href=../3.Python%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 3.Python 工作环境管理 </span> </a> </li> <li class=md-nav__item> <a href=../4.Python%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> 4.Python 开发环境 </span> </a> </li> <li class=md-nav__item> <a href=../5.Python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> 5.Python 数据结构 </span> </a> </li> <li class=md-nav__item> <a href=../6.Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> 6.Python 项目的组织结构 </span> </a> </li> <li class=md-nav__item> <a href=../7.Python%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/ class=md-nav__link> <span class=md-ellipsis> 7.Python 代码规范 </span> </a> </li> <li class=md-nav__item> <a href=../8.Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/ class=md-nav__link> <span class=md-ellipsis> 8.Python 基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../9.Python%E5%AD%97%E7%AC%A6%E4%B8%B2/ class=md-nav__link> <span class=md-ellipsis> 9.Python 字符串 </span> </a> </li> <li class=md-nav__item> <a href=../10.Python%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/ class=md-nav__link> <span class=md-ellipsis> 10.Python 数据类型 </span> </a> </li> <li class=md-nav__item> <a href=../11.Python%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 11.Python 运算符和流程控制 </span> </a> </li> <li class=md-nav__item> <a href=../12.Python%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/ class=md-nav__link> <span class=md-ellipsis> 12.Python 文件操作 </span> </a> </li> <li class=md-nav__item> <a href=../13.Python%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 13.Python 函数 </span> </a> </li> <li class=md-nav__item> <a href=../14.Python%E5%B8%B8%E7%94%A8%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 14.Python 常用内建函数 </span> </a> </li> <li class=md-nav__item> <a href=../15.Python%E7%B1%BB/ class=md-nav__link> <span class=md-ellipsis> 15.Python 类 </span> </a> </li> <li class=md-nav__item> <a href=../16.Python%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 16.Python 异常处理 </span> </a> </li> <li class=md-nav__item> <a href=../17.Python%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> 17.Python 模块与包 </span> </a> </li> <li class=md-nav__item> <a href=../18.Python%E6%A0%87%E5%87%86%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 18.Python 标准库 </span> </a> </li> <li class=md-nav__item> <a href=../19.Python%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 19.Python 正则表达式 </span> </a> </li> <li class=md-nav__item> <a href=../20.Python%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> 20.Python 数据库编程 </span> </a> </li> <li class=md-nav__item> <a href=../21.Python%E6%89%B9%E9%87%8F%E7%AE%A1%E7%90%86%E4%B8%BB%E6%9C%BA/ class=md-nav__link> <span class=md-ellipsis> 21.Python 批量管理主机 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 22.Python 多线程多进程协程 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 22.Python 多线程多进程协程 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1多线程与多进程 class=md-nav__link> <span class=md-ellipsis> 1.多线程与多进程 </span> </a> <nav class=md-nav aria-label=1.多线程与多进程> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11-多进程 class=md-nav__link> <span class=md-ellipsis> 1.1 多进程 </span> </a> <nav class=md-nav aria-label="1.1 多进程"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multiprocessing class=md-nav__link> <span class=md-ellipsis> multiprocessing </span> </a> <nav class=md-nav aria-label=multiprocessing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#process class=md-nav__link> <span class=md-ellipsis> Process </span> </a> </li> <li class=md-nav__item> <a href=#process-子类创建进程 class=md-nav__link> <span class=md-ellipsis> Process 子类创建进程 </span> </a> </li> <li class=md-nav__item> <a href=#使用进程池-pool-创建进程 class=md-nav__link> <span class=md-ellipsis> 使用进程池 Pool 创建进程 </span> </a> </li> <li class=md-nav__item> <a href=#concurrentfutures-进程池 class=md-nav__link> <span class=md-ellipsis> concurrent.futures 进程池 </span> </a> </li> <li class=md-nav__item> <a href=#进程池效率对比 class=md-nav__link> <span class=md-ellipsis> 进程池效率对比 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#进程间通信 class=md-nav__link> <span class=md-ellipsis> 进程间通信 </span> </a> <nav class=md-nav aria-label=进程间通信> <ul class=md-nav__list> <li class=md-nav__item> <a href=#queue-多进程队列的使用 class=md-nav__link> <span class=md-ellipsis> Queue 多进程队列的使用 </span> </a> </li> <li class=md-nav__item> <a href=#pipe-常用来在两个进程间进行通信 class=md-nav__link> <span class=md-ellipsis> Pipe 常用来在两个进程间进行通信 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#分布式进程 class=md-nav__link> <span class=md-ellipsis> 分布式进程 </span> </a> <nav class=md-nav aria-label=分布式进程> <ul class=md-nav__list> <li class=md-nav__item> <a href=#分布式进程案例 class=md-nav__link> <span class=md-ellipsis> 分布式进程案例 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#12-多线程 class=md-nav__link> <span class=md-ellipsis> 1.2 多线程 </span> </a> <nav class=md-nav aria-label="1.2 多线程"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#调用-thread-类来创建多线程 class=md-nav__link> <span class=md-ellipsis> 调用 Thread 类来创建多线程 </span> </a> </li> <li class=md-nav__item> <a href=#继承-thread-类创建多线程 class=md-nav__link> <span class=md-ellipsis> 继承 Thread 类创建多线程 </span> </a> </li> <li class=md-nav__item> <a href=#什么是互斥锁 class=md-nav__link> <span class=md-ellipsis> 什么是互斥锁 </span> </a> </li> <li class=md-nav__item> <a href=#使用线程池提升运行效率 class=md-nav__link> <span class=md-ellipsis> 使用线程池提升运行效率 </span> </a> <nav class=md-nav aria-label=使用线程池提升运行效率> <ul class=md-nav__list> <li class=md-nav__item> <a href=#实现抢占线程池 class=md-nav__link> <span class=md-ellipsis> 实现抢占线程池 </span> </a> </li> <li class=md-nav__item> <a href=#实现非抢占线程池 class=md-nav__link> <span class=md-ellipsis> 实现非抢占线程池 </span> </a> </li> <li class=md-nav__item> <a href=#线程池实现并发执行命令 class=md-nav__link> <span class=md-ellipsis> 线程池实现并发执行命令 </span> </a> </li> <li class=md-nav__item> <a href=#参考文献 class=md-nav__link> <span class=md-ellipsis> 参考文献 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2协程库 class=md-nav__link> <span class=md-ellipsis> 2.协程库 </span> </a> <nav class=md-nav aria-label=2.协程库> <ul class=md-nav__list> <li class=md-nav__item> <a href=#什么是协程 class=md-nav__link> <span class=md-ellipsis> 什么是协程？ </span> </a> </li> <li class=md-nav__item> <a href=#yield-与-yield-from class=md-nav__link> <span class=md-ellipsis> yield 与 yield from </span> </a> </li> <li class=md-nav__item> <a href=#异步并发-asyncio-与-asyncawait class=md-nav__link> <span class=md-ellipsis> 异步并发 asyncio 与 async/await </span> </a> </li> <li class=md-nav__item> <a href=#什么是-gevent class=md-nav__link> <span class=md-ellipsis> 什么是 gevent? </span> </a> </li> <li class=md-nav__item> <a href=#协程的例子 class=md-nav__link> <span class=md-ellipsis> 协程的例子 </span> </a> </li> <li class=md-nav__item> <a href=#qa class=md-nav__link> <span class=md-ellipsis> Q&amp;A </span> </a> <nav class=md-nav aria-label=Q&amp;A> <ul class=md-nav__list> <li class=md-nav__item> <a href=#qgevent-无法捕获的耗时 class=md-nav__link> <span class=md-ellipsis> Q：gevent 无法捕获的耗时 </span> </a> </li> <li class=md-nav__item> <a href=#a猴子补丁 class=md-nav__link> <span class=md-ellipsis> A：猴子补丁 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#实践 class=md-nav__link> <span class=md-ellipsis> 实践 </span> </a> <nav class=md-nav aria-label=实践> <ul class=md-nav__list> <li class=md-nav__item> <a href=#异步-requests-请求 class=md-nav__link> <span class=md-ellipsis> 异步 requests 请求 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#锁 class=md-nav__link> <span class=md-ellipsis> 锁 </span> </a> <nav class=md-nav aria-label=锁> <ul class=md-nav__list> <li class=md-nav__item> <a href=#gevent-锁的使用 class=md-nav__link> <span class=md-ellipsis> gevent 锁的使用 </span> </a> </li> <li class=md-nav__item> <a href=#gevent-信号量实现的锁 class=md-nav__link> <span class=md-ellipsis> gevent 信号量实现的锁 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#事件 class=md-nav__link> <span class=md-ellipsis> 事件 </span> </a> <nav class=md-nav aria-label=事件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#event-阻塞事件 class=md-nav__link> <span class=md-ellipsis> Event 阻塞事件 </span> </a> </li> <li class=md-nav__item> <a href=#asyncresult-可传值的事件 class=md-nav__link> <span class=md-ellipsis> AsyncResult 可传值的事件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#队列 class=md-nav__link> <span class=md-ellipsis> 队列 </span> </a> </li> <li class=md-nav__item> <a href=#参考文献_1 class=md-nav__link> <span class=md-ellipsis> 参考文献 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../23.Python%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95/ class=md-nav__link> <span class=md-ellipsis> 23.Python 代码调试 </span> </a> </li> <li class=md-nav__item> <a href=../24.Python%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/ class=md-nav__link> <span class=md-ellipsis> 24.Python 单元测试 </span> </a> </li> <li class=md-nav__item> <a href=../25.%E7%8E%A9%E8%BD%ACDjango2.0/ class=md-nav__link> <span class=md-ellipsis> 25.玩转 Django2.0 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%950-%E5%86%85%E5%BB%BA%E6%A8%A1%E5%9D%97/ class=md-nav__link> <span class=md-ellipsis> 附录 0-内建模块 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%951-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> 附录 1-虚拟环境 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%952-%E6%89%93%E5%8C%85%E5%92%8C%E5%88%86%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 附录 2-打包和分发 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%953-%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%89%E6%96%B9%E8%BD%AF%E4%BB%B6%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> 附录 3-安装第三方软件包 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%954-%E5%B8%B8%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97/ class=md-nav__link> <span class=md-ellipsis> 附录 4-常用第三方模块 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%955-Python%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8/ class=md-nav__link> <span class=md-ellipsis> 附录 5-Python 面试宝典 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%956-%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/ class=md-nav__link> <span class=md-ellipsis> 附录 6-项目部署 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%957-Python%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 附录 7-Python 微服务实战 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%958-Python-rpm%E7%BC%96%E8%AF%91/ class=md-nav__link> <span class=md-ellipsis> 附录 8-Python-rpm 编译 </span> </a> </li> <li class=md-nav__item> <a href=../%E9%99%84%E5%BD%959-IPython%E7%9A%84%E4%BD%BF%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 附录 9-IPython 的使用 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class=md-ellipsis> 2.Python运维开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> 2.Python运维开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/1.%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 1.命令行工具 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/2.%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 2.文本处理 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/3.Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 3.Linux 系统管理 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/4.%E7%9B%91%E6%8E%A7Linux/ class=md-nav__link> <span class=md-ellipsis> 4.监控 Linux </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/5.%E6%96%87%E6%A1%A3%E4%B8%8E%E6%8A%A5%E5%91%8A/ class=md-nav__link> <span class=md-ellipsis> 5.文档与报告 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/6.%E7%BD%91%E7%BB%9C/ class=md-nav__link> <span class=md-ellipsis> 6.网络 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/7.%E8%87%AA%E5%8A%A8%E5%8C%96%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 7.自动化管理 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/8.%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/ class=md-nav__link> <span class=md-ellipsis> 8.常用模块 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/9.Python%E6%89%93%E9%80%A0MySQL%E4%B8%93%E5%AE%B6%E7%B3%BB%E7%BB%9F/ class=md-nav__link> <span class=md-ellipsis> 9.Python 打造 MySQL 专家系统 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/10.%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 10.自动化运维系统的开发 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/11.%E5%8D%8E%E4%B8%BA%E4%BA%91Python%E6%BC%94%E7%A4%BA%E4%BB%A3%E7%A0%81/ class=md-nav__link> <span class=md-ellipsis> 11.华为云 Python 演示代码 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/12.%E5%8D%8E%E4%B8%BA%E4%BA%91Go%E6%BC%94%E7%A4%BA%E4%BB%A3%E7%A0%81/ class=md-nav__link> <span class=md-ellipsis> 12.华为云 Go 演示代码 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/13.Tornado%E6%A1%86%E6%9E%B6/ class=md-nav__link> <span class=md-ellipsis> 13.Tornado 框架 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-%E5%AD%A6%E4%B9%A0API%E7%9A%84demo/ class=md-nav__link> <span class=md-ellipsis> 附-学习 API 的 demo </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-%E8%BF%90%E7%BB%B4%E7%9B%B8%E5%85%B3%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> 附-运维相关开源项目 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-awesome-python-cn/ class=md-nav__link> <span class=md-ellipsis> 附-awesome-python-cn </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-CMDB/ class=md-nav__link> <span class=md-ellipsis> 附-CMDB </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-Django-web%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 附-Django-web 开发 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-Django%E5%AE%9E%E7%8E%B0%E7%9A%84%E7%AE%80%E6%98%93%E5%8F%91%E5%B8%83%E4%BC%9A%E7%AD%BE%E5%88%B0%E7%B3%BB%E7%BB%9F/ class=md-nav__link> <span class=md-ellipsis> 附-Django 实现的简易发布会签到系统 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-Kubernetes%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/ class=md-nav__link> <span class=md-ellipsis> 附-Kubernetes 管理平台 </span> </a> </li> <li class=md-nav__item> <a href=../../2.Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91/%E9%99%84-varnish%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/ class=md-nav__link> <span class=md-ellipsis> 附-varnish 管理平台 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> <span class=md-ellipsis> 3.Python测试开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> 3.Python测试开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/1.Python2%E4%B8%8EPython3%E5%8C%BA%E5%88%AB/ class=md-nav__link> <span class=md-ellipsis> 1.Python2 与 Python3 区别 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/2.Windows%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85Python/ class=md-nav__link> <span class=md-ellipsis> 2.Windows环境安装Python </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/3.Linux%E5%A4%9A%E7%89%88%E6%9C%ACPython%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> 3.Linux多版本Python安装 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/4.Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> 4.Python虚拟环境安装 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/5.Pycharm%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 5.Pycharm安装与使用 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/6.Python%E9%97%B4%E6%8E%A5%E5%AE%9A%E4%B9%89%E5%B8%B8%E9%87%8F/ class=md-nav__link> <span class=md-ellipsis> 6.Python间接定义常量 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/7.Python%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 7.Python运算符与表达式 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/8.%E9%80%BB%E8%BE%91%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5/ class=md-nav__link> <span class=md-ellipsis> 8.逻辑控制语句 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/9.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BB%8B%E7%BB%8D/ class=md-nav__link> <span class=md-ellipsis> 9.数据结构 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/10.%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/ class=md-nav__link> <span class=md-ellipsis> 10.函数介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/11.%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/ class=md-nav__link> <span class=md-ellipsis> 11.类与对象 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/12.%E6%89%93%E5%8C%85%E4%B8%8E%E5%8F%91%E5%B8%83/ class=md-nav__link> <span class=md-ellipsis> 12.打包与发布 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/13.%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7%E4%B8%8E%E5%A4%84%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 13.异常捕获与处理 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/14.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> 14.并发编程 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/15.%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8C%E4%B8%89%E6%96%B9%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 15.标准库和三方库 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/16.vue-cli%E8%84%9A%E6%89%8B%E6%9E%B6/ class=md-nav__link> <span class=md-ellipsis> 16.vue-cli脚手架 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/17.%E6%A1%88%E4%BE%8B%E5%AE%9E%E8%B7%B5-%E4%BB%BB%E5%8A%A1%E5%88%97%E8%A1%A8/ class=md-nav__link> <span class=md-ellipsis> 17.案例实践-任务列表 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/%E9%99%84%E5%BD%95-%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93%E6%B1%87%E6%80%BB/ class=md-nav__link> <span class=md-ellipsis> 附录-前后端代码仓库汇总 </span> </a> </li> <li class=md-nav__item> <a href=../../3.Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/%E9%99%84%E5%BD%95-Nginx%E5%AE%8C%E6%95%B4%E9%85%8D%E7%BD%AE%E6%A0%B7%E4%BE%8B/ class=md-nav__link> <span class=md-ellipsis> 附录-Nginx 完整配置样例 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5 id=__nav_6_5_label tabindex=0> <span class=md-ellipsis> 4.Flask学习 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> 4.Flask学习 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/1.Flask%E5%89%8D%E5%A5%8F/ class=md-nav__link> <span class=md-ellipsis> 1.Flask 前缀 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/2.%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 2.项目配置 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/3.URL%E4%B8%8E%E8%A7%86%E5%9B%BE/ class=md-nav__link> <span class=md-ellipsis> 3.URL与视图 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/4.Jinja2%E6%A8%A1%E6%9D%BF/ class=md-nav__link> <span class=md-ellipsis> 4.Jinja2模板 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/5.%E6%95%B0%E6%8D%AE%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 5.数据库 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/6.%E8%A1%A8%E5%8D%95/ class=md-nav__link> <span class=md-ellipsis> 6.表单 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/7.Flask%E8%BF%9B%E9%98%B6/ class=md-nav__link> <span class=md-ellipsis> 7.Flask 进阶 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/8.%E7%BC%93%E5%AD%98%E7%B3%BB%E7%BB%9F/ class=md-nav__link> <span class=md-ellipsis> 8.缓存系统 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/9.Flask_Restful/ class=md-nav__link> <span class=md-ellipsis> 9.Flask_Restful </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/10.Flask%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 10.Flask 项目实战 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/11.WebSock%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 11.WebSock 实战 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/12.Flask%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> 12.Flask 异步编程 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-%E4%BD%BF%E7%94%A8Pytest%E6%B5%8B%E8%AF%95Flask/ class=md-nav__link> <span class=md-ellipsis> 附-使用 Pytest 测试 Flask </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/ class=md-nav__link> <span class=md-ellipsis> 附-图书管理系统 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0-flask/ class=md-nav__link> <span class=md-ellipsis> 附-自动化测试平台-flask </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-Flask%E5%B8%B8%E7%94%A8%E6%89%A9%E5%B1%95/ class=md-nav__link> <span class=md-ellipsis> 附-Flask常用扩展 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-Flask%E5%92%8CRedis%E9%98%9F%E5%88%97%E7%9A%84%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/ class=md-nav__link> <span class=md-ellipsis> 附-Flask和Redis队列的异步任务 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-Flask%E5%92%8CVue.js%E5%BC%80%E5%8F%91%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 附-Flask 和 Vue.js 开发单页应用 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-flask%E8%84%9A%E6%89%8B%E6%9E%B6/ class=md-nav__link> <span class=md-ellipsis> 附-flask 脚手架 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-Flask%E6%A1%86%E6%9E%B6/ class=md-nav__link> <span class=md-ellipsis> 附-Flask 框架 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-Flask%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2/ class=md-nav__link> <span class=md-ellipsis> 附-Flask 容器化部署 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-Flask%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/ class=md-nav__link> <span class=md-ellipsis> 附-Flask数据模型 </span> </a> </li> <li class=md-nav__item> <a href=../../4.Flask%E5%AD%A6%E4%B9%A0/%E9%99%84-Flask%E8%87%AA%E5%AE%9A%E4%B9%89exporter%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 附-Flask 自定义 exporter 开发 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_6> <label class=md-nav__link for=__nav_6_6 id=__nav_6_6_label tabindex=0> <span class=md-ellipsis> 5.DevOps和自动化运维实践 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> 5.DevOps和自动化运维实践 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../5.DevOps%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E8%B7%B5/1.Devops%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E7%9A%84%E6%84%8F%E4%B9%89/ class=md-nav__link> <span class=md-ellipsis> 1.Devops 与自动化运维的意义 </span> </a> </li> <li class=md-nav__item> <a href=../../5.DevOps%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E8%B7%B5/2.Shell%E8%84%9A%E6%9C%AC%E5%9C%A8Devops%E4%B8%8B%E7%9A%84%E5%BA%94%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 2.Shell 脚本在 Devops 下的应用 </span> </a> </li> <li class=md-nav__item> <a href=../../5.DevOps%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E8%B7%B5/3.%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84Shell%E8%84%9A%E6%9C%AC/ class=md-nav__link> <span class=md-ellipsis> 3.生产环境下的 Shell 脚本 </span> </a> </li> <li class=md-nav__item> <a href=../../5.DevOps%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E8%B7%B5/4.%E5%B7%A5%E4%BD%9C%E4%B8%AD%E7%9A%84Python%E8%84%9A%E6%9C%AC%E5%88%86%E4%BA%AB/ class=md-nav__link> <span class=md-ellipsis> 4.工作中的 Python 脚本分享 </span> </a> </li> <li class=md-nav__item> <a href=../../5.DevOps%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E8%B7%B5/5.Python%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E7%9A%84Docker%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> 5.Python 开发人员的 Docker 最佳实践 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_7> <label class=md-nav__link for=__nav_6_7 id=__nav_6_7_label tabindex=0> <span class=md-ellipsis> 6.CMDB项目实战 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_7_label aria-expanded=false> <label class=md-nav__title for=__nav_6_7> <span class="md-nav__icon md-icon"></span> 6.CMDB项目实战 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/0.DRF%E5%89%8D%E5%A5%8F/ class=md-nav__link> <span class=md-ellipsis> 0.DRF 前奏 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/1.DRF%E5%85%A5%E9%97%A8/ class=md-nav__link> <span class=md-ellipsis> 1.DRF 入门 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2.DRF%E8%BF%9B%E9%98%B6/ class=md-nav__link> <span class=md-ellipsis> 2.DRF 进阶 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/3.CMDB%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 3.CMDB 后端开发 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/4.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%B8%8A/ class=md-nav__link> <span class=md-ellipsis> 4.Vue前端开发-上 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/5.Vue%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%B8%8B/ class=md-nav__link> <span class=md-ellipsis> 5.Vue前端开发-下 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/6.Element-Plus%E5%89%8D%E7%AB%AF%E7%BB%84%E4%BB%B6%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 6.Element-Plus前端组件库 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/7.CMDB%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%B8%8A/ class=md-nav__link> <span class=md-ellipsis> 7.CMDB前端开发-上 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/8.CMDB%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%B8%8B/ class=md-nav__link> <span class=md-ellipsis> 8.CMDB前端开发-下 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/9.celery%E7%BB%84%E4%BB%B6/ class=md-nav__link> <span class=md-ellipsis> 9.celery 组件 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/10.Django%E8%87%AA%E5%AE%9A%E4%B9%89%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 10.Django 自定义命令 </span> </a> </li> <li class=md-nav__item> <a href=../../6.CMDB%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/11.Django%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2/ class=md-nav__link> <span class=md-ellipsis> 11.Django 容器化部署 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_8> <label class=md-nav__link for=__nav_6_8 id=__nav_6_8_label tabindex=0> <span class=md-ellipsis> 7.Python网络编程攻略 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_8_label aria-expanded=false> <label class=md-nav__title for=__nav_6_8> <span class="md-nav__icon md-icon"></span> 7.Python网络编程攻略 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../7.Python%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E6%94%BB%E7%95%A5/1.IPv4%E5%92%8C%E7%AE%80%E5%8D%95%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> 1.IPv4 和简单的客户端-服务器编程 </span> </a> </li> <li class=md-nav__item> <a href=../../7.Python%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E6%94%BB%E7%95%A5/2.%E4%BD%BF%E7%94%A8%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E5%A5%97%E6%8E%A5%E5%AD%97-IO%E6%8F%90%E5%8D%87%E6%80%A7%E8%83%BD/ class=md-nav__link> <span class=md-ellipsis> 2.使用多路复用套接字-IO 提升性能 </span> </a> </li> <li class=md-nav__item> <a href=../../7.Python%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E6%94%BB%E7%95%A5/3.IPv6-Unix%E5%9F%9F%E5%A5%97%E6%8E%A5%E5%AD%97%E5%92%8C%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3/ class=md-nav__link> <span class=md-ellipsis> 3.IPv6-Unix 域套接字和网络接口 </span> </a> </li> <li class=md-nav__item> <a href=../../7.Python%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E6%94%BB%E7%95%A5/4.HTTP%E5%8D%8F%E8%AE%AE%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/ class=md-nav__link> <span class=md-ellipsis> 4.HTTP 协议网络编程 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_9> <label class=md-nav__link for=__nav_6_9 id=__nav_6_9_label tabindex=0> <span class=md-ellipsis> 8.Python自动化运维实战 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_9_label aria-expanded=false> <label class=md-nav__title for=__nav_6_9> <span class="md-nav__icon md-icon"></span> 8.Python自动化运维实战 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/1.%E6%90%AD%E5%BB%BAPython%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> 1.搭建 Python 环境 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/2.%E5%B8%B8%E7%94%A8%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 2.常用的自动化库 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/3.%E6%90%AD%E5%BB%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E5%AE%A4%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> 3.搭建网络实验室环境 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/4.%E4%BD%BF%E7%94%A8Python%E7%AE%A1%E7%90%86%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/ class=md-nav__link> <span class=md-ellipsis> 4.使用 Python 管理网络设备 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/5.%E4%BB%8E%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E4%B8%AD%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/ class=md-nav__link> <span class=md-ellipsis> 5.从网络设备中提取数据 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/6.Python%E5%92%8CJinja2%E9%85%8D%E7%BD%AE%E7%94%9F%E6%88%90%E5%99%A8/ class=md-nav__link> <span class=md-ellipsis> 6.Python和Jinja2配置生成器 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/7.%E5%B9%B6%E8%A1%8C%E6%89%A7%E8%A1%8CPython%E8%84%9A%E6%9C%AC/ class=md-nav__link> <span class=md-ellipsis> 7.并行执行 Python 脚本 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/8.%E5%87%86%E5%A4%87%E5%AE%9E%E9%AA%8C%E5%AE%A4%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> 8.准备实验室环境 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/9.%E4%BD%BF%E7%94%A8Subprocess%E6%A8%A1%E5%9D%97/ class=md-nav__link> <span class=md-ellipsis> 9.使用 Subprocess 模块 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/10.%E4%BD%BF%E7%94%A8Fabric%E7%AE%A1%E7%90%86%E4%BB%BB%E5%8A%A1/ class=md-nav__link> <span class=md-ellipsis> 10.使用 Fabric 管理任务 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/11.%E7%94%9F%E6%88%90%E7%B3%BB%E7%BB%9F%E6%8A%A5%E5%91%8A%E5%92%8C%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/ class=md-nav__link> <span class=md-ellipsis> 11.生成系统报告和系统监控 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/12.%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%A4%E4%BA%92/ class=md-nav__link> <span class=md-ellipsis> 12.与数据库交互 </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/13.%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84Ansible/ class=md-nav__link> <span class=md-ellipsis> 13.系统管理的 Ansible </span> </a> </li> <li class=md-nav__item> <a href=../../8.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/14.%E4%B8%8EOpenStack-API%E4%BA%A4%E4%BA%92/ class=md-nav__link> <span class=md-ellipsis> 14.与 OpenStack-API 交互 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_10> <label class=md-nav__link for=__nav_6_10 id=__nav_6_10_label tabindex=0> <span class=md-ellipsis> 9.源码解读 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_10_label aria-expanded=false> <label class=md-nav__title for=__nav_6_10> <span class="md-nav__icon md-icon"></span> 9.源码解读 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../9.%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/1.envoy%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 1.envoy 源码分析 </span> </a> </li> <li class=md-nav__item> <a href=../../9.%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/2.pssh%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 2.pssh 源码分析 </span> </a> </li> <li class=md-nav__item> <a href=../../9.%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/%E9%99%84%E5%BD%951-Ansible%E6%A0%B8%E5%BF%83%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90-1/ class=md-nav__link> <span class=md-ellipsis> 附录 1-Ansible 核心源码剖析-1 </span> </a> </li> <li class=md-nav__item> <a href=../../9.%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/%E9%99%84%E5%BD%952-Ansible-1.1%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 附录 2-Ansible 1.1 的基本使用 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_11> <label class=md-nav__link for=__nav_6_11 id=__nav_6_11_label tabindex=0> <span class=md-ellipsis> 10.Python进阶 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_11_label aria-expanded=false> <label class=md-nav__title for=__nav_6_11> <span class="md-nav__icon md-icon"></span> 10.Python进阶 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../10.Python%E8%BF%9B%E9%98%B6/1.%E7%90%86%E8%A7%A3%E4%B8%8E%E4%BD%BF%E7%94%A8%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 1.理解与使用单例模式 </span> </a> </li> <li class=md-nav__item> <a href=../../10.Python%E8%BF%9B%E9%98%B6/2.argparse%E8%A7%A3%E6%9E%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 2.argparse 解析命令行参数 </span> </a> </li> <li class=md-nav__item> <a href=../../10.Python%E8%BF%9B%E9%98%B6/3.utils-%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%B7%A5%E5%85%B7%E7%AE%B1/ class=md-nav__link> <span class=md-ellipsis> 3.utils-强大的工具箱 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Openstack </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Openstack </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_1> <label class=md-nav__link for=__nav_7_1 id=__nav_7_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Openstack/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.OpenStack/ class=md-nav__link> <span class=md-ellipsis> 基于 OpenStack 组件开发 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class=md-ellipsis> 1.OpenStack工程师工作 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> 1.OpenStack工程师工作 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Openstack/1.OpenStack%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%B7%A5%E4%BD%9C/1.Horizon%E7%95%8C%E9%9D%A2%E5%B7%A5%E7%A8%8B%E5%B8%88/ class=md-nav__link> <span class=md-ellipsis> 1.Horizon 界面工程师 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/1.OpenStack%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%B7%A5%E4%BD%9C/2.Neutron%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/ class=md-nav__link> <span class=md-ellipsis> 2.Neutron 网络工程师 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/1.OpenStack%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%B7%A5%E4%BD%9C/3.Nova%E8%B5%84%E6%B7%B1%E5%B7%A5%E7%A8%8B%E5%B8%88/ class=md-nav__link> <span class=md-ellipsis> 3.Nova 资深工程师 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_3> <label class=md-nav__link for=__nav_7_3 id=__nav_7_3_label tabindex=0> <span class=md-ellipsis> 2.开发环境的搭建 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_3_label aria-expanded=false> <label class=md-nav__title for=__nav_7_3> <span class="md-nav__icon md-icon"></span> 2.开发环境的搭建 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Openstack/2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/1.Windows%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/ class=md-nav__link> <span class=md-ellipsis> 1.Windows 开发环境的搭建 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/2.Linux%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/ class=md-nav__link> <span class=md-ellipsis> 2.Linux 开发环境的搭建 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/3.Launchpad%E8%B4%A6%E5%8F%B7/ class=md-nav__link> <span class=md-ellipsis> 3.Launchpad 账号 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/4.Git%E7%9A%84%E4%BD%BF%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 4.Git 的使用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/5.%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BF%AE%E6%94%B9/ class=md-nav__link> <span class=md-ellipsis> 5.配置文件修改 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/6.RPM%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/ class=md-nav__link> <span class=md-ellipsis> 6.RPM软件包管理器 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/7.%E5%88%B6%E4%BD%9Cdeb%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> 7.制作deb包 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/8.Linux%E8%87%AA%E5%BB%BA%E8%BD%AF%E4%BB%B6%E6%BA%90/ class=md-nav__link> <span class=md-ellipsis> 8.Linux自建软件源 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_4> <label class=md-nav__link for=__nav_7_4 id=__nav_7_4_label tabindex=0> <span class=md-ellipsis> 3.Openstack通用技术 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_4_label aria-expanded=false> <label class=md-nav__title for=__nav_7_4> <span class="md-nav__icon md-icon"></span> 3.Openstack通用技术 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/1.%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E6%89%93%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> 1.持续集成打包 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/2.SQLAlchemy/ class=md-nav__link> <span class=md-ellipsis> 2.SQLAlchemy </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/3.logging/ class=md-nav__link> <span class=md-ellipsis> 3.logging </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/4.cliff/ class=md-nav__link> <span class=md-ellipsis> 4.cliff </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/5.Eventlet/ class=md-nav__link> <span class=md-ellipsis> 5.Eventlet </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/6.WSGI/ class=md-nav__link> <span class=md-ellipsis> 6.WSGI </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/7.Oslo/ class=md-nav__link> <span class=md-ellipsis> 7.Oslo </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/8.oslo-config/ class=md-nav__link> <span class=md-ellipsis> 8.oslo.config </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/9.oslo-db/ class=md-nav__link> <span class=md-ellipsis> 9.oslo.db </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/10.oslo-log/ class=md-nav__link> <span class=md-ellipsis> 10.oslo.log </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/11.oslo-i18n/ class=md-nav__link> <span class=md-ellipsis> 11.oslo.i18n </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/12.oslo-utils/ class=md-nav__link> <span class=md-ellipsis> 12.oslo.utils </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/13.oslo-messaging/ class=md-nav__link> <span class=md-ellipsis> 13.oslo.messaging </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/14.oslo-service/ class=md-nav__link> <span class=md-ellipsis> 14.oslo.service </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/15.cookiecutter/ class=md-nav__link> <span class=md-ellipsis> 15.cookiecutter </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/16.stevedore/ class=md-nav__link> <span class=md-ellipsis> 16.stevedore </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/%E9%99%84-%E7%BC%96%E8%AF%91-%E6%89%93%E5%8C%85%E6%80%BB%E7%BB%93/ class=md-nav__link> <span class=md-ellipsis> 附-编译-打包总结 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/%E9%99%84-%E6%A8%A1%E4%BB%BFOpenStack%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84RPC/ class=md-nav__link> <span class=md-ellipsis> 附-模仿 OpenStack 写自己的 RPC </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/3.Openstack%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/%E9%99%84-%E6%A8%A1%E4%BB%BFOpenstack%E5%86%99Restful-API/ class=md-nav__link> <span class=md-ellipsis> 附-模仿 Openstack 写 Restful API </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_5> <label class=md-nav__link for=__nav_7_5 id=__nav_7_5_label tabindex=0> <span class=md-ellipsis> 4.OpenStack容器手册 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_5_label aria-expanded=false> <label class=md-nav__title for=__nav_7_5> <span class="md-nav__icon md-icon"></span> 4.OpenStack容器手册 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Openstack/4.OpenStack%E5%AE%B9%E5%99%A8%E6%89%8B%E5%86%8C/1.OpenStack-Kolla%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> 1.OpenStack-Kolla项目 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/4.OpenStack%E5%AE%B9%E5%99%A8%E6%89%8B%E5%86%8C/2.kolla%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/ class=md-nav__link> <span class=md-ellipsis> 2.kolla 源码阅读 </span> </a> </li> <li class=md-nav__item> <a href=../../../Openstack/4.OpenStack%E5%AE%B9%E5%99%A8%E6%89%8B%E5%86%8C/3.kolla-ansible%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/ class=md-nav__link> <span class=md-ellipsis> 3.kolla-ansible 源码阅读 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Python-vs-Go </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Python-vs-Go </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_1> <label class=md-nav__link for=__nav_8_1 id=__nav_8_1_label tabindex=0> <span class=md-ellipsis> 0.学习线路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_1_label aria-expanded=false> <label class=md-nav__title for=__nav_8_1> <span class="md-nav__icon md-icon"></span> 0.学习线路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Python-vs-Go/0.%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF/0.Python-vs-Go/ class=md-nav__link> <span class=md-ellipsis> Python-vs-Go </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_2> <label class=md-nav__link for=__nav_8_2 id=__nav_8_2_label tabindex=0> <span class=md-ellipsis> 1.对比 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_2_label aria-expanded=false> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> 1.对比 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/1.Hello-World/ class=md-nav__link> <span class=md-ellipsis> Hello-World </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/2.Print/ class=md-nav__link> <span class=md-ellipsis> Print </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/3.%E6%B3%A8%E9%87%8A/ class=md-nav__link> <span class=md-ellipsis> 注释 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/4.%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2/ class=md-nav__link> <span class=md-ellipsis> 多行字符串 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/5.Lists/ class=md-nav__link> <span class=md-ellipsis> Lists </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/6.Map/ class=md-nav__link> <span class=md-ellipsis> Map </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/7.Booleans/ class=md-nav__link> <span class=md-ellipsis> Booleans </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/8.Forloop/ class=md-nav__link> <span class=md-ellipsis> Forloop </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/9.Range/ class=md-nav__link> <span class=md-ellipsis> Range </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/10.Switch/ class=md-nav__link> <span class=md-ellipsis> Switch </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/11.%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 可变参数函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/12.%E6%97%B6%E9%97%B4%E8%AE%A1%E7%AE%97/ class=md-nav__link> <span class=md-ellipsis> 时间计算 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/13.%E5%87%BD%E6%95%B0%E7%9A%84%E9%97%AD%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> 函数的闭包 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/14.%E9%80%80%E5%87%BA%E5%A4%84%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 退出处理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/15.%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7/ class=md-nav__link> <span class=md-ellipsis> 异常捕获 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/16.%E5%8F%AF%E5%8F%98%E9%A1%B9/ class=md-nav__link> <span class=md-ellipsis> 可变项 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/17.%E7%B1%BB/ class=md-nav__link> <span class=md-ellipsis> 类 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/18.%E6%96%B9%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 方法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/19.%E5%B9%B6%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 并发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/20.Args/ class=md-nav__link> <span class=md-ellipsis> Args </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/21.%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97%E5%88%AB%E5%90%8D/ class=md-nav__link> <span class=md-ellipsis> 导入模块别名 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/22.%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96/ class=md-nav__link> <span class=md-ellipsis> 字符串格式化 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/23.%E5%8E%BB%E9%87%8D/ class=md-nav__link> <span class=md-ellipsis> 去重 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/24.%E5%B8%A6%E9%A2%9C%E8%89%B2%E6%89%93%E5%8D%B0/ class=md-nav__link> <span class=md-ellipsis> 带颜色打印 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/25.python-example/ class=md-nav__link> <span class=md-ellipsis> Python By Example </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/1.%E5%AF%B9%E6%AF%94/26.go-example/ class=md-nav__link> <span class=md-ellipsis> Go By Example </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_3> <label class=md-nav__link for=__nav_8_3 id=__nav_8_3_label tabindex=0> <span class=md-ellipsis> 2.进阶 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_3_label aria-expanded=false> <label class=md-nav__title for=__nav_8_3> <span class="md-nav__icon md-icon"></span> 2.进阶 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Python-vs-Go/2.%E8%BF%9B%E9%98%B6/1.%E4%BD%BF%E7%94%A8RPC/ class=md-nav__link> <span class=md-ellipsis> 使用RPC </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/2.%E8%BF%9B%E9%98%B6/2.%E4%BD%BF%E7%94%A8MySQL/ class=md-nav__link> <span class=md-ellipsis> 使用MySQL </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/2.%E8%BF%9B%E9%98%B6/3.%E4%BD%BF%E7%94%A8Redis/ class=md-nav__link> <span class=md-ellipsis> 使用Redis </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/2.%E8%BF%9B%E9%98%B6/4.%E4%BD%BF%E7%94%A8MongoDB/ class=md-nav__link> <span class=md-ellipsis> 使用MongoDB </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/2.%E8%BF%9B%E9%98%B6/5.%E7%BB%83%E6%89%8B%E9%A1%B9%E7%9B%AE%E6%8E%A8%E8%8D%90/ class=md-nav__link> <span class=md-ellipsis> 练手项目推荐 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_4> <label class=md-nav__link for=__nav_8_4 id=__nav_8_4_label tabindex=0> <span class=md-ellipsis> 3.开发之路 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_4_label aria-expanded=false> <label class=md-nav__title for=__nav_8_4> <span class="md-nav__icon md-icon"></span> 3.开发之路 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Python-vs-Go/3.%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF/1.Go%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF/ class=md-nav__link> <span class=md-ellipsis> 1.Go 开发之路 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/3.%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF/2.Python%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF/ class=md-nav__link> <span class=md-ellipsis> 2.Python 开发之路 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/3.%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF/3.Vue3%E6%A1%86%E6%9E%B6/ class=md-nav__link> <span class=md-ellipsis> 3.Vue3 框架 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/3.%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF/4.Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 4.Git 版本控制 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/3.%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF/5.Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B9%B3%E5%8F%B0/ class=md-nav__link> <span class=md-ellipsis> 5.Python 自动化运维平台 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/3.%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF/6.Go%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B9%B3%E5%8F%B0/ class=md-nav__link> <span class=md-ellipsis> 6.Go 自动化运维平台 </span> </a> </li> <li class=md-nav__item> <a href=../../../Python-vs-Go/3.%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF/7.Shell%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 7.Shell 开发 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Git </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Git </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_1> <label class=md-nav__link for=__nav_9_1 id=__nav_9_1_label tabindex=0> <span class=md-ellipsis> Git基础 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_1_label aria-expanded=false> <label class=md-nav__title for=__nav_9_1> <span class="md-nav__icon md-icon"></span> Git基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Git/1.Git%E5%9F%BA%E7%A1%80/ class=md-nav__link> <span class=md-ellipsis> 1.Git 基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Git/2.%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> 2.远程仓库 </span> </a> </li> <li class=md-nav__item> <a href=../../../Git/3.%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 3.分支管理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Git/4.%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/ class=md-nav__link> <span class=md-ellipsis> 4.分支管理策略 </span> </a> </li> <li class=md-nav__item> <a href=../../../Git/5.%E6%A0%87%E7%AD%BE%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 5.标签管理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Git/6.%E4%BD%BF%E7%94%A8Gitee/ class=md-nav__link> <span class=md-ellipsis> 6.使用Gitee </span> </a> </li> <li class=md-nav__item> <a href=../../../Git/7.%E4%BD%BF%E7%94%A8Github/ class=md-nav__link> <span class=md-ellipsis> 7.使用 Github </span> </a> </li> <li class=md-nav__item> <a href=../../../Git/8.%E5%AE%9E%E8%B7%B5GitHub-Flow/ class=md-nav__link> <span class=md-ellipsis> 8.实践GitHub Flow </span> </a> </li> <li class=md-nav__item> <a href=../../../Git/9.%E5%AE%9E%E8%B7%B5Git-Flow/ class=md-nav__link> <span class=md-ellipsis> 9.实践 Git Flow </span> </a> </li> <li class=md-nav__item> <a href=../../../Git/10.%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83/ class=md-nav__link> <span class=md-ellipsis> 10.项目规范 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex=0> <span class=md-ellipsis> Ansible </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Ansible </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10_1> <label class=md-nav__link for=__nav_10_1 id=__nav_10_1_label tabindex=0> <span class=md-ellipsis> Ansible实践 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_10_1_label aria-expanded=false> <label class=md-nav__title for=__nav_10_1> <span class="md-nav__icon md-icon"></span> Ansible实践 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Ansible/1.Ansible%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> 1.Ansible简介 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/2.YAML%E4%BB%8B%E7%BB%8D/ class=md-nav__link> <span class=md-ellipsis> 2.YAML 介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/3.%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 3.安装和配置 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/4.Inventory/ class=md-nav__link> <span class=md-ellipsis> 4.Inventory </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/5.%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/ class=md-nav__link> <span class=md-ellipsis> 5.常用模块 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/6.playbook/ class=md-nav__link> <span class=md-ellipsis> 6.playbook </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/7.role/ class=md-nav__link> <span class=md-ellipsis> 7.role </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/8.Galaxy/ class=md-nav__link> <span class=md-ellipsis> 8.Galaxy </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/9.Jinja2/ class=md-nav__link> <span class=md-ellipsis> 9.Jinja2 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/10.Ansible%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96/ class=md-nav__link> <span class=md-ellipsis> 10.Ansible 速度优化 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/11.Ansible-API/ class=md-nav__link> <span class=md-ellipsis> 11.Ansible API </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/12.flask%2Bansible%E8%BF%90%E7%BB%B4%E5%90%8E%E7%AB%AF/ class=md-nav__link> <span class=md-ellipsis> 12.flask+ansible运维后端 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/13.Module%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 13.Module 开发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/14.Plugin%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 14.Plugin 开发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/15.Ansible%E8%B0%83%E8%AF%95/ class=md-nav__link> <span class=md-ellipsis> 15.Ansible 调试 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/16.playbook%E5%AE%9E%E4%BE%8B/ class=md-nav__link> <span class=md-ellipsis> 16.playbook 实例 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/17.role%E5%AE%9E%E4%BE%8B/ class=md-nav__link> <span class=md-ellipsis> 17.role 实例 </span> </a> </li> <li class=md-nav__item> <a href=../../../Ansible/%E9%99%84%E5%BD%95-Ansible-wiki/ class=md-nav__link> <span class=md-ellipsis> 附录-Ansible wiki </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11 id=__nav_11_label tabindex=0> <span class=md-ellipsis> Shell </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11_1> <label class=md-nav__link for=__nav_11_1 id=__nav_11_1_label tabindex=0> <span class=md-ellipsis> Shell实践 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_1_label aria-expanded=false> <label class=md-nav__title for=__nav_11_1> <span class="md-nav__icon md-icon"></span> Shell实践 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Shell/Shell%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> Shell 教程概述 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/1.%E7%AC%AC%E4%B8%80%E4%B8%AAshell%E7%A8%8B%E5%BA%8F/ class=md-nav__link> <span class=md-ellipsis> 1.第一个 Shell 程序 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/2.Shell%E5%8F%98%E9%87%8F%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2/ class=md-nav__link> <span class=md-ellipsis> 2.Shell 变量和字符串 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/3.Shell%E5%8F%82%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 3.Shell 参数 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/4.Shell%E6%95%B0%E7%BB%84/ class=md-nav__link> <span class=md-ellipsis> 4.Shell数组 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/5.Shell%E8%BF%90%E7%AE%97%E7%AC%A6/ class=md-nav__link> <span class=md-ellipsis> 5.Shell 运算符 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/6.Shell-echo_printf%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 6.Shell echo/printf 命令 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/7.Shell%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 7.Shell 条件表达式 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/8.Shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 8.Shell 流程控制 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/9.Shell%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 9.Shell 函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/10.Shell%E9%87%8D%E5%AE%9A%E5%90%91/ class=md-nav__link> <span class=md-ellipsis> 10.Shell 重定向 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/11.Shell%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 11.Shell 正则表达式 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/12.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bgrep/ class=md-nav__link> <span class=md-ellipsis> 12.Shell 三剑客之 grep </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/13.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bsed/ class=md-nav__link> <span class=md-ellipsis> 13.Shell 三剑客之 sed </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/14.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bawk/ class=md-nav__link> <span class=md-ellipsis> 14.Shell 三剑客之 awk </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/15.Shell%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 15.Shell 常用命令 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/16.Shell%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> 16.Shell实战项目 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/17.Shell%E8%84%9A%E6%9C%AC%E7%A4%BA%E4%BE%8B/ class=md-nav__link> <span class=md-ellipsis> 17.Shell 脚本示例 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/18.Shell%E8%84%9A%E6%9C%AC%E7%9A%84%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 18.Shell 脚本的参数解析工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/19.%E5%AE%9E%E7%94%A8Shell%E8%84%9A%E6%9C%AC%E6%A1%88%E4%BE%8B/ class=md-nav__link> <span class=md-ellipsis> 19.实用 Shell 脚本案例 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/20.Shell%E8%84%9A%E6%9C%AC%E7%9A%84%E8%A7%84%E8%8C%83/ class=md-nav__link> <span class=md-ellipsis> 20.Shell 脚本的规范 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/21.Shell%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B9%B6%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 21.Shell多进程并发 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/22.Shell_Library/ class=md-nav__link> <span class=md-ellipsis> 22.Shell_Library </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/23.Shell%E8%84%9A%E6%9C%AC%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/ class=md-nav__link> <span class=md-ellipsis> 23.Shell 脚本调试技术 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/24.Linux_Shell%E8%84%9A%E6%9C%AC%E6%94%BB%E7%95%A5/ class=md-nav__link> <span class=md-ellipsis> 24.Linux Shell脚本攻略 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/25.Shell%E8%84%9A%E6%9C%AC%E5%8A%A0%E5%AF%86/ class=md-nav__link> <span class=md-ellipsis> 25.Shell 脚本加密 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/%E9%99%84-shell%E5%85%B6%E5%AE%83%E8%B5%84%E6%BA%90/ class=md-nav__link> <span class=md-ellipsis> 附-shell 其它资源 </span> </a> </li> <li class=md-nav__item> <a href=../../../Shell/%E9%99%84-vim%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/ class=md-nav__link> <span class=md-ellipsis> 附-vim 常用操作 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12> <label class=md-nav__link for=__nav_12 id=__nav_12_label tabindex=0> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_12_label aria-expanded=false> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12_1> <label class=md-nav__link for=__nav_12_1 id=__nav_12_1_label tabindex=0> <span class=md-ellipsis> KVM </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_1_label aria-expanded=false> <label class=md-nav__title for=__nav_12_1> <span class="md-nav__icon md-icon"></span> KVM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/KVM/1.kvm%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/ class=md-nav__link> <span class=md-ellipsis> 1.kvm 常见操作 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/KVM/2.kvm%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%88%9B%E5%BB%BA/ class=md-nav__link> <span class=md-ellipsis> 2.kvm虚拟机创建 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/KVM/3.kvm%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 3.kvm网络配置 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/KVM/4.%E5%AE%89%E8%A3%85KVM/ class=md-nav__link> <span class=md-ellipsis> 4.安装 KVM </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12_2> <label class=md-nav__link for=__nav_12_2 id=__nav_12_2_label tabindex=0> <span class=md-ellipsis> Nginx </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_2_label aria-expanded=false> <label class=md-nav__title for=__nav_12_2> <span class="md-nav__icon md-icon"></span> Nginx </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Nginx/1.Nginx%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> 1.Nginx 简介 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/2.Nginx%E5%AE%89%E8%A3%85%E5%8F%8A%E5%90%AF%E5%8A%A8/ class=md-nav__link> <span class=md-ellipsis> 2.Nginx安装及启动 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/3.Nginx%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 3.Nginx配置 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/4.Nginx%E9%85%8D%E7%BD%AE%E4%B8%8B%E8%BD%BD%E7%AB%99%E7%82%B9/ class=md-nav__link> <span class=md-ellipsis> 4.Nginx配置下载站点 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/5.Nginx%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 5.Nginx访问控制 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/6.Nginx%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA/ class=md-nav__link> <span class=md-ellipsis> 6.Nginx虚拟主机 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/7.Nginx%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/ class=md-nav__link> <span class=md-ellipsis> 7.Nginx静态资源 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/8.Nginx%E7%BC%93%E5%AD%98%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 8.Nginx缓存配置 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/9.Nginx%E6%AD%A3%E5%8F%8D%E4%BB%A3%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 9.Nginx 正反向代理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/10.Nginx%E9%98%B2%E7%9B%97%E9%93%BE/ class=md-nav__link> <span class=md-ellipsis> 10.Nginx 防盗链 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/11.Nginx%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/ class=md-nav__link> <span class=md-ellipsis> 11.Nginx 负载均衡 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/12.Nginx%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/ class=md-nav__link> <span class=md-ellipsis> 12.Nginx 动静分离 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/13.Nginx%E8%B7%A8%E5%9F%9F%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 13.Nginx 跨域配置 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/14.Nginx%E9%87%8D%E5%AE%9A%E5%90%91/ class=md-nav__link> <span class=md-ellipsis> 14.Nginx重定向 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/15.Nginx-HTTPS/ class=md-nav__link> <span class=md-ellipsis> 15.Nginx HTTPS </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/16.%E9%99%84-Nginx-location%E8%AF%AD%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 16.附-Nginx-location语法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/17.%E9%99%84-Nginx-wiki/ class=md-nav__link> <span class=md-ellipsis> 17.附-Nginx-wiki </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Nginx/18.%E9%99%84-Nginx%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> 18.附-Nginx 综合实践 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12_3> <label class=md-nav__link for=__nav_12_3 id=__nav_12_3_label tabindex=0> <span class=md-ellipsis> System </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_3_label aria-expanded=false> <label class=md-nav__title for=__nav_12_3> <span class="md-nav__icon md-icon"></span> System </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/System/1.%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E5%92%8C%E8%BD%AF%E4%BB%B6%E6%BA%90/ class=md-nav__link> <span class=md-ellipsis> 1.系统镜像和软件源 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/2.Linux%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA/ class=md-nav__link> <span class=md-ellipsis> 2.Linux安全加固 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/3.Systemd/ class=md-nav__link> <span class=md-ellipsis> 3.Systemd </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/4.Superivisor/ class=md-nav__link> <span class=md-ellipsis> 4.Superivisor </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/5.SSH%E7%99%BB%E5%BD%95Linux%E6%98%BE%E7%A4%BA%E6%A8%AA%E5%B9%85/ class=md-nav__link> <span class=md-ellipsis> 5.SSH登录Linux显示横幅 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/6.Linux%E4%B8%AD%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E6%8E%92%E6%9F%A5/ class=md-nav__link> <span class=md-ellipsis> 6.Linux 中端口占用排查 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/7.%E4%BD%BF%E7%94%A8curl%E5%8F%91%E9%80%81REST-API%E8%AF%B7%E6%B1%82/ class=md-nav__link> <span class=md-ellipsis> 7.使用 curl 发送 REST API 请求 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/8.%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E7%B3%8A%E6%9F%A5%E6%89%BE%E5%99%A8fzf/ class=md-nav__link> <span class=md-ellipsis> 8.命令行模糊查找器fzf </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/10.Centos%E5%9C%A8%E7%BA%BF-%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96/ class=md-nav__link> <span class=md-ellipsis> 10.Centos 在线-离线安装依赖 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/11.rsync-ssh/ class=md-nav__link> <span class=md-ellipsis> 11.rsync ssh 使用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/12.%E5%90%84%E5%A4%A7%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%81%9ARAID/ class=md-nav__link> <span class=md-ellipsis> 12.各大服务器做RAID </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/13.Linux%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 13.Linux 系统架构与运维实战 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/14.Linux%E4%B8%8B%E8%BD%AF%E4%BB%B6%E6%89%93%E5%8C%85/ class=md-nav__link> <span class=md-ellipsis> 14.Linux 下软件打包 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/15.Linux%E7%B3%BB%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 15.Linux 系统磁盘管理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/System/16.Linux%E7%B3%BB%E7%BB%9F%E7%A3%81%E7%9B%98%E8%BF%9B%E9%98%B6/ class=md-nav__link> <span class=md-ellipsis> 16.Linux 系统磁盘进阶 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12_4> <label class=md-nav__link for=__nav_12_4 id=__nav_12_4_label tabindex=0> <span class=md-ellipsis> Ubuntu </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_4_label aria-expanded=false> <label class=md-nav__title for=__nav_12_4> <span class="md-nav__icon md-icon"></span> Ubuntu </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Ubuntu/1.Ubuntu%E6%A1%8C%E9%9D%A2%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/ class=md-nav__link> <span class=md-ellipsis> 1.Ubuntu 桌面初始化安装配置 </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Ubuntu/2.ubuntu-desktop-vmware/ class=md-nav__link> <span class=md-ellipsis> 2.Ubuntu-desktop-vmware </span> </a> </li> <li class=md-nav__item> <a href=../../../Linux/Ubuntu/3.Ubuntu_UFW%E9%98%B2%E7%81%AB%E5%A2%99/ class=md-nav__link> <span class=md-ellipsis> 3.Ubuntu_UFW 防火墙 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12_5> <label class=md-nav__link for=__nav_12_5 id=__nav_12_5_label tabindex=0> <span class=md-ellipsis> VM </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_5_label aria-expanded=false> <label class=md-nav__title for=__nav_12_5> <span class="md-nav__icon md-icon"></span> VM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/VM/1.Vagrant%E8%99%9A%E6%8B%9F%E6%9C%BA/ class=md-nav__link> <span class=md-ellipsis> 1.Vagrant虚拟机 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13> <label class=md-nav__link for=__nav_13 id=__nav_13_label tabindex=0> <span class=md-ellipsis> middleware </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_13_label aria-expanded=false> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> middleware </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13_1> <label class=md-nav__link for=__nav_13_1 id=__nav_13_1_label tabindex=0> <span class=md-ellipsis> db </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_13_1_label aria-expanded=false> <label class=md-nav__title for=__nav_13_1> <span class="md-nav__icon md-icon"></span> db </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../middleware/db/1.postgres/ class=md-nav__link> <span class=md-ellipsis> 1.postgres </span> </a> </li> <li class=md-nav__item> <a href=../../../middleware/db/2.redis/ class=md-nav__link> <span class=md-ellipsis> 2.redis </span> </a> </li> <li class=md-nav__item> <a href=../../../middleware/db/3.Mysql/ class=md-nav__link> <span class=md-ellipsis> 3.Mysql </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13_2> <label class=md-nav__link for=__nav_13_2 id=__nav_13_2_label tabindex=0> <span class=md-ellipsis> mq </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_13_2_label aria-expanded=false> <label class=md-nav__title for=__nav_13_2> <span class="md-nav__icon md-icon"></span> mq </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../middleware/mq/1.rabbitMQ/ class=md-nav__link> <span class=md-ellipsis> 1.rabbitMQ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_14> <label class=md-nav__link for=__nav_14 id=__nav_14_label tabindex=0> <span class=md-ellipsis> Other </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_14_label aria-expanded=false> <label class=md-nav__title for=__nav_14> <span class="md-nav__icon md-icon"></span> Other </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_14_1> <label class=md-nav__link for=__nav_14_1 id=__nav_14_1_label tabindex=0> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_14_1_label aria-expanded=false> <label class=md-nav__title for=__nav_14_1> <span class="md-nav__icon md-icon"></span> tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Other/tools/1.PicGo%E5%9B%BE%E5%BA%8A/ class=md-nav__link> <span class=md-ellipsis> 1.PicGo图床 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/2.PicX%E5%9B%BE%E5%BA%8A/ class=md-nav__link> <span class=md-ellipsis> 2.Picx图床 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/3.Markdown%E8%AF%AD%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 3.Markdown语法 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/4.KeyManager/ class=md-nav__link> <span class=md-ellipsis> 4.KeyManager </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/5.mkdocs-material%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/ class=md-nav__link> <span class=md-ellipsis> 5.mkdocs-material搭建博客 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/6.sphinx%E6%9E%84%E5%BB%BA%E5%8D%9A%E5%AE%A2/ class=md-nav__link> <span class=md-ellipsis> 6.sphinx构建博客 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/7.%E4%BC%81%E4%B8%9A%E7%BA%A7VPN%E8%BD%AF%E4%BB%B6AnyLink/ class=md-nav__link> <span class=md-ellipsis> 7.企业级VPN软件AnyLink </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/8.%E5%B9%B3%E5%8F%B0%E5%8F%8A%E5%B7%A5%E5%85%B7%E6%B1%87%E6%80%BB/ class=md-nav__link> <span class=md-ellipsis> 8.平台及工具汇总 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/9.%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E7%B3%BB%E7%BB%9F%E4%BB%A3%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 9.自动更新系统代理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/10.Bash-to-Bat-Converter/ class=md-nav__link> <span class=md-ellipsis> 10.Bash-to-Bat-Converter </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/11.%E7%94%B5%E5%AD%90%E4%B9%A6%E9%98%85%E8%AF%BB%E5%99%A8/ class=md-nav__link> <span class=md-ellipsis> 11.电子书阅读器 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/12.ssh%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 12.ssh 工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/13.%E8%87%AA%E7%94%A8%E5%B7%A5%E5%85%B7%E9%9B%86/ class=md-nav__link> <span class=md-ellipsis> 13.自用工具集 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/14.%E7%A8%8B%E5%BA%8F%E5%91%98%E7%94%BB%E5%9B%BE%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 14.程序员画图工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/15.%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86%E7%BD%91%E7%AB%99/ class=md-nav__link> <span class=md-ellipsis> 15.搭建一个文档管理网站 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/16.%E5%9C%A8%E7%BA%BF%E5%B7%A5%E5%85%B7%E7%AE%B1/ class=md-nav__link> <span class=md-ellipsis> 16.在线工具箱 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/tools/17.GitHub%E6%8E%92%E8%A1%8C%E6%A6%9C/ class=md-nav__link> <span class=md-ellipsis> 17.GitHub 排行榜 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_14_2> <label class=md-nav__link for=__nav_14_2 id=__nav_14_2_label tabindex=0> <span class=md-ellipsis> windows </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_14_2_label aria-expanded=false> <label class=md-nav__title for=__nav_14_2> <span class="md-nav__icon md-icon"></span> windows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Other/windows/1.%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E4%B8%8B%E8%BD%BD/ class=md-nav__link> <span class=md-ellipsis> 1.常用软件下载 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/2.windows%E5%BF%AB%E6%8D%B7%E6%8C%87%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 2.windows 快捷指令 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/3.DOS/ class=md-nav__link> <span class=md-ellipsis> 3.DOS </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/4.Windows%E6%BF%80%E6%B4%BB%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 4.Windows 激活工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/5.windows%E4%B8%8Bnetcat%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> 5.windows下netcat安装 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/6.U%E7%9B%98%E5%88%B6%E4%BD%9C%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 6.U 盘制作工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/7.rustdesk/ class=md-nav__link> <span class=md-ellipsis> 7.rustdesk </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/8.Docker%E4%B8%AD%E8%BF%90%E8%A1%8CWindows%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ class=md-nav__link> <span class=md-ellipsis> 8.Docker 中运行 Windows 操作系统 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/9.Cygwin%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%E6%8C%87%E5%AF%BC/ class=md-nav__link> <span class=md-ellipsis> 9.Cygwin 工具安装和使用指导 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/10.%E6%88%91%E4%BD%BF%E7%94%A8%E7%9A%84GPT/ class=md-nav__link> <span class=md-ellipsis> 10.我使用的 GPT </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/11.win10%E5%AE%89%E8%A3%85wsl2/ class=md-nav__link> <span class=md-ellipsis> 11.win10 安装 wsl2 </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/12.wsl%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEminiconda/ class=md-nav__link> <span class=md-ellipsis> 12.wsl 安装配置 miniconda </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/13.wsl%E5%AE%89%E8%A3%85docker/ class=md-nav__link> <span class=md-ellipsis> 13.wsl 安装 docker </span> </a> </li> <li class=md-nav__item> <a href=../../../Other/windows/14.wsl%E5%AE%89%E8%A3%85nodejs/ class=md-nav__link> <span class=md-ellipsis> 14.wsl 安装 nodejs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_14_3> <label class=md-nav__link for=__nav_14_3 id=__nav_14_3_label tabindex=0> <span class=md-ellipsis> Interview </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_14_3_label aria-expanded=false> <label class=md-nav__title for=__nav_14_3> <span class="md-nav__icon md-icon"></span> Interview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Other/Interview/0.%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8/ class=md-nav__link> <span class=md-ellipsis> 面试宝典 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1多线程与多进程 class=md-nav__link> <span class=md-ellipsis> 1.多线程与多进程 </span> </a> <nav class=md-nav aria-label=1.多线程与多进程> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11-多进程 class=md-nav__link> <span class=md-ellipsis> 1.1 多进程 </span> </a> <nav class=md-nav aria-label="1.1 多进程"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multiprocessing class=md-nav__link> <span class=md-ellipsis> multiprocessing </span> </a> <nav class=md-nav aria-label=multiprocessing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#process class=md-nav__link> <span class=md-ellipsis> Process </span> </a> </li> <li class=md-nav__item> <a href=#process-子类创建进程 class=md-nav__link> <span class=md-ellipsis> Process 子类创建进程 </span> </a> </li> <li class=md-nav__item> <a href=#使用进程池-pool-创建进程 class=md-nav__link> <span class=md-ellipsis> 使用进程池 Pool 创建进程 </span> </a> </li> <li class=md-nav__item> <a href=#concurrentfutures-进程池 class=md-nav__link> <span class=md-ellipsis> concurrent.futures 进程池 </span> </a> </li> <li class=md-nav__item> <a href=#进程池效率对比 class=md-nav__link> <span class=md-ellipsis> 进程池效率对比 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#进程间通信 class=md-nav__link> <span class=md-ellipsis> 进程间通信 </span> </a> <nav class=md-nav aria-label=进程间通信> <ul class=md-nav__list> <li class=md-nav__item> <a href=#queue-多进程队列的使用 class=md-nav__link> <span class=md-ellipsis> Queue 多进程队列的使用 </span> </a> </li> <li class=md-nav__item> <a href=#pipe-常用来在两个进程间进行通信 class=md-nav__link> <span class=md-ellipsis> Pipe 常用来在两个进程间进行通信 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#分布式进程 class=md-nav__link> <span class=md-ellipsis> 分布式进程 </span> </a> <nav class=md-nav aria-label=分布式进程> <ul class=md-nav__list> <li class=md-nav__item> <a href=#分布式进程案例 class=md-nav__link> <span class=md-ellipsis> 分布式进程案例 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#12-多线程 class=md-nav__link> <span class=md-ellipsis> 1.2 多线程 </span> </a> <nav class=md-nav aria-label="1.2 多线程"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#调用-thread-类来创建多线程 class=md-nav__link> <span class=md-ellipsis> 调用 Thread 类来创建多线程 </span> </a> </li> <li class=md-nav__item> <a href=#继承-thread-类创建多线程 class=md-nav__link> <span class=md-ellipsis> 继承 Thread 类创建多线程 </span> </a> </li> <li class=md-nav__item> <a href=#什么是互斥锁 class=md-nav__link> <span class=md-ellipsis> 什么是互斥锁 </span> </a> </li> <li class=md-nav__item> <a href=#使用线程池提升运行效率 class=md-nav__link> <span class=md-ellipsis> 使用线程池提升运行效率 </span> </a> <nav class=md-nav aria-label=使用线程池提升运行效率> <ul class=md-nav__list> <li class=md-nav__item> <a href=#实现抢占线程池 class=md-nav__link> <span class=md-ellipsis> 实现抢占线程池 </span> </a> </li> <li class=md-nav__item> <a href=#实现非抢占线程池 class=md-nav__link> <span class=md-ellipsis> 实现非抢占线程池 </span> </a> </li> <li class=md-nav__item> <a href=#线程池实现并发执行命令 class=md-nav__link> <span class=md-ellipsis> 线程池实现并发执行命令 </span> </a> </li> <li class=md-nav__item> <a href=#参考文献 class=md-nav__link> <span class=md-ellipsis> 参考文献 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2协程库 class=md-nav__link> <span class=md-ellipsis> 2.协程库 </span> </a> <nav class=md-nav aria-label=2.协程库> <ul class=md-nav__list> <li class=md-nav__item> <a href=#什么是协程 class=md-nav__link> <span class=md-ellipsis> 什么是协程？ </span> </a> </li> <li class=md-nav__item> <a href=#yield-与-yield-from class=md-nav__link> <span class=md-ellipsis> yield 与 yield from </span> </a> </li> <li class=md-nav__item> <a href=#异步并发-asyncio-与-asyncawait class=md-nav__link> <span class=md-ellipsis> 异步并发 asyncio 与 async/await </span> </a> </li> <li class=md-nav__item> <a href=#什么是-gevent class=md-nav__link> <span class=md-ellipsis> 什么是 gevent? </span> </a> </li> <li class=md-nav__item> <a href=#协程的例子 class=md-nav__link> <span class=md-ellipsis> 协程的例子 </span> </a> </li> <li class=md-nav__item> <a href=#qa class=md-nav__link> <span class=md-ellipsis> Q&amp;A </span> </a> <nav class=md-nav aria-label=Q&amp;A> <ul class=md-nav__list> <li class=md-nav__item> <a href=#qgevent-无法捕获的耗时 class=md-nav__link> <span class=md-ellipsis> Q：gevent 无法捕获的耗时 </span> </a> </li> <li class=md-nav__item> <a href=#a猴子补丁 class=md-nav__link> <span class=md-ellipsis> A：猴子补丁 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#实践 class=md-nav__link> <span class=md-ellipsis> 实践 </span> </a> <nav class=md-nav aria-label=实践> <ul class=md-nav__list> <li class=md-nav__item> <a href=#异步-requests-请求 class=md-nav__link> <span class=md-ellipsis> 异步 requests 请求 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#锁 class=md-nav__link> <span class=md-ellipsis> 锁 </span> </a> <nav class=md-nav aria-label=锁> <ul class=md-nav__list> <li class=md-nav__item> <a href=#gevent-锁的使用 class=md-nav__link> <span class=md-ellipsis> gevent 锁的使用 </span> </a> </li> <li class=md-nav__item> <a href=#gevent-信号量实现的锁 class=md-nav__link> <span class=md-ellipsis> gevent 信号量实现的锁 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#事件 class=md-nav__link> <span class=md-ellipsis> 事件 </span> </a> <nav class=md-nav aria-label=事件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#event-阻塞事件 class=md-nav__link> <span class=md-ellipsis> Event 阻塞事件 </span> </a> </li> <li class=md-nav__item> <a href=#asyncresult-可传值的事件 class=md-nav__link> <span class=md-ellipsis> AsyncResult 可传值的事件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#队列 class=md-nav__link> <span class=md-ellipsis> 队列 </span> </a> </li> <li class=md-nav__item> <a href=#参考文献_1 class=md-nav__link> <span class=md-ellipsis> 参考文献 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=22python-多线程多进程协程>22.Python 多线程多进程协程<a class=headerlink href=#22python-多线程多进程协程 title="Permanent link">&para;</a></h1> <h2 id=1多线程与多进程>1.多线程与多进程<a class=headerlink href=#1多线程与多进程 title="Permanent link">&para;</a></h2> <blockquote> <p>进程和线程的概念。</p> </blockquote> <p>进程（Process）实际上表示的就是计算机正在进行的一个任务，比如，打开一个浏览器便是启动一个浏览器进程，打开一个记事本便是启动一个记事本进程。</p> <p>但是，一个进程未必只能进行一件事，就像一个 Word 进程，在打字的同时还会有拼写检查，这些在进程内部同时进行的多个“子任务”，就称为线程（Thread）。</p> <p>进程和线程的主要差别在于它们是不同的操作系统资源管理方式。</p> <p>进程有独立的地址空间，一个进程崩溃后，在保护模式下不会对其它进程产生影响，而线程只是一个进程中的不同执行路径。</p> <p>线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间，一个线程死掉就等于整个进程死掉，所以多进程的程序要比多线程的程序健壮，但在进程切换时，耗费资源较大，效率要差一些。但对于一些要求同时进行并且又要共享某些变量的并发操作，只能用线程，不能用进程。</p> <p>在以往的单核 CPU 上，系统执行多进程的方式是通过不断的在多个进程中切换——例如任务 1 执行 0.01 秒，切到任务 2 执行 0.01 秒再切到任务 3……以此类推，而在多核 CPU 出现后，真正的并行执行多任务才真正的得以实现，但绕是如此，一台计算机同时进行的进程是非常之多的，远远大于 CPU 的核心数量，因此，操作系统依然会将这些任务轮流调度到每个核心上运行。</p> <p>如果我们要同时进行多个任务，我们有以下三种方案：</p> <ol> <li>写多个程序，然后同时运行</li> <li>在一个程序中运行多个线程</li> <li>多进程+多线程</li> </ol> <h3 id=11-多进程>1.1 多进程<a class=headerlink href=#11-多进程 title="Permanent link">&para;</a></h3> <p>要让 Python 程序实现多进程（multiprocessing），我们先了解操作系统的相关知识。</p> <p>Unix/Linux 操作系统提供了一个 fork()系统调用，它非常特殊。普通的函数调用，调用一次，返回一次，但是 fork()调用一次，返回两次，因为操作系统自动把当前进程（称为父进程）复制了一份（称为子进程），然后，分别在父进程和子进程内返回。</p> <p>子进程永远返回 0，而父进程返回子进程的 ID。这样做的理由是，一个父进程可以 fork 出很多子进程，所以，父进程要记下每个子进程的 ID，而子进程只需要调用 getppid()就可以拿到父进程的 ID。</p> <p>Python 的 os 模块封装了常见的系统调用，其中就包括 fork，可以在 Python 程序中轻松创建子进程：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=kn>import</span> <span class=nn>os</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Process (</span><span class=si>%s</span><span class=s1>) start...&#39;</span> <span class=o>%</span> <span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>())</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=c1># Only works on Unix/Linux/Mac:</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=n>pid</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>fork</span><span class=p>()</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=k>if</span> <span class=n>pid</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>    <span class=nb>print</span> <span class=s2>&quot;我是子进程</span><span class=si>%s</span><span class=s2>, 我的父进程是</span><span class=si>%s</span><span class=s2> 我开始工作了...&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>(),</span> <span class=n>os</span><span class=o>.</span><span class=n>getppid</span><span class=p>())</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;我的进程id是 (</span><span class=si>%s</span><span class=s1>) 我创建了一个子进程，子进程id是 (</span><span class=si>%s</span><span class=s1>).&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>(),</span> <span class=n>pid</span><span class=p>))</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>
</code></pre></div> <p>运行结果如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>$<span class=w> </span>python<span class=w> </span><span class=m>01</span>.os-fork-sample.py
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>Process<span class=w> </span><span class=o>(</span><span class=m>1695</span><span class=o>)</span><span class=w> </span>start...
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>我的进程id是<span class=w> </span><span class=o>(</span><span class=m>1695</span><span class=o>)</span><span class=w> </span>我创建了一个子进程，子进程id是<span class=w> </span><span class=o>(</span><span class=m>1696</span><span class=o>)</span>.
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>我是子进程1696,<span class=w> </span>我的父进程是1695<span class=w> </span>我开始工作了...
</code></pre></div> <p>由于 Windows 没有 fork 调用，上面的代码在 Windows 上无法运行。由于 Mac 系统是基于 BSD（Unix 的一种）内核，所以，在 Mac 下运行是没有问题的，推荐大家用 Mac！</p> <p>有了 fork 调用，一个进程在接到新任务时就可以复制出一个子进程来处理新任务，常见的 Apache 服务器就是由父进程监听端口，每当有新的 http 请求时，就 fork 出子进程来处理新的 http 请求。</p> <h4 id=multiprocessing>multiprocessing<a class=headerlink href=#multiprocessing title="Permanent link">&para;</a></h4> <p>如果你打算编写多进程的服务程序，Unix/Linux 无疑是正确的选择。由于 Windows 没有 fork 调用，难道在 Windows 上无法用 Python 编写多进程的程序？</p> <p>由于 Python 是跨平台的，自然也应该提供一个跨平台的多进程支持。multiprocessing 模块就是跨平台版本的多进程模块。</p> <h5 id=process>Process<a class=headerlink href=#process title="Permanent link">&para;</a></h5> <p>multiprocessing 模块提供了一个 Process 类来代表一个进程对象，下面的例子演示了启动一个子进程并等待其结束：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=kn>from</span> <span class=nn>multiprocessing</span> <span class=kn>import</span> <span class=n>Process</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=kn>import</span> <span class=nn>os</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1># 子进程要执行的代码</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=k>def</span> <span class=nf>run_proc</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Run child process </span><span class=si>%s</span><span class=s1> (</span><span class=si>%s</span><span class=s1>)...&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>()))</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Parent process </span><span class=si>%s</span><span class=s1>.&#39;</span> <span class=o>%</span> <span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>())</span>
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a>    <span class=n>p</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>run_proc</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;test&#39;</span><span class=p>,))</span>
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Child process will start.&#39;</span><span class=p>)</span>
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a>    <span class=n>p</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a>    <span class=n>p</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Child process end.&#39;</span><span class=p>)</span>
</code></pre></div> <p>执行结果如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>$<span class=w> </span>/usr/bin/python<span class=w> </span><span class=m>02</span>.Process-sample.py
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>Parent<span class=w> </span>process<span class=w> </span><span class=m>1712</span>.
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>Child<span class=w> </span>process<span class=w> </span>will<span class=w> </span>start.
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>Run<span class=w> </span>child<span class=w> </span>process<span class=w> </span><span class=nb>test</span><span class=w> </span><span class=o>(</span><span class=m>1723</span><span class=o>)</span>...
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>Child<span class=w> </span>process<span class=w> </span>end.
</code></pre></div> <p>Process 创建子进程时，只需要传入一个执行函数和函数的参数，创建一个 Process 实例，用 start()方法启动，这样创建进程比 fork()还要简单。 join()方法可以等待子进程结束后再继续往下运行，通常用于进程间的同步。</p> <h5 id=process-子类创建进程>Process 子类创建进程<a class=headerlink href=#process-子类创建进程 title="Permanent link">&para;</a></h5> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=kn>import</span> <span class=nn>os</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=kn>from</span> <span class=nn>multiprocessing</span> <span class=kn>import</span> <span class=n>Process</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=k>class</span> <span class=nc>Download</span><span class=p>(</span><span class=n>Process</span><span class=p>):</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>interval</span><span class=p>):</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>        <span class=n>Process</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>        <span class=bp>self</span><span class=o>.</span><span class=n>interval</span> <span class=o>=</span> <span class=n>interval</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>    <span class=c1># 重写Process类中的run()方法</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>        <span class=c1># 开启这个进程所需执行的代码</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a>        <span class=n>t_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a>        <span class=c1># time.sleep(3)     # 模拟阻塞的一个实现方式</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;开启进程：</span><span class=si>%s</span><span class=s2>进行下载操作&quot;</span> <span class=o>%</span> <span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>())</span>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;子进程（</span><span class=si>%s</span><span class=s2>）开始执行，父进程为（</span><span class=si>%s</span><span class=s2>）&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>(),</span> <span class=n>os</span><span class=o>.</span><span class=n>getppid</span><span class=p>()))</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>interval</span><span class=p>)</span>
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a>        <span class=n>t_stop</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;子进程（</span><span class=si>%s</span><span class=s2>）执行完毕，耗时(</span><span class=si>%f</span><span class=s2>)秒&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>(),</span> <span class=p>(</span><span class=n>t_stop</span> <span class=o>-</span> <span class=n>t_start</span><span class=p>)))</span>
<a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a>
<a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a>
<a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a>    <span class=n>t_start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;当前进程（</span><span class=si>%s</span><span class=s2>）&quot;</span> <span class=o>%</span> <span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>())</span>
<a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a>    <span class=n>p</span> <span class=o>=</span> <span class=n>Download</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a>    <span class=n>p</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a>    <span class=c1># p.join(10)        # join 父进程等待子进程执行完毕后立刻执行</span>
<a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>      <span class=c1># 模拟阻塞，保证子进程完毕后父进程在执行</span>
<a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a>    <span class=n>t_stop</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;主进程（</span><span class=si>%s</span><span class=s2>）执行完毕，耗时(</span><span class=si>%f</span><span class=s2>)秒&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>(),</span> <span class=p>(</span><span class=n>t_stop</span> <span class=o>-</span> <span class=n>t_start</span><span class=p>)))</span>
</code></pre></div> <h5 id=使用进程池-pool-创建进程>使用进程池 Pool 创建进程<a class=headerlink href=#使用进程池-pool-创建进程 title="Permanent link">&para;</a></h5> <p>如果要启动大量的子进程，可以用进程池的方式批量创建子进程</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=kn>import</span> <span class=nn>multiprocessing</span> <span class=k>as</span> <span class=nn>mp</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=kn>import</span> <span class=nn>os</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=k>def</span> <span class=nf>task</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;子进程 (</span><span class=si>{}</span><span class=s2>)执行的任务是 (</span><span class=si>{}</span><span class=s2>)&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>(),</span> <span class=n>name</span><span class=p>))</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;父进程 (</span><span class=si>{}</span><span class=s2>)开始执行&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>()))</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>    <span class=n>p</span> <span class=o>=</span> <span class=n>mp</span><span class=o>.</span><span class=n>Pool</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a>        <span class=n>p</span><span class=o>.</span><span class=n>apply_async</span><span class=p>(</span><span class=n>task</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>i</span><span class=p>,))</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>    <span class=n>p</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>    <span class=n>p</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;所有子进程结束.....&quot;</span><span class=p>)</span>
</code></pre></div> <p>请注意输出的结果，</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>$<span class=w> </span>/usr/bin/python<span class=w> </span><span class=m>04</span>.Process-pool-sample.p
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>父进程<span class=w> </span><span class=o>(</span><span class=m>2033</span><span class=o>)</span>开始执行
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2047</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>0</span><span class=o>)</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2044</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>1</span><span class=o>)</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2045</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>2</span><span class=o>)</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2046</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>3</span><span class=o>)</span>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2047</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>4</span><span class=o>)</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2044</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>5</span><span class=o>)</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2045</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>6</span><span class=o>)</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2046</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>7</span><span class=o>)</span>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2047</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>8</span><span class=o>)</span>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>子进程<span class=w> </span><span class=o>(</span><span class=m>2044</span><span class=o>)</span>执行的任务是<span class=w> </span><span class=o>(</span><span class=m>9</span><span class=o>)</span>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>所有子进程结束.....
</code></pre></div> <p>说明：</p> <ol> <li>进程池 Pool 被创建出来后， <code>p.apply_async(task)</code> 语句不停地循环执行，相当于向进程池中提交了 10 个请求，它们会被放到一个队列中。</li> <li>p = mp.Pool(4) 执行完毕后创建了 4 条进程，但尚未给它们分配各自的任务；也就意味着，无论有多少任务，实际的进程数只有 4 条，每次最多 4 条进程并行。</li> <li>当 Pool 中有进程任务执行完毕后，这条进程资源会被释放，Pool 会按先进先出的原则取出一个新的请求给空闲的进程继续执行。</li> <li>当 Pool 所有的进程任务完成后，会产生 4 个僵尸进程，如果主进程/主线程不结束，系统不会自动回收资源，需要调用 join 函数负责回收。</li> <li>在创建 Pool 进程池时，若不指定进程的最大数量，默认创建的进程数为系统的内核数量</li> <li>如果采用 <code>p.apply(task)</code>阻塞方式添加任务，其每次只能向进程池中添加一条任务，然后 for 循环会被阻塞等待，直到添加的任务被执行完毕，进程池中的 4 个进程交替执行新来的任务，此时相当于单进程。</li> </ol> <p>进程池扫描主机端口实例</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=c1># @auther:   18793</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=c1># @Date：    2020/6/22 11:21</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=c1># @filename: Process_Pool.py</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=c1># @Email:    1879324764@qq.com</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=c1># @Software: PyCharm</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=sd>进程池扫描主机端口实例</span>
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=sd>代码利用单进程扫描主机端口，如果要扫描的端口范围比较大，则需要耗费比较长的时间。</span>
<a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=sd>利用多个进程同时扫描不同的端口范围，可以缩短程序运行时间。</span>
<a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=sd>进程池技术可以一次创建多个子进程，适合于子进程数量事先预知的情况。</span>
<a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=sd>代码利用进程池一次创建16个进程，然后利用这些进程扫描主机所有端口（0～65535），</span>
<a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=sd>每个进程扫描4096个端口。</span>
<a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=kn>from</span> <span class=nn>multiprocessing</span> <span class=kn>import</span> <span class=n>Pool</span>
<a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a><span class=kn>import</span> <span class=nn>os</span>
<a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a><span class=kn>import</span> <span class=nn>socket</span>
<a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>
<a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>
<a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a><span class=k>def</span> <span class=nf>scan_port</span><span class=p>(</span><span class=n>ports</span><span class=p>):</span>
<a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a>    <span class=n>s</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
<a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a>    <span class=n>s</span><span class=o>.</span><span class=n>settimeout</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a>    <span class=k>for</span> <span class=n>port</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>ports</span><span class=p>,</span> <span class=n>ports</span> <span class=o>+</span> <span class=mi>4096</span><span class=p>):</span>
<a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a>        <span class=n>result</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=n>connect_ex</span><span class=p>((</span><span class=n>ip</span><span class=p>,</span> <span class=n>port</span><span class=p>))</span>
<a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a>        <span class=k>if</span> <span class=n>result</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;I am process </span><span class=si>%d</span><span class=s2>,port </span><span class=si>%d</span><span class=s2> is openned!&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>(),</span> <span class=n>port</span><span class=p>))</span>
<a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a>    <span class=n>s</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-7-30 name=__codelineno-7-30 href=#__codelineno-7-30></a>
<a id=__codelineno-7-31 name=__codelineno-7-31 href=#__codelineno-7-31></a>
<a id=__codelineno-7-32 name=__codelineno-7-32 href=#__codelineno-7-32></a><span class=n>ip</span> <span class=o>=</span> <span class=s2>&quot;192.168.0.109&quot;</span>
<a id=__codelineno-7-33 name=__codelineno-7-33 href=#__codelineno-7-33></a><span class=n>p</span> <span class=o>=</span> <span class=n>Pool</span><span class=p>(</span><span class=mi>16</span><span class=p>)</span>
<a id=__codelineno-7-34 name=__codelineno-7-34 href=#__codelineno-7-34></a>
<a id=__codelineno-7-35 name=__codelineno-7-35 href=#__codelineno-7-35></a><span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>16</span><span class=p>):</span>
<a id=__codelineno-7-36 name=__codelineno-7-36 href=#__codelineno-7-36></a>    <span class=n>p</span><span class=o>.</span><span class=n>apply_async</span><span class=p>(</span><span class=n>scan_port</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>k</span> <span class=o>*</span> <span class=mi>4096</span><span class=p>,))</span>
<a id=__codelineno-7-37 name=__codelineno-7-37 href=#__codelineno-7-37></a><span class=n>p</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-7-38 name=__codelineno-7-38 href=#__codelineno-7-38></a><span class=n>p</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-7-39 name=__codelineno-7-39 href=#__codelineno-7-39></a><span class=nb>print</span><span class=p>(</span><span class=s2>&quot;All subprocesses had finished!&quot;</span><span class=p>)</span>
</code></pre></div> <h5 id=concurrentfutures-进程池>concurrent.futures 进程池<a class=headerlink href=#concurrentfutures-进程池 title="Permanent link">&para;</a></h5> <p>concurrent.futures - 启动并行任务</p> <p>Python 版本 3.2 中的新功能。</p> <p>ProcessPoolExecutor 示例</p> <p>官方示例</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=kn>import</span> <span class=nn>concurrent.futures</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=kn>import</span> <span class=nn>math</span>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=n>PRIMES</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>    <span class=mi>112272535095293</span><span class=p>,</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>    <span class=mi>112582705942171</span><span class=p>,</span>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>    <span class=mi>112272535095293</span><span class=p>,</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>    <span class=mi>115280095190773</span><span class=p>,</span>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>    <span class=mi>115797848077099</span><span class=p>,</span>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>    <span class=mi>1099726899285419</span><span class=p>]</span>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=k>def</span> <span class=nf>is_prime</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
<a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a>    <span class=k>if</span> <span class=n>n</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a>
<a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a>    <span class=n>sqrt_n</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>math</span><span class=o>.</span><span class=n>floor</span><span class=p>(</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>n</span><span class=p>)))</span>
<a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=n>sqrt_n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>):</span>
<a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a>        <span class=k>if</span> <span class=n>n</span> <span class=o>%</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a>            <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a>    <span class=k>return</span> <span class=kc>True</span>
<a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a>
<a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
<a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a>    <span class=k>with</span> <span class=n>concurrent</span><span class=o>.</span><span class=n>futures</span><span class=o>.</span><span class=n>ProcessPoolExecutor</span><span class=p>()</span> <span class=k>as</span> <span class=n>executor</span><span class=p>:</span>
<a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a>        <span class=k>for</span> <span class=n>number</span><span class=p>,</span> <span class=n>prime</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>PRIMES</span><span class=p>,</span> <span class=n>executor</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>is_prime</span><span class=p>,</span> <span class=n>PRIMES</span><span class=p>)):</span>
<a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%d</span><span class=s1> is prime: </span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>number</span><span class=p>,</span> <span class=n>prime</span><span class=p>))</span>
<a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a>
<a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a>    <span class=n>main</span><span class=p>()</span>
</code></pre></div> <p>以下是使用 <code>concurrent.futures.ProcessPoolExecutor</code> 来并行扫描主机端口的简单示例代码：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=kn>import</span> <span class=nn>concurrent.futures</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=kn>import</span> <span class=nn>socket</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=kn>import</span> <span class=nn>multiprocessing</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=c1># 定义一个函数，用于扫描指定主机和端口是否开放</span>
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=k>def</span> <span class=nf>scan_port</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>):</span>
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>        <span class=c1># 创建套接字对象</span>
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a>        <span class=k>with</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span> <span class=k>as</span> <span class=n>s</span><span class=p>:</span>
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>            <span class=c1># 设置超时时间</span>
<a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>            <span class=n>s</span><span class=o>.</span><span class=n>settimeout</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a>            <span class=c1># 尝试连接指定主机和端口</span>
<a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a>            <span class=n>result</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=n>connect_ex</span><span class=p>((</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>))</span>
<a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a>            <span class=c1># 如果连接成功，则端口开放</span>
<a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a>            <span class=k>if</span> <span class=n>result</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a>                <span class=k>return</span> <span class=n>port</span><span class=p>,</span> <span class=kc>True</span>
<a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a>                <span class=k>return</span> <span class=n>port</span><span class=p>,</span> <span class=kc>False</span>
<a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a>        <span class=k>return</span> <span class=n>port</span><span class=p>,</span> <span class=kc>False</span>
<a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a>
<a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a>
<a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a>    <span class=c1># 设置要扫描的主机和端口范围</span>
<a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a>    <span class=n>host</span> <span class=o>=</span> <span class=s1>&#39;localhost&#39;</span>
<a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a>    <span class=n>ports</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1025</span><span class=p>)</span>  <span class=c1># 扫描1到1024端口</span>
<a id=__codelineno-9-30 name=__codelineno-9-30 href=#__codelineno-9-30></a>
<a id=__codelineno-9-31 name=__codelineno-9-31 href=#__codelineno-9-31></a>    <span class=c1># 获取系统的CPU核心数量</span>
<a id=__codelineno-9-32 name=__codelineno-9-32 href=#__codelineno-9-32></a>    <span class=n>max_workers</span> <span class=o>=</span> <span class=n>multiprocessing</span><span class=o>.</span><span class=n>cpu_count</span><span class=p>()</span>
<a id=__codelineno-9-33 name=__codelineno-9-33 href=#__codelineno-9-33></a>
<a id=__codelineno-9-34 name=__codelineno-9-34 href=#__codelineno-9-34></a>    <span class=c1># 创建进程池执行器，并设置最大工作进程数量</span>
<a id=__codelineno-9-35 name=__codelineno-9-35 href=#__codelineno-9-35></a>    <span class=k>with</span> <span class=n>concurrent</span><span class=o>.</span><span class=n>futures</span><span class=o>.</span><span class=n>ProcessPoolExecutor</span><span class=p>(</span><span class=n>max_workers</span><span class=o>=</span><span class=n>max_workers</span><span class=p>)</span> <span class=k>as</span> <span class=n>executor</span><span class=p>:</span>
<a id=__codelineno-9-36 name=__codelineno-9-36 href=#__codelineno-9-36></a>        <span class=c1># 提交任务给进程池执行器，并获取结果</span>
<a id=__codelineno-9-37 name=__codelineno-9-37 href=#__codelineno-9-37></a>        <span class=n>futures</span> <span class=o>=</span> <span class=p>{</span><span class=n>executor</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>scan_port</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>):</span> <span class=n>port</span> <span class=k>for</span> <span class=n>port</span> <span class=ow>in</span> <span class=n>ports</span><span class=p>}</span>
<a id=__codelineno-9-38 name=__codelineno-9-38 href=#__codelineno-9-38></a>
<a id=__codelineno-9-39 name=__codelineno-9-39 href=#__codelineno-9-39></a>        <span class=c1># 遍历结果，打印出开放的端口</span>
<a id=__codelineno-9-40 name=__codelineno-9-40 href=#__codelineno-9-40></a>        <span class=k>for</span> <span class=n>future</span> <span class=ow>in</span> <span class=n>concurrent</span><span class=o>.</span><span class=n>futures</span><span class=o>.</span><span class=n>as_completed</span><span class=p>(</span><span class=n>futures</span><span class=p>):</span>
<a id=__codelineno-9-41 name=__codelineno-9-41 href=#__codelineno-9-41></a>            <span class=n>port</span><span class=p>,</span> <span class=n>status</span> <span class=o>=</span> <span class=n>future</span><span class=o>.</span><span class=n>result</span><span class=p>()</span>
<a id=__codelineno-9-42 name=__codelineno-9-42 href=#__codelineno-9-42></a>            <span class=k>if</span> <span class=n>status</span><span class=p>:</span>
<a id=__codelineno-9-43 name=__codelineno-9-43 href=#__codelineno-9-43></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Port </span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2> is open&quot;</span><span class=p>)</span>
</code></pre></div> <p>executor.map() 和 executor.submit() 是 concurrent.futures.ProcessPoolExecutor 提供的两种不同的任务提交方式，它们之间的核心区别在于：</p> <p>1.返回结果的方式：</p> <ul> <li>executor.map() 会返回一个迭代器，通过迭代器可以逐个获取每个任务的结果。</li> <li>executor.submit() 返回一个 concurrent.futures.Future 对象，通过它可以获取单个任务的结果。</li> </ul> <p>2.任务参数传递方式：</p> <ul> <li>executor.map() 接收一个可迭代对象作为参数，该可迭代对象的每个元素都是传递给目标函数的参数，然后按顺序执行函数。</li> <li>executor.submit() 接收一个函数和函数参数作为参数，可以灵活地传递任意数量的参数给目标函数。</li> </ul> <p>3.适用场景：</p> <ul> <li>executor.map() 适用于需要并行执行同一个函数，但参数不同的情况。例如，扫描多个端口或处理多个文件。</li> <li>executor.submit() 更加灵活，适用于需要每个任务具有不同函数、参数或处理逻辑的情况。</li> </ul> <p>4.并发性：</p> <ul> <li>executor.map() 在执行任务时，会按照顺序提交任务，并行执行，但无法控制每个任务的执行顺序。</li> <li>executor.submit() 允许更灵活的控制任务的提交和执行顺序，因为它返回的是 Future 对象，可以通过 Future 对象的方法来控制任务的状态和执行顺序。</li> </ul> <p>总的来说，如果需要并行执行一组相似的任务，并且这些任务的参数可以通过迭代器提供，那么使用 <code>executor.map()</code> 更加简洁方便；</p> <p>如果需要对每个任务进行更精细的控制，例如指定特定的函数、参数或处理逻辑，那么使用 <code>executor.submit()</code> 更为合适。</p> <h5 id=进程池效率对比>进程池效率对比<a class=headerlink href=#进程池效率对比 title="Permanent link">&para;</a></h5> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=kn>import</span> <span class=nn>concurrent.futures</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=kn>import</span> <span class=nn>socket</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=kn>from</span> <span class=nn>multiprocessing</span> <span class=kn>import</span> <span class=n>Pool</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=k>def</span> <span class=nf>scan_port</span><span class=p>(</span><span class=n>ip</span><span class=p>,</span> <span class=n>port</span><span class=p>):</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>    <span class=n>s</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>    <span class=n>s</span><span class=o>.</span><span class=n>settimeout</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=n>connect_ex</span><span class=p>((</span><span class=n>ip</span><span class=p>,</span> <span class=n>port</span><span class=p>))</span>
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>    <span class=n>s</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a>    <span class=k>return</span> <span class=n>port</span><span class=p>,</span> <span class=n>result</span> <span class=o>==</span> <span class=mi>0</span>  <span class=c1># 返回端口和状态</span>
<a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a>
<a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a>
<a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=c1># 使用多进程 concurrent.futures.ProcessPoolExecutor map 方法执行</span>
<a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=k>def</span> <span class=nf>multi_process_map_method</span><span class=p>():</span>
<a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a>    <span class=k>with</span> <span class=n>concurrent</span><span class=o>.</span><span class=n>futures</span><span class=o>.</span><span class=n>ProcessPoolExecutor</span><span class=p>()</span> <span class=k>as</span> <span class=n>executor</span><span class=p>:</span>
<a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a>        <span class=n>results</span> <span class=o>=</span> <span class=n>executor</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>scan_port</span><span class=p>,</span> <span class=p>[</span><span class=n>ip</span><span class=p>]</span> <span class=o>*</span> <span class=nb>len</span><span class=p>(</span><span class=n>ports</span><span class=p>),</span> <span class=n>ports</span><span class=p>)</span>  <span class=c1># 传递 ip 和 ports</span>
<a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a>        <span class=k>for</span> <span class=n>port</span><span class=p>,</span> <span class=n>status</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
<a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a>            <span class=k>if</span> <span class=n>status</span><span class=p>:</span>
<a id=__codelineno-10-22 name=__codelineno-10-22 href=#__codelineno-10-22></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Port </span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2> is open&quot;</span><span class=p>)</span>
<a id=__codelineno-10-23 name=__codelineno-10-23 href=#__codelineno-10-23></a>
<a id=__codelineno-10-24 name=__codelineno-10-24 href=#__codelineno-10-24></a>
<a id=__codelineno-10-25 name=__codelineno-10-25 href=#__codelineno-10-25></a><span class=c1># 使用多进程 concurrent.futures.ProcessPoolExecutor submit 方法执行</span>
<a id=__codelineno-10-26 name=__codelineno-10-26 href=#__codelineno-10-26></a><span class=k>def</span> <span class=nf>multi_process_submit_method</span><span class=p>():</span>
<a id=__codelineno-10-27 name=__codelineno-10-27 href=#__codelineno-10-27></a>    <span class=k>with</span> <span class=n>concurrent</span><span class=o>.</span><span class=n>futures</span><span class=o>.</span><span class=n>ProcessPoolExecutor</span><span class=p>()</span> <span class=k>as</span> <span class=n>executor</span><span class=p>:</span>
<a id=__codelineno-10-28 name=__codelineno-10-28 href=#__codelineno-10-28></a>        <span class=n>futures</span> <span class=o>=</span> <span class=p>{</span><span class=n>executor</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>scan_port</span><span class=p>,</span> <span class=n>ip</span><span class=p>,</span> <span class=n>port</span><span class=p>):</span> <span class=n>port</span> <span class=k>for</span> <span class=n>port</span> <span class=ow>in</span> <span class=n>ports</span><span class=p>}</span>  <span class=c1># 传递 ip 和 port</span>
<a id=__codelineno-10-29 name=__codelineno-10-29 href=#__codelineno-10-29></a>        <span class=k>for</span> <span class=n>future</span> <span class=ow>in</span> <span class=n>concurrent</span><span class=o>.</span><span class=n>futures</span><span class=o>.</span><span class=n>as_completed</span><span class=p>(</span><span class=n>futures</span><span class=p>):</span>
<a id=__codelineno-10-30 name=__codelineno-10-30 href=#__codelineno-10-30></a>            <span class=n>port</span><span class=p>,</span> <span class=n>status</span> <span class=o>=</span> <span class=n>future</span><span class=o>.</span><span class=n>result</span><span class=p>()</span>
<a id=__codelineno-10-31 name=__codelineno-10-31 href=#__codelineno-10-31></a>            <span class=k>if</span> <span class=n>status</span><span class=p>:</span>
<a id=__codelineno-10-32 name=__codelineno-10-32 href=#__codelineno-10-32></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Port </span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2> is open&quot;</span><span class=p>)</span>
<a id=__codelineno-10-33 name=__codelineno-10-33 href=#__codelineno-10-33></a>
<a id=__codelineno-10-34 name=__codelineno-10-34 href=#__codelineno-10-34></a>
<a id=__codelineno-10-35 name=__codelineno-10-35 href=#__codelineno-10-35></a><span class=c1># 使用 进程池 Pool.apply_async 方法执行</span>
<a id=__codelineno-10-36 name=__codelineno-10-36 href=#__codelineno-10-36></a><span class=k>def</span> <span class=nf>pool_apply_async</span><span class=p>():</span>
<a id=__codelineno-10-37 name=__codelineno-10-37 href=#__codelineno-10-37></a>    <span class=k>with</span> <span class=n>Pool</span><span class=p>()</span> <span class=k>as</span> <span class=n>pool</span><span class=p>:</span>
<a id=__codelineno-10-38 name=__codelineno-10-38 href=#__codelineno-10-38></a>        <span class=n>results</span> <span class=o>=</span> <span class=p>[</span><span class=n>pool</span><span class=o>.</span><span class=n>apply_async</span><span class=p>(</span><span class=n>scan_port</span><span class=p>,</span> <span class=p>(</span><span class=n>ip</span><span class=p>,</span> <span class=n>port</span><span class=p>))</span> <span class=k>for</span> <span class=n>port</span> <span class=ow>in</span> <span class=n>ports</span><span class=p>]</span>  <span class=c1># 传递 ip 和 port</span>
<a id=__codelineno-10-39 name=__codelineno-10-39 href=#__codelineno-10-39></a>        <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
<a id=__codelineno-10-40 name=__codelineno-10-40 href=#__codelineno-10-40></a>            <span class=n>port</span><span class=p>,</span> <span class=n>status</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
<a id=__codelineno-10-41 name=__codelineno-10-41 href=#__codelineno-10-41></a>            <span class=k>if</span> <span class=n>status</span><span class=p>:</span>
<a id=__codelineno-10-42 name=__codelineno-10-42 href=#__codelineno-10-42></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Port </span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2> is open&quot;</span><span class=p>)</span>
<a id=__codelineno-10-43 name=__codelineno-10-43 href=#__codelineno-10-43></a>
<a id=__codelineno-10-44 name=__codelineno-10-44 href=#__codelineno-10-44></a>
<a id=__codelineno-10-45 name=__codelineno-10-45 href=#__codelineno-10-45></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
<a id=__codelineno-10-46 name=__codelineno-10-46 href=#__codelineno-10-46></a>    <span class=c1># 全局变量</span>
<a id=__codelineno-10-47 name=__codelineno-10-47 href=#__codelineno-10-47></a>    <span class=n>ip</span> <span class=o>=</span> <span class=s2>&quot;127.0.0.1&quot;</span>
<a id=__codelineno-10-48 name=__codelineno-10-48 href=#__codelineno-10-48></a>    <span class=n>ports</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1024</span><span class=p>)</span>  <span class=c1># 改为 range，从 1 到 1024</span>
<a id=__codelineno-10-49 name=__codelineno-10-49 href=#__codelineno-10-49></a>    <span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-10-50 name=__codelineno-10-50 href=#__codelineno-10-50></a>
<a id=__codelineno-10-51 name=__codelineno-10-51 href=#__codelineno-10-51></a>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-10-52 name=__codelineno-10-52 href=#__codelineno-10-52></a>    <span class=n>multi_process_map_method</span><span class=p>()</span>
<a id=__codelineno-10-53 name=__codelineno-10-53 href=#__codelineno-10-53></a>    <span class=n>map_execution_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
<a id=__codelineno-10-54 name=__codelineno-10-54 href=#__codelineno-10-54></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Execution time using multi_process map method: </span><span class=si>{</span><span class=n>map_execution_time</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2> seconds&quot;</span><span class=p>)</span>
<a id=__codelineno-10-55 name=__codelineno-10-55 href=#__codelineno-10-55></a>
<a id=__codelineno-10-56 name=__codelineno-10-56 href=#__codelineno-10-56></a>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-10-57 name=__codelineno-10-57 href=#__codelineno-10-57></a>    <span class=n>multi_process_submit_method</span><span class=p>()</span>
<a id=__codelineno-10-58 name=__codelineno-10-58 href=#__codelineno-10-58></a>    <span class=n>submit_execution_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
<a id=__codelineno-10-59 name=__codelineno-10-59 href=#__codelineno-10-59></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Execution time using multi_process submit method: </span><span class=si>{</span><span class=n>submit_execution_time</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2> seconds&quot;</span><span class=p>)</span>
<a id=__codelineno-10-60 name=__codelineno-10-60 href=#__codelineno-10-60></a>
<a id=__codelineno-10-61 name=__codelineno-10-61 href=#__codelineno-10-61></a>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-10-62 name=__codelineno-10-62 href=#__codelineno-10-62></a>    <span class=n>pool_apply_async</span><span class=p>()</span>
<a id=__codelineno-10-63 name=__codelineno-10-63 href=#__codelineno-10-63></a>    <span class=n>pool_execution_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
<a id=__codelineno-10-64 name=__codelineno-10-64 href=#__codelineno-10-64></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Execution time using Pool.apply_async method: </span><span class=si>{</span><span class=n>pool_execution_time</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2> seconds&quot;</span><span class=p>)</span>
</code></pre></div> <p>执行结果如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>Port<span class=w> </span><span class=m>135</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>Port<span class=w> </span><span class=m>445</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>Port<span class=w> </span><span class=m>902</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>Port<span class=w> </span><span class=m>912</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>Execution<span class=w> </span><span class=nb>time</span><span class=w> </span>using<span class=w> </span>map<span class=w> </span>method:<span class=w> </span><span class=m>51</span>.90<span class=w> </span>seconds
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>Port<span class=w> </span><span class=m>135</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>Port<span class=w> </span><span class=m>445</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>Port<span class=w> </span><span class=m>902</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>Port<span class=w> </span><span class=m>912</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a>Execution<span class=w> </span><span class=nb>time</span><span class=w> </span>using<span class=w> </span>submit<span class=w> </span>method:<span class=w> </span><span class=m>51</span>.92<span class=w> </span>seconds
<a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a>Port<span class=w> </span><span class=m>135</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a>Port<span class=w> </span><span class=m>445</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a>Port<span class=w> </span><span class=m>902</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a>Port<span class=w> </span><span class=m>912</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a>Execution<span class=w> </span><span class=nb>time</span><span class=w> </span>using<span class=w> </span>Pool.apply_async<span class=w> </span>method:<span class=w> </span><span class=m>51</span>.87<span class=w> </span>seconds
</code></pre></div> <p>multiprocessing 模块使用的是进程池而不是线程池，创建和销毁进程的开销相对较大，导致性能很差。</p> <p>上面代码只是展示使用方法。对于端口扫描 I/O 密集型操作使用多线程才算正确的。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=kn>import</span> <span class=nn>concurrent.futures</span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=kn>import</span> <span class=nn>socket</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=k>def</span> <span class=nf>scan_port</span><span class=p>(</span><span class=n>ip</span><span class=p>,</span> <span class=n>port</span><span class=p>):</span>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>    <span class=n>s</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>    <span class=n>s</span><span class=o>.</span><span class=n>settimeout</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=n>connect_ex</span><span class=p>((</span><span class=n>ip</span><span class=p>,</span> <span class=n>port</span><span class=p>))</span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>    <span class=n>s</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>    <span class=k>return</span> <span class=n>port</span><span class=p>,</span> <span class=n>result</span> <span class=o>==</span> <span class=mi>0</span>  <span class=c1># 返回端口和状态</span>
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>
<a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>
<a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=c1># 使用多进程 concurrent.futures.ThreadPoolExecutor map 方法执行</span>
<a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=k>def</span> <span class=nf>multi_thread_map_method</span><span class=p>():</span>
<a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a>    <span class=k>with</span> <span class=n>concurrent</span><span class=o>.</span><span class=n>futures</span><span class=o>.</span><span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>ports</span><span class=p>))</span> <span class=k>as</span> <span class=n>executor</span><span class=p>:</span>
<a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a>        <span class=n>results</span> <span class=o>=</span> <span class=n>executor</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>scan_port</span><span class=p>,</span> <span class=p>[</span><span class=n>ip</span><span class=p>]</span> <span class=o>*</span> <span class=nb>len</span><span class=p>(</span><span class=n>ports</span><span class=p>),</span> <span class=n>ports</span><span class=p>)</span>  <span class=c1># 传递 ip 和 ports</span>
<a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a>        <span class=k>for</span> <span class=n>port</span><span class=p>,</span> <span class=n>status</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
<a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a>            <span class=k>if</span> <span class=n>status</span><span class=p>:</span>
<a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Port </span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2> is open&quot;</span><span class=p>)</span>
<a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a>
<a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a>
<a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
<a id=__codelineno-12-25 name=__codelineno-12-25 href=#__codelineno-12-25></a>    <span class=c1># 全局变量</span>
<a id=__codelineno-12-26 name=__codelineno-12-26 href=#__codelineno-12-26></a>    <span class=n>ip</span> <span class=o>=</span> <span class=s2>&quot;127.0.0.1&quot;</span>
<a id=__codelineno-12-27 name=__codelineno-12-27 href=#__codelineno-12-27></a>    <span class=n>ports</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1024</span><span class=p>)</span>  <span class=c1># 改为 range，从 1 到 1024</span>
<a id=__codelineno-12-28 name=__codelineno-12-28 href=#__codelineno-12-28></a>    <span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-12-29 name=__codelineno-12-29 href=#__codelineno-12-29></a>
<a id=__codelineno-12-30 name=__codelineno-12-30 href=#__codelineno-12-30></a>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-12-31 name=__codelineno-12-31 href=#__codelineno-12-31></a>    <span class=n>multi_thread_map_method</span><span class=p>()</span>
<a id=__codelineno-12-32 name=__codelineno-12-32 href=#__codelineno-12-32></a>    <span class=n>map_execution_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
<a id=__codelineno-12-33 name=__codelineno-12-33 href=#__codelineno-12-33></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Execution time using multi_thread map method: </span><span class=si>{</span><span class=n>map_execution_time</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2> seconds&quot;</span><span class=p>)</span>
</code></pre></div> <p>执行结果</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>Port<span class=w> </span><span class=m>135</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>Port<span class=w> </span><span class=m>445</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>Port<span class=w> </span><span class=m>902</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>Port<span class=w> </span><span class=m>912</span><span class=w> </span>is<span class=w> </span>open
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>Execution<span class=w> </span><span class=nb>time</span><span class=w> </span>using<span class=w> </span>multi_thread<span class=w> </span>map<span class=w> </span>method:<span class=w> </span><span class=m>1</span>.18<span class=w> </span>seconds
</code></pre></div> <h4 id=进程间通信>进程间通信<a class=headerlink href=#进程间通信 title="Permanent link">&para;</a></h4> <ul> <li>Python 提供了多种进程间通信的方式，例如 Queue、Pipe、Value+Array 等</li> </ul> <p>Queue 和 Pipe 的区别在于</p> <ul> <li>Pipe 常用来在两个进程间通信</li> <li>Queue 用来在多个进程间实现通信。</li> </ul> <h5 id=queue-多进程队列的使用>Queue 多进程队列的使用<a class=headerlink href=#queue-多进程队列的使用 title="Permanent link">&para;</a></h5> <p>Queue 模块可以用来进行线程间的通信，让各个线程之间共享数据。</p> <p>Python 的 Queue 模块提供了同步、线程安全的队列类， 包括 <code>FIFO（先入先出）队列</code> <code>Queue、LIFO（后入先出）队列</code> <code>LifoQueue</code> 和<code>优先级队列 PriorityQueue</code>。</p> <p>这些队列都实现了锁原语，能够在多线程中直接使用。可以使用队列实现线程间的同步。</p> <table> <thead> <tr> <th>方法名</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>Queue()</td> <td>创建一个空的队列</td> </tr> <tr> <td>q.put(item)</td> <td>将 item 放入队列</td> </tr> <tr> <td>q.get()</td> <td>从队列中移除并返回一个 item</td> </tr> <tr> <td>q.empty()</td> <td>如果队列为空，返回 True；否则返回 False</td> </tr> <tr> <td>q.full()</td> <td>如果队列已满，返回 True；否则返回 False</td> </tr> <tr> <td>q.qsize()</td> <td>返回队列中的 item 数量</td> </tr> <tr> <td>q.put_nowait(item)</td> <td>将 item 放入队列，不等待队列可用</td> </tr> <tr> <td>q.get_nowait()</td> <td>从队列中移除并返回一个 item，不等待队列可用</td> </tr> <tr> <td>q.task_done()</td> <td>表示之前入队的任务已经完成</td> </tr> <tr> <td>q.join()</td> <td>阻塞直到队列中所有的 item 都被处理完毕</td> </tr> </tbody> </table> <p>代码示例 1</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=kn>from</span> <span class=nn>multiprocessing</span> <span class=kn>import</span> <span class=n>Process</span><span class=p>,</span> <span class=n>Queue</span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=sd>&#39;&#39;&#39;</span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=sd>2个子进程在队列中进行写入和读取数据，实现进程之间的通信</span>
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=sd>&#39;&#39;&#39;</span>
<a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>
<a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>
<a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=k>def</span> <span class=nf>write</span><span class=p>(</span><span class=n>q</span><span class=p>):</span>
<a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>q</span><span class=o>.</span><span class=n>full</span><span class=p>():</span>
<a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a>            <span class=n>message</span> <span class=o>=</span> <span class=s2>&quot;消息&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
<a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a>            <span class=n>q</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
<a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;写入:</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>message</span><span class=p>))</span>
<a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a>
<a id=__codelineno-14-18 name=__codelineno-14-18 href=#__codelineno-14-18></a>
<a id=__codelineno-14-19 name=__codelineno-14-19 href=#__codelineno-14-19></a><span class=k>def</span> <span class=nf>read</span><span class=p>(</span><span class=n>q</span><span class=p>):</span>
<a id=__codelineno-14-20 name=__codelineno-14-20 href=#__codelineno-14-20></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-14-21 name=__codelineno-14-21 href=#__codelineno-14-21></a>    <span class=k>while</span> <span class=ow>not</span> <span class=n>q</span><span class=o>.</span><span class=n>empty</span><span class=p>():</span>
<a id=__codelineno-14-22 name=__codelineno-14-22 href=#__codelineno-14-22></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;读取:</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>q</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=kc>True</span><span class=p>,</span> <span class=mi>2</span><span class=p>)))</span>
<a id=__codelineno-14-23 name=__codelineno-14-23 href=#__codelineno-14-23></a>
<a id=__codelineno-14-24 name=__codelineno-14-24 href=#__codelineno-14-24></a>
<a id=__codelineno-14-25 name=__codelineno-14-25 href=#__codelineno-14-25></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-14-26 name=__codelineno-14-26 href=#__codelineno-14-26></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;主进程开始&quot;</span><span class=o>.</span><span class=n>center</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=s2>&quot;*&quot;</span><span class=p>))</span>
<a id=__codelineno-14-27 name=__codelineno-14-27 href=#__codelineno-14-27></a>    <span class=n>q</span> <span class=o>=</span> <span class=n>Queue</span><span class=p>()</span>
<a id=__codelineno-14-28 name=__codelineno-14-28 href=#__codelineno-14-28></a>    <span class=n>pw</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>write</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>q</span><span class=p>,))</span>
<a id=__codelineno-14-29 name=__codelineno-14-29 href=#__codelineno-14-29></a>    <span class=n>pr</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>read</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>q</span><span class=p>,))</span>
<a id=__codelineno-14-30 name=__codelineno-14-30 href=#__codelineno-14-30></a>    <span class=n>pw</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-14-31 name=__codelineno-14-31 href=#__codelineno-14-31></a>    <span class=n>pr</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-14-32 name=__codelineno-14-32 href=#__codelineno-14-32></a>    <span class=n>pw</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-14-33 name=__codelineno-14-33 href=#__codelineno-14-33></a>    <span class=n>pr</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-14-34 name=__codelineno-14-34 href=#__codelineno-14-34></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;主进程结束&quot;</span><span class=o>.</span><span class=n>center</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=s2>&quot;*&quot;</span><span class=p>))</span>
</code></pre></div> <p>代码示例 2</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=c1># auther; 18793</span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=c1># Date：2020/2/26 10:55</span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=c1># filename: 进程间通信01.py</span>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=kn>from</span> <span class=nn>multiprocessing</span> <span class=kn>import</span> <span class=n>Process</span><span class=p>,</span> <span class=n>Queue</span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=kn>import</span> <span class=nn>os</span><span class=o>,</span> <span class=nn>time</span><span class=o>,</span> <span class=nn>random</span>
<a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>
<a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>
<a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=c1># 写数据进程执行的代码</span>
<a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=k>def</span> <span class=nf>proc_write</span><span class=p>(</span><span class=n>q</span><span class=p>,</span> <span class=n>urls</span><span class=p>):</span>
<a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Process(</span><span class=si>%s</span><span class=s1>) is writing...&#39;</span> <span class=o>%</span> <span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>())</span>
<a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>    <span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=n>urls</span><span class=p>:</span>
<a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a>        <span class=n>q</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
<a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Put </span><span class=si>%s</span><span class=s1> to queue...&#39;</span> <span class=o>%</span> <span class=n>url</span><span class=p>)</span>
<a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>())</span>
<a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a>
<a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a>
<a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a><span class=c1># 读进程执行的代码</span>
<a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a><span class=k>def</span> <span class=nf>proc_read</span><span class=p>(</span><span class=n>q</span><span class=p>):</span>
<a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Process(</span><span class=si>%s</span><span class=s1>) is reading...&#39;</span> <span class=o>%</span> <span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>())</span>
<a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
<a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a>        <span class=n>url</span> <span class=o>=</span> <span class=n>q</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-15-24 name=__codelineno-15-24 href=#__codelineno-15-24></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Get </span><span class=si>%s</span><span class=s1> from queue.&#39;</span> <span class=o>%</span> <span class=n>url</span><span class=p>)</span>
<a id=__codelineno-15-25 name=__codelineno-15-25 href=#__codelineno-15-25></a>
<a id=__codelineno-15-26 name=__codelineno-15-26 href=#__codelineno-15-26></a>
<a id=__codelineno-15-27 name=__codelineno-15-27 href=#__codelineno-15-27></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-15-28 name=__codelineno-15-28 href=#__codelineno-15-28></a>    <span class=c1># 父进程创建Queue，并传给各个子进程</span>
<a id=__codelineno-15-29 name=__codelineno-15-29 href=#__codelineno-15-29></a>    <span class=n>q</span> <span class=o>=</span> <span class=n>Queue</span><span class=p>()</span>
<a id=__codelineno-15-30 name=__codelineno-15-30 href=#__codelineno-15-30></a>    <span class=n>proc_writer1</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>proc_write</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>q</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;url1&#39;</span><span class=p>,</span> <span class=s1>&#39;url2&#39;</span><span class=p>,</span> <span class=s1>&#39;url3&#39;</span><span class=p>]))</span>
<a id=__codelineno-15-31 name=__codelineno-15-31 href=#__codelineno-15-31></a>    <span class=n>proc_writer2</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>proc_write</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>q</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;url4&#39;</span><span class=p>,</span> <span class=s1>&#39;url5&#39;</span><span class=p>,</span> <span class=s1>&#39;url6&#39;</span><span class=p>]))</span>
<a id=__codelineno-15-32 name=__codelineno-15-32 href=#__codelineno-15-32></a>    <span class=n>proc_reader</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>proc_read</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>q</span><span class=p>,))</span>
<a id=__codelineno-15-33 name=__codelineno-15-33 href=#__codelineno-15-33></a>    <span class=c1># 启动子进程proc_writeer 写入</span>
<a id=__codelineno-15-34 name=__codelineno-15-34 href=#__codelineno-15-34></a>    <span class=n>proc_writer1</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-15-35 name=__codelineno-15-35 href=#__codelineno-15-35></a>    <span class=n>proc_writer2</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-15-36 name=__codelineno-15-36 href=#__codelineno-15-36></a>    <span class=c1># 启动子进程proc_reader,读取</span>
<a id=__codelineno-15-37 name=__codelineno-15-37 href=#__codelineno-15-37></a>    <span class=n>proc_reader</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-15-38 name=__codelineno-15-38 href=#__codelineno-15-38></a>    <span class=c1># 等待子进程proc_writer结束</span>
<a id=__codelineno-15-39 name=__codelineno-15-39 href=#__codelineno-15-39></a>    <span class=n>proc_writer1</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-15-40 name=__codelineno-15-40 href=#__codelineno-15-40></a>    <span class=n>proc_writer2</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-15-41 name=__codelineno-15-41 href=#__codelineno-15-41></a>    <span class=c1># proc_reader进程里是死循环，无法等待其结束，要强行终止</span>
<a id=__codelineno-15-42 name=__codelineno-15-42 href=#__codelineno-15-42></a>    <span class=n>proc_reader</span><span class=o>.</span><span class=n>terminate</span><span class=p>()</span>
<a id=__codelineno-15-43 name=__codelineno-15-43 href=#__codelineno-15-43></a>
<a id=__codelineno-15-44 name=__codelineno-15-44 href=#__codelineno-15-44></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-15-45 name=__codelineno-15-45 href=#__codelineno-15-45></a><span class=sd>Process(10608) is writing...</span>
<a id=__codelineno-15-46 name=__codelineno-15-46 href=#__codelineno-15-46></a><span class=sd>Put url1 to queue...</span>
<a id=__codelineno-15-47 name=__codelineno-15-47 href=#__codelineno-15-47></a><span class=sd>Process(7808) is writing...</span>
<a id=__codelineno-15-48 name=__codelineno-15-48 href=#__codelineno-15-48></a><span class=sd>Put url4 to queue...</span>
<a id=__codelineno-15-49 name=__codelineno-15-49 href=#__codelineno-15-49></a><span class=sd>Process(13840) is reading...</span>
<a id=__codelineno-15-50 name=__codelineno-15-50 href=#__codelineno-15-50></a><span class=sd>Get url1 from queue.</span>
<a id=__codelineno-15-51 name=__codelineno-15-51 href=#__codelineno-15-51></a><span class=sd>Get url4 from queue.</span>
<a id=__codelineno-15-52 name=__codelineno-15-52 href=#__codelineno-15-52></a><span class=sd>Put url5 to queue...</span>
<a id=__codelineno-15-53 name=__codelineno-15-53 href=#__codelineno-15-53></a><span class=sd>Get url5 from queue.</span>
<a id=__codelineno-15-54 name=__codelineno-15-54 href=#__codelineno-15-54></a><span class=sd>Put url2 to queue...</span>
<a id=__codelineno-15-55 name=__codelineno-15-55 href=#__codelineno-15-55></a><span class=sd>Get url2 from queue.</span>
<a id=__codelineno-15-56 name=__codelineno-15-56 href=#__codelineno-15-56></a><span class=sd>Put url6 to queue...</span>
<a id=__codelineno-15-57 name=__codelineno-15-57 href=#__codelineno-15-57></a><span class=sd>Get url6 from queue.</span>
<a id=__codelineno-15-58 name=__codelineno-15-58 href=#__codelineno-15-58></a><span class=sd>Put url3 to queue...</span>
<a id=__codelineno-15-59 name=__codelineno-15-59 href=#__codelineno-15-59></a><span class=sd>Get url3 from queue.</span>
<a id=__codelineno-15-60 name=__codelineno-15-60 href=#__codelineno-15-60></a><span class=sd>&quot;&quot;&quot;</span>
</code></pre></div> <h5 id=pipe-常用来在两个进程间进行通信>Pipe 常用来在两个进程间进行通信<a class=headerlink href=#pipe-常用来在两个进程间进行通信 title="Permanent link">&para;</a></h5> <p>两个进程分别位于管道的两端。 Pipe 方法返回（conn1，conn2）代表一个管道的两个端。</p> <p>Pipe 方法有 duplex 参数，如果 duplex 参数为 True（默认值），那么这个管道是全双工模式，也就是说 conn1 和 conn2 均可收发。</p> <p>若 duplex 为 False，conn1 只负责接收消息，conn2 只负责发送消息。 send 和 recv 方法分别是发送和接收消息的方法。 例如，在全双工模式下，可以调用 conn1.send 发送消息，conn1.recv 接收消息。</p> <p>如果没有消息可接收，recv 方法会一直阻塞。如果管道已经被关闭，那么 recv 方法会抛出 EOFError。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=c1># auther; 18793</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=c1># Date：2020/2/26 11:08</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=c1># filename: sample01.py</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=kn>import</span> <span class=nn>multiprocessing</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=kn>import</span> <span class=nn>random</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=kn>import</span> <span class=nn>time</span><span class=o>,</span> <span class=nn>os</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=k>def</span> <span class=nf>proc_send</span><span class=p>(</span><span class=n>pipe</span><span class=p>,</span> <span class=n>urls</span><span class=p>):</span>
<a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>    <span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=n>urls</span><span class=p>:</span>
<a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Process(</span><span class=si>%s</span><span class=s2>) send :</span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>(),</span> <span class=n>url</span><span class=p>))</span>
<a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a>        <span class=n>pipe</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
<a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>())</span>
<a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a>
<a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a>
<a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=k>def</span> <span class=nf>proc_recv</span><span class=p>(</span><span class=n>pipe</span><span class=p>):</span>
<a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
<a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Process(</span><span class=si>%s</span><span class=s2>) rev:</span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>(),</span> <span class=n>pipe</span><span class=o>.</span><span class=n>recv</span><span class=p>()))</span>
<a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>())</span>
<a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a>
<a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a>
<a id=__codelineno-16-24 name=__codelineno-16-24 href=#__codelineno-16-24></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-16-25 name=__codelineno-16-25 href=#__codelineno-16-25></a>    <span class=n>pipe</span> <span class=o>=</span> <span class=n>multiprocessing</span><span class=o>.</span><span class=n>Pipe</span><span class=p>()</span>
<a id=__codelineno-16-26 name=__codelineno-16-26 href=#__codelineno-16-26></a>    <span class=n>p1</span> <span class=o>=</span> <span class=n>multiprocessing</span><span class=o>.</span><span class=n>Process</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>proc_send</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>pipe</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=p>[</span><span class=s2>&quot;url_&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)]))</span>
<a id=__codelineno-16-27 name=__codelineno-16-27 href=#__codelineno-16-27></a>    <span class=n>p2</span> <span class=o>=</span> <span class=n>multiprocessing</span><span class=o>.</span><span class=n>Process</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>proc_recv</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>pipe</span><span class=p>[</span><span class=mi>1</span><span class=p>],))</span>
<a id=__codelineno-16-28 name=__codelineno-16-28 href=#__codelineno-16-28></a>    <span class=n>p1</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-16-29 name=__codelineno-16-29 href=#__codelineno-16-29></a>    <span class=n>p2</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-16-30 name=__codelineno-16-30 href=#__codelineno-16-30></a>    <span class=n>p1</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-16-31 name=__codelineno-16-31 href=#__codelineno-16-31></a>    <span class=n>p1</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-16-32 name=__codelineno-16-32 href=#__codelineno-16-32></a>    <span class=n>p2</span><span class=o>.</span><span class=n>terminate</span><span class=p>()</span>
<a id=__codelineno-16-33 name=__codelineno-16-33 href=#__codelineno-16-33></a>
<a id=__codelineno-16-34 name=__codelineno-16-34 href=#__codelineno-16-34></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-16-35 name=__codelineno-16-35 href=#__codelineno-16-35></a><span class=sd>Process(17008) send :url_0</span>
<a id=__codelineno-16-36 name=__codelineno-16-36 href=#__codelineno-16-36></a><span class=sd>Process(13264) rev:url_0</span>
<a id=__codelineno-16-37 name=__codelineno-16-37 href=#__codelineno-16-37></a><span class=sd>Process(17008) send :url_1</span>
<a id=__codelineno-16-38 name=__codelineno-16-38 href=#__codelineno-16-38></a><span class=sd>Process(17008) send :url_2</span>
<a id=__codelineno-16-39 name=__codelineno-16-39 href=#__codelineno-16-39></a><span class=sd>Process(13264) rev:url_1</span>
<a id=__codelineno-16-40 name=__codelineno-16-40 href=#__codelineno-16-40></a><span class=sd>Process(17008) send :url_3</span>
<a id=__codelineno-16-41 name=__codelineno-16-41 href=#__codelineno-16-41></a><span class=sd>Process(17008) send :url_4</span>
<a id=__codelineno-16-42 name=__codelineno-16-42 href=#__codelineno-16-42></a><span class=sd>Process(13264) rev:url_2</span>
<a id=__codelineno-16-43 name=__codelineno-16-43 href=#__codelineno-16-43></a><span class=sd>Process(17008) send :url_5</span>
<a id=__codelineno-16-44 name=__codelineno-16-44 href=#__codelineno-16-44></a><span class=sd>Process(13264) rev:url_3</span>
<a id=__codelineno-16-45 name=__codelineno-16-45 href=#__codelineno-16-45></a><span class=sd>Process(17008) send :url_6</span>
<a id=__codelineno-16-46 name=__codelineno-16-46 href=#__codelineno-16-46></a><span class=sd>Process(17008) send :url_7</span>
<a id=__codelineno-16-47 name=__codelineno-16-47 href=#__codelineno-16-47></a><span class=sd>Process(13264) rev:url_4</span>
<a id=__codelineno-16-48 name=__codelineno-16-48 href=#__codelineno-16-48></a><span class=sd>Process(13264) rev:url_5</span>
<a id=__codelineno-16-49 name=__codelineno-16-49 href=#__codelineno-16-49></a><span class=sd>Process(17008) send :url_8</span>
<a id=__codelineno-16-50 name=__codelineno-16-50 href=#__codelineno-16-50></a><span class=sd>Process(17008) send :url_9</span>
<a id=__codelineno-16-51 name=__codelineno-16-51 href=#__codelineno-16-51></a><span class=sd>Process(13264) rev:url_6</span>
<a id=__codelineno-16-52 name=__codelineno-16-52 href=#__codelineno-16-52></a><span class=sd>&quot;&quot;&quot;</span>
</code></pre></div> <h4 id=分布式进程>分布式进程<a class=headerlink href=#分布式进程 title="Permanent link">&para;</a></h4> <p>分布式进程指的是将 Process 进程分布到多台机器上，充分利用多台机器的性能完成复杂的任务。 我们可以将这一点应用到分布式爬虫的开发中。</p> <p>分布式进程在 Python 中依然要用到 multiprocessing 模块。 multiprocessing 模块不但支持多进程，其中 managers 子模块还支持把多进程分布到多台机器上。 可以写一个服务进程作为调度者，将任务分布到其他多个进程中，依靠网络通信进行管理。</p> <p>举个例子：</p> <p>在做爬虫程序时，常常会遇到这样的场景，我们想抓取某个网站的所有图片，如果使用多进程的话， 一般是一个进程负责抓取图片的链接地址，将链接地址存放到 Queue 中， 另外的进程负责从 Queue 中读取链接地址进行下载和存储到本地。 现在把这个过程做成分布式，一台机器上的进程负责抓取链接， 其他机器上的进程负责下载存储。 那么遇到的主要问题是将 Queue 暴露到网络中， 让其他机器进程都可以访问，分布式进程就是将这一个过程进行了封装， 我们可以将这个过程称为本地队列的网络化。</p> <p>分布式进程 要实现上面例子的功能，创建分布式进程需要分为六个步骤：</p> <p>1）建立队列 Queue，用来进行进程间的通信。服务进程创建任务队列 task_queue，用来作为传递任务给任务进程的通道；服务进程创建结果队列 result_queue，作为任务进程完成任务后回复服务进程的通道。在分布式多进程环境下，必须通过由 Queuemanager 获得的 Queue 接口来添加任务。</p> <p>2）把第一步中建立的队列在网络上注册，暴露给其他进程（主机），注册后获得网络队列，相当于本地队列的映像。</p> <p>3）建立一个对象（Queuemanager（BaseManager））实例 manager，绑定端口和验证口令。</p> <p>4）启动第三步中建立的实例，即启动管理 manager，监管信息通道。</p> <p>5）通过管理实例的方法获得通过网络访问的 Queue 对象，即再把网络队列实体化成可以使用的本地队列。</p> <p>6）创建任务到“本地”队列中，自动上传任务到网络队列中，分配给任务进程进行处理。</p> <h5 id=分布式进程案例>分布式进程案例<a class=headerlink href=#分布式进程案例 title="Permanent link">&para;</a></h5> <p>接下来通过程序实现上面的例子（Linux 版），首先编写的是服务进程（taskManager.py），代码如下：</p> <p><code>task_Manager_Linux版.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=c1># auther; 18793</span>
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=c1># Date：2020/2/26 12:50</span>
<a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=c1># filename: task_Manager_Linux版.py</span>
<a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>
<a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=kn>import</span> <span class=nn>random</span><span class=o>,</span> <span class=nn>time</span>
<a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=kn>import</span> <span class=nn>queue</span> <span class=k>as</span> <span class=nn>Queue</span>
<a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=kn>from</span> <span class=nn>multiprocessing.managers</span> <span class=kn>import</span> <span class=n>BaseManager</span>
<a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>
<a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=c1># 实现第一步：建立task_queue和result_queue，用来存放任务和结果</span>
<a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=n>task_queue</span> <span class=o>=</span> <span class=n>Queue</span><span class=o>.</span><span class=n>Queue</span><span class=p>()</span>
<a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=n>result_queue</span> <span class=o>=</span> <span class=n>Queue</span><span class=o>.</span><span class=n>Queue</span><span class=p>()</span>
<a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>
<a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>
<a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=k>class</span> <span class=nc>Queuemanager</span><span class=p>(</span><span class=n>BaseManager</span><span class=p>):</span>
<a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a>    <span class=k>pass</span>
<a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a>
<a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a>
<a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a><span class=c1># 实现第二步：把创建的两个队列注册在网络上，利用register方法，callable参数关联了Queue对象，</span>
<a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a><span class=c1># 将Queue对象在网络中暴露</span>
<a id=__codelineno-17-22 name=__codelineno-17-22 href=#__codelineno-17-22></a><span class=n>Queuemanager</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s1>&#39;get_task_queue&#39;</span><span class=p>,</span> <span class=nb>callable</span><span class=o>=</span><span class=k>lambda</span><span class=p>:</span> <span class=n>task_queue</span><span class=p>)</span>
<a id=__codelineno-17-23 name=__codelineno-17-23 href=#__codelineno-17-23></a><span class=n>Queuemanager</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s1>&#39;get_result_queue&#39;</span><span class=p>,</span> <span class=nb>callable</span><span class=o>=</span><span class=k>lambda</span><span class=p>:</span> <span class=n>result_queue</span><span class=p>)</span>
<a id=__codelineno-17-24 name=__codelineno-17-24 href=#__codelineno-17-24></a><span class=c1># 实现第三步：绑定端口8001，设置验证口令‘qiye’。这个相当于对象的初始化</span>
<a id=__codelineno-17-25 name=__codelineno-17-25 href=#__codelineno-17-25></a><span class=n>manager</span> <span class=o>=</span> <span class=n>Queuemanager</span><span class=p>(</span><span class=n>address</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=mi>8001</span><span class=p>),</span> <span class=n>authkey</span><span class=o>=</span><span class=sa>b</span><span class=s1>&#39;admin#123&#39;</span><span class=p>)</span>
<a id=__codelineno-17-26 name=__codelineno-17-26 href=#__codelineno-17-26></a><span class=c1># 实现第四步：启动管理，监听信息通道</span>
<a id=__codelineno-17-27 name=__codelineno-17-27 href=#__codelineno-17-27></a><span class=n>manager</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-17-28 name=__codelineno-17-28 href=#__codelineno-17-28></a><span class=c1># 实现第五步：通过管理实例的方法获得通过网络访问的Queue对象</span>
<a id=__codelineno-17-29 name=__codelineno-17-29 href=#__codelineno-17-29></a><span class=n>task</span> <span class=o>=</span> <span class=n>manager</span><span class=o>.</span><span class=n>get_task_queue</span><span class=p>()</span>
<a id=__codelineno-17-30 name=__codelineno-17-30 href=#__codelineno-17-30></a><span class=n>result</span> <span class=o>=</span> <span class=n>manager</span><span class=o>.</span><span class=n>get_result_queue</span><span class=p>()</span>
<a id=__codelineno-17-31 name=__codelineno-17-31 href=#__codelineno-17-31></a><span class=c1># 实现第六步：添加任务</span>
<a id=__codelineno-17-32 name=__codelineno-17-32 href=#__codelineno-17-32></a><span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&quot;ImageUrl_&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)]:</span>
<a id=__codelineno-17-33 name=__codelineno-17-33 href=#__codelineno-17-33></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;put task </span><span class=si>%s</span><span class=s1> ...&#39;</span> <span class=o>%</span> <span class=n>url</span><span class=p>)</span>
<a id=__codelineno-17-34 name=__codelineno-17-34 href=#__codelineno-17-34></a>    <span class=n>task</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
<a id=__codelineno-17-35 name=__codelineno-17-35 href=#__codelineno-17-35></a><span class=c1># 获取返回结果</span>
<a id=__codelineno-17-36 name=__codelineno-17-36 href=#__codelineno-17-36></a><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try get result...&#39;</span><span class=p>)</span>
<a id=__codelineno-17-37 name=__codelineno-17-37 href=#__codelineno-17-37></a><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
<a id=__codelineno-17-38 name=__codelineno-17-38 href=#__codelineno-17-38></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;result is </span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>10</span><span class=p>))</span>
<a id=__codelineno-17-39 name=__codelineno-17-39 href=#__codelineno-17-39></a><span class=c1># 关闭管理</span>
<a id=__codelineno-17-40 name=__codelineno-17-40 href=#__codelineno-17-40></a><span class=n>manager</span><span class=o>.</span><span class=n>shutdown</span><span class=p>()</span>
</code></pre></div> <p><code>taskManager_Windows版.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=kn>import</span> <span class=nn>queue</span> <span class=k>as</span> <span class=nn>Queue</span>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=kn>from</span> <span class=nn>multiprocessing.managers</span> <span class=kn>import</span> <span class=n>BaseManager</span>
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=kn>from</span> <span class=nn>multiprocessing</span> <span class=kn>import</span> <span class=n>freeze_support</span>
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=c1># 任务个数</span>
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=n>task_number</span> <span class=o>=</span> <span class=mi>10</span>
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=c1># 定义收发队列</span>
<a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=n>task_queue</span> <span class=o>=</span> <span class=n>Queue</span><span class=o>.</span><span class=n>Queue</span><span class=p>(</span><span class=n>task_number</span><span class=p>)</span>
<a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=n>result_queue</span> <span class=o>=</span> <span class=n>Queue</span><span class=o>.</span><span class=n>Queue</span><span class=p>(</span><span class=n>task_number</span><span class=p>)</span>
<a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>
<a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a>
<a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=k>def</span> <span class=nf>get_task</span><span class=p>():</span>
<a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a>    <span class=k>return</span> <span class=n>task_queue</span>
<a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a>
<a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a>
<a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a><span class=k>def</span> <span class=nf>get_result</span><span class=p>():</span>
<a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a>    <span class=k>return</span> <span class=n>result_queue</span>
<a id=__codelineno-18-19 name=__codelineno-18-19 href=#__codelineno-18-19></a>
<a id=__codelineno-18-20 name=__codelineno-18-20 href=#__codelineno-18-20></a>
<a id=__codelineno-18-21 name=__codelineno-18-21 href=#__codelineno-18-21></a><span class=c1># 创建类似的QueueManager:</span>
<a id=__codelineno-18-22 name=__codelineno-18-22 href=#__codelineno-18-22></a><span class=k>class</span> <span class=nc>QueueManager</span><span class=p>(</span><span class=n>BaseManager</span><span class=p>):</span>
<a id=__codelineno-18-23 name=__codelineno-18-23 href=#__codelineno-18-23></a>    <span class=k>pass</span>
<a id=__codelineno-18-24 name=__codelineno-18-24 href=#__codelineno-18-24></a>
<a id=__codelineno-18-25 name=__codelineno-18-25 href=#__codelineno-18-25></a>
<a id=__codelineno-18-26 name=__codelineno-18-26 href=#__codelineno-18-26></a><span class=k>def</span> <span class=nf>win_run</span><span class=p>():</span>
<a id=__codelineno-18-27 name=__codelineno-18-27 href=#__codelineno-18-27></a>    <span class=c1># windows下绑定调用接口不能使用lambda，所以只能先定义函数再绑定</span>
<a id=__codelineno-18-28 name=__codelineno-18-28 href=#__codelineno-18-28></a>    <span class=n>QueueManager</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s1>&#39;get_task_queue&#39;</span><span class=p>,</span> <span class=nb>callable</span><span class=o>=</span><span class=n>get_task</span><span class=p>)</span>
<a id=__codelineno-18-29 name=__codelineno-18-29 href=#__codelineno-18-29></a>    <span class=n>QueueManager</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s1>&#39;get_result_queue&#39;</span><span class=p>,</span> <span class=nb>callable</span><span class=o>=</span><span class=n>get_result</span><span class=p>)</span>
<a id=__codelineno-18-30 name=__codelineno-18-30 href=#__codelineno-18-30></a>    <span class=c1># 绑定端口并设置验证口令，windows下需要填写ip地址，linux下不填默认为本地</span>
<a id=__codelineno-18-31 name=__codelineno-18-31 href=#__codelineno-18-31></a>    <span class=n>manager</span> <span class=o>=</span> <span class=n>QueueManager</span><span class=p>(</span><span class=n>address</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=mi>8001</span><span class=p>),</span> <span class=n>authkey</span><span class=o>=</span><span class=sa>b</span><span class=s1>&#39;admin#123&#39;</span><span class=p>)</span>
<a id=__codelineno-18-32 name=__codelineno-18-32 href=#__codelineno-18-32></a>    <span class=c1># 启动</span>
<a id=__codelineno-18-33 name=__codelineno-18-33 href=#__codelineno-18-33></a>    <span class=n>manager</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-18-34 name=__codelineno-18-34 href=#__codelineno-18-34></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-18-35 name=__codelineno-18-35 href=#__codelineno-18-35></a>        <span class=c1># 通过网络获取任务队列和结果队列</span>
<a id=__codelineno-18-36 name=__codelineno-18-36 href=#__codelineno-18-36></a>        <span class=n>task</span> <span class=o>=</span> <span class=n>manager</span><span class=o>.</span><span class=n>get_task_queue</span><span class=p>()</span>
<a id=__codelineno-18-37 name=__codelineno-18-37 href=#__codelineno-18-37></a>        <span class=n>result</span> <span class=o>=</span> <span class=n>manager</span><span class=o>.</span><span class=n>get_result_queue</span><span class=p>()</span>
<a id=__codelineno-18-38 name=__codelineno-18-38 href=#__codelineno-18-38></a>        <span class=c1># 添加任务</span>
<a id=__codelineno-18-39 name=__codelineno-18-39 href=#__codelineno-18-39></a>        <span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&quot;ImageUrl_&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)]:</span>
<a id=__codelineno-18-40 name=__codelineno-18-40 href=#__codelineno-18-40></a>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;put task </span><span class=si>%s</span><span class=s1> ...&#39;</span> <span class=o>%</span> <span class=n>url</span><span class=p>)</span>
<a id=__codelineno-18-41 name=__codelineno-18-41 href=#__codelineno-18-41></a>            <span class=n>task</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
<a id=__codelineno-18-42 name=__codelineno-18-42 href=#__codelineno-18-42></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try get result...&#39;</span><span class=p>)</span>
<a id=__codelineno-18-43 name=__codelineno-18-43 href=#__codelineno-18-43></a>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
<a id=__codelineno-18-44 name=__codelineno-18-44 href=#__codelineno-18-44></a>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;result is </span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>10</span><span class=p>))</span>
<a id=__codelineno-18-45 name=__codelineno-18-45 href=#__codelineno-18-45></a>    <span class=k>except</span><span class=p>:</span>
<a id=__codelineno-18-46 name=__codelineno-18-46 href=#__codelineno-18-46></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Manager error&#39;</span><span class=p>)</span>
<a id=__codelineno-18-47 name=__codelineno-18-47 href=#__codelineno-18-47></a>    <span class=k>finally</span><span class=p>:</span>
<a id=__codelineno-18-48 name=__codelineno-18-48 href=#__codelineno-18-48></a>        <span class=c1># 一定要关闭，否则会爆管道未关闭的错误</span>
<a id=__codelineno-18-49 name=__codelineno-18-49 href=#__codelineno-18-49></a>        <span class=n>manager</span><span class=o>.</span><span class=n>shutdown</span><span class=p>()</span>
<a id=__codelineno-18-50 name=__codelineno-18-50 href=#__codelineno-18-50></a>
<a id=__codelineno-18-51 name=__codelineno-18-51 href=#__codelineno-18-51></a>
<a id=__codelineno-18-52 name=__codelineno-18-52 href=#__codelineno-18-52></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-18-53 name=__codelineno-18-53 href=#__codelineno-18-53></a>    <span class=c1># windows下多进程可能会有问题，添加这句可以缓解</span>
<a id=__codelineno-18-54 name=__codelineno-18-54 href=#__codelineno-18-54></a>    <span class=n>freeze_support</span><span class=p>()</span>
<a id=__codelineno-18-55 name=__codelineno-18-55 href=#__codelineno-18-55></a>    <span class=n>win_run</span><span class=p>()</span>
</code></pre></div> <p><code>task_worker.py</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=kn>from</span> <span class=nn>multiprocessing.managers</span> <span class=kn>import</span> <span class=n>BaseManager</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=c1># 创建类似的QueueManager:</span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=k>class</span> <span class=nc>QueueManager</span><span class=p>(</span><span class=n>BaseManager</span><span class=p>):</span>
<a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>    <span class=k>pass</span>
<a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>
<a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>
<a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=c1># 实现第一步：使用QueueManager注册获取Queue的方法名称</span>
<a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=n>QueueManager</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s1>&#39;get_task_queue&#39;</span><span class=p>)</span>
<a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=n>QueueManager</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s1>&#39;get_result_queue&#39;</span><span class=p>)</span>
<a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=c1># 实现第二步：连接到服务器:</span>
<a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=n>server_addr</span> <span class=o>=</span> <span class=s1>&#39;127.0.0.1&#39;</span>
<a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Connect to server </span><span class=si>%s</span><span class=s1>...&#39;</span> <span class=o>%</span> <span class=n>server_addr</span><span class=p>)</span>
<a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a><span class=c1># 端口和验证口令注意保持与服务进程设置的完全一致:</span>
<a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a><span class=n>m</span> <span class=o>=</span> <span class=n>QueueManager</span><span class=p>(</span><span class=n>address</span><span class=o>=</span><span class=p>(</span><span class=n>server_addr</span><span class=p>,</span> <span class=mi>8001</span><span class=p>),</span> <span class=n>authkey</span><span class=o>=</span><span class=sa>b</span><span class=s1>&#39;admin#123&#39;</span><span class=p>)</span>
<a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a><span class=c1># 从网络连接:</span>
<a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a><span class=n>m</span><span class=o>.</span><span class=n>connect</span><span class=p>()</span>
<a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a><span class=c1># 实现第三步：获取Queue的对象:</span>
<a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a><span class=n>task</span> <span class=o>=</span> <span class=n>m</span><span class=o>.</span><span class=n>get_task_queue</span><span class=p>()</span>
<a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a><span class=n>result</span> <span class=o>=</span> <span class=n>m</span><span class=o>.</span><span class=n>get_result_queue</span><span class=p>()</span>
<a id=__codelineno-19-24 name=__codelineno-19-24 href=#__codelineno-19-24></a><span class=c1># 实现第四步：从task队列取任务,并把结果写入result队列:</span>
<a id=__codelineno-19-25 name=__codelineno-19-25 href=#__codelineno-19-25></a><span class=k>while</span> <span class=p>(</span><span class=ow>not</span> <span class=n>task</span><span class=o>.</span><span class=n>empty</span><span class=p>()):</span>
<a id=__codelineno-19-26 name=__codelineno-19-26 href=#__codelineno-19-26></a>    <span class=n>image_url</span> <span class=o>=</span> <span class=n>task</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=kc>True</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
<a id=__codelineno-19-27 name=__codelineno-19-27 href=#__codelineno-19-27></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;run task download </span><span class=si>%s</span><span class=s1>...&#39;</span> <span class=o>%</span> <span class=n>image_url</span><span class=p>)</span>
<a id=__codelineno-19-28 name=__codelineno-19-28 href=#__codelineno-19-28></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-19-29 name=__codelineno-19-29 href=#__codelineno-19-29></a>    <span class=n>result</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%s</span><span class=s1>---&gt;success&#39;</span> <span class=o>%</span> <span class=n>image_url</span><span class=p>)</span>
<a id=__codelineno-19-30 name=__codelineno-19-30 href=#__codelineno-19-30></a><span class=c1># 处理结束:</span>
<a id=__codelineno-19-31 name=__codelineno-19-31 href=#__codelineno-19-31></a><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;worker exit.&#39;</span><span class=p>)</span>
</code></pre></div> <p>执行 taskManager_Windows 版.py 的输出如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_0<span class=w> </span>...
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_1<span class=w> </span>...
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_2<span class=w> </span>...
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_3<span class=w> </span>...
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_4<span class=w> </span>...
<a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_5<span class=w> </span>...
<a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_6<span class=w> </span>...
<a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_7<span class=w> </span>...
<a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_8<span class=w> </span>...
<a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>put<span class=w> </span>task<span class=w> </span>ImageUrl_9<span class=w> </span>...
<a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>try<span class=w> </span>get<span class=w> </span>result...
</code></pre></div> <p>执行 task_worker.py 的输出如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>Connect<span class=w> </span>to<span class=w> </span>server<span class=w> </span><span class=m>127</span>.0.0.1...
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>run<span class=w> </span>task<span class=w> </span>download<span class=w> </span>ImageUrl_0...
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>run<span class=w> </span>task<span class=w> </span>download<span class=w> </span>ImageUrl_1...
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>run<span class=w> </span>task<span class=w> </span>download<span class=w> </span>ImageUrl_2...
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>run<span class=w> </span>task<span class=w> </span>download<span class=w> </span>ImageUrl_3...
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>run<span class=w> </span>task<span class=w> </span>download<span class=w> </span>ImageUrl_4...
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>run<span class=w> </span>task<span class=w> </span>download<span class=w> </span>ImageUrl_5...
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=c1># .......</span>
</code></pre></div> <p>taskManager_Windows 版.py 的输出</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>result<span class=w> </span>is<span class=w> </span>ImageUrl_0---&gt;success
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>result<span class=w> </span>is<span class=w> </span>ImageUrl_1---&gt;success
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>result<span class=w> </span>is<span class=w> </span>ImageUrl_2---&gt;success
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>result<span class=w> </span>is<span class=w> </span>ImageUrl_3---&gt;success
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>result<span class=w> </span>is<span class=w> </span>ImageUrl_4---&gt;success
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>result<span class=w> </span>is<span class=w> </span>ImageUrl_5---&gt;success
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=c1># .....</span>
</code></pre></div> <h3 id=12-多线程>1.2 多线程<a class=headerlink href=#12-多线程 title="Permanent link">&para;</a></h3> <p>线程线程（Thread，有时被称为轻量级进程）跟进程有些相似，不同的是所有线程运行在同一个进程中，共享运行环境。</p> <p>线程有开始、顺序执行和结束 3 部分，有一个自己的指令指针，记录运行到什么地方。</p> <p>线程的运行可能被抢占（中断）或暂时被挂起（睡眠），从而让其他线程运行，这叫作让步。</p> <p>一个进程中的各个线程之间共享同一块数据空间，所以线程之间可以比进程之间更方便地共享数据和相互通信。</p> <p>线程一般是并发执行的。正是由于这种并行和数据共享的机制，使得多个任务的合作变得可能。</p> <p>实际上，在单 CPU 系统中，真正的并发并不可能，每个线程会被安排成每次只运行一小会儿，然后就把 CPU 让出来，让其他线程运行。</p> <p>在进程的整个运行过程中，每个线程都只做自己的事，需要时再跟其他线程共享运行结果。多个线程共同访问同一块数据不是完全没有危险的，由于访问数据的顺序不一样，因此有可能导致数据结果不一致的问题，这叫作竞态条件。大多数线程库都带有一系列同步原语，用于控制线程的执行和数据的访问</p> <p>Python 的标准库提供了两个模块： _thread 和 threading ， _thread 是低级模块， threading 是高级模块，对 _thread 进行了封装。</p> <p>绝大多数情况下，我们只需要使用 threading 这个高级模块。启动一个线程就是把一个函数传入并创建 Thread 实例，然后调用 start() 开始执行：</p> <h4 id=调用-thread-类来创建多线程>调用 Thread 类来创建多线程<a class=headerlink href=#调用-thread-类来创建多线程 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=kn>import</span> <span class=nn>threading</span>
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=c1># 线程体函数</span>
<a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=k>def</span> <span class=nf>thread_bady</span><span class=p>():</span>
<a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>    <span class=c1># 当前线程对象</span>
<a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a>    <span class=n>t</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>current_thread</span><span class=p>()</span>
<a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a>
<a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a>    <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a>        <span class=c1># 当前线程名</span>
<a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;第</span><span class=si>{}</span><span class=s2>次执行线程:</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>t</span><span class=o>.</span><span class=n>name</span><span class=p>))</span>
<a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a>        <span class=c1># 线程休眠，如果不休眠，线程对象t1结束后才会执行线程对象t2线程将</span>
<a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-23-17 name=__codelineno-23-17 href=#__codelineno-23-17></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;线程:</span><span class=si>{}</span><span class=s2>执行完成！&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>t</span><span class=o>.</span><span class=n>name</span><span class=p>))</span>
<a id=__codelineno-23-18 name=__codelineno-23-18 href=#__codelineno-23-18></a>
<a id=__codelineno-23-19 name=__codelineno-23-19 href=#__codelineno-23-19></a>
<a id=__codelineno-23-20 name=__codelineno-23-20 href=#__codelineno-23-20></a><span class=c1># 主函数</span>
<a id=__codelineno-23-21 name=__codelineno-23-21 href=#__codelineno-23-21></a><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
<a id=__codelineno-23-22 name=__codelineno-23-22 href=#__codelineno-23-22></a>    <span class=c1># 创建线程对象t1</span>
<a id=__codelineno-23-23 name=__codelineno-23-23 href=#__codelineno-23-23></a>    <span class=n>t1</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>thread_bady</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;hu_thread&quot;</span><span class=p>)</span>
<a id=__codelineno-23-24 name=__codelineno-23-24 href=#__codelineno-23-24></a>    <span class=c1># 启动线程t1</span>
<a id=__codelineno-23-25 name=__codelineno-23-25 href=#__codelineno-23-25></a>    <span class=n>t1</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-23-26 name=__codelineno-23-26 href=#__codelineno-23-26></a>
<a id=__codelineno-23-27 name=__codelineno-23-27 href=#__codelineno-23-27></a>    <span class=c1># 创建线程对象t2</span>
<a id=__codelineno-23-28 name=__codelineno-23-28 href=#__codelineno-23-28></a>    <span class=n>t2</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>thread_bady</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;xiaojian_thread&quot;</span><span class=p>)</span>
<a id=__codelineno-23-29 name=__codelineno-23-29 href=#__codelineno-23-29></a>    <span class=c1># 启动线程t2</span>
<a id=__codelineno-23-30 name=__codelineno-23-30 href=#__codelineno-23-30></a>    <span class=n>t2</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-23-31 name=__codelineno-23-31 href=#__codelineno-23-31></a>
<a id=__codelineno-23-32 name=__codelineno-23-32 href=#__codelineno-23-32></a>
<a id=__codelineno-23-33 name=__codelineno-23-33 href=#__codelineno-23-33></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-23-34 name=__codelineno-23-34 href=#__codelineno-23-34></a>    <span class=n>main</span><span class=p>()</span>
</code></pre></div> <h4 id=继承-thread-类创建多线程>继承 Thread 类创建多线程<a class=headerlink href=#继承-thread-类创建多线程 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=c1># -*- coding: utf-8 -*-</span>
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=kn>import</span> <span class=nn>threading</span>
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>
<a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=kn>import</span> <span class=nn>threading</span>
<a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>
<a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a>
<a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=k>class</span> <span class=nc>MyThread</span><span class=p>(</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>):</span>
<a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a>        <span class=nb>super</span><span class=p>(</span><span class=n>MyThread</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=n>name</span><span class=p>)</span>
<a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a>
<a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a>    <span class=c1># 线程体函数</span>
<a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a>    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a>        <span class=c1># 当前线程对象</span>
<a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a>        <span class=n>t</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>current_thread</span><span class=p>()</span>
<a id=__codelineno-24-18 name=__codelineno-24-18 href=#__codelineno-24-18></a>        <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-24-19 name=__codelineno-24-19 href=#__codelineno-24-19></a>            <span class=c1># 当前线程名</span>
<a id=__codelineno-24-20 name=__codelineno-24-20 href=#__codelineno-24-20></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;第</span><span class=si>{}</span><span class=s2>次执行线程:</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>t</span><span class=o>.</span><span class=n>name</span><span class=p>))</span>
<a id=__codelineno-24-21 name=__codelineno-24-21 href=#__codelineno-24-21></a>            <span class=c1># 线程休眠</span>
<a id=__codelineno-24-22 name=__codelineno-24-22 href=#__codelineno-24-22></a>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-24-23 name=__codelineno-24-23 href=#__codelineno-24-23></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;线程</span><span class=si>{}</span><span class=s2>执行完毕！&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>t</span><span class=o>.</span><span class=n>name</span><span class=p>))</span>
<a id=__codelineno-24-24 name=__codelineno-24-24 href=#__codelineno-24-24></a>
<a id=__codelineno-24-25 name=__codelineno-24-25 href=#__codelineno-24-25></a>
<a id=__codelineno-24-26 name=__codelineno-24-26 href=#__codelineno-24-26></a><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
<a id=__codelineno-24-27 name=__codelineno-24-27 href=#__codelineno-24-27></a>    <span class=c1># 创建线程对象t1</span>
<a id=__codelineno-24-28 name=__codelineno-24-28 href=#__codelineno-24-28></a>    <span class=n>t1</span> <span class=o>=</span> <span class=n>MyThread</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;t1-thread&quot;</span><span class=p>)</span>
<a id=__codelineno-24-29 name=__codelineno-24-29 href=#__codelineno-24-29></a>    <span class=c1># 启动线程t1</span>
<a id=__codelineno-24-30 name=__codelineno-24-30 href=#__codelineno-24-30></a>    <span class=n>t1</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-24-31 name=__codelineno-24-31 href=#__codelineno-24-31></a>
<a id=__codelineno-24-32 name=__codelineno-24-32 href=#__codelineno-24-32></a>    <span class=c1># 创建线程对象t2</span>
<a id=__codelineno-24-33 name=__codelineno-24-33 href=#__codelineno-24-33></a>    <span class=n>t2</span> <span class=o>=</span> <span class=n>MyThread</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;t2-thread&quot;</span><span class=p>)</span>
<a id=__codelineno-24-34 name=__codelineno-24-34 href=#__codelineno-24-34></a>    <span class=c1># 启动线程t2</span>
<a id=__codelineno-24-35 name=__codelineno-24-35 href=#__codelineno-24-35></a>    <span class=n>t2</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-24-36 name=__codelineno-24-36 href=#__codelineno-24-36></a>
<a id=__codelineno-24-37 name=__codelineno-24-37 href=#__codelineno-24-37></a>
<a id=__codelineno-24-38 name=__codelineno-24-38 href=#__codelineno-24-38></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-24-39 name=__codelineno-24-39 href=#__codelineno-24-39></a>    <span class=n>main</span><span class=p>()</span>
</code></pre></div> <p>执行结果</p> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>第0次执行线程:t1-thread
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>第0次执行线程:t2-thread
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>第1次执行线程:t1-thread
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>第1次执行线程:t2-thread
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>第2次执行线程:t1-thread
<a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>第2次执行线程:t2-thread
<a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a>第3次执行线程:t1-thread
<a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a>第3次执行线程:t2-thread
<a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a>第4次执行线程:t1-thread
<a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a>第4次执行线程:t2-thread
<a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a>线程t1-thread执行完毕！
<a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a>线程t2-thread执行完毕！
</code></pre></div> <ul> <li>演示 demo 属性的作用 后台线程</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=c1># auther; 18793</span>
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=c1># Date：2019/12/21 18:27</span>
<a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=c1># filename: 04.demo属性使用.py</span>
<a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a><span class=kn>import</span> <span class=nn>threading</span>
<a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>
<a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>
<a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a><span class=k>class</span> <span class=nc>myThread</span><span class=p>(</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>):</span>
<a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>mynum</span><span class=p>):</span>
<a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a>        <span class=nb>super</span><span class=p>(</span><span class=n>myThread</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
<a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a>        <span class=bp>self</span><span class=o>.</span><span class=n>mynum</span> <span class=o>=</span> <span class=n>mynum</span>
<a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a>
<a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a>    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>mynum</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>mynum</span> <span class=o>+</span> <span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a>            <span class=nb>print</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>i</span> <span class=o>*</span> <span class=n>i</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;;&quot;</span><span class=p>)</span>
<a id=__codelineno-26-19 name=__codelineno-26-19 href=#__codelineno-26-19></a>
<a id=__codelineno-26-20 name=__codelineno-26-20 href=#__codelineno-26-20></a>
<a id=__codelineno-26-21 name=__codelineno-26-21 href=#__codelineno-26-21></a><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
<a id=__codelineno-26-22 name=__codelineno-26-22 href=#__codelineno-26-22></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-26-23 name=__codelineno-26-23 href=#__codelineno-26-23></a><span class=sd>    main()主函数运行结束时，ma和mb在后台运行，无法输出运行结果</span>
<a id=__codelineno-26-24 name=__codelineno-26-24 href=#__codelineno-26-24></a><span class=sd>    :return:</span>
<a id=__codelineno-26-25 name=__codelineno-26-25 href=#__codelineno-26-25></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-26-26 name=__codelineno-26-26 href=#__codelineno-26-26></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;start............&quot;</span><span class=p>)</span>
<a id=__codelineno-26-27 name=__codelineno-26-27 href=#__codelineno-26-27></a>    <span class=n>ma</span> <span class=o>=</span> <span class=n>myThread</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-26-28 name=__codelineno-26-28 href=#__codelineno-26-28></a>    <span class=n>mb</span> <span class=o>=</span> <span class=n>myThread</span><span class=p>(</span><span class=mi>16</span><span class=p>)</span>
<a id=__codelineno-26-29 name=__codelineno-26-29 href=#__codelineno-26-29></a>    <span class=n>ma</span><span class=o>.</span><span class=n>daemon</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-26-30 name=__codelineno-26-30 href=#__codelineno-26-30></a>    <span class=n>mb</span><span class=o>.</span><span class=n>daemon</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-26-31 name=__codelineno-26-31 href=#__codelineno-26-31></a>    <span class=n>ma</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-26-32 name=__codelineno-26-32 href=#__codelineno-26-32></a>    <span class=n>mb</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-26-33 name=__codelineno-26-33 href=#__codelineno-26-33></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;end...........&quot;</span><span class=p>)</span>
<a id=__codelineno-26-34 name=__codelineno-26-34 href=#__codelineno-26-34></a>
<a id=__codelineno-26-35 name=__codelineno-26-35 href=#__codelineno-26-35></a>
<a id=__codelineno-26-36 name=__codelineno-26-36 href=#__codelineno-26-36></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-26-37 name=__codelineno-26-37 href=#__codelineno-26-37></a>    <span class=n>main</span><span class=p>()</span>
<a id=__codelineno-26-38 name=__codelineno-26-38 href=#__codelineno-26-38></a>
<a id=__codelineno-26-39 name=__codelineno-26-39 href=#__codelineno-26-39></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-26-40 name=__codelineno-26-40 href=#__codelineno-26-40></a><span class=sd>start............</span>
<a id=__codelineno-26-41 name=__codelineno-26-41 href=#__codelineno-26-41></a><span class=sd>end...........</span>
<a id=__codelineno-26-42 name=__codelineno-26-42 href=#__codelineno-26-42></a><span class=sd>&quot;&quot;&quot;</span>
</code></pre></div> <ul> <li>等待线程结束</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=c1># auther; 18793</span>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=c1># Date：2019/6/23 14:37</span>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=c1># filename: 等待线程结束.py</span>
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=sd>join()方法，当前线程t1调用join()方法时，会阻塞当前线程，等到t1线程结束，如果t1线程结束</span>
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=sd>或者等待超时，则当前线程回到活动状态继续执行。</span>
<a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a><span class=sd>join(timeout=None)</span>
<a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=sd>参数timeout 设置超时时间，单位是秒。如果没有设置timeout时间，则可以一直等待</span>
<a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>
<a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=sd>使用join()方法的场景是：一个线程依赖另一个线程的运行结果，所以调用另一个线程的join()方法等待它的运行完成</span>
<a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a><span class=kn>import</span> <span class=nn>threading</span>
<a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a>
<a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a><span class=c1># 共享变量0</span>
<a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a><span class=n>value</span> <span class=o>=</span> <span class=mi>0</span>
<a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a>
<a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a>
<a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a><span class=c1># 线程体函数</span>
<a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a><span class=k>def</span> <span class=nf>thread_body</span><span class=p>():</span>
<a id=__codelineno-27-23 name=__codelineno-27-23 href=#__codelineno-27-23></a>    <span class=k>global</span> <span class=n>value</span>
<a id=__codelineno-27-24 name=__codelineno-27-24 href=#__codelineno-27-24></a>    <span class=c1># 当前线程对象</span>
<a id=__codelineno-27-25 name=__codelineno-27-25 href=#__codelineno-27-25></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;ThreadA 开始.....&quot;</span><span class=p>)</span>
<a id=__codelineno-27-26 name=__codelineno-27-26 href=#__codelineno-27-26></a>    <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>):</span>
<a id=__codelineno-27-27 name=__codelineno-27-27 href=#__codelineno-27-27></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;ThreadA 执行.......&quot;</span><span class=p>)</span>
<a id=__codelineno-27-28 name=__codelineno-27-28 href=#__codelineno-27-28></a>        <span class=n>value</span> <span class=o>+=</span> <span class=mi>1</span>
<a id=__codelineno-27-29 name=__codelineno-27-29 href=#__codelineno-27-29></a>        <span class=c1># 线程休眠</span>
<a id=__codelineno-27-30 name=__codelineno-27-30 href=#__codelineno-27-30></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-27-31 name=__codelineno-27-31 href=#__codelineno-27-31></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;ThreadA 结束.......&quot;</span><span class=p>)</span>
<a id=__codelineno-27-32 name=__codelineno-27-32 href=#__codelineno-27-32></a>
<a id=__codelineno-27-33 name=__codelineno-27-33 href=#__codelineno-27-33></a>
<a id=__codelineno-27-34 name=__codelineno-27-34 href=#__codelineno-27-34></a><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
<a id=__codelineno-27-35 name=__codelineno-27-35 href=#__codelineno-27-35></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;主线程 开始........&quot;</span><span class=p>)</span>
<a id=__codelineno-27-36 name=__codelineno-27-36 href=#__codelineno-27-36></a>    <span class=n>t1</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>thread_body</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;ThreadA&quot;</span><span class=p>)</span>
<a id=__codelineno-27-37 name=__codelineno-27-37 href=#__codelineno-27-37></a>    <span class=c1># 启动线程</span>
<a id=__codelineno-27-38 name=__codelineno-27-38 href=#__codelineno-27-38></a>    <span class=n>t1</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-27-39 name=__codelineno-27-39 href=#__codelineno-27-39></a>    <span class=c1># 主线程被阻塞，等待t1线程结束</span>
<a id=__codelineno-27-40 name=__codelineno-27-40 href=#__codelineno-27-40></a>    <span class=n>t1</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-27-41 name=__codelineno-27-41 href=#__codelineno-27-41></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;value = </span><span class=si>{0}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>value</span><span class=p>))</span>
<a id=__codelineno-27-42 name=__codelineno-27-42 href=#__codelineno-27-42></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;主线程  结束.....&quot;</span><span class=p>)</span>
<a id=__codelineno-27-43 name=__codelineno-27-43 href=#__codelineno-27-43></a>
<a id=__codelineno-27-44 name=__codelineno-27-44 href=#__codelineno-27-44></a>
<a id=__codelineno-27-45 name=__codelineno-27-45 href=#__codelineno-27-45></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-27-46 name=__codelineno-27-46 href=#__codelineno-27-46></a>    <span class=n>main</span><span class=p>()</span>
</code></pre></div> <p>输出信息:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>主线程<span class=w> </span>开始........
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>ThreadA<span class=w> </span>开始.....
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>ThreadA<span class=w> </span>执行.......
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>ThreadA<span class=w> </span>结束.......
<a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>ThreadA<span class=w> </span>执行.......
<a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>ThreadA<span class=w> </span>结束.......
<a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=nv>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>2</span>
<a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>主线程<span class=w>  </span>结束.....
</code></pre></div> <h4 id=什么是互斥锁>什么是互斥锁<a class=headerlink href=#什么是互斥锁 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=c1># threading.Lock()</span>
<a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=c1># 使用互斥锁可以防止多个线程同时读取内存的某一个区域,互斥锁保证了每个线程同一时间只有一个在使用内存资源</span>
<a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>
<a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=sd>从系统的角度来看。锁的作用其实是将多线程变回到单线程，这是以牺牲性能，来换取程序的准确性。</span>
<a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>
<a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=sd>在代码设计中，应该最大化地避免使用锁。即使加了锁，也要让被保护的区域尽量地少，在满足准确性的同时实现性能最大化。</span>
<a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a><span class=sd>在代码中，有“加锁”操作，就一定要有与之对应的“解锁”操作，否则代码失去多线程的优势。</span>
<a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a>
<a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=sd>在Python中，使用threading.RLock类来创建锁。threading.RLock类有两个方法--acquire与release</span>
<a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a>
<a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a><span class=sd>* acquire负责开始对代码进行保护，在acquire之后的代码，都将只允许一个线程进行执行。</span>
<a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a>
<a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a><span class=sd>* release方法用于停止保护（即释放锁资源）。在release之后的代码又恢复到原来的样子，可以被多线程交叉执行。</span>
<a id=__codelineno-29-17 name=__codelineno-29-17 href=#__codelineno-29-17></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-29-18 name=__codelineno-29-18 href=#__codelineno-29-18></a>
<a id=__codelineno-29-19 name=__codelineno-29-19 href=#__codelineno-29-19></a><span class=kn>from</span> <span class=nn>threading</span> <span class=kn>import</span> <span class=n>Thread</span><span class=p>,</span> <span class=n>Lock</span>
<a id=__codelineno-29-20 name=__codelineno-29-20 href=#__codelineno-29-20></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-29-21 name=__codelineno-29-21 href=#__codelineno-29-21></a>
<a id=__codelineno-29-22 name=__codelineno-29-22 href=#__codelineno-29-22></a><span class=sd>&#39;&#39;&#39;</span>
<a id=__codelineno-29-23 name=__codelineno-29-23 href=#__codelineno-29-23></a><span class=sd># 互斥锁的使用</span>
<a id=__codelineno-29-24 name=__codelineno-29-24 href=#__codelineno-29-24></a>
<a id=__codelineno-29-25 name=__codelineno-29-25 href=#__codelineno-29-25></a><span class=sd>#创建锁</span>
<a id=__codelineno-29-26 name=__codelineno-29-26 href=#__codelineno-29-26></a><span class=sd>mutex = threading.Lock()</span>
<a id=__codelineno-29-27 name=__codelineno-29-27 href=#__codelineno-29-27></a>
<a id=__codelineno-29-28 name=__codelineno-29-28 href=#__codelineno-29-28></a><span class=sd>#锁定</span>
<a id=__codelineno-29-29 name=__codelineno-29-29 href=#__codelineno-29-29></a><span class=sd>mutex.acquire([blocking])</span>
<a id=__codelineno-29-30 name=__codelineno-29-30 href=#__codelineno-29-30></a>
<a id=__codelineno-29-31 name=__codelineno-29-31 href=#__codelineno-29-31></a><span class=sd>#释放锁</span>
<a id=__codelineno-29-32 name=__codelineno-29-32 href=#__codelineno-29-32></a><span class=sd>mutex.release()</span>
<a id=__codelineno-29-33 name=__codelineno-29-33 href=#__codelineno-29-33></a>
<a id=__codelineno-29-34 name=__codelineno-29-34 href=#__codelineno-29-34></a><span class=sd>&#39;&#39;&#39;</span>
<a id=__codelineno-29-35 name=__codelineno-29-35 href=#__codelineno-29-35></a><span class=c1># 计数器，总票数</span>
<a id=__codelineno-29-36 name=__codelineno-29-36 href=#__codelineno-29-36></a><span class=n>num</span> <span class=o>=</span> <span class=mi>20</span>
<a id=__codelineno-29-37 name=__codelineno-29-37 href=#__codelineno-29-37></a>
<a id=__codelineno-29-38 name=__codelineno-29-38 href=#__codelineno-29-38></a>
<a id=__codelineno-29-39 name=__codelineno-29-39 href=#__codelineno-29-39></a><span class=k>def</span> <span class=nf>task</span><span class=p>(</span><span class=n>arg</span><span class=p>):</span>
<a id=__codelineno-29-40 name=__codelineno-29-40 href=#__codelineno-29-40></a>    <span class=k>global</span> <span class=n>num</span>       <span class=c1># 使用全局变量</span>
<a id=__codelineno-29-41 name=__codelineno-29-41 href=#__codelineno-29-41></a>    <span class=n>mutex</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>  <span class=c1># 锁定线程，只有1个线程可以抢用</span>
<a id=__codelineno-29-42 name=__codelineno-29-42 href=#__codelineno-29-42></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
<a id=__codelineno-29-43 name=__codelineno-29-43 href=#__codelineno-29-43></a>    <span class=n>num</span> <span class=o>-=</span> <span class=mi>1</span>
<a id=__codelineno-29-44 name=__codelineno-29-44 href=#__codelineno-29-44></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2>号用户【线程】，购买成功，剩余</span><span class=si>{}</span><span class=s2>张电影票&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>arg</span><span class=p>,</span> <span class=n>num</span><span class=p>))</span>
<a id=__codelineno-29-45 name=__codelineno-29-45 href=#__codelineno-29-45></a>    <span class=n>mutex</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>  <span class=c1># 释放，其他线程可以进行操作</span>
<a id=__codelineno-29-46 name=__codelineno-29-46 href=#__codelineno-29-46></a>
<a id=__codelineno-29-47 name=__codelineno-29-47 href=#__codelineno-29-47></a>
<a id=__codelineno-29-48 name=__codelineno-29-48 href=#__codelineno-29-48></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-29-49 name=__codelineno-29-49 href=#__codelineno-29-49></a>    <span class=n>mutex</span> <span class=o>=</span> <span class=n>Lock</span><span class=p>()</span>  <span class=c1># 创建锁</span>
<a id=__codelineno-29-50 name=__codelineno-29-50 href=#__codelineno-29-50></a>    <span class=n>t_l</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-29-51 name=__codelineno-29-51 href=#__codelineno-29-51></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
<a id=__codelineno-29-52 name=__codelineno-29-52 href=#__codelineno-29-52></a>        <span class=n>t</span> <span class=o>=</span> <span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>task</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>i</span><span class=p>,))</span>
<a id=__codelineno-29-53 name=__codelineno-29-53 href=#__codelineno-29-53></a>        <span class=n>t_l</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>
<a id=__codelineno-29-54 name=__codelineno-29-54 href=#__codelineno-29-54></a>        <span class=n>t</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-29-55 name=__codelineno-29-55 href=#__codelineno-29-55></a>
<a id=__codelineno-29-56 name=__codelineno-29-56 href=#__codelineno-29-56></a>    <span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>t_l</span><span class=p>:</span>
<a id=__codelineno-29-57 name=__codelineno-29-57 href=#__codelineno-29-57></a>        <span class=n>t</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-29-58 name=__codelineno-29-58 href=#__codelineno-29-58></a>
<a id=__codelineno-29-59 name=__codelineno-29-59 href=#__codelineno-29-59></a><span class=nb>print</span><span class=p>(</span><span class=s2>&quot;main thread end..!&quot;</span><span class=p>)</span>
<a id=__codelineno-29-60 name=__codelineno-29-60 href=#__codelineno-29-60></a>
<a id=__codelineno-29-61 name=__codelineno-29-61 href=#__codelineno-29-61></a><span class=c1># 0号用户【线程】，购买成功，剩余19张电影票</span>
<a id=__codelineno-29-62 name=__codelineno-29-62 href=#__codelineno-29-62></a><span class=c1># 1号用户【线程】，购买成功，剩余18张电影票</span>
<a id=__codelineno-29-63 name=__codelineno-29-63 href=#__codelineno-29-63></a><span class=c1># 2号用户【线程】，购买成功，剩余17张电影票</span>
<a id=__codelineno-29-64 name=__codelineno-29-64 href=#__codelineno-29-64></a><span class=c1># 3号用户【线程】，购买成功，剩余16张电影票</span>
<a id=__codelineno-29-65 name=__codelineno-29-65 href=#__codelineno-29-65></a><span class=c1># 4号用户【线程】，购买成功，剩余15张电影票</span>
<a id=__codelineno-29-66 name=__codelineno-29-66 href=#__codelineno-29-66></a><span class=c1># 5号用户【线程】，购买成功，剩余14张电影票</span>
<a id=__codelineno-29-67 name=__codelineno-29-67 href=#__codelineno-29-67></a><span class=c1># 6号用户【线程】，购买成功，剩余13张电影票</span>
<a id=__codelineno-29-68 name=__codelineno-29-68 href=#__codelineno-29-68></a><span class=c1># 7号用户【线程】，购买成功，剩余12张电影票</span>
<a id=__codelineno-29-69 name=__codelineno-29-69 href=#__codelineno-29-69></a><span class=c1># 8号用户【线程】，购买成功，剩余11张电影票</span>
<a id=__codelineno-29-70 name=__codelineno-29-70 href=#__codelineno-29-70></a><span class=c1># 9号用户【线程】，购买成功，剩余10张电影票</span>
<a id=__codelineno-29-71 name=__codelineno-29-71 href=#__codelineno-29-71></a><span class=c1># main thread end..!</span>
</code></pre></div> <h4 id=使用线程池提升运行效率>使用线程池提升运行效率<a class=headerlink href=#使用线程池提升运行效率 title="Permanent link">&para;</a></h4> <p>在 python 中使用线程池有两种方式，一种是基于第三方库 threadpool，另一种是基于 python3 新引入的库 <code>concurrent.futures.ThreadPoolExecutor</code>，这里我们介绍一下后一种。</p> <p>concurrent.futures.ThreadPoolExecutor，在提交任务的时候有两种方式，一种是<code>submit()</code>函数，另一种是<code>map()</code>函数，两者的主要区别在于：</p> <p>1.map 可以保证输出的顺序, submit 输出的顺序是乱的。</p> <p>2.如果你要提交的任务的函数是一样的，就可以简化成 map。但是假如提交的任务函数是不一样的，或者执行的过程之可能出现异常（使用 map 执行过程中发现问题会直接抛出错误）就要用到 submit（）。</p> <p>3.submit 和 map 的参数是不同的，submit 每次都需要提交一个目标函数和对应的参数，map 只需要提交一次目标函数，目标函数的参数放在一个迭代器（列表，字典）里就可以。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=c1># filename: 08.使用线程池提升运行效率.py</span>
<a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>
<a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=sd>在需要频繁创建线程的系统中， 一般都会使用线程池技术。原因有两点：</span>
<a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=sd>    1.每一个线程的创建都是需要占用系统资源的， 是一件相对耗时的事情。同样在销毁线程时还需要回收线程资源。</span>
<a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=sd>    线程池技术， 可以省去创建与回收过程中所浪费的系统开销。</span>
<a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a>
<a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=sd>    2.在某些系统中需要为每个子任务来创建对应的线程(例如爬虫系统中的子链接)。</span>
<a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=sd>    这种情况会导致线程数量失控性暴涨， 直到程序崩溃。线程池技术可以很好地固定线程的数量保持程序稳定。</span>
<a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a>
<a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a>
<a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a><span class=sd>实现线程池</span>
<a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a>
<a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a><span class=sd>Python中，使用conncurrent.futures 模块下的ThreadPoolExecutor 类来实现线程池。在实例化时， 会将需要的线程个数传入。</span>
<a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a><span class=sd>系统就会为该线程池初始化相应个数的线程。线程池的使用有两种方式。</span>
<a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a>
<a id=__codelineno-30-19 name=__codelineno-30-19 href=#__codelineno-30-19></a><span class=sd>    * 抢占式： 线程池中的线程执行顺序不固定。该方式使用ThreadPooIExecutor 的submit方法实现。</span>
<a id=__codelineno-30-20 name=__codelineno-30-20 href=#__codelineno-30-20></a>
<a id=__codelineno-30-21 name=__codelineno-30-21 href=#__codelineno-30-21></a><span class=sd>    * 非抢占式： 线程将按照调用的顺序执行。此方式使用ThreadPoolExecutor 的map方法来实现。</span>
<a id=__codelineno-30-22 name=__codelineno-30-22 href=#__codelineno-30-22></a>
<a id=__codelineno-30-23 name=__codelineno-30-23 href=#__codelineno-30-23></a><span class=sd>从使用角度来看： 抢占式更灵活； 非抢占式更严格。</span>
<a id=__codelineno-30-24 name=__codelineno-30-24 href=#__codelineno-30-24></a>
<a id=__codelineno-30-25 name=__codelineno-30-25 href=#__codelineno-30-25></a>
<a id=__codelineno-30-26 name=__codelineno-30-26 href=#__codelineno-30-26></a><span class=sd>· 抢占式， 允许池中线程的处理函数不一样。如执行过程中某个线程出现异常， 也不影响其他线程。</span>
<a id=__codelineno-30-27 name=__codelineno-30-27 href=#__codelineno-30-27></a><span class=sd>· 非抢占式， 要求线程池中的线程必须执行同样的处理函数。而且一旦某个线程出现异常,其他线程也会停止。</span>
<a id=__codelineno-30-28 name=__codelineno-30-28 href=#__codelineno-30-28></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-30-29 name=__codelineno-30-29 href=#__codelineno-30-29></a><span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span>
<a id=__codelineno-30-30 name=__codelineno-30-30 href=#__codelineno-30-30></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-30-31 name=__codelineno-30-31 href=#__codelineno-30-31></a>
<a id=__codelineno-30-32 name=__codelineno-30-32 href=#__codelineno-30-32></a>
<a id=__codelineno-30-33 name=__codelineno-30-33 href=#__codelineno-30-33></a><span class=k>def</span> <span class=nf>printperson</span><span class=p>(</span><span class=n>p</span><span class=p>):</span>
<a id=__codelineno-30-34 name=__codelineno-30-34 href=#__codelineno-30-34></a><span class=w>    </span><span class=sd>&#39;&#39;&#39;</span>
<a id=__codelineno-30-35 name=__codelineno-30-35 href=#__codelineno-30-35></a><span class=sd>    定义线程池处理函数</span>
<a id=__codelineno-30-36 name=__codelineno-30-36 href=#__codelineno-30-36></a><span class=sd>    :param p:</span>
<a id=__codelineno-30-37 name=__codelineno-30-37 href=#__codelineno-30-37></a><span class=sd>    :return:</span>
<a id=__codelineno-30-38 name=__codelineno-30-38 href=#__codelineno-30-38></a><span class=sd>    &#39;&#39;&#39;</span>
<a id=__codelineno-30-39 name=__codelineno-30-39 href=#__codelineno-30-39></a>    <span class=nb>print</span><span class=p>(</span><span class=n>p</span><span class=p>)</span>
<a id=__codelineno-30-40 name=__codelineno-30-40 href=#__codelineno-30-40></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-30-41 name=__codelineno-30-41 href=#__codelineno-30-41></a>
<a id=__codelineno-30-42 name=__codelineno-30-42 href=#__codelineno-30-42></a>
<a id=__codelineno-30-43 name=__codelineno-30-43 href=#__codelineno-30-43></a><span class=n>person</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;hujianli1&quot;</span><span class=p>,</span> <span class=s2>&quot;hujianli2&quot;</span><span class=p>,</span> <span class=s2>&quot;hujianli3&quot;</span><span class=p>]</span>
<a id=__codelineno-30-44 name=__codelineno-30-44 href=#__codelineno-30-44></a>
<a id=__codelineno-30-45 name=__codelineno-30-45 href=#__codelineno-30-45></a><span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-30-46 name=__codelineno-30-46 href=#__codelineno-30-46></a><span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>person</span><span class=p>:</span>
<a id=__codelineno-30-47 name=__codelineno-30-47 href=#__codelineno-30-47></a>    <span class=n>printperson</span><span class=p>(</span><span class=n>p</span><span class=p>)</span>
<a id=__codelineno-30-48 name=__codelineno-30-48 href=#__codelineno-30-48></a>
<a id=__codelineno-30-49 name=__codelineno-30-49 href=#__codelineno-30-49></a><span class=n>end_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-30-50 name=__codelineno-30-50 href=#__codelineno-30-50></a><span class=n>printperson</span><span class=p>(</span><span class=s2>&quot;all spend time :</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>end_time</span> <span class=o>-</span> <span class=n>start_time</span><span class=p>))</span>
<a id=__codelineno-30-51 name=__codelineno-30-51 href=#__codelineno-30-51></a>
<a id=__codelineno-30-52 name=__codelineno-30-52 href=#__codelineno-30-52></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-30-53 name=__codelineno-30-53 href=#__codelineno-30-53></a><span class=sd>hujianli1</span>
<a id=__codelineno-30-54 name=__codelineno-30-54 href=#__codelineno-30-54></a><span class=sd>hujianli2</span>
<a id=__codelineno-30-55 name=__codelineno-30-55 href=#__codelineno-30-55></a><span class=sd>hujianli3</span>
<a id=__codelineno-30-56 name=__codelineno-30-56 href=#__codelineno-30-56></a><span class=sd>all spend time :6.00168251991272</span>
<a id=__codelineno-30-57 name=__codelineno-30-57 href=#__codelineno-30-57></a><span class=sd>&quot;&quot;&quot;</span>
</code></pre></div> <h5 id=实现抢占线程池>实现抢占线程池<a class=headerlink href=#实现抢占线程池 title="Permanent link">&para;</a></h5> <div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=n>start2</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=k>with</span> <span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span> <span class=k>as</span> <span class=n>executor</span><span class=p>:</span>
<a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>    <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>person</span><span class=p>:</span>
<a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>        <span class=n>executor</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>printperson</span><span class=p>,</span> <span class=n>p</span><span class=p>)</span>
<a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=n>end2</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=n>printperson</span><span class=p>(</span><span class=s2>&quot;all spend time :</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>end2</span> <span class=o>-</span> <span class=n>start2</span><span class=p>))</span>
<a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>
<a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=sd>hujianli1</span>
<a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a><span class=sd>hujianli2</span>
<a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a><span class=sd>hujianli3</span>
<a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a><span class=sd>all spend time :2.0018222332000732</span>
<a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a><span class=sd>&quot;&quot;&quot;</span>
</code></pre></div> <h5 id=实现非抢占线程池>实现非抢占线程池<a class=headerlink href=#实现非抢占线程池 title="Permanent link">&para;</a></h5> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=n>start3</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=k>with</span> <span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span> <span class=k>as</span> <span class=n>executorl</span><span class=p>:</span>
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>    <span class=n>executorl</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>printperson</span><span class=p>,</span> <span class=n>person</span><span class=p>)</span>
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=n>end3</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=n>printperson</span><span class=p>(</span><span class=s2>&quot;all spend time :</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>end3</span> <span class=o>-</span> <span class=n>start3</span><span class=p>))</span>
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=sd>hujianli1</span>
<a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=sd>hujianli2</span>
<a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=sd>hujianli3</span>
<a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=sd>all spend time :2.001864433288574</span>
<a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=sd>&quot;&quot;&quot;</span>
</code></pre></div> <p>代码示例</p> <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span>
<a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=kn>from</span> <span class=nn>threading</span> <span class=kn>import</span> <span class=n>Thread</span><span class=p>,</span> <span class=n>currentThread</span>
<a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=kn>from</span> <span class=nn>time</span> <span class=kn>import</span> <span class=n>time</span>
<a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>
<a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>
<a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=k>def</span> <span class=nf>task</span><span class=p>(</span><span class=n>i</span><span class=p>):</span>
<a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> 在执行任务</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>currentThread</span><span class=p>()</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=n>i</span><span class=p>))</span>
<a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>
<a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>
<a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>    <span class=n>pool</span> <span class=o>=</span> <span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>  <span class=c1># 进程池里有4个进程</span>
<a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>20</span><span class=p>):</span>  <span class=c1># 20个任务</span>
<a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a>        <span class=n>pool</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>task</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>  <span class=c1># 进程池里当前执行的任务i，池子里的4个进程一次一次执行任务</span>
</code></pre></div> <p>使用 map()方法启动线程，并收集线程任务的返回值。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=c1># auther; 18793</span>
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=c1># Date：2020/1/14 22:19</span>
<a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=c1># filename: 09-1.线程池02.py</span>
<a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span>
<a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=kn>import</span> <span class=nn>threading</span>
<a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>
<a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a>
<a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a><span class=k>def</span> <span class=nf>action</span><span class=p>(</span><span class=nb>max</span><span class=p>):</span>
<a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a>    <span class=n>my_sum</span> <span class=o>=</span> <span class=mi>0</span>
<a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>max</span><span class=p>):</span>
<a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a>        <span class=nb>print</span><span class=p>(</span><span class=n>threading</span><span class=o>.</span><span class=n>current_thread</span><span class=p>()</span><span class=o>.</span><span class=n>name</span> <span class=o>+</span> <span class=s2>&quot; &quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>))</span>
<a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a>        <span class=n>my_sum</span> <span class=o>+=</span> <span class=mi>1</span>
<a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a>    <span class=k>return</span> <span class=n>my_sum</span>
<a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a>
<a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a>
<a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a><span class=c1># 创建一个包含4个线程的线程池</span>
<a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a><span class=k>with</span> <span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=n>max_workers</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span> <span class=k>as</span> <span class=n>pool</span><span class=p>:</span>
<a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a>    <span class=c1># 使用线程执行map计算</span>
<a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a>    <span class=c1># 后面的元祖有3个元素，因此程序启动了3个线程来执行action函数</span>
<a id=__codelineno-34-23 name=__codelineno-34-23 href=#__codelineno-34-23></a>    <span class=n>results</span> <span class=o>=</span> <span class=n>pool</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>action</span><span class=p>,</span> <span class=p>(</span><span class=mi>50</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>150</span><span class=p>))</span>
<a id=__codelineno-34-24 name=__codelineno-34-24 href=#__codelineno-34-24></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;---------------------------------------------&quot;</span><span class=p>)</span>
<a id=__codelineno-34-25 name=__codelineno-34-25 href=#__codelineno-34-25></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
<a id=__codelineno-34-26 name=__codelineno-34-26 href=#__codelineno-34-26></a>        <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</code></pre></div> <h5 id=线程池实现并发执行命令>线程池实现并发执行命令<a class=headerlink href=#线程池实现并发执行命令 title="Permanent link">&para;</a></h5> <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=k>def</span> <span class=nf>mulit_run</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=n>max_workers</span><span class=p>,</span> <span class=n>args</span><span class=p>):</span>
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=sd>    多线程执行命令</span>
<a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=sd>    :param func:  执行函数</span>
<a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=sd>    :param max_workers: 最多线程数</span>
<a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=sd>    :param args: 可迭代对象</span>
<a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=sd>    :return:</span>
<a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a>    <span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span><span class=p>,</span> <span class=n>wait</span><span class=p>,</span> <span class=n>ALL_COMPLETED</span><span class=p>,</span> <span class=n>FIRST_COMPLETED</span>
<a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a>    <span class=n>executor</span> <span class=o>=</span> <span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=n>max_workers</span><span class=o>=</span><span class=n>max_workers</span><span class=p>)</span>
<a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a>    <span class=n>all_task</span> <span class=o>=</span> <span class=p>[</span><span class=n>executor</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>args</span><span class=p>]</span>
<a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a>    <span class=n>wait</span><span class=p>(</span><span class=n>all_task</span><span class=p>,</span> <span class=n>return_when</span><span class=o>=</span><span class=n>ALL_COMPLETED</span><span class=p>)</span>
</code></pre></div> <p>调用方法</p> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a>mulit_run<span class=o>(</span>run_cmd,<span class=w> </span>len<span class=o>(</span>all_images<span class=o>)</span>,<span class=w> </span><span class=o>[</span><span class=s1>&#39;docker pull %s&#39;</span><span class=w> </span>%<span class=w> </span>i<span class=w> </span><span class=k>for</span><span class=w> </span>i<span class=w> </span><span class=k>in</span><span class=w> </span>set<span class=o>(</span>all_images<span class=o>)])</span>
</code></pre></div> <p>示例：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=kn>import</span> <span class=nn>concurrent.futures</span>
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=kn>import</span> <span class=nn>subprocess</span>
<a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>
<a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=k>def</span> <span class=nf>pull_docker_image</span><span class=p>(</span><span class=n>image_name</span><span class=p>):</span>
<a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>    <span class=n>command</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;docker pull </span><span class=si>{</span><span class=n>image_name</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a>        <span class=c1># 执行命令</span>
<a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>        <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>command</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>check</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a>        <span class=c1># 输出命令执行结果</span>
<a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Successfully pulled image: </span><span class=si>{</span><span class=n>image_name</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Output:&quot;</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
<a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>    <span class=k>except</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>CalledProcessError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a>        <span class=c1># 输出错误信息</span>
<a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Failed to pull image: </span><span class=si>{</span><span class=n>image_name</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Error:&quot;</span><span class=p>,</span> <span class=n>e</span><span class=o>.</span><span class=n>stderr</span><span class=p>)</span>
<a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a>
<a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a><span class=k>def</span> <span class=nf>multi_pull_docker_images</span><span class=p>(</span><span class=n>image_names</span><span class=p>,</span> <span class=n>num_threads</span><span class=p>):</span>
<a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a>    <span class=k>with</span> <span class=n>concurrent</span><span class=o>.</span><span class=n>futures</span><span class=o>.</span><span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=n>max_workers</span><span class=o>=</span><span class=n>num_threads</span><span class=p>)</span> <span class=k>as</span> <span class=n>executor</span><span class=p>:</span>
<a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a>        <span class=c1># 使用map方法并行执行函数</span>
<a id=__codelineno-37-20 name=__codelineno-37-20 href=#__codelineno-37-20></a>        <span class=n>executor</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>pull_docker_image</span><span class=p>,</span> <span class=n>image_names</span><span class=p>)</span>
<a id=__codelineno-37-21 name=__codelineno-37-21 href=#__codelineno-37-21></a>
<a id=__codelineno-37-22 name=__codelineno-37-22 href=#__codelineno-37-22></a><span class=c1># 假设这是你的所有镜像列表</span>
<a id=__codelineno-37-23 name=__codelineno-37-23 href=#__codelineno-37-23></a><span class=n>all_images</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;ubuntu&#39;</span><span class=p>,</span> <span class=s1>&#39;nginx&#39;</span><span class=p>,</span> <span class=s1>&#39;redis&#39;</span><span class=p>,</span> <span class=s1>&#39;mysql&#39;</span><span class=p>,</span> <span class=s1>&#39;mongo&#39;</span><span class=p>]</span>
<a id=__codelineno-37-24 name=__codelineno-37-24 href=#__codelineno-37-24></a>
<a id=__codelineno-37-25 name=__codelineno-37-25 href=#__codelineno-37-25></a><span class=c1># 指定线程数目</span>
<a id=__codelineno-37-26 name=__codelineno-37-26 href=#__codelineno-37-26></a><span class=n>num_threads</span> <span class=o>=</span> <span class=mi>3</span>
<a id=__codelineno-37-27 name=__codelineno-37-27 href=#__codelineno-37-27></a>
<a id=__codelineno-37-28 name=__codelineno-37-28 href=#__codelineno-37-28></a><span class=c1># 批量拉取 Docker 镜像</span>
<a id=__codelineno-37-29 name=__codelineno-37-29 href=#__codelineno-37-29></a><span class=n>multi_pull_docker_images</span><span class=p>(</span><span class=n>all_images</span><span class=p>,</span> <span class=n>num_threads</span><span class=p>)</span>
</code></pre></div> <p>一个扫描 IP 地址的批量 ping 工具</p> <div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=ch>#!/usr/bin/env python</span>
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=kn>import</span> <span class=nn>ipaddress</span>
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=kn>import</span> <span class=nn>argparse</span>
<a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=kn>import</span> <span class=nn>sys</span>
<a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=kn>import</span> <span class=nn>subprocess</span>
<a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a>
<a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=sd>python ip_address-ping.py -dn 192.168.0.0/24</span>
<a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a>
<a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a>
<a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a><span class=k>def</span> <span class=nf>parse_args</span><span class=p>():</span>
<a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a>    <span class=n>parser</span> <span class=o>=</span> <span class=n>argparse</span><span class=o>.</span><span class=n>ArgumentParser</span><span class=p>(</span><span class=n>description</span><span class=o>=</span><span class=s2>&quot;a simple ip_address transfer mask expand client&quot;</span><span class=p>)</span>
<a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a>    <span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span><span class=s2>&quot;-v&quot;</span><span class=p>,</span> <span class=s2>&quot;--version&quot;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s2>&quot;version&quot;</span><span class=p>,</span> <span class=n>version</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%(prog)s</span><span class=s1> 0.1&#39;</span><span class=p>)</span>
<a id=__codelineno-38-16 name=__codelineno-38-16 href=#__codelineno-38-16></a>    <span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span><span class=s1>&#39;-dn&#39;</span><span class=p>,</span> <span class=s1>&#39;--target_net&#39;</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s1>&#39;目标网段&#39;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=nb>str</span><span class=p>)</span>
<a id=__codelineno-38-17 name=__codelineno-38-17 href=#__codelineno-38-17></a>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>len</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
<a id=__codelineno-38-18 name=__codelineno-38-18 href=#__codelineno-38-18></a>        <span class=n>parser</span><span class=o>.</span><span class=n>print_help</span><span class=p>()</span>
<a id=__codelineno-38-19 name=__codelineno-38-19 href=#__codelineno-38-19></a>        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-38-20 name=__codelineno-38-20 href=#__codelineno-38-20></a>    <span class=n>args</span> <span class=o>=</span> <span class=n>parser</span><span class=o>.</span><span class=n>parse_args</span><span class=p>()</span>
<a id=__codelineno-38-21 name=__codelineno-38-21 href=#__codelineno-38-21></a>    <span class=k>return</span> <span class=n>args</span>
<a id=__codelineno-38-22 name=__codelineno-38-22 href=#__codelineno-38-22></a>
<a id=__codelineno-38-23 name=__codelineno-38-23 href=#__codelineno-38-23></a>
<a id=__codelineno-38-24 name=__codelineno-38-24 href=#__codelineno-38-24></a><span class=k>def</span> <span class=nf>get_hosts_from_network</span><span class=p>(</span><span class=n>network_str</span><span class=p>):</span>
<a id=__codelineno-38-25 name=__codelineno-38-25 href=#__codelineno-38-25></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-38-26 name=__codelineno-38-26 href=#__codelineno-38-26></a>        <span class=n>network</span> <span class=o>=</span> <span class=n>ipaddress</span><span class=o>.</span><span class=n>ip_network</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>network_str</span><span class=p>),</span> <span class=n>strict</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<a id=__codelineno-38-27 name=__codelineno-38-27 href=#__codelineno-38-27></a>        <span class=n>hosts</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>network</span><span class=o>.</span><span class=n>hosts</span><span class=p>())</span>
<a id=__codelineno-38-28 name=__codelineno-38-28 href=#__codelineno-38-28></a>        <span class=k>return</span> <span class=p>[</span><span class=nb>str</span><span class=p>(</span><span class=n>host</span><span class=p>)</span> <span class=k>for</span> <span class=n>host</span> <span class=ow>in</span> <span class=n>hosts</span><span class=p>]</span>
<a id=__codelineno-38-29 name=__codelineno-38-29 href=#__codelineno-38-29></a>    <span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-38-30 name=__codelineno-38-30 href=#__codelineno-38-30></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Error: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-38-31 name=__codelineno-38-31 href=#__codelineno-38-31></a>        <span class=k>return</span> <span class=p>[]</span>
<a id=__codelineno-38-32 name=__codelineno-38-32 href=#__codelineno-38-32></a>
<a id=__codelineno-38-33 name=__codelineno-38-33 href=#__codelineno-38-33></a>
<a id=__codelineno-38-34 name=__codelineno-38-34 href=#__codelineno-38-34></a><span class=k>def</span> <span class=nf>ping_host</span><span class=p>(</span><span class=n>ip</span><span class=p>):</span>
<a id=__codelineno-38-35 name=__codelineno-38-35 href=#__codelineno-38-35></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-38-36 name=__codelineno-38-36 href=#__codelineno-38-36></a>        <span class=k>if</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>call</span><span class=p>([</span><span class=s1>&#39;ping&#39;</span><span class=p>,</span> <span class=s1>&#39;-i&#39;</span><span class=p>,</span> <span class=s1>&#39;0.2&#39;</span><span class=p>,</span> <span class=s1>&#39;-c&#39;</span><span class=p>,</span> <span class=s1>&#39;3&#39;</span><span class=p>,</span> <span class=s1>&#39;-W&#39;</span><span class=p>,</span> <span class=s1>&#39;1&#39;</span><span class=p>,</span> <span class=n>ip</span><span class=p>],</span> <span class=n>stdout</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>DEVNULL</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-38-37 name=__codelineno-38-37 href=#__codelineno-38-37></a>            <span class=k>return</span> <span class=n>ip</span>
<a id=__codelineno-38-38 name=__codelineno-38-38 href=#__codelineno-38-38></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-38-39 name=__codelineno-38-39 href=#__codelineno-38-39></a>            <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-38-40 name=__codelineno-38-40 href=#__codelineno-38-40></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-38-41 name=__codelineno-38-41 href=#__codelineno-38-41></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Error while pinging </span><span class=si>{</span><span class=n>ip</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-38-42 name=__codelineno-38-42 href=#__codelineno-38-42></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-38-43 name=__codelineno-38-43 href=#__codelineno-38-43></a>
<a id=__codelineno-38-44 name=__codelineno-38-44 href=#__codelineno-38-44></a>
<a id=__codelineno-38-45 name=__codelineno-38-45 href=#__codelineno-38-45></a><span class=k>def</span> <span class=nf>mulit_run</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=n>max_workers</span><span class=p>,</span> <span class=n>args</span><span class=p>,</span> <span class=n>result_list</span><span class=p>):</span>
<a id=__codelineno-38-46 name=__codelineno-38-46 href=#__codelineno-38-46></a>    <span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span><span class=p>,</span> <span class=n>wait</span><span class=p>,</span> <span class=n>ALL_COMPLETED</span>
<a id=__codelineno-38-47 name=__codelineno-38-47 href=#__codelineno-38-47></a>    <span class=n>executor</span> <span class=o>=</span> <span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=n>max_workers</span><span class=o>=</span><span class=n>max_workers</span><span class=p>)</span>
<a id=__codelineno-38-48 name=__codelineno-38-48 href=#__codelineno-38-48></a>    <span class=n>all_task</span> <span class=o>=</span> <span class=p>[</span><span class=n>executor</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=n>arg</span><span class=p>)</span> <span class=k>for</span> <span class=n>arg</span> <span class=ow>in</span> <span class=n>args</span><span class=p>]</span>
<a id=__codelineno-38-49 name=__codelineno-38-49 href=#__codelineno-38-49></a>    <span class=n>wait</span><span class=p>(</span><span class=n>all_task</span><span class=p>,</span> <span class=n>return_when</span><span class=o>=</span><span class=n>ALL_COMPLETED</span><span class=p>)</span>
<a id=__codelineno-38-50 name=__codelineno-38-50 href=#__codelineno-38-50></a>
<a id=__codelineno-38-51 name=__codelineno-38-51 href=#__codelineno-38-51></a>    <span class=k>for</span> <span class=n>future</span> <span class=ow>in</span> <span class=n>all_task</span><span class=p>:</span>
<a id=__codelineno-38-52 name=__codelineno-38-52 href=#__codelineno-38-52></a>        <span class=n>result</span> <span class=o>=</span> <span class=n>future</span><span class=o>.</span><span class=n>result</span><span class=p>()</span>
<a id=__codelineno-38-53 name=__codelineno-38-53 href=#__codelineno-38-53></a>        <span class=k>if</span> <span class=n>result</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-38-54 name=__codelineno-38-54 href=#__codelineno-38-54></a>            <span class=n>result_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
<a id=__codelineno-38-55 name=__codelineno-38-55 href=#__codelineno-38-55></a>
<a id=__codelineno-38-56 name=__codelineno-38-56 href=#__codelineno-38-56></a>
<a id=__codelineno-38-57 name=__codelineno-38-57 href=#__codelineno-38-57></a><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
<a id=__codelineno-38-58 name=__codelineno-38-58 href=#__codelineno-38-58></a>    <span class=n>args</span> <span class=o>=</span> <span class=n>parse_args</span><span class=p>()</span>
<a id=__codelineno-38-59 name=__codelineno-38-59 href=#__codelineno-38-59></a>    <span class=n>d_net</span> <span class=o>=</span> <span class=n>args</span><span class=o>.</span><span class=n>target_net</span>
<a id=__codelineno-38-60 name=__codelineno-38-60 href=#__codelineno-38-60></a>
<a id=__codelineno-38-61 name=__codelineno-38-61 href=#__codelineno-38-61></a>    <span class=n>hosts</span> <span class=o>=</span> <span class=n>get_hosts_from_network</span><span class=p>(</span><span class=n>d_net</span><span class=p>)</span>
<a id=__codelineno-38-62 name=__codelineno-38-62 href=#__codelineno-38-62></a>
<a id=__codelineno-38-63 name=__codelineno-38-63 href=#__codelineno-38-63></a>    <span class=n>connect_ip</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
<a id=__codelineno-38-64 name=__codelineno-38-64 href=#__codelineno-38-64></a>    <span class=n>max_workers</span> <span class=o>=</span> <span class=mi>10</span>  <span class=c1># 设置最大线程数</span>
<a id=__codelineno-38-65 name=__codelineno-38-65 href=#__codelineno-38-65></a>
<a id=__codelineno-38-66 name=__codelineno-38-66 href=#__codelineno-38-66></a>    <span class=c1># 使用mulit_run函数执行ping命令，并将能ping通的结果存储到connect_ip列表中</span>
<a id=__codelineno-38-67 name=__codelineno-38-67 href=#__codelineno-38-67></a>    <span class=n>mulit_run</span><span class=p>(</span><span class=n>ping_host</span><span class=p>,</span> <span class=n>max_workers</span><span class=p>,</span> <span class=n>hosts</span><span class=p>,</span> <span class=n>connect_ip</span><span class=p>)</span>
<a id=__codelineno-38-68 name=__codelineno-38-68 href=#__codelineno-38-68></a>
<a id=__codelineno-38-69 name=__codelineno-38-69 href=#__codelineno-38-69></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Connectable IPs:&quot;</span><span class=p>,</span> <span class=n>connect_ip</span><span class=p>)</span>
<a id=__codelineno-38-70 name=__codelineno-38-70 href=#__codelineno-38-70></a>
<a id=__codelineno-38-71 name=__codelineno-38-71 href=#__codelineno-38-71></a>
<a id=__codelineno-38-72 name=__codelineno-38-72 href=#__codelineno-38-72></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-38-73 name=__codelineno-38-73 href=#__codelineno-38-73></a>    <span class=n>main</span><span class=p>()</span>
</code></pre></div> <h5 id=参考文献>参考文献<a class=headerlink href=#参考文献 title="Permanent link">&para;</a></h5> <p>python 线程池 ThreadPoolExecutor</p> <ul> <li><a href=https://www.cnblogs.com/goldsunshine/p/16878089.html>https://www.cnblogs.com/goldsunshine/p/16878089.html</a></li> </ul> <p>Python 多线程-线程池 ThreadPoolExecutor</p> <ul> <li><a href=https://www.cnblogs.com/yeyuzhuanjia/p/18286041>https://www.cnblogs.com/yeyuzhuanjia/p/18286041</a></li> </ul> <h2 id=2协程库>2.协程库<a class=headerlink href=#2协程库 title="Permanent link">&para;</a></h2> <h3 id=什么是协程>什么是协程？<a class=headerlink href=#什么是协程 title="Permanent link">&para;</a></h3> <p>协程是在 1963 年被提出的概念，但在最近几年才在某些语言中得到广泛的应用，比如 Lua、Python 等。</p> <p>我们可以认为一个线程是调用某个函数方法，协程可以控制函数方法的执行过程，转向执行其他函数方法，并在适当的时候切换到原来的函数方法中继续执行。</p> <p>Python 中常见的协程模块有 yield、yield from、async/await、asyncio、Gevent 等，只有 Gevent 是第三方模块，其他都是 Python 的内置模块。</p> <p>协程实现的几种方式?</p> <ul> <li>python2.X:利用生成器通过 yield+send 实现协程</li> <li>python3.4:利用 asyncio+yield from 实现协程</li> <li>python3.5:asyncio+async/await(比较熟悉)</li> <li>python3.7:引入了 asyncio.create_task 和 asyncio.run 两个高级接口</li> </ul> <h3 id=yield-与-yield-from>yield 与 yield from<a class=headerlink href=#yield-与-yield-from title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=k>def</span> <span class=nf>consumer</span><span class=p>():</span>
<a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;任务1:接收数据，处理数据&quot;&quot;&quot;</span>
<a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;开始接收数据&#39;</span><span class=p>)</span>
<a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
<a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;等待中……&#39;</span><span class=p>)</span>
<a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a>        <span class=n>x</span> <span class=o>=</span> <span class=k>yield</span>
<a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;处理数据：&#39;</span><span class=p>,</span> <span class=n>x</span><span class=p>)</span>
<a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a>
<a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a><span class=k>def</span> <span class=nf>producer</span><span class=p>():</span>
<a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;任务2:生产数据&quot;&quot;&quot;</span>
<a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a>    <span class=n>c</span> <span class=o>=</span> <span class=n>consumer</span><span class=p>()</span>
<a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a>    <span class=c1># 找到函数consumer()的yield位置</span>
<a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>    <span class=nb>next</span><span class=p>(</span><span class=n>c</span><span class=p>)</span>
<a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>):</span>
<a id=__codelineno-39-15 name=__codelineno-39-15 href=#__codelineno-39-15></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;发送数据：&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>
<a id=__codelineno-39-16 name=__codelineno-39-16 href=#__codelineno-39-16></a>        <span class=c1># 给函数consumer()的yield传值，然后循环给下一个yield传值</span>
<a id=__codelineno-39-17 name=__codelineno-39-17 href=#__codelineno-39-17></a>        <span class=c1># 使用yield的send()方法切换另一个任务</span>
<a id=__codelineno-39-18 name=__codelineno-39-18 href=#__codelineno-39-18></a>        <span class=n>c</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
<a id=__codelineno-39-19 name=__codelineno-39-19 href=#__codelineno-39-19></a>
<a id=__codelineno-39-20 name=__codelineno-39-20 href=#__codelineno-39-20></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-39-21 name=__codelineno-39-21 href=#__codelineno-39-21></a>    <span class=c1># 基于yield保存状态，实现两个任务直接来回切换，即并发的效果</span>
<a id=__codelineno-39-22 name=__codelineno-39-22 href=#__codelineno-39-22></a>    <span class=n>producer</span><span class=p>()</span>
</code></pre></div> <p>yield from 重要的作用是提供了一个数据传输管道。下面通过一个简单的例子加以说明：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=k>def</span> <span class=nf>consumer</span><span class=p>():</span>
<a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;开始接收数据&#39;</span><span class=p>)</span>
<a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
<a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;等待中……&#39;</span><span class=p>)</span>
<a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>        <span class=n>x</span> <span class=o>=</span> <span class=k>yield</span>
<a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;处理数据：&#39;</span><span class=p>,</span> <span class=n>x</span><span class=p>)</span>
<a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a>
<a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=k>def</span> <span class=nf>wraps</span><span class=p>(</span><span class=n>c</span><span class=p>):</span>
<a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
<a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;running&#39;</span><span class=p>)</span>
<a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a>        <span class=k>yield from</span> <span class=n>c</span>
<a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>
<a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a><span class=k>def</span> <span class=nf>producer</span><span class=p>(</span><span class=n>wrap</span><span class=p>):</span>
<a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a>    <span class=nb>next</span><span class=p>(</span><span class=n>wrap</span><span class=p>)</span>
<a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>):</span>
<a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;发送数据：&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>
<a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a>        <span class=n>wrap</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
<a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a>
<a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
<a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a>    <span class=n>c</span> <span class=o>=</span> <span class=n>consumer</span><span class=p>()</span>
<a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a>    <span class=n>wrap</span> <span class=o>=</span> <span class=n>wraps</span><span class=p>(</span><span class=n>c</span><span class=p>)</span>
<a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a>    <span class=n>producer</span><span class=p>(</span><span class=n>wrap</span><span class=p>)</span>
</code></pre></div> <h3 id=异步并发-asyncio-与-asyncawait>异步并发 asyncio 与 async/await<a class=headerlink href=#异步并发-asyncio-与-asyncawait title="Permanent link">&para;</a></h3> <p>asyncio 是 Python 3.4 新加入的标准库，用来做异步 I/O。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=kn>import</span> <span class=nn>asyncio</span>
<a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a>
<a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=nd>@asyncio</span><span class=o>.</span><span class=n>coroutine</span>
<a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=k>def</span> <span class=nf>say_hello</span><span class=p>():</span>
<a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Hello Python!&quot;</span><span class=p>)</span>
<a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a>    <span class=c1># 调用asyncio.sleep(1)，设置延时</span>
<a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a>    <span class=c1># yield from是协程切换执行的函数</span>
<a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a>    <span class=k>yield from</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Hello Django!&quot;</span><span class=p>)</span>
<a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a>
<a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a><span class=c1># 创建EventLoop对象</span>
<a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a><span class=n>loop</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>get_event_loop</span><span class=p>()</span>
<a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a><span class=c1># 执行异步函数say_hello()</span>
<a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a><span class=n>loop</span><span class=o>.</span><span class=n>run_until_complete</span><span class=p>(</span><span class=n>say_hello</span><span class=p>())</span>
<a id=__codelineno-41-15 name=__codelineno-41-15 href=#__codelineno-41-15></a>
<a id=__codelineno-41-16 name=__codelineno-41-16 href=#__codelineno-41-16></a><span class=c1># 执行多个异步函数</span>
<a id=__codelineno-41-17 name=__codelineno-41-17 href=#__codelineno-41-17></a><span class=c1># loop.run_until_complete(asyncio.wait([say_hello(), say_hello()]))</span>
<a id=__codelineno-41-18 name=__codelineno-41-18 href=#__codelineno-41-18></a>
<a id=__codelineno-41-19 name=__codelineno-41-19 href=#__codelineno-41-19></a><span class=c1># 销毁EventLoop对象</span>
<a id=__codelineno-41-20 name=__codelineno-41-20 href=#__codelineno-41-20></a><span class=n>loop</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</code></pre></div> <p>不推荐使用装饰器 asyncio.coroutine，建议改用关键字 async。</p> <p>关键字 async/await 是从 Python 3.5 开始引入的新语法，它主要优化 asyncio.coroutine 的语法，说明如下：</p> <ul> <li>1.将<a class="magiclink magiclink-github magiclink-mention" href=https://github.com/asyncio title="GitHub User: asyncio">@asyncio</a>.coroutine 替换为 async。</li> <li>2.将 yield from 替换为 await。</li> </ul> <p>对上述例子进行改写，代码如下：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=kn>import</span> <span class=nn>asyncio</span>
<a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=kn>import</span> <span class=nn>time</span>
<a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a>
<a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=k>async</span> <span class=k>def</span> <span class=nf>get_times</span><span class=p>():</span>
<a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=w>  </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=sd>  程序在执行异步函数get_times()的时候，当出现延时asyncio.sleep(1)时，程序自动切换并执行另一个异步任务。</span>
<a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=sd>  &quot;&quot;&quot;</span>
<a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>):</span>
<a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;进入等待&#39;</span><span class=p>)</span>
<a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a>        <span class=c1># 设置延时</span>
<a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a>        <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Hello times is &#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>
<a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a>
<a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=k>async</span> <span class=k>def</span> <span class=nf>say_hello</span><span class=p>():</span>
<a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a><span class=w>  </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a><span class=sd>  在异步函数say_hello()中，使用关键字await调用异步函数get_times()</span>
<a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a><span class=sd>  &quot;&quot;&quot;</span>
<a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Hello Python!&quot;</span><span class=p>)</span>
<a id=__codelineno-42-19 name=__codelineno-42-19 href=#__codelineno-42-19></a>    <span class=c1># 调用异步函数get_times()</span>
<a id=__codelineno-42-20 name=__codelineno-42-20 href=#__codelineno-42-20></a>    <span class=k>await</span> <span class=n>get_times</span><span class=p>()</span>
<a id=__codelineno-42-21 name=__codelineno-42-21 href=#__codelineno-42-21></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Hello Django!&quot;</span><span class=p>)</span>
<a id=__codelineno-42-22 name=__codelineno-42-22 href=#__codelineno-42-22></a>
<a id=__codelineno-42-23 name=__codelineno-42-23 href=#__codelineno-42-23></a>
<a id=__codelineno-42-24 name=__codelineno-42-24 href=#__codelineno-42-24></a><span class=n>start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-42-25 name=__codelineno-42-25 href=#__codelineno-42-25></a><span class=c1># 创建EventLoop对象</span>
<a id=__codelineno-42-26 name=__codelineno-42-26 href=#__codelineno-42-26></a><span class=n>loop</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>get_event_loop</span><span class=p>()</span>
<a id=__codelineno-42-27 name=__codelineno-42-27 href=#__codelineno-42-27></a><span class=c1># 执行异步函数say_hello()</span>
<a id=__codelineno-42-28 name=__codelineno-42-28 href=#__codelineno-42-28></a><span class=c1># loop.run_until_complete(say_hello())</span>
<a id=__codelineno-42-29 name=__codelineno-42-29 href=#__codelineno-42-29></a><span class=c1># 执行多个异步函数</span>
<a id=__codelineno-42-30 name=__codelineno-42-30 href=#__codelineno-42-30></a><span class=n>loop</span><span class=o>.</span><span class=n>run_until_complete</span><span class=p>(</span><span class=n>asyncio</span><span class=o>.</span><span class=n>wait</span><span class=p>([</span><span class=n>say_hello</span><span class=p>(),</span> <span class=n>say_hello</span><span class=p>()]))</span>
<a id=__codelineno-42-31 name=__codelineno-42-31 href=#__codelineno-42-31></a><span class=c1># 销毁EventLoop对象</span>
<a id=__codelineno-42-32 name=__codelineno-42-32 href=#__codelineno-42-32></a><span class=n>loop</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-42-33 name=__codelineno-42-33 href=#__codelineno-42-33></a><span class=n>end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<a id=__codelineno-42-34 name=__codelineno-42-34 href=#__codelineno-42-34></a><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;一共耗时：&#39;</span><span class=p>,</span> <span class=n>end</span><span class=o>-</span><span class=n>start</span><span class=p>)</span>
</code></pre></div> <h3 id=什么是-gevent>什么是 gevent?<a class=headerlink href=#什么是-gevent title="Permanent link">&para;</a></h3> <p><code>gevent</code> 是 Python 的一个并发框架，基于 <code>greenlet</code> 实现，使用了 epoll 事件监听机制以及诸多其他优化而变得高效。</p> <p>其基本思想就是一个 <code>greenlet</code> 就是一个协程，当 <code>greenlet</code> 遇到 IO 操作时，比如访问网络，就会自动切换到其他的 <code>greenlet</code>，等待 IO 完成再切换回来继续执行。</p> <p><code>gevent</code> 可以帮我们自动实现这个协程切换的过程。</p> <h3 id=协程的例子>协程的例子<a class=headerlink href=#协程的例子 title="Permanent link">&para;</a></h3> <p>创建一个新的虚拟环境，并在该环境中安装必要的库</p> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a>python3<span class=w> </span>-m<span class=w> </span>venv<span class=w> </span>venv
<a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=nb>source</span><span class=w> </span>venv/bin/activate
<a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a>pip<span class=w> </span>install<span class=w> </span>gevent
</code></pre></div> <p>代码</p> <div class=highlight><pre><span></span><code><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=ch>#!/usr/bin/env python3</span>
<a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=kn>import</span> <span class=nn>gevent</span><span class=o>,</span> <span class=nn>time</span>
<a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a>
<a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a>
<a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=k>def</span> <span class=nf>f1</span><span class=p>():</span>
<a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;function:@@@f1 | NUM: @@@&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>
<a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a>
<a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>        <span class=c1># 此处阻塞，gevent会帮我们切换到其他协程去↓</span>
<a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a>        <span class=n>gevent</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a>
<a id=__codelineno-44-13 name=__codelineno-44-13 href=#__codelineno-44-13></a>
<a id=__codelineno-44-14 name=__codelineno-44-14 href=#__codelineno-44-14></a><span class=k>def</span> <span class=nf>f2</span><span class=p>():</span>
<a id=__codelineno-44-15 name=__codelineno-44-15 href=#__codelineno-44-15></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-44-16 name=__codelineno-44-16 href=#__codelineno-44-16></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;function:@@@f2 | NUM: @@@&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>
<a id=__codelineno-44-17 name=__codelineno-44-17 href=#__codelineno-44-17></a>
<a id=__codelineno-44-18 name=__codelineno-44-18 href=#__codelineno-44-18></a>        <span class=c1># 此处阻塞，gevent会帮我们切换到其他协程去↑</span>
<a id=__codelineno-44-19 name=__codelineno-44-19 href=#__codelineno-44-19></a>        <span class=n>gevent</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-44-20 name=__codelineno-44-20 href=#__codelineno-44-20></a>
<a id=__codelineno-44-21 name=__codelineno-44-21 href=#__codelineno-44-21></a>
<a id=__codelineno-44-22 name=__codelineno-44-22 href=#__codelineno-44-22></a><span class=c1># 创建两个协程对象，分别去执行两个函数</span>
<a id=__codelineno-44-23 name=__codelineno-44-23 href=#__codelineno-44-23></a><span class=n>xc1</span> <span class=o>=</span> <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>f1</span><span class=p>)</span>
<a id=__codelineno-44-24 name=__codelineno-44-24 href=#__codelineno-44-24></a><span class=n>xc2</span> <span class=o>=</span> <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>f2</span><span class=p>)</span>
<a id=__codelineno-44-25 name=__codelineno-44-25 href=#__codelineno-44-25></a>
<a id=__codelineno-44-26 name=__codelineno-44-26 href=#__codelineno-44-26></a><span class=c1># 将协程们交给gevent去执行</span>
<a id=__codelineno-44-27 name=__codelineno-44-27 href=#__codelineno-44-27></a><span class=n>gevent</span><span class=o>.</span><span class=n>joinall</span><span class=p>([</span><span class=n>xc1</span><span class=p>,</span> <span class=n>xc2</span><span class=p>])</span>
</code></pre></div> <p>执行结果：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>0</span>
<a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>0</span>
<a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>1</span>
<a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>1</span>
<a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>2</span>
<a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>2</span>
<a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>3</span>
<a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>3</span>
<a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>4</span>
<a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>4</span>
</code></pre></div> <p>如上，当 <code>gevent</code> 帮我们执行两个协程的时候，首先 xc1 执行到 <code>gevent.sleep(0)</code>时发生阻塞， 此时，<code>gevent</code> 帮我们将切换到 xc2，xc2 执行到 <code>gevent.sleep(0)</code>时又发生了阻塞，此时，gevent 又帮我们将切换到 xc1 去执行。</p> <h3 id=qa>Q&amp;A<a class=headerlink href=#qa title="Permanent link">&para;</a></h3> <h4 id=qgevent-无法捕获的耗时>Q：gevent 无法捕获的耗时<a class=headerlink href=#qgevent-无法捕获的耗时 title="Permanent link">&para;</a></h4> <p>代码:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=ch>#!/usr/bin/env python3</span>
<a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=c1># Copyright: (c)  : @Time 2024/9/18 17:27  @Author  : hjl</span>
<a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a>
<a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a><span class=kn>import</span> <span class=nn>gevent</span><span class=o>,</span> <span class=nn>time</span>
<a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a>
<a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a>
<a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a><span class=k>def</span> <span class=nf>f1</span><span class=p>():</span>
<a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;function:@@@f1 | NUM: @@@&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>
<a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a>
<a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a>        <span class=c1># 注意这里</span>
<a id=__codelineno-46-13 name=__codelineno-46-13 href=#__codelineno-46-13></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
<a id=__codelineno-46-14 name=__codelineno-46-14 href=#__codelineno-46-14></a>
<a id=__codelineno-46-15 name=__codelineno-46-15 href=#__codelineno-46-15></a>
<a id=__codelineno-46-16 name=__codelineno-46-16 href=#__codelineno-46-16></a><span class=k>def</span> <span class=nf>f2</span><span class=p>():</span>
<a id=__codelineno-46-17 name=__codelineno-46-17 href=#__codelineno-46-17></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-46-18 name=__codelineno-46-18 href=#__codelineno-46-18></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;function:@@@f2 | NUM: @@@&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>
<a id=__codelineno-46-19 name=__codelineno-46-19 href=#__codelineno-46-19></a>
<a id=__codelineno-46-20 name=__codelineno-46-20 href=#__codelineno-46-20></a>        <span class=c1># 注意这里</span>
<a id=__codelineno-46-21 name=__codelineno-46-21 href=#__codelineno-46-21></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
<a id=__codelineno-46-22 name=__codelineno-46-22 href=#__codelineno-46-22></a>
<a id=__codelineno-46-23 name=__codelineno-46-23 href=#__codelineno-46-23></a>
<a id=__codelineno-46-24 name=__codelineno-46-24 href=#__codelineno-46-24></a><span class=c1># 创建两个协程对象，分别去执行两个函数</span>
<a id=__codelineno-46-25 name=__codelineno-46-25 href=#__codelineno-46-25></a><span class=n>xc1</span> <span class=o>=</span> <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>f1</span><span class=p>)</span>
<a id=__codelineno-46-26 name=__codelineno-46-26 href=#__codelineno-46-26></a><span class=n>xc2</span> <span class=o>=</span> <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>f2</span><span class=p>)</span>
<a id=__codelineno-46-27 name=__codelineno-46-27 href=#__codelineno-46-27></a>
<a id=__codelineno-46-28 name=__codelineno-46-28 href=#__codelineno-46-28></a><span class=c1># 将协程们交给gevent去执行</span>
<a id=__codelineno-46-29 name=__codelineno-46-29 href=#__codelineno-46-29></a><span class=n>gevent</span><span class=o>.</span><span class=n>joinall</span><span class=p>([</span><span class=n>xc1</span><span class=p>,</span> <span class=n>xc2</span><span class=p>])</span>
</code></pre></div> <p>输出</p> <div class=highlight><pre><span></span><code><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>0</span>
<a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>1</span>
<a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>2</span>
<a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>3</span>
<a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>4</span>
<a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>0</span>
<a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>1</span>
<a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>2</span>
<a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>3</span>
<a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>4</span>
</code></pre></div> <p>如上，你会发现，<code>time.sleep(0.1)</code>耗费的时间，<code>gevent</code> 无法捕捉，导致代码是串行的，虽然我们创建了协程，但是并没有起到异步的作用。</p> <p>怎么办呢？请看下面的解决方案。</p> <h4 id=a猴子补丁>A：猴子补丁<a class=headerlink href=#a猴子补丁 title="Permanent link">&para;</a></h4> <p>对于无法捕获的耗时，gevent 为我们提供了猴子补丁，当我们为我们的程序打了猴子补丁，</p> <p>那么当我们的程序遇到任何耗时的操作，<code>gevent</code> 都会帮我们去自动切换协程，从而实现异步高并发。</p> <p>代码：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=ch>#!/usr/bin/env python3</span>
<a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a><span class=kn>import</span> <span class=nn>gevent</span><span class=o>,</span><span class=nn>time</span>
<a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=kn>from</span> <span class=nn>gevent</span> <span class=kn>import</span> <span class=n>monkey</span><span class=p>;</span><span class=n>monkey</span><span class=o>.</span><span class=n>patch_all</span><span class=p>()</span>
<a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>
<a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a><span class=k>def</span> <span class=nf>f1</span><span class=p>():</span>
<a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;function:@@@f1 | NUM: @@@&#39;</span><span class=p>,</span><span class=n>i</span><span class=p>)</span>
<a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a>
<a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a>        <span class=c1># 注意这里</span>
<a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
<a id=__codelineno-48-12 name=__codelineno-48-12 href=#__codelineno-48-12></a>
<a id=__codelineno-48-13 name=__codelineno-48-13 href=#__codelineno-48-13></a><span class=k>def</span> <span class=nf>f2</span><span class=p>():</span>
<a id=__codelineno-48-14 name=__codelineno-48-14 href=#__codelineno-48-14></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-48-15 name=__codelineno-48-15 href=#__codelineno-48-15></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;function:@@@f2 | NUM: @@@&#39;</span><span class=p>,</span><span class=n>i</span><span class=p>)</span>
<a id=__codelineno-48-16 name=__codelineno-48-16 href=#__codelineno-48-16></a>
<a id=__codelineno-48-17 name=__codelineno-48-17 href=#__codelineno-48-17></a>        <span class=c1># 注意这里</span>
<a id=__codelineno-48-18 name=__codelineno-48-18 href=#__codelineno-48-18></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
<a id=__codelineno-48-19 name=__codelineno-48-19 href=#__codelineno-48-19></a>
<a id=__codelineno-48-20 name=__codelineno-48-20 href=#__codelineno-48-20></a><span class=c1># 创建两个协程对象，分别去执行两个函数</span>
<a id=__codelineno-48-21 name=__codelineno-48-21 href=#__codelineno-48-21></a><span class=n>xc1</span><span class=o>=</span><span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>f1</span><span class=p>)</span>
<a id=__codelineno-48-22 name=__codelineno-48-22 href=#__codelineno-48-22></a><span class=n>xc2</span><span class=o>=</span><span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>f2</span><span class=p>)</span>
<a id=__codelineno-48-23 name=__codelineno-48-23 href=#__codelineno-48-23></a>
<a id=__codelineno-48-24 name=__codelineno-48-24 href=#__codelineno-48-24></a><span class=c1># 将协程们交给gevent去执行</span>
<a id=__codelineno-48-25 name=__codelineno-48-25 href=#__codelineno-48-25></a><span class=n>gevent</span><span class=o>.</span><span class=n>joinall</span><span class=p>([</span><span class=n>xc1</span><span class=p>,</span><span class=n>xc2</span><span class=p>])</span>
</code></pre></div> <p>执行结果：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>0</span>
<a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>0</span>
<a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>1</span>
<a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>1</span>
<a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>2</span>
<a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>2</span>
<a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>3</span>
<a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>3</span>
<a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>4</span>
<a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>4</span>
</code></pre></div> <p>如上，你会发现协程的切换已经实现，问题完美解决。</p> <h3 id=实践>实践<a class=headerlink href=#实践 title="Permanent link">&para;</a></h3> <h4 id=异步-requests-请求>异步 requests 请求<a class=headerlink href=#异步-requests-请求 title="Permanent link">&para;</a></h4> <p>在 HTTP 的异步开发中，猴子补丁要在导入 gevent 之前打，否则会出现异常。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a>pip<span class=w> </span>install<span class=w> </span>requests
</code></pre></div> <p>代码：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=ch>#!/usr/bin/env python3</span>
<a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a><span class=c1># Copyright: (c)  : @Time 2024/9/18 17:32  @Author  : hjl</span>
<a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a>
<a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a><span class=kn>from</span> <span class=nn>gevent</span> <span class=kn>import</span> <span class=n>monkey</span><span class=p>;</span><span class=n>monkey</span><span class=o>.</span><span class=n>patch_all</span><span class=p>()</span>
<a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a><span class=kn>import</span> <span class=nn>gevent</span><span class=o>,</span> <span class=nn>time</span><span class=o>,</span> <span class=nn>requests</span>
<a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a><span class=kn>from</span> <span class=nn>urllib3</span> <span class=kn>import</span> <span class=n>disable_warnings</span>
<a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a>
<a id=__codelineno-51-9 name=__codelineno-51-9 href=#__codelineno-51-9></a><span class=n>disable_warnings</span><span class=p>()</span>
<a id=__codelineno-51-10 name=__codelineno-51-10 href=#__codelineno-51-10></a>
<a id=__codelineno-51-11 name=__codelineno-51-11 href=#__codelineno-51-11></a>
<a id=__codelineno-51-12 name=__codelineno-51-12 href=#__codelineno-51-12></a><span class=k>def</span> <span class=nf>req</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
<a id=__codelineno-51-13 name=__codelineno-51-13 href=#__codelineno-51-13></a>    <span class=n>res</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>verify</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<a id=__codelineno-51-14 name=__codelineno-51-14 href=#__codelineno-51-14></a>    <span class=k>if</span> <span class=n>res</span><span class=p>:</span>
<a id=__codelineno-51-15 name=__codelineno-51-15 href=#__codelineno-51-15></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;URL:</span><span class=si>{}</span><span class=s1> | CODE:</span><span class=si>{}</span><span class=s1>!&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>res</span><span class=o>.</span><span class=n>status_code</span><span class=p>))</span>
<a id=__codelineno-51-16 name=__codelineno-51-16 href=#__codelineno-51-16></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-51-17 name=__codelineno-51-17 href=#__codelineno-51-17></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;URL:</span><span class=si>{}</span><span class=s1> FAILED!&#39;</span><span class=p>)</span>
<a id=__codelineno-51-18 name=__codelineno-51-18 href=#__codelineno-51-18></a>
<a id=__codelineno-51-19 name=__codelineno-51-19 href=#__codelineno-51-19></a>
<a id=__codelineno-51-20 name=__codelineno-51-20 href=#__codelineno-51-20></a><span class=n>xc1</span> <span class=o>=</span> <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>req</span><span class=p>,</span> <span class=s1>&#39;https://www.baidu.com&#39;</span><span class=p>)</span>
<a id=__codelineno-51-21 name=__codelineno-51-21 href=#__codelineno-51-21></a><span class=n>xc2</span> <span class=o>=</span> <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>req</span><span class=p>,</span> <span class=s1>&#39;https://www.gitee.com&#39;</span><span class=p>)</span>
<a id=__codelineno-51-22 name=__codelineno-51-22 href=#__codelineno-51-22></a><span class=n>xc3</span> <span class=o>=</span> <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>req</span><span class=p>,</span> <span class=s1>&#39;https://www.huaweicloud.com&#39;</span><span class=p>)</span>
<a id=__codelineno-51-23 name=__codelineno-51-23 href=#__codelineno-51-23></a>
<a id=__codelineno-51-24 name=__codelineno-51-24 href=#__codelineno-51-24></a><span class=n>gevent</span><span class=o>.</span><span class=n>joinall</span><span class=p>([</span><span class=n>xc1</span><span class=p>,</span> <span class=n>xc2</span><span class=p>,</span> <span class=n>xc3</span><span class=p>])</span>
</code></pre></div> <p>执行结果：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a>URL:https://www.baidu.com<span class=w> </span><span class=p>|</span><span class=w> </span>CODE:200!
<a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>URL:https://www.huaweicloud.com<span class=w> </span><span class=p>|</span><span class=w> </span>CODE:200!
<a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a>URL:https://www.gitee.com<span class=w> </span><span class=p>|</span><span class=w> </span>CODE:200!
</code></pre></div> <h3 id=锁>锁<a class=headerlink href=#锁 title="Permanent link">&para;</a></h3> <h4 id=gevent-锁的使用>gevent 锁的使用<a class=headerlink href=#gevent-锁的使用 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=ch>#!/usr/bin/env python3</span>
<a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a><span class=c1># Copyright: (c)  : @Time 2024/9/18 17:48  @Author  : hjl</span>
<a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=c1># @Author  : hujl</span>
<a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a><span class=c1># 同时允许多个协程操作对象的锁,通过互斥访问,保证资源只在程序上下文被单次使用</span>
<a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a><span class=kn>from</span> <span class=nn>gevent</span> <span class=kn>import</span> <span class=n>sleep</span>
<a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a><span class=kn>from</span> <span class=nn>gevent.pool</span> <span class=kn>import</span> <span class=n>Pool</span>
<a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a><span class=kn>from</span> <span class=nn>gevent.lock</span> <span class=kn>import</span> <span class=n>BoundedSemaphore</span>
<a id=__codelineno-53-9 name=__codelineno-53-9 href=#__codelineno-53-9></a>
<a id=__codelineno-53-10 name=__codelineno-53-10 href=#__codelineno-53-10></a><span class=n>sem</span> <span class=o>=</span> <span class=n>BoundedSemaphore</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>  <span class=c1># 超过2就会阻塞等待</span>
<a id=__codelineno-53-11 name=__codelineno-53-11 href=#__codelineno-53-11></a>
<a id=__codelineno-53-12 name=__codelineno-53-12 href=#__codelineno-53-12></a>
<a id=__codelineno-53-13 name=__codelineno-53-13 href=#__codelineno-53-13></a><span class=k>def</span> <span class=nf>worker1</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
<a id=__codelineno-53-14 name=__codelineno-53-14 href=#__codelineno-53-14></a>    <span class=c1># 获取锁</span>
<a id=__codelineno-53-15 name=__codelineno-53-15 href=#__codelineno-53-15></a>    <span class=n>sem</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>
<a id=__codelineno-53-16 name=__codelineno-53-16 href=#__codelineno-53-16></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Worker </span><span class=si>%i</span><span class=s1> acquired semaphore&#39;</span> <span class=o>%</span> <span class=n>n</span><span class=p>)</span>
<a id=__codelineno-53-17 name=__codelineno-53-17 href=#__codelineno-53-17></a>    <span class=n>sleep</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-53-18 name=__codelineno-53-18 href=#__codelineno-53-18></a>    <span class=c1># 释放锁</span>
<a id=__codelineno-53-19 name=__codelineno-53-19 href=#__codelineno-53-19></a>    <span class=n>sem</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
<a id=__codelineno-53-20 name=__codelineno-53-20 href=#__codelineno-53-20></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Worker </span><span class=si>%i</span><span class=s1> released semaphore&#39;</span> <span class=o>%</span> <span class=n>n</span><span class=p>)</span>
<a id=__codelineno-53-21 name=__codelineno-53-21 href=#__codelineno-53-21></a>
<a id=__codelineno-53-22 name=__codelineno-53-22 href=#__codelineno-53-22></a>
<a id=__codelineno-53-23 name=__codelineno-53-23 href=#__codelineno-53-23></a><span class=k>def</span> <span class=nf>worker2</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
<a id=__codelineno-53-24 name=__codelineno-53-24 href=#__codelineno-53-24></a>    <span class=k>with</span> <span class=n>sem</span><span class=p>:</span>
<a id=__codelineno-53-25 name=__codelineno-53-25 href=#__codelineno-53-25></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Worker </span><span class=si>%i</span><span class=s1> acquired semaphore&#39;</span> <span class=o>%</span> <span class=n>n</span><span class=p>)</span>
<a id=__codelineno-53-26 name=__codelineno-53-26 href=#__codelineno-53-26></a>        <span class=n>sleep</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-53-27 name=__codelineno-53-27 href=#__codelineno-53-27></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Worker </span><span class=si>%i</span><span class=s1> released semaphore&#39;</span> <span class=o>%</span> <span class=n>n</span><span class=p>)</span>
<a id=__codelineno-53-28 name=__codelineno-53-28 href=#__codelineno-53-28></a>
<a id=__codelineno-53-29 name=__codelineno-53-29 href=#__codelineno-53-29></a>
<a id=__codelineno-53-30 name=__codelineno-53-30 href=#__codelineno-53-30></a><span class=n>pool</span> <span class=o>=</span> <span class=n>Pool</span><span class=p>()</span>
<a id=__codelineno-53-31 name=__codelineno-53-31 href=#__codelineno-53-31></a><span class=n>pool</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>worker1</span><span class=p>,</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
<a id=__codelineno-53-32 name=__codelineno-53-32 href=#__codelineno-53-32></a><span class=n>pool</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>worker2</span><span class=p>,</span> <span class=nb>range</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>6</span><span class=p>))</span>
</code></pre></div> <p>执行结果：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a>Worker<span class=w> </span><span class=m>0</span><span class=w> </span>acquired<span class=w> </span>semaphore
<a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>Worker<span class=w> </span><span class=m>1</span><span class=w> </span>acquired<span class=w> </span>semaphore
<a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a>Worker<span class=w> </span><span class=m>0</span><span class=w> </span>released<span class=w> </span>semaphore
<a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a>Worker<span class=w> </span><span class=m>1</span><span class=w> </span>released<span class=w> </span>semaphore
<a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a>Worker<span class=w> </span><span class=m>3</span><span class=w> </span>acquired<span class=w> </span>semaphore
<a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a>Worker<span class=w> </span><span class=m>4</span><span class=w> </span>acquired<span class=w> </span>semaphore
<a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a>Worker<span class=w> </span><span class=m>3</span><span class=w> </span>released<span class=w> </span>semaphore
<a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a>Worker<span class=w> </span><span class=m>4</span><span class=w> </span>released<span class=w> </span>semaphore
<a id=__codelineno-54-9 name=__codelineno-54-9 href=#__codelineno-54-9></a>Worker<span class=w> </span><span class=m>5</span><span class=w> </span>acquired<span class=w> </span>semaphore
<a id=__codelineno-54-10 name=__codelineno-54-10 href=#__codelineno-54-10></a>Worker<span class=w> </span><span class=m>5</span><span class=w> </span>released<span class=w> </span>semaphore
</code></pre></div> <h4 id=gevent-信号量实现的锁>gevent 信号量实现的锁<a class=headerlink href=#gevent-信号量实现的锁 title="Permanent link">&para;</a></h4> <p>代码：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=ch>#!/usr/bin/env python3</span>
<a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a><span class=kn>from</span> <span class=nn>gevent</span> <span class=kn>import</span> <span class=n>monkey</span><span class=p>;</span><span class=n>monkey</span><span class=o>.</span><span class=n>patch_all</span><span class=p>()</span>
<a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class=kn>from</span> <span class=nn>gevent.lock</span> <span class=kn>import</span> <span class=n>Semaphore</span>
<a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a><span class=kn>import</span> <span class=nn>gevent</span><span class=o>,</span><span class=nn>time</span>
<a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a>
<a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a><span class=c1># 信号量设置为1</span>
<a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a><span class=n>s1</span><span class=o>=</span><span class=n>Semaphore</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-55-9 name=__codelineno-55-9 href=#__codelineno-55-9></a>
<a id=__codelineno-55-10 name=__codelineno-55-10 href=#__codelineno-55-10></a><span class=k>def</span> <span class=nf>f1</span><span class=p>():</span>
<a id=__codelineno-55-11 name=__codelineno-55-11 href=#__codelineno-55-11></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-55-12 name=__codelineno-55-12 href=#__codelineno-55-12></a>        <span class=c1># 信号量-1，即拿到锁</span>
<a id=__codelineno-55-13 name=__codelineno-55-13 href=#__codelineno-55-13></a>        <span class=n>s1</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>
<a id=__codelineno-55-14 name=__codelineno-55-14 href=#__codelineno-55-14></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;function:@@@f1 | NUM: @@@&#39;</span><span class=p>,</span><span class=n>i</span><span class=p>)</span>
<a id=__codelineno-55-15 name=__codelineno-55-15 href=#__codelineno-55-15></a>
<a id=__codelineno-55-16 name=__codelineno-55-16 href=#__codelineno-55-16></a>        <span class=c1># 信号量+1，即释放锁</span>
<a id=__codelineno-55-17 name=__codelineno-55-17 href=#__codelineno-55-17></a>        <span class=n>s1</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
<a id=__codelineno-55-18 name=__codelineno-55-18 href=#__codelineno-55-18></a>
<a id=__codelineno-55-19 name=__codelineno-55-19 href=#__codelineno-55-19></a>        <span class=c1># 猴子补丁帮忙识别阻塞</span>
<a id=__codelineno-55-20 name=__codelineno-55-20 href=#__codelineno-55-20></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
<a id=__codelineno-55-21 name=__codelineno-55-21 href=#__codelineno-55-21></a>
<a id=__codelineno-55-22 name=__codelineno-55-22 href=#__codelineno-55-22></a><span class=k>def</span> <span class=nf>f2</span><span class=p>():</span>
<a id=__codelineno-55-23 name=__codelineno-55-23 href=#__codelineno-55-23></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
<a id=__codelineno-55-24 name=__codelineno-55-24 href=#__codelineno-55-24></a>        <span class=c1># 信号量-1，即拿到锁</span>
<a id=__codelineno-55-25 name=__codelineno-55-25 href=#__codelineno-55-25></a>        <span class=n>s1</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>
<a id=__codelineno-55-26 name=__codelineno-55-26 href=#__codelineno-55-26></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;function:@@@f2 | NUM: @@@&#39;</span><span class=p>,</span><span class=n>i</span><span class=p>)</span>
<a id=__codelineno-55-27 name=__codelineno-55-27 href=#__codelineno-55-27></a>
<a id=__codelineno-55-28 name=__codelineno-55-28 href=#__codelineno-55-28></a>        <span class=c1># 信号量+1，即释放锁</span>
<a id=__codelineno-55-29 name=__codelineno-55-29 href=#__codelineno-55-29></a>        <span class=n>s1</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
<a id=__codelineno-55-30 name=__codelineno-55-30 href=#__codelineno-55-30></a>
<a id=__codelineno-55-31 name=__codelineno-55-31 href=#__codelineno-55-31></a>        <span class=c1># 猴子补丁帮忙识别阻塞</span>
<a id=__codelineno-55-32 name=__codelineno-55-32 href=#__codelineno-55-32></a>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.3</span><span class=p>)</span>
<a id=__codelineno-55-33 name=__codelineno-55-33 href=#__codelineno-55-33></a>
<a id=__codelineno-55-34 name=__codelineno-55-34 href=#__codelineno-55-34></a><span class=c1># 创建两个协程对象，分别去执行两个函数</span>
<a id=__codelineno-55-35 name=__codelineno-55-35 href=#__codelineno-55-35></a><span class=n>xc1</span><span class=o>=</span><span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>f1</span><span class=p>)</span>
<a id=__codelineno-55-36 name=__codelineno-55-36 href=#__codelineno-55-36></a><span class=n>xc2</span><span class=o>=</span><span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>f2</span><span class=p>)</span>
<a id=__codelineno-55-37 name=__codelineno-55-37 href=#__codelineno-55-37></a>
<a id=__codelineno-55-38 name=__codelineno-55-38 href=#__codelineno-55-38></a><span class=c1># 将协程们交给gevent去执行</span>
<a id=__codelineno-55-39 name=__codelineno-55-39 href=#__codelineno-55-39></a><span class=n>gevent</span><span class=o>.</span><span class=n>joinall</span><span class=p>([</span><span class=n>xc1</span><span class=p>,</span><span class=n>xc2</span><span class=p>])</span>
</code></pre></div> <p>执行结果：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>0</span>
<a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>0</span>
<a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>1</span>
<a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>2</span>
<a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>1</span>
<a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>3</span>
<a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a><span class=k>function</span>:@@@f1<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>4</span>
<a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>2</span>
<a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>3</span>
<a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a><span class=k>function</span>:@@@f2<span class=w> </span><span class=p>|</span><span class=w> </span>NUM:<span class=w> </span>@@@<span class=w> </span><span class=m>4</span>
</code></pre></div> <p>如上，可以看到，gevent 可以自动处理锁和阻塞。</p> <p>按阻塞规律，f1 和 f2 会交替执行，但是加上阻塞时间，</p> <p>因为 f2 的阻塞时间是 f1 的 3 倍，所以前 6 条打印中，f1 执行的次数是 f2 的三倍，即 <code>gevent</code> 可以自动判断和处理阻塞和锁同时存在的情况。</p> <h3 id=事件>事件<a class=headerlink href=#事件 title="Permanent link">&para;</a></h3> <h4 id=event-阻塞事件>Event 阻塞事件<a class=headerlink href=#event-阻塞事件 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=ch>#!/usr/bin/env python3</span>
<a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=c1># Event 阻塞事件</span>
<a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=kn>import</span> <span class=nn>gevent</span>
<a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=kn>from</span> <span class=nn>gevent.event</span> <span class=kn>import</span> <span class=n>Event</span>
<a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a>
<a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a><span class=n>evt</span> <span class=o>=</span> <span class=n>Event</span><span class=p>()</span>
<a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a>
<a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a>
<a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a><span class=k>def</span> <span class=nf>setter</span><span class=p>():</span>
<a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a><span class=w>    </span><span class=sd>&#39;&#39;&#39;After 3 seconds, wake all threads waiting on the value of evt&#39;&#39;&#39;</span>
<a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;A: Hey wait for me, I have to do something&#39;</span><span class=p>)</span>
<a id=__codelineno-57-13 name=__codelineno-57-13 href=#__codelineno-57-13></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
<a id=__codelineno-57-14 name=__codelineno-57-14 href=#__codelineno-57-14></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Ok, I&#39;m done&quot;</span><span class=p>)</span>
<a id=__codelineno-57-15 name=__codelineno-57-15 href=#__codelineno-57-15></a>    <span class=n>evt</span><span class=o>.</span><span class=n>set</span><span class=p>()</span>  <span class=c1># 表示事件完成</span>
<a id=__codelineno-57-16 name=__codelineno-57-16 href=#__codelineno-57-16></a>
<a id=__codelineno-57-17 name=__codelineno-57-17 href=#__codelineno-57-17></a>
<a id=__codelineno-57-18 name=__codelineno-57-18 href=#__codelineno-57-18></a><span class=k>def</span> <span class=nf>waiter</span><span class=p>():</span>
<a id=__codelineno-57-19 name=__codelineno-57-19 href=#__codelineno-57-19></a><span class=w>    </span><span class=sd>&#39;&#39;&#39;After 3 seconds the get call will unblock&#39;&#39;&#39;</span>
<a id=__codelineno-57-20 name=__codelineno-57-20 href=#__codelineno-57-20></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;I&#39;ll wait for you&quot;</span><span class=p>)</span>
<a id=__codelineno-57-21 name=__codelineno-57-21 href=#__codelineno-57-21></a>    <span class=n>evt</span><span class=o>.</span><span class=n>wait</span><span class=p>()</span>  <span class=c1># 阻塞等待事件完成</span>
<a id=__codelineno-57-22 name=__codelineno-57-22 href=#__codelineno-57-22></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;It&#39;s about time&quot;</span><span class=p>)</span>
<a id=__codelineno-57-23 name=__codelineno-57-23 href=#__codelineno-57-23></a>
<a id=__codelineno-57-24 name=__codelineno-57-24 href=#__codelineno-57-24></a>
<a id=__codelineno-57-25 name=__codelineno-57-25 href=#__codelineno-57-25></a><span class=n>gevent</span><span class=o>.</span><span class=n>joinall</span><span class=p>([</span>
<a id=__codelineno-57-26 name=__codelineno-57-26 href=#__codelineno-57-26></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>setter</span><span class=p>),</span>
<a id=__codelineno-57-27 name=__codelineno-57-27 href=#__codelineno-57-27></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>waiter</span><span class=p>),</span>
<a id=__codelineno-57-28 name=__codelineno-57-28 href=#__codelineno-57-28></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>waiter</span><span class=p>),</span>
<a id=__codelineno-57-29 name=__codelineno-57-29 href=#__codelineno-57-29></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>waiter</span><span class=p>),</span>
<a id=__codelineno-57-30 name=__codelineno-57-30 href=#__codelineno-57-30></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>waiter</span><span class=p>),</span>
<a id=__codelineno-57-31 name=__codelineno-57-31 href=#__codelineno-57-31></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>waiter</span><span class=p>)</span>
<a id=__codelineno-57-32 name=__codelineno-57-32 href=#__codelineno-57-32></a><span class=p>])</span>
</code></pre></div> <p>执行结果:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a>A:<span class=w> </span>Hey<span class=w> </span><span class=nb>wait</span><span class=w> </span><span class=k>for</span><span class=w> </span>me,<span class=w> </span>I<span class=w> </span>have<span class=w> </span>to<span class=w> </span><span class=k>do</span><span class=w> </span>something
<a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a>I<span class=s1>&#39;ll wait for you</span>
<a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a><span class=s1>I&#39;</span>ll<span class=w> </span><span class=nb>wait</span><span class=w> </span><span class=k>for</span><span class=w> </span>you
<a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a>I<span class=s1>&#39;ll wait for you</span>
<a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a><span class=s1>I&#39;</span>ll<span class=w> </span><span class=nb>wait</span><span class=w> </span><span class=k>for</span><span class=w> </span>you
<a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a>I<span class=s1>&#39;ll wait for you</span>
<a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a><span class=s1>Ok, I&#39;</span>m<span class=w> </span><span class=k>done</span>
<a id=__codelineno-58-8 name=__codelineno-58-8 href=#__codelineno-58-8></a>It<span class=s1>&#39;s about time</span>
<a id=__codelineno-58-9 name=__codelineno-58-9 href=#__codelineno-58-9></a><span class=s1>It&#39;</span>s<span class=w> </span>about<span class=w> </span><span class=nb>time</span>
<a id=__codelineno-58-10 name=__codelineno-58-10 href=#__codelineno-58-10></a>It<span class=s1>&#39;s about time</span>
<a id=__codelineno-58-11 name=__codelineno-58-11 href=#__codelineno-58-11></a><span class=s1>It&#39;</span>s<span class=w> </span>about<span class=w> </span><span class=nb>time</span>
<a id=__codelineno-58-12 name=__codelineno-58-12 href=#__codelineno-58-12></a>It<span class=err>&#39;</span>s<span class=w> </span>about<span class=w> </span><span class=nb>time</span>
</code></pre></div> <h4 id=asyncresult-可传值的事件>AsyncResult 可传值的事件<a class=headerlink href=#asyncresult-可传值的事件 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=ch>#!/usr/bin/env python3</span>
<a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=c1># AsyncResult 可传值的事件</span>
<a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a><span class=kn>import</span> <span class=nn>gevent</span>
<a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a><span class=kn>from</span> <span class=nn>gevent.event</span> <span class=kn>import</span> <span class=n>AsyncResult</span>
<a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a>
<a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a><span class=n>a</span> <span class=o>=</span> <span class=n>AsyncResult</span><span class=p>()</span>
<a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a>
<a id=__codelineno-59-9 name=__codelineno-59-9 href=#__codelineno-59-9></a>
<a id=__codelineno-59-10 name=__codelineno-59-10 href=#__codelineno-59-10></a><span class=k>def</span> <span class=nf>setter</span><span class=p>():</span>
<a id=__codelineno-59-11 name=__codelineno-59-11 href=#__codelineno-59-11></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
<a id=__codelineno-59-12 name=__codelineno-59-12 href=#__codelineno-59-12></a>    <span class=n>a</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s1>&#39;Hello!&#39;</span><span class=p>)</span>  <span class=c1># 事件传值</span>
<a id=__codelineno-59-13 name=__codelineno-59-13 href=#__codelineno-59-13></a>
<a id=__codelineno-59-14 name=__codelineno-59-14 href=#__codelineno-59-14></a>
<a id=__codelineno-59-15 name=__codelineno-59-15 href=#__codelineno-59-15></a><span class=k>def</span> <span class=nf>waiter</span><span class=p>():</span>
<a id=__codelineno-59-16 name=__codelineno-59-16 href=#__codelineno-59-16></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-59-17 name=__codelineno-59-17 href=#__codelineno-59-17></a><span class=sd>    After 3 seconds the get call will unblock after the setter</span>
<a id=__codelineno-59-18 name=__codelineno-59-18 href=#__codelineno-59-18></a><span class=sd>    puts a value into the AsyncResult.</span>
<a id=__codelineno-59-19 name=__codelineno-59-19 href=#__codelineno-59-19></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-59-20 name=__codelineno-59-20 href=#__codelineno-59-20></a>    <span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>get</span><span class=p>())</span>  <span class=c1># 获取时间值</span>
<a id=__codelineno-59-21 name=__codelineno-59-21 href=#__codelineno-59-21></a>
<a id=__codelineno-59-22 name=__codelineno-59-22 href=#__codelineno-59-22></a>
<a id=__codelineno-59-23 name=__codelineno-59-23 href=#__codelineno-59-23></a><span class=n>gevent</span><span class=o>.</span><span class=n>joinall</span><span class=p>([</span>
<a id=__codelineno-59-24 name=__codelineno-59-24 href=#__codelineno-59-24></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>setter</span><span class=p>),</span>
<a id=__codelineno-59-25 name=__codelineno-59-25 href=#__codelineno-59-25></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>waiter</span><span class=p>),</span>
<a id=__codelineno-59-26 name=__codelineno-59-26 href=#__codelineno-59-26></a><span class=p>])</span>
</code></pre></div> <p>执行结果:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a>Hello!
</code></pre></div> <h3 id=队列>队列<a class=headerlink href=#队列 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=ch>#!/usr/bin/env python3</span>
<a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a><span class=c1># -*- coding:utf8 -*-</span>
<a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a><span class=c1># Copyright: (c)  : @Time 2024/9/18 18:18  @Author  : hjl</span>
<a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a><span class=c1># @Author  : hujl</span>
<a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a><span class=c1># @File    : demo8.py</span>
<a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a><span class=c1># @Software: PyCharm</span>
<a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a><span class=c1># @Desc    :</span>
<a id=__codelineno-61-8 name=__codelineno-61-8 href=#__codelineno-61-8></a><span class=c1># GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)</span>
<a id=__codelineno-61-9 name=__codelineno-61-9 href=#__codelineno-61-9></a><span class=c1># /usr/local/python</span>
<a id=__codelineno-61-10 name=__codelineno-61-10 href=#__codelineno-61-10></a><span class=c1># encoding:utf8</span>
<a id=__codelineno-61-11 name=__codelineno-61-11 href=#__codelineno-61-11></a><span class=kn>import</span> <span class=nn>gevent</span>
<a id=__codelineno-61-12 name=__codelineno-61-12 href=#__codelineno-61-12></a><span class=kn>from</span> <span class=nn>gevent.pool</span> <span class=kn>import</span> <span class=n>Pool</span>
<a id=__codelineno-61-13 name=__codelineno-61-13 href=#__codelineno-61-13></a><span class=kn>from</span> <span class=nn>gevent.queue</span> <span class=kn>import</span> <span class=n>Queue</span><span class=p>,</span> <span class=n>Empty</span>
<a id=__codelineno-61-14 name=__codelineno-61-14 href=#__codelineno-61-14></a><span class=kn>import</span> <span class=nn>os</span>
<a id=__codelineno-61-15 name=__codelineno-61-15 href=#__codelineno-61-15></a>
<a id=__codelineno-61-16 name=__codelineno-61-16 href=#__codelineno-61-16></a><span class=n>tasks</span> <span class=o>=</span> <span class=n>Queue</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=mi>30</span><span class=p>)</span>  <span class=c1># 队列 超过30引发 gevent.hub.LoopExit</span>
<a id=__codelineno-61-17 name=__codelineno-61-17 href=#__codelineno-61-17></a><span class=n>tasks1</span> <span class=o>=</span> <span class=n>Queue</span><span class=p>()</span>
<a id=__codelineno-61-18 name=__codelineno-61-18 href=#__codelineno-61-18></a>
<a id=__codelineno-61-19 name=__codelineno-61-19 href=#__codelineno-61-19></a>
<a id=__codelineno-61-20 name=__codelineno-61-20 href=#__codelineno-61-20></a><span class=k>def</span> <span class=nf>boss</span><span class=p>():</span>
<a id=__codelineno-61-21 name=__codelineno-61-21 href=#__codelineno-61-21></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;放队列任务&#39;</span><span class=p>)</span>
<a id=__codelineno-61-22 name=__codelineno-61-22 href=#__codelineno-61-22></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>25</span><span class=p>):</span>
<a id=__codelineno-61-23 name=__codelineno-61-23 href=#__codelineno-61-23></a>        <span class=n>tasks</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
<a id=__codelineno-61-24 name=__codelineno-61-24 href=#__codelineno-61-24></a>
<a id=__codelineno-61-25 name=__codelineno-61-25 href=#__codelineno-61-25></a>
<a id=__codelineno-61-26 name=__codelineno-61-26 href=#__codelineno-61-26></a><span class=k>def</span> <span class=nf>worker1</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
<a id=__codelineno-61-27 name=__codelineno-61-27 href=#__codelineno-61-27></a>    <span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>pool</span><span class=p>))</span>
<a id=__codelineno-61-28 name=__codelineno-61-28 href=#__codelineno-61-28></a>
<a id=__codelineno-61-29 name=__codelineno-61-29 href=#__codelineno-61-29></a>    <span class=k>while</span> <span class=ow>not</span> <span class=n>tasks</span><span class=o>.</span><span class=n>empty</span><span class=p>():</span>  <span class=c1># 判断队列是否为空</span>
<a id=__codelineno-61-30 name=__codelineno-61-30 href=#__codelineno-61-30></a>        <span class=n>task</span> <span class=o>=</span> <span class=n>tasks</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># 获取队列内容</span>
<a id=__codelineno-61-31 name=__codelineno-61-31 href=#__codelineno-61-31></a>        <span class=n>tasks1</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>popen</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>
<a id=__codelineno-61-32 name=__codelineno-61-32 href=#__codelineno-61-32></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Worker </span><span class=si>%s</span><span class=s1> got task </span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>task</span><span class=p>))</span>
<a id=__codelineno-61-33 name=__codelineno-61-33 href=#__codelineno-61-33></a>        <span class=n>gevent</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>  <span class=c1># 放弃当前任务</span>
<a id=__codelineno-61-34 name=__codelineno-61-34 href=#__codelineno-61-34></a>
<a id=__codelineno-61-35 name=__codelineno-61-35 href=#__codelineno-61-35></a>
<a id=__codelineno-61-36 name=__codelineno-61-36 href=#__codelineno-61-36></a><span class=k>def</span> <span class=nf>worker2</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
<a id=__codelineno-61-37 name=__codelineno-61-37 href=#__codelineno-61-37></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-61-38 name=__codelineno-61-38 href=#__codelineno-61-38></a>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
<a id=__codelineno-61-39 name=__codelineno-61-39 href=#__codelineno-61-39></a>            <span class=n>task</span> <span class=o>=</span> <span class=n>tasks1</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-61-40 name=__codelineno-61-40 href=#__codelineno-61-40></a>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;获取后释放:</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=n>task</span><span class=p>)</span>
<a id=__codelineno-61-41 name=__codelineno-61-41 href=#__codelineno-61-41></a>
<a id=__codelineno-61-42 name=__codelineno-61-42 href=#__codelineno-61-42></a>            <span class=n>gevent</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-61-43 name=__codelineno-61-43 href=#__codelineno-61-43></a>    <span class=k>except</span> <span class=n>Empty</span><span class=p>:</span>  <span class=c1># 等待超时报错完成</span>
<a id=__codelineno-61-44 name=__codelineno-61-44 href=#__codelineno-61-44></a>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Quitting time!&#39;</span><span class=p>)</span>
<a id=__codelineno-61-45 name=__codelineno-61-45 href=#__codelineno-61-45></a>
<a id=__codelineno-61-46 name=__codelineno-61-46 href=#__codelineno-61-46></a>
<a id=__codelineno-61-47 name=__codelineno-61-47 href=#__codelineno-61-47></a><span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>boss</span><span class=p>)</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>  <span class=c1># 执行单次协程任务</span>
<a id=__codelineno-61-48 name=__codelineno-61-48 href=#__codelineno-61-48></a>
<a id=__codelineno-61-49 name=__codelineno-61-49 href=#__codelineno-61-49></a><span class=n>pool</span> <span class=o>=</span> <span class=n>Pool</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>  <span class=c1># 协程池大小</span>
<a id=__codelineno-61-50 name=__codelineno-61-50 href=#__codelineno-61-50></a><span class=n>pool</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>worker1</span><span class=p>,</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>20</span><span class=p>))</span>  <span class=c1># 通过map方法把多个任务分发给池中的5个协程</span>
<a id=__codelineno-61-51 name=__codelineno-61-51 href=#__codelineno-61-51></a>
<a id=__codelineno-61-52 name=__codelineno-61-52 href=#__codelineno-61-52></a><span class=n>gevent</span><span class=o>.</span><span class=n>joinall</span><span class=p>([</span>  <span class=c1># 同时执行多个协程任务</span>
<a id=__codelineno-61-53 name=__codelineno-61-53 href=#__codelineno-61-53></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>worker2</span><span class=p>,</span> <span class=s1>&#39;steve&#39;</span><span class=p>),</span>
<a id=__codelineno-61-54 name=__codelineno-61-54 href=#__codelineno-61-54></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>worker2</span><span class=p>,</span> <span class=s1>&#39;john&#39;</span><span class=p>),</span>
<a id=__codelineno-61-55 name=__codelineno-61-55 href=#__codelineno-61-55></a>    <span class=n>gevent</span><span class=o>.</span><span class=n>spawn</span><span class=p>(</span><span class=n>worker2</span><span class=p>,</span> <span class=s1>&#39;nancy&#39;</span><span class=p>),</span>
<a id=__codelineno-61-56 name=__codelineno-61-56 href=#__codelineno-61-56></a><span class=p>])</span>
</code></pre></div> <h3 id=参考文献_1>参考文献<a class=headerlink href=#参考文献_1 title="Permanent link">&para;</a></h3> <ul> <li><a href=https://www.u1s1.vip/archives/gevent>https://www.u1s1.vip/archives/gevent</a></li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024年12月7日 12:42:40</span> </span> <span class=md-source-file__fact> <span class=md-icon title=创建日期> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024年3月31日 11:52:04</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/hujianli94/hujianli94.github.io/issues/new/?title=[Feedback]+22.Python%20%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%8D%8F%E7%A8%8B+-+/Python/1.Python%E5%9F%BA%E7%A1%80%E7%AF%87/22.Python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%8D%8F%E7%A8%8B/" target=_blank>feedback form</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=页脚> <a href=../21.Python%E6%89%B9%E9%87%8F%E7%AE%A1%E7%90%86%E4%B8%BB%E6%9C%BA/ class="md-footer__link md-footer__link--prev" aria-label="上一页: 21.Python 批量管理主机"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> 上一页 </span> <div class=md-ellipsis> 21.Python 批量管理主机 </div> </div> </a> <a href=../23.Python%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95/ class="md-footer__link md-footer__link--next" aria-label="下一页: 23.Python 代码调试"> <div class=md-footer__title> <span class=md-footer__direction> 下一页 </span> <div class=md-ellipsis> 23.Python 代码调试 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2023 - 2024 hujainli94 </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/hujianli94 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20220125122524.png target=_blank rel=noopener title=kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154m-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4m-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2M563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4m-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6m107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6"/></svg> </a> <a href="mailto:<1879324764@qq.com>" target=_blank rel=noopener title=发送邮件 class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">同意</button> <label class=md-button for=__settings>管理设定</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"base": "../../..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "content.code.annotate", "navigation.indexes", "navigation.footer", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../../assets/javascripts/bundle.83f73b43.min.js></script> <script src=../../../javascripts/extra.js></script> <script src=https://file.cdn.shafish.cn/blog/js/video.min.js></script> </body> </html>