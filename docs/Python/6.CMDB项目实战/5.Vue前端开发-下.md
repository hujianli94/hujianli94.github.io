# 5.Vue前端开发-下


## 大纲

- vue常用指令之数据双向绑定
- vue实例生命周期钩子
- Vue cli脚手架
- 前后端数据交互Axios
- Vue路由： vue-router



## vue常用指令之数据双向绑定

双向数据绑定：通过前面学习知道Vue是数据驱动的，数据驱动有一个精髓之处是数据双向绑定，即当数据发生变化的时候，视图也就发生变化，当视图发生变化的时候，数据也会跟着同步变化。

### v-model

v-model指令提供表单输入绑定，可以在 `<input>`、`<textarea>` 及 `<select>` 元素上创建双向数据绑定。

#### v-model: 表单输入

v-model.html


- 代码示例：

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>V-model</title>
    <script src="static/vue.js"></script>
</head>
<body>
<div id="v_model">
    <input type="text" v-model="msg">
    <p>{{msg}}</p>
</div>
<script>
    const VueApp = {
        data() {
            return {
                msg: ""
            }
        }
    }
    Vue.createApp(VueApp).mount('#v_model')
</script>
</body>
</html>
```

> v-model指令其实是一个语法糖，背后本质上包含v-bind和v-on两个操作。



#### v-model: 单选

v-model-select.html

- 示例代码

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>V-model-Select</title>
    <script src="static/vue.js"></script>
</head>
<body>
<div id="v_model">
    <input type="radio" value="Golang" v-model="msg">Golang <br>
    <input type="radio" value="Vue" v-model="msg">Vue <br>
    <p>选择： {{msg}}</p>
</div>
<script>
    const VueApp = {
        data() {
            return {
                msg: ""
            }
        }
    }
    Vue.createApp(VueApp).mount('#v_model')
</script>
</body>
</html>
```

#### v-model: 多选

v-model-selects.html

- 示例代码

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>V-model-selects</title>
    <script src="static/vue.js"></script>
</head>
<body>
<div id="v_model">
    <select v-model="selected" multiple>
        <option value="go">go</option>
        <option value="python">python</option>
        <option value="java">java</option>
    </select>
    <p>{{selected}}</p>
</div>
<script>
    const VueApp = {
        data() {
            return {
                selected: ""
            }
        }
    }
    Vue.createApp(VueApp).mount('#v_model')
</script>
</body>
</html>
```



#### 登录页面案例

v-model-login.html


- 示例代码

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>V-model-Login</title>
    <script src="static/vue.js"></script>
</head>
<body>
<div id="login">
    <div>
        欢迎访问Devops平台
        <br>
        用户名： <input type="text" v-model="form.username"> <br>
        密码： <input type="text" v-model="form.password"> <br>
        <button @click="loginBtn">登录</button>
    </div>
</div>
<script>
    const VueApp = {
        data() {
            return {
                form: {
                    username: '',
                    password: ''
                }
            }
        },
        methods: {
            loginBtn() {
                console.log(this.form)
            }
        }
    }
    Vue.createApp(VueApp).mount('#login')
</script>
</body>
</html>
```


### vue常见指令总结

![image](https://cdn.jsdelivr.net/gh/hujianli94/picx-images-hosting@master/image.231lmhehhp.webp){: .zoom}



## vue实例生命周期钩子


生命周期是指Vue实例从创建到销毁的过程。就是vue实例从开始创建、初始化数据、编译模板、挂载Dom、渲染->更新->渲染、卸载等⼀系列过程，在vue⽣命周期中提供了⼀系列的⽣命周期函数，如图所⽰


![image](https://cdn.jsdelivr.net/gh/hujianli94/picx-images-hosting@master/image.2doffmxsia.webp){: .zoom}


![image](https://cdn.jsdelivr.net/gh/hujianli94/picx-images-hosting@master/image.syog618y5.webp){: .zoom}


- 示例代码


```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>lifeCycle</title>
    <script src="static/vue.js"></script>
</head>
<body>
<div id="vue_lifecycle">
    {{counter}}
</div>
<script>
    const VueApp = {
        data() {
            return {
                counter: 0
            }
        },
        methods: {
            increament() {
                this.counter++
            }
        },
        created() {
            console.log('xxx')
        },
        mounted() {
            //在渲染完页面之后执行
            console.log('打开页面执行')
            this.increament()
        }
    }
    Vue.createApp(VueApp).mount('#vue_lifecycle')
</script>
</body>
</html>
```


## Vue cli脚手架


### vue cli脚手架介绍

到目前为止，已经会了Vue基本使用，但这种在HTML引用Vue.js的方式，简单的页面还是没问题的，如果用Vue开发整个前端项目，组建Vue项目结构及配置还是比较复杂的，例如引入各种js文件、打包上线等。

因此，为了提高开发效率，官方开发了VueCli脚手架快捷搭建开发环境。


Vue CLI 是一个基于 Vue.js 进行快速开发的完整系统，提供：
- 通过 @vue/cli 实现的交互式的项目脚手架。
- 通过 @vue/cli + @vue/cli-service-global 实现的零配置原型开发。


- 一个运行时依赖 (@vue/cli-service)，该依赖：
  - 可升级；
  - 基于 webpack 构建，并带有合理的默认配置；
  - 可以通过项目内的配置文件进行配置；
  - 可以通过插件进行扩展。

- 一个丰富的官方插件集合，集成了前端生态中最好的工具。
- 一套完全图形化的创建和管理 Vue.js 项目的用户界面。


Vue CLI 致力于将 Vue 生态中的工具基础标准化。它确保了各种构建工具能够基于智能的默认配置即可平稳衔接，这样你可以专注在撰写应用上，而不必花好几天去纠结配置的问题。



### 认识NPM

在使用Vue Cli之前，需先了解一些关于NPM的知识点：

- **NPM（Node Package Manager，Node包管理器），**存放JavaScript代码共享中心，是目前最大的JavaScript仓库。类似于Linux yum仓库。

- 可能你会联想到Node.js，Node.js是服务端的JavaScript，类似于Gin、Django，NPM是基于Node.js开发的软件。

- 随着Node.js兴起，生态圈的JS库都纷纷向NPM官方仓库发布，所以现在，大都是使用 npm install 命令来安装JS库，而不必再去它们官网下载了。


安装Node.js，默认已经内置npm，下载对应软件包直接安装即可。 http://nodejs.cn/download/



|命令|描述|
|----|--------|
|npm -v|查看版本|
|npm install <模块名>|安装模块|
|npm install -g <模块名>|可以直接在命令行里使用|
|npm list -g|查看所有全局安装的模块|
|npm list <模块名>|查看某个模块的版本号|
|npm install -g <模块名>@<版本号>|更新模块版本|
|npm install -save <模块名>|在package,json文件中写入依赖<br>(npm5版本之前需要指定，之后版本无需再加-save选项)|
|npm config|管理npm的配置路径|
|npm run serve|运行项目|
|npm run build|打包项目|


- 配置淘宝npm仓库

```sh
npm config set registry https://registry.npm.taobao.org --global 
npm config get registry
```


### vue cli脚手架的使用

Vue Cli脚手架使用步骤：
- 安装nodeJS TLS版本：  https://nodejs.org/
- 命令安装：npm install -g @vue/cli
- 检查版本：vue -V
- 创建项目：vue create <项目名称>


![image](https://cdn.jsdelivr.net/gh/hujianli94/picx-images-hosting@master/image.5j3xel6j98.webp){: .zoom}




- 运行项目，访问

```sh
cd hello-vue
npm run serve
```

#### 目录结构及其介绍


|目录/文件|	说明|
|-----|-----|
|node_modules|	项目开发依赖的一些模块，不用管|
|public|主要存放首页、favicon|
|src	|源码目录，这里是我们要开发的目录，基本上要做的事情都在这个目录里。里面包含了几个目录及文件：<br>assets: 放入资源，例如图片、CSS等<br>components: 公共组件目录<br>routes: 前端路由<br>store: 应用级数据（state）Vuex<br>views: 单页面组件目录<br>App.vue： 项目的入口文件（根组件<br>main.js: 项目的全局配置，在任意一个文件中都有效的|
|gitignore文件	|git提交忽略文件|
|babel.config.js|	babel配置，例如es5转es6|
|package.json|	项目配置文件。npm包配置文件，里面定义了项目的npm脚本，依赖包等信息|
|README.md|	项目的说明文档，markdown格式|


![image](https://cdn.jsdelivr.net/gh/hujianli94/picx-images-hosting@master/image.4uanukmeir.webp){: .zoom}




### vue组件


#### 组件介绍


**组件：**一段独立的，能代表页面某一个部分的代码片段，拥有自己独立的数据、JavaScript脚本、以及CSS样式。

组件是可复用的Vue实例，在开发过程中可以把经常重复的功能，封装为组件，达到快捷开发的目的。

组件的好处：

- 提高开发效率
- 方便重复使用
- 易于管理和维护

通常一个应用会以一棵嵌套的组件树的形式来组织，如图所示。

例如，你可能会有页头、侧边栏、内容区等组件，每个组件又包含了其它的像导航链接、博文之类的组件。

![image](https://cdn.jsdelivr.net/gh/hujianli94/picx-images-hosting@master/image.5q75a0xvxd.webp){: .zoom}




文件格式

Vue单文件格式（又名*.vue文件，缩写为SFC）是一种特殊的文件格式，它允许将Vue组件的模板、逻辑与样式封装在单个文件中。

正如所见，Vue SFC是经典的HTML、CSS与JavaScript三个经典组合的自然延伸。每个*.vue文件由三种类型的顶层代码块组成：<template>、<script>与<style>:

<template>部分定义了组件的模板
<script>部分是一个标准的JavaScript模块。它应该导出一个Vue组件定义作为其默认导出。
<style>部分定义了与此组件关联的CSS


