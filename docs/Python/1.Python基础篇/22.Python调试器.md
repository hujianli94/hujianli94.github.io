# 22.Python调试器

Python调试器：pdb用法

python pdb调试有两种方式：一种通过命令python -m pdb xxx.py 启动脚本，进入单步执行模式；另一种通过import pdb 之后，直接在代码里需要调试的地方放一个pdb.set_trace()，就可以设置一个断点。

- 通过命令 `python -m pdb xxx.py` 启动脚本调试
- 通过 `import pdb` 之后调试



## 通过python直接调试

| 完整命令      | 简写命令  | 描述                  |
|---------------|-----------|------------------------|
| help          | h         | 显示帮助信息          |
| quit          | q         | 退出pdb调试器         |
| list          | l         | 显示当前位置附近的代码 |
| step         | s         | 进入函数内部执行下一行代码 |
| next         | n         | 执行下一行代码（不会进入函数内部） |
| return       | r         | 执行直到函数返回 |
| continue      | c         | 继续执行直到遇到下一个断点或程序结束 |
| break         | b         | 在指定行设置断点      |
| clear         | cl        | 清除指定行的断点      |
| print         | p         | 打印变量的值          |
| args          | a         | 打印当前函数的参数    |
| where         | w         | 显示当前调用栈        |
| up            | u         | 向上移动一层调用栈   |
| down          | d         | 向下移动一层调用栈   |
| list          | l         | 显示当前位置附近的代码 |
| source        |          | 显示当前函数的源代码  |
| display       |          | 显示要跟踪的表达式的值 |
| undisplay     |          | 停止显示表达式的值    |
| interact      |          | 进入交互式调试模式   |
| debug         |          | 调用内置的调试器     |


注意:

- 直接输入Enter，会执行上一条命令；
- 输入PDB不认识的命令，PDB会把他当做Python语句在当前环境下执行；




## 通过 import pdb 后调试

基本操作

- 直接修改 `xxx.py` 文件，添加`import pdb`之后，直接在代码里需要调试的地方放一个`pdb.set_trace()`，就可以设置一个断点， 程序会在pdb.set_trace()暂停并进入pdb调试环境，可以用pdb 变量名查看变量，或者c继续运行。

- 基本命令和注意事项同上⬆️


当你想要在已有的代码中调试一个函数，可以使用以下方式：

```python
# 调试示例代码
def divide(x, y):
    result = x / y
    return result

# 设置断点并启动调试
import pdb; pdb.set_trace()
result = divide(10, 2)
print(result)
```


演示了交互模式下pdb模块`调试函数`实例代码如下：

```python
import pdb

def sum(maxint):
  s=0
  for i in range (maxint):
    s+=1
  return s

pdb.runcall(sum,10)
```

此外，pdb模块还有runeval函数，可以用来调试表达式，你可以自行参考相关材料了解。
