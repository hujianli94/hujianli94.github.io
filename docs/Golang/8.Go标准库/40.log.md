# log



## 1.实现

```go
import "log"
```

log包实现了简单的日志服务。

本包定义了Logger类型，该类型提供了一些格式化输出的方法。

本包也提供了一个预定义的"标准"Logger，可以通过辅助函数Print[f|ln]、Fatal[f|ln]和Panic[f|ln]访问，比手工创建一个Logger对象更容易使用。


Logger会打印每条日志信息的日期、时间，默认输出到标准错误。


Fatal系列函数会在写入日志信息后调用os.Exit(1)。


Panic系列函数会在写入日志信息后panic。



demo1/demo1.go


```go
package demo1

import (
	"bytes"
	"fmt"
	"log"
	"os"
)

func DefaultUsageForLog() {

	log.Print("Hello World, Golang")        //2023/07/25 16:46:13 Hello World, Golang
	log.Println("Hello World, Golang")      //2023/07/25 16:46:13 Hello World, Golang
	log.Printf("Hello World, %s", "Golang") //2023/07/25 16:46:13 Hello World, Golang

	fmt.Println("log Prefix", log.Prefix()) //log Prefix
	fmt.Println("log Flags", log.Flags())   //log Flags 3
}

func SpecialUsageLog() {

	// 实例化 log.Logger 结构体
	logger := log.New(os.Stdout, "Golang ", log.Lshortfile)
	//
	logger.Println("Hello World, Golang") //Golang demo1.go:25: Hello World, Golang
}

func SpecialUsageWithBytes() {
	// 日志输出写入一个io.Writer接口
	var buf bytes.Buffer
	logger := log.New(&buf, "Hi! ", log.Lshortfile)

	logger.Println("Hello World, Golang")

	fmt.Println(buf.String()) //Hi! demo1.go:33: Hello World, Golang
}

func SpecialUsageWithFile() {
	// 日志写入文件
	file, _ := os.Create("log.log")
	logger := log.New(file, "Hi!", log.Lshortfile)

	logger.Println("Hello World, Golang")
}


```

## 2.编写单元测试

demo1/demo1_test.go


```go
package demo1

import "testing"

func TestSimpleUsageForLog(t *testing.T) {
	DefaultUsageForLog()
	SpecialUsageLog()
	SpecialUsageWithBytes()
	SpecialUsageWithFile()
}

```



## 3.测试结果

```sh
D:/Program Files/go/bin/go.exe test -v [D:/golang/go/src/gitee/log_demo/demo1]
=== RUN   TestSimpleUsageForLog
2023/07/25 16:51:41 Hello World, Golang
2023/07/25 16:51:41 Hello World, Golang
2023/07/25 16:51:41 Hello World, Golang
log Prefix 
log Flags 3
Golang demo1.go:25: Hello World, Golang
Hi! demo1.go:33: Hello World, Golang

--- PASS: TestSimpleUsageForLog (0.02s)
PASS
ok  	demo1	0.483s
```
