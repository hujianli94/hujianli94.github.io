# 11.å‰åç«¯æ•°æ®äº¤äº’ Axios



## 11.1 ä»‹ç»


åœ¨å‰ç«¯é¡µé¢å±•ç¤ºçš„æ•°æ®å¤§å¤šæ•°éƒ½æ˜¯é€šè¿‡è®¿é—®ä¸€ä¸ªAPIè·å–çš„ï¼Œåšè¿™ä»¶äº‹çš„æ–¹æ³•ç”±å¥½å‡ ç§ï¼Œä¾‹å¦‚jquery ajaxã€vue-resourceã€axiosï¼Œ

è€Œvue-resourceæ˜¯ä¸€ä¸ªvueæ’ä»¶ï¼Œä½†3ç‰ˆæœ¬ä¸å†æ›´æ–°ï¼Œç›®å‰å®˜æ–¹æ¨èä¸»æµçš„axiosï¼Œaxiosæ˜¯ä¸€ä¸ªhttpè¯·æ±‚åº“ã€‚

å®˜æ–¹æ–‡æ¡£ï¼šhttp://www.axios-js.com/zh-cn/docs/



## 11.2 ä½¿ç”¨

ä½¿ç”¨æµç¨‹ï¼š


### 1.å®‰è£…axios

```shell
npm install axios -save
npm install vue-router@next
npm install vuex@next --save
```

package.jsonä¸­å¯æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯

```json
  "dependencies": {
    "axios": "^1.5.1",
    "core-js": "^3.8.3",
    "vue": "^3.2.13",
    "vue-router": "^4.0.3",
    "vuex": "^4.0.0"
  },
```

### 2.åœ¨main.jsæ–‡ä»¶ä¸­å…¨å±€æ³¨å†Œ


```js
import { createApp } from "vue";
import App from "./App.vue";
import router from "./router";
import store from "./store";
import axios from "axios"; //å¯¼å…¥

const app = createApp(App);
//æ³¨å†Œ
app.config.globalProperties.$axios = axios;
app.use(store).use(router).mount("#app");
```


### 3.ä½¿ç”¨ä¸€ä¸ªç”¨æˆ·ä¸­å¿ƒé¡µé¢é…ç½®å­è·¯ç”±ç¤ºä¾‹(ç»„ä»¶+è·¯ç”±)

#### 3.1 é¡µé¢ç»„ä»¶


`src/view/user-center/ProfileView.vue`

```html
<template>
  <h1 style="line-height: 400px">ä¸ªäººä¿¡æ¯ç•Œé¢å†…å®¹</h1>
  <router-view></router-view>
</template>

<script>
export default {
  name: "ProfileView",
};
</script>
```


`src/view/user-center/SettingsView.vue`

```html
<template>
  <h1 style="line-height: 400px">ç”¨æˆ·è®¾ç½®å†…å®¹</h1>
  <router-view></router-view>
</template>

<script>
export default {
  name: "SettingsView",
};
</script>
```


`src/view/user-center/indexView.vue`

```html
<template>
  <div class="container">
    <div id="sidebar">
      <ul>
        <li>
          <router-link to="/user/profile">ä¸ªäººä¿¡æ¯</router-link>
        </li>
        <li>
          <router-link to="/user/settings">ç”¨æˆ·è®¾ç½®</router-link>
        </li>
        <li>
          <router-link to="/user/userlist">ç”¨æˆ·åˆ—è¡¨</router-link>
        </li>
      </ul>
    </div>
    <div class="main-body">
      <router-view></router-view>
    </div>
  </div>
</template>

<script>
export default {
  name: "indexView",
};
</script>

<style lang="css">
.container {
  display: flex;
  height: 100vh;
}

#sidebar {
  width: 250px;
  height: 100%;
  background: #000;
}

#sidebar li {
  list-style: none;
  margin: 0;
  padding: 0;
}

#sidebar li a {
  display: block;
  height: 40px;
  line-height: 40px;
  text-decoration: none;
  color: #fff;
}

#sidebar li a.router-link-active {
  background: #f47c00;
}

.main-body {
  flex: 1;
  height: 100%;
  background: #f5f5f5;
}
</style>
```

`src/components/HomeView.vue`

```html
<template>
  <h1 style="line-height: 400px">æˆ‘æ˜¯ Home</h1>
  <router-view></router-view>
</template>

<script>
export default {
  name: "HomeView",
};
</script>

```



#### 3.2 GET

`src/view/user-center/UserList.vue`

ä»apiè·å–ç”¨æˆ·æ•°æ®ï¼Œåœ¨å‰ç«¯å±•ç¤ºï¼š


```html
<template>
  <p class="greeting">{{ greeting }}</p>
  <button type="button" @click="getData">è·å–åç«¯æ•°æ®</button>
  {{ data }}
  <table border="1">
    <thead>
      <tr>
        <td>ID</td>
        <td>ç”¨æˆ·å</td>
        <td>é‚®ç®±</td>
        <td>æ€§åˆ«</td>
        <td>åŸå¸‚</td>
      </tr>
    </thead>
    <tbody>
      <tr v-for="row in data" :key="row.id">
        <td>{{ row.id }}</td>
        <td>{{ row.username }}</td>
        <td>{{ row.email }}</td>
        <td>{{ row.sex }}</td>
        <td>{{ row.city }}</td>
      </tr>
    </tbody>
  </table>
</template>

<script>
export default {
  name: "UserList",
  props: {
    greeting: String,
  },
  data() {
    return {
      data: "",
    };
  },
  methods: {
    getData() {
      this.$axios
        .get("http://127.0.0.1:3000/users")
        .then((response) => {
          if (response.data && response.data.code === 0) {
            this.data = response.data.data;
          }
        })
        .catch((err) => {
          console.error(err);
        });
    },
  },
};
</script>

<style scoped>
.greeting {
  color: red;
  font-weight: bold;
}
</style>
```

#### 3.3 é…ç½®è·¯ç”±

`src/router/index.js`

```js
import { createRouter, createWebHistory } from "vue-router";

const UserCenter = () => import("@/views/indexView");
const UserProfile = () => import("@/views/user-center/ProfileView.vue");
const UserSettings = () => import("@/views/user-center/SettingsView.vue");
const UserList = () => import("@/views/user-center/UserList.vue");

const routes = [
  {
    path: "/",
    name: "home",
    component: () => import("@/components/HomeView.vue"),
  },
  {
    path: "/user",
    name: "UserCenter",
    // å‡½æ•°ç»„ä»¶
    component: UserCenter,
    redirect: "/user/profile",
    children: [
      {
        name: "profile",
        path: "profile",
        component: UserProfile,
      },
      {
        name: "settings",
        path: "settings",
        component: UserSettings,
      },
      {
        name: "userlist",
        path: "userlist",
        component: UserList,
      },
    ],
  },
];

const router = createRouter({
  history: createWebHistory(),
  // ä½¿ç”¨HTML 5æ¨¡å¼ï¼Œåˆ™å°†createWebHashHistoryæ–¹æ³•æ¢æˆcreateWebHistoryæ–¹æ³•
  routes,
});

export default router;
```


`src/App.vue`

```html
<template>
  <div id="header">
    <h1>
      <router-link to="/">LOGO</router-link>
    </h1>
    <div class="avatar">
      <router-link to="/user">User</router-link>
    </div>
  </div>

  <div id="main">
    <router-view />
  </div>
</template>

<script>
export default {
  name: "App",
};
</script>

<style lang="css">
html,
body,
ul,
li,
div,
h1 {
  padding: 0;
  margin: 0;
}
html,
body {
  height: 100%;
}

#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  height: 100%;
}

#header {
  position: fixed;
  left: 0;
  top: 0;
  right: 0;
  display: flex;
  padding: 0 30px;
  align-items: center;
  justify-content: space-between;
  background: #000;
  color: #fff;
  height: 54px;
  z-index: 999; /* å¯é€‰ï¼Œå¦‚æœéœ€è¦å°†headeræ ç½®äºæœ€ä¸Šå±‚ */
}

#header a {
  font-weight: bold;
  border-radius: 50%;
  display: inline-block;
  text-decoration: none;
  color: #fff;
  cursor: pointer;
}

#header .avatar a {
  width: 42px;
  height: 42px;
  line-height: 42px;
  background-color: #eee;
  color: #666;
}

#main {
  height: 100%;
  padding-top: 54px;
  box-sizing: border-box;
}
</style>
```


è¿è¡Œé¡¹ç›®ï¼Œè®¿é—® http://localhost:8080/user/userlistï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![1697787502329](https://cdn.jsdelivr.net/gh/hujianli94/Picgo-atlas@main/img/1697787502329.4yfwn8d7tlg0.png){: .zoom}



ç”±äºæ²¡æœ‰åç«¯APIæ¥å£ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹å·¥æ¨¡æ‹Ÿä¸€äº›æ•°æ®ï¼Œå¹¶å°† æ¨¡æ‹Ÿçš„json å†…å®¹è½¬æˆ REST API æ¥å£ï¼Œæä¾›ç»™å¤–éƒ¨è®¿é—®

è¿™é‡Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘ä»¬ä½¿ç”¨[json-server](https://github.com/typicode/json-server.git)


json-server æ˜¯ä¸€æ¬¾å°å·§çš„æ¥å£æ¨¡æ‹Ÿå·¥å…·ï¼Œä¸€åˆ†é’Ÿå†…å°±èƒ½æ­å»ºä¸€å¥— Restful é£æ ¼çš„ APIï¼Œå°¤å…¶é€‚åˆå‰ç«¯æ¥å£æµ‹è¯•ä½¿ç”¨ã€‚ğŸ”¥ğŸ”¥ğŸ”¥
åªéœ€æŒ‡å®šä¸€ä¸ª json æ–‡ä»¶ä½œä¸º api çš„æ•°æ®æºå³å¯ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œ30 ç§’å…¥é—¨ï¼ŒåŸºæœ¬ä¸Šæœ‰æ‰‹å°±è¡Œã€‚ğŸ‘
è¿›é˜¶æ“ä½œè¿˜æ”¯æŒåˆ†é¡µï¼Œæ’åºç­‰æ“ä½œï¼Œç®€ç›´å¼ºå¤§ã€‚ğŸ’ª

å¼€æºåœ°å€

ä¸»é¡µåœ°å€ï¼šhttps://www.npmjs.com/package/json-server

Githubé¡¹ç›®åœ°å€ï¼šhttps://github.com/typicode/json-server


[å‰ç«¯æ¥å£ç¥å™¨ä¹‹ json-server è¯¦ç»†ä½¿ç”¨æŒ‡å—](https://www.cnblogs.com/Megasu/p/15782353.html)

[json-serveræœåŠ¡è¯¦è§£](https://www.cnblogs.com/fsg6/p/13202760.html)


```sh
npm install -g json-server

C:\Users\18793>npm list -g
D:\nodejs\node_global
+-- @vue/cli-init@5.0.1
+-- @vue/cli@5.0.8
+-- cnpm@8.2.0
+-- express-generator@4.16.1
+-- json-server@0.17.4
+-- pnpm@6.32.3
+-- vue-cli@2.9.6
`-- yarn@1.22.19
```

`src/api/test/users.json`

```json
{
  "users": {
      "code": 0,
      "message": "",
      "data": [
        {"id": 1, "username": "å¼ ä¸‰", "email": "zhangsan@example.com", "sex": "ç”·", "city": "åŒ—äº¬"},
        {"id": 2, "username": "æå››", "email": "lisi@example.com", "sex": "å¥³", "city": "ä¸Šæµ·"},
        {"id": 3, "username": "ç‹äº”", "email": "wangwu@example.com", "sex": "ç”·", "city": "å¹¿å·"},
        {"id": 4, "username": "èµµå…­", "email": "zhaoliu@example.com", "sex": "å¥³", "city": "æ·±åœ³"}
      ]
    },
  "comments": [
    { "id": 1, "body": "some comment1", "postId": 1 },
    { "id": 2, "body": "some comment2", "postId": 1 },
    { "id": 3, "body": "some comment3", "postId": 1 }
  ],
  "profile": { "name": "typicode" }
}
```

Start JSON Server

```sh
$ cd src/api/test/

$ json-server --watch users.json

  \{^_^}/ hi!

  Loading users.json
  Done

  Resources
  http://localhost:3000/users
  http://localhost:3000/comments
  http://localhost:3000/profile

  Home
  http://localhost:3000

  Type s + enter at any time to create a snapshot of the database
  Watching...
```

å†æ¬¡ç‚¹å‡» `è·å–åç«¯æ•°æ®`ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œè·å–åˆ°æ­£å¸¸æ•°æ®

![1697788553320](https://cdn.jsdelivr.net/gh/hujianli94/Picgo-atlas@main/img/1697788553320.1cwngfxu37k0.webp){: .zoom}





å¦‚æœæƒ³æ‰“å¼€é¡µé¢å°±è‡ªåŠ¨æ¸²æŸ“ï¼Œå¯ä»¥æ”¾åˆ°mountedç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è·å–æ•°æ®å¹¶èµ‹å€¼ï¼ˆmountedï¼šæŠŠç»„ä»¶å†…å®¹æ¸²æŸ“åˆ°é¡µé¢ä¹‹åè‡ªåŠ¨æ‰§è¡Œçš„å‡½æ•°ï¼‰ï¼š

```html
<template>
  <p class="greeting">{{ greeting }}</p>
  <button type="button" @click="getData">è·å–åç«¯æ•°æ®</button>
  {{ data }}
  <table border="1">
    <thead>
      <tr>
        <td>ID</td>
        <td>ç”¨æˆ·å</td>
        <td>é‚®ç®±</td>
        <td>æ€§åˆ«</td>
        <td>åŸå¸‚</td>
      </tr>
    </thead>
    <tbody>
      <tr v-for="row in data" :key="row.id">
        <td>{{ row.id }}</td>
        <td>{{ row.username }}</td>
        <td>{{ row.email }}</td>
        <td>{{ row.sex }}</td>
        <td>{{ row.city }}</td>
      </tr>
    </tbody>
  </table>
</template>

<script>
export default {
  name: "UserList",
  props: {
    greeting: String,
  },
  data() {
    return {
      data: "",
    };
  },
  methods: {
    getData() {
      this.$axios
        .get("http://127.0.0.1:3000/users")
        .then((response) => {
          if (response.data && response.data.code === 0) {
            this.data = response.data.data;
          }
        })
        .catch((err) => {
          console.error(err);
        });
    },
  },
  mounted: function () {
    this.getData();
  },
};
</script>

<style scoped>
.greeting {
  color: red;
  font-weight: bold;
}
</style>
```


#### 3.4 POST

ç™»é™†æ—¶æäº¤è¡¨å•æ•°æ®æ¡ˆä¾‹ï¼š

```html
<template>
<div class="home">
  <img alt="Vue logo" src="../assets/logo.png"/>
  <h1>æ¬¢è¿è®¿é—®ç®¡ç†åå°</h1>
  <form action="#">
    ç”¨æˆ·åï¼š<input type="text" v-model="form.username">
    å¯†  ç ï¼š<input type="text" v-model="form.password">
    <button @click="loginBtn">ç™»å½•</button>
  </form>
  <p style="color:red;" v-if="notice">ç”¨æˆ·åæˆ–è€…å¯†ç ä¸èƒ½ä¸ºç©ºï¼</p>
  </div>
</template>

<script>
  export default {
    name: "Login",
    data(){
      return{
        form:{
          username:"",
          password:"",
        },
        notice:false,
      }
    },
    methods:{
      loginBtn(){
        if(this.form.username==''||this.form.password==''){
          this.notice=true;
        }else{
          this.notice=false;
          this.$axios.post("http://127.0.0.1:8000/api",this.form)
        }
      }
    }
  }
</script>

<style scoped>
  
</style>
```


## 11.3 å¼‚å¸¸å¤„ç†

å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¯èƒ½å¹¶æ²¡æœ‰ä»APIè·å–æƒ³è¦çš„æ•°æ®ã€‚è¿™å¯èƒ½æ˜¯ç”±äºå¾ˆå¤šç§å› ç´ å¼•èµ·çš„ï¼Œæ¯”å¦‚axiosè°ƒç”¨å¯èƒ½ç”±äºå¤šç§åŸå› è€Œå¤±è´¥ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

- APIä¸å·¥ä½œäº†ï¼›
- è¯·æ±‚å‘ä½œäº†ï¼›
- APIæ²¡æœ‰æŒ‰æˆ‘ä»¬é¢„æœŸçš„æ ¼å¼è¿”å›ä¿¡æ¯


å¯ä»¥ä½¿ç”¨catchå¼‚å¸¸å¤„ç†è¿™äº›é—®é¢˜ã€‚

```html
<template>
  <p class="greeting">{{greeting}}</p>
  <button type="button" @click="getData">è·å–åç«¯æ•°æ®</button>
  {{data}}
  <table border="1">
    <thead>
      <tr>
        <td>ID</td>
        <td>ç”¨æˆ·å</td>
        <td>é‚®ç®±</td>
        <td>æ€§åˆ«</td>
        <td>åŸå¸‚</td>
      </tr>
    </thead>
    <tbody >
      <tr v-for="row in data" :key="row.id">
        <td>{{ row.id }}</td>
        <td>{{ row.username }}</td>
        <td>{{ row.email }}</td>
        <td>{{ row.sex }}</td>
        <td>{{ row.city }}</td>
      </tr>
    </tbody>
  </table>
</template>

<script>
export default {
  name: "TestDemo",
  props:{
    greeting:String,
  },
  data(){
    return{
      data:""
    }
  },
  mounted:function () {
    this.getData();
  },
  methods:{
    getData(){
      this.$axios.get('http://aliangedu.cn/test-table/user1.json')
          .then(response=>(this.data=response.data.data))
          .catch(error=>{
            console.log("error"+error);
              })
    },
  },
}
</script>

<style scoped>
  .greeting{
    color:red;
    font-weight:bold;
  }
</style>
```


## 11.4 å…¨å±€é»˜è®¤å€¼


åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‡ ä¹æ¯ä¸ªç»„ä»¶éƒ½ä¼šç”¨åˆ°axioså‘èµ·æ•°æ®è¯·æ±‚ï¼Œå¦‚æœæ¯æ¬¡éƒ½å¡«å†™å®Œæ•´çš„è¯·æ±‚è·¯å¾„ï¼Œä¸åˆ©äºåæœŸç»´æŠ¤ã€‚è¿™æ—¶å¯ä»¥è®¾ç½®å…¨å±€axiosé»˜è®¤å€¼ã€‚

`main.js`

```js
import {createApp} from "vue";
import App from "./App.vue";
import axios from "axios"; //å¯¼å…¥

const app = createApp(App);
//è®¾ç½®é»˜è®¤å€¼
axios.defaults.baseURL = "http://www.aliangedu.cn/";
axios.defaults.timeout = 5000;
//æ³¨å†Œ
app.config.globalProperties.$axios = axios;
app.mount("#app");
```



`src/components/TestDemo.vue`

```html
<template>
  <p class="greeting">{{greeting}}</p>
  <button type="button" @click="getData">è·å–åç«¯æ•°æ®</button>
  {{data}}
  <table border="1">
    <thead>
    <tr>
      <td>ID</td>
      <td>ç”¨æˆ·å</td>
      <td>é‚®ç®±</td>
      <td>æ€§åˆ«</td>
      <td>åŸå¸‚</td>
    </tr>
    </thead>
    <tbody >
    <tr v-for="row in data" :key="row.id">
      <td>{{ row.id }}</td>
      <td>{{ row.username }}</td>
      <td>{{ row.email }}</td>
      <td>{{ row.sex }}</td>
      <td>{{ row.city }}</td>
    </tr>
    </tbody>
  </table>
</template>

<script>
export default {
  name: "TestDemo",
  props:{
    greeting:String,
  },
  data(){
    return{
      data:""
    }
  },
  mounted:function () {
    this.getData();
  },
  methods:{
    getData(){
      this.$axios.get('/test-table/user.json')
          .then(response=>(this.data=response.data.data))
          .catch(error=>{
            console.log("error"+error);
          })
    },
  },
}
</script>

<style scoped>
.greeting{
  color:red;
  font-weight:bold;
}
</style>
```


## 11.5 è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼

æœ‰æ—¶å€™æœåŠ¡ç«¯æ¥å£æœ‰å¤šä¸ªåœ°å€ï¼Œå°±ä¼šæ¶‰åŠè¯·æ±‚çš„åŸŸåä¸åŒã€é…ç½®ä¸åŒç­‰ï¼Œè¿™æ—¶è‡ªå®šä¹‰å®ä¾‹å¯ä»¥å¾ˆå¥½è§£å†³ã€‚


### 1.å®šä¹‰å®ä¾‹

åˆ›å»º`src/api/http.js`æ–‡ä»¶


```js
import axios from "axios";

const instance =axios.create({
    baseURL:"http://www.aliangedu.cn/",
    timeout:5000,

});
//å¯¼å‡ºå®ä¾‹
export default instance;
```


### 2.å…¨å±€é…ç½®

`main.js`

```js
import {createApp} from "vue";
import App from "./App.vue";
import axios from "./api/http"; //å¯¼å…¥axiosé…ç½®

const app = createApp(App);

//æ³¨å†Œ
app.config.globalProperties.$http = axios;
app.mount("#app");
```


### 3.ç»„ä»¶ä½¿ç”¨


`src/components/TestDemo.vue`

```html
<template>
  <p class="greeting">{{greeting}}</p>
  <button type="button" @click="getData">è·å–åç«¯æ•°æ®</button>
  {{data}}
  <table border="1">
    <thead>
    <tr>
      <td>ID</td>
      <td>ç”¨æˆ·å</td>
      <td>é‚®ç®±</td>
      <td>æ€§åˆ«</td>
      <td>åŸå¸‚</td>
    </tr>
    </thead>
    <tbody >
    <tr v-for="row in data" :key="row.id">
      <td>{{ row.id }}</td>
      <td>{{ row.username }}</td>
      <td>{{ row.email }}</td>
      <td>{{ row.sex }}</td>
      <td>{{ row.city }}</td>
    </tr>
    </tbody>
  </table>
</template>

<script>
export default {
  name: "TestDemo",
  props:{
    greeting:String,
  },
  data(){
    return{
      data:""
    }
  },
  mounted:function () {
    this.getData();
  },
  methods:{
    getData(){
      this.$http.get('/test-table/user.json')
          .then(response=>(this.data=response.data.data))
          .catch(error=>{
            console.log("error"+error);
          })
    },
  },
}
</script>

<style scoped>
.greeting{
  color:red;
  font-weight:bold;
}
</style>
```



## 11.6 æ‹¦æˆªå™¨


æ‹¦æˆªå™¨å¯ä»¥æ‹¦æˆªæ¯ä¸€æ¬¡è¯·æ±‚å’Œå“åº”ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚

è¯·æ±‚æ‹¦æˆªåº”ç”¨çš„åœºæ™¯ï¼š
-  å‘èµ·è¯·æ±‚å‰æ·»åŠ header




å“åº”æ‹¦æˆªåº”ç”¨åœºæ™¯ï¼š
- ç»Ÿä¸€å¤„ç†APIå“åº”çŠ¶æ€ç 200æˆ–é200çš„æç¤ºæ¶ˆæ¯
- ç»Ÿä¸€å¤„ç†catchå¼‚å¸¸æç¤ºä¿¡æ¯


`src/api/http.js`


```js
import axios from "axios";

const instance =axios.create({
    baseURL:"http://www.aliangedu.cn/",
    timeout:5000,

});

//æ‹¦æˆªå™¨ï¼Œè¯·æ±‚æ‹¦æˆª
instance.interceptors.request.use(config=>{
    //åœ¨è¯·æ±‚è¢«å‘é€ä¹‹å‰åšäº›ä»€ä¹ˆ
    //ä¾‹å¦‚æ·»åŠ è¯·æ±‚å¤´
    // config.headers['Test-Header']='123456';//åŠ ä¸Šå°±ä¼šè·¨åŸŸæŠ¥é”™
    return config;
},error=>{
    //å¤„ç†è¯·æ±‚é”™è¯¯
    return Promise.reject(error)
});

//æ‹¦æˆªå™¨ï¼Œå“åº”æ‹¦æˆª
instance.interceptors.response.use(response=>{
    //å¤„ç†å“åº”æ•°æ®
    if(response.data.code==200){
        alert("æ•°æ®è¯·æ±‚æˆåŠŸï¼")//è¿™é‡Œåº”æ ¹æ®åç«¯è¿”å›æ¶ˆæ¯æ˜¾ç¤º
    }
    return response
},error=>{
    //å¤„ç†å“åº”é”™è¯¯(catch)
    alert('è¯·æ±‚æœåŠ¡ç«¯æ¥å£é”™è¯¯ï¼');
    return Promise.reject(error)
});

//å¯¼å‡ºå®ä¾‹
export default instance;
```