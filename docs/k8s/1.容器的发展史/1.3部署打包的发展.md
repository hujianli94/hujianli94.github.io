# 1.3部署打包的发展

## 1.3.1 物理机和虚拟机

### 物理机

物理机的部署直接与硬件挂钩，有时还会由技术活变为体力活

所有应用部署在一台物理机上，集中在一起，没有任何隔离。

### 虚拟机

将一台计算机虚拟化为多台逻辑计算机。在一台物理机上同时运行多台逻辑计算机，每台逻辑计算机可运行不同的操作系统，并且应 用程序可以在相互独立的空间内运行，互不影响，从而显著提高计算机的利用率。

在操作系统和硬件之间加入一个虚拟机监控程序（hypervisor），可以实现虚拟化系统。

然而，虚拟机仍不是最佳方式。虚拟机依赖操作系统，每次备份所需硬盘空间过于庞大，整体性能相对于物理机又存在一定损耗，且启动较缓慢。

虚拟化技术一直在不断发展，直到容器诞生，才发生了质的变化。



## 1.3.2 容器

容器与传统的虚拟化方式相比具有众多的优势。

- 更快捷的部署: 容器仅包含应用程序中最少的运行时需求，占用的空间已大幅缩小，能快速传递和部署。容器直接运行于宿主内核，无须像虚拟机一样启动完整的操作系统。容器可以达到秒级
甚至毫秒级的启动时间。


- 更高的可移植性: 应用程序及所有依赖项可以划分到独立的单个容器中，该容器与Linux内核的版本、平台配置或部署类型无关。这个容器可以快速转移到另一台机器上，不存在兼容性问题，也
不会出现“在我的机器上没问题”这种状况。


- 更强的版本控制和更高的组件重用率: 可以持续跟踪容器的版本，检查差异或回滚到以前版本。容器会重用前面层中的组件，其分层文件系统既能提高重用率，又能非常方便地追溯变化。


- 更小的性能开销: 容器是轻量级的，没有硬件虚拟以及运行完整操作系统等额外开销，对系统资源的利用率更高。应用的执行速度、文件存储速度等均比传统虚拟机技术更高，内存损耗更低。


- 更易于共享和维护：在依赖性问题上容器减少了应用程序的工作量，降低了风险，并可以使用远程存储库与其他人共享容器。通过Dockerfile（对于Docker），可以使镜像构建透明化。各个团队很容易理解应用运行所需的条件，并将其部署在各个环境上



容器与虚拟机的性能对比:

|对比项|容器|虚拟机|
|----|-----|-----|
|启动速度|秒级|分钟级|
|空间占用|一般以MB为单位|一般以GB为单位|
|性能|接近物理机|相对于物理机存在明显损耗|
|单台机器支持量|可支持上千个容器|可支持几十台虚拟机|


然而，容器技术本身只是单机版的应用，并没有解决容器的编排问题。

例如，容器没有Web管理界面，也无法实现任务调度策略、监控报警等。随着越来越多的开发者使用了容器技术，编排平台的重要性
日益突出。所有人都翘首以盼能使用优秀的容器平台，直到Kubernetes开源，才圆了开发人员的梦。



### 1.3.3 容器的舵手—Kubernetes

Kubernetes项目由Google公司在2014年启动。Kubernetes建立在Google公司超过10多年的运维经验基础之上，Google所有的应用都运
行在容器上，然后与社区中最好的想法和实践相结合。Kubernetes是目前最受欢迎的容器平台。



Kubernetes是一套容器集群管理系统，是一个开源平台，可以实现容器集群的自动化部署、自动扩缩容、维护等功能。

Kubernetes拥有自动包装、自我修复、横向缩放、服务发现、负载均衡、自动部署、升级回滚、存储编排等特性。

Kubernetes与DevOps、微服务等相辅相成，密不可分，三者的关系如图：


![](https://cdn.jsdelivr.net/gh/hujianli94/Picgo-atlas@main/img/202312302200376.png){: .zoom}

铁三角（Devops、微服务、容器）

